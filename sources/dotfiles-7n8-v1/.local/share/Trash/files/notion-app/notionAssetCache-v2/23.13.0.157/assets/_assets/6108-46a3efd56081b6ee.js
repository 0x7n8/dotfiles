"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6108],{21292:(e,t,o)=>{o.d(t,{Z:()=>k});var r=o(67294),n=o(12183),i=o(480),a=o(86628),s=o(24405),l=o(56373),c=o(59054),p=o(47453),d=o(6287),u=o(9291),m=o(31701),g=o(37810),y=o(8406),h=o(54642),f=o(16956),S=o(47307),x=o(13447),v=o(68894),b=o(68785),C=o(58297),j=o(76798),w=o(32662),M=o(64369),_=o(33929),P=o(85893);const T=(0,u.defineMessages)({autoIncrementIdPrefixPlaceholder:{defaultMessage:"Prefix",id:"database.viewSettings.propertyTab.autoIncrementIdPrefixPlaceholder"},duplicatePrefixNameError:{defaultMessage:"{prefixName} isn't available for use.",id:"database.viewSettings.propertyTab.duplicatePrefixNameError"}});function k(e){const{uniqueIdProperty:t,prefixValue:o,collectionContextStore:m}=e,b=(0,i.O7)(),k=(0,a.VK)((()=>m.collectionStore()),[m]),[I,O]=(0,r.useState)(o??""),[R,F]=(0,r.useState)(!0),[A,V]=(0,r.useState)(),K=(0,r.useCallback)((()=>{F(!0),V(void 0)}),[F,V]),B=(0,r.useCallback)((e=>{F(!0),V(_.default.formatMessage(T.duplicatePrefixNameError,{prefixName:`"${e}"`}))}),[]),D=(0,r.useCallback)(((e,t,o)=>{const r=o.collectionStore();r&&(F(!1),h.setRecordKey(b,{spaceId:r.getSpaceId(),table:r.table,key:e,id:r.id}).then((r=>{F(!0),200!==r.status?B(e):y.$q({environment:b,collectionContextStore:o,property:t,from:"view_settings",action:"unique_id_change_collection_key"})})).catch((()=>B(e))))}),[b,B]),N=(0,r.useCallback)((async e=>{if(!k)return!1;const t=await h.isRecordKeyAvailable(b,{spaceId:k.getSpaceId(),table:k.table,key:e.trim()});return"success"===t.type&&t.data.isAvailable}),[k,b]),L=(0,n.v)((e=>{N(e).then((t=>{t||B(e),F(!0)})).catch((()=>B(e)))}),500),[q]=(0,c.r5)((async()=>{if(k)return h.suggestRecordKey(b,{spaceId:k.getSpaceId(),table:d.vF,id:k.id,shouldSetSuccessfullySuggestedRecord:!1})}),[k,b]);(0,r.useEffect)((()=>{var e;if(!o&&"resolved"===q.status)return"success"===(null===(e=q.value)||void 0===e?void 0:e.type)&&q.value.data?(V(void 0),void O(q.value.data.key)):void 0}),[o,q]),(0,r.useEffect)((()=>()=>{L.cancel()}),[L]);const z=(0,r.useCallback)((e=>{const t=e.target.value.toUpperCase();O(t),K(),t&&t!==o&&((0,l.k5)(t)||V(_.default.formatMessage(l.sY.prefixInvalidError)),F(!1),L(t))}),[K,o,L]),H=(0,r.useCallback)((()=>{L.flush()}),[L]),Y=(0,r.useCallback)((e=>{const r=null==k?void 0:k.getRecordKeyStore();e!==o&&!A&&r&&k&&null!=t&&t.propertySchema?D(e,null==t?void 0:t.propertyId,m):F(!0)}),[k,o,A,t,D,m]),E=(0,r.useCallback)((()=>{const e=m.collectionStore();e&&x.createAndCommit({userAction:"CollectionSettingsAutoIncrementIdPropertyCreateNewIdProperty",environment:b,perform:t=>{const o=f.G3({environment:b,collectionStore:e,collectionViewArgs:void 0,propertyType:"auto_increment_id",transaction:t});D(I,o,m)}})}),[m,b,I,D]),U=(0,r.useCallback)((e=>{if(!k)return;const t=[{label:(0,P.jsx)(u.FormattedMessage,{id:"database.viewSettings.propertyTab.autoIncrementIdPrefixSubmit",defaultMessage:"Update ID Prefix"}),color:"red",onAccept:()=>Y(e)}];S.showDialog({message:(0,P.jsx)("span",{children:(0,P.jsx)(u.FormattedMessage,{id:"database.viewSettings.propertyTab.changePrefixConfirmationMessage",defaultMessage:"Updating the prefix will stop 3rd party automations that rely on this ID (e.g., GitHub PR status automation).",values:{databaseName:(0,P.jsx)(j.Z,{style:{display:"inline",fontWeight:g.Z.fontWeight.medium},shouldWrap:!0,store:k})}})}),showCancel:!0,keepFocus:!0,items:t})}),[k,Y]),W=(0,r.useCallback)((e=>{o?U(e):Y(e)}),[o,Y,U]),$=(0,r.useCallback)((()=>t?t&&!o?(0,P.jsxs)(P.Fragment,{children:[(0,p.R)({width:14,height:14}),(0,P.jsx)(w.Z,{size:4}),(0,P.jsx)(u.FormattedMessage,{defaultMessage:"Add ID prefix",id:"database.viewSettings.propertyTab.autoIncrementIdCreatePrefix"})]}):(0,P.jsx)(u.FormattedMessage,{defaultMessage:"Update ID Prefix",id:"database.viewSettings.propertyTab.autoIncrementIdPrefixSubmit"}):(0,P.jsxs)(P.Fragment,{children:[(0,p.R)({width:14,height:14}),(0,P.jsx)(w.Z,{size:4}),(0,P.jsx)(u.FormattedMessage,{defaultMessage:"Add ID property",id:"database.viewSettings.propertyTab.autoIncrementIdCreateProperty"})]})),[o,t]),G=(0,s.yK)((e=>({prefixInputOuterStyle:{color:void 0===o?e.lightTextColor:e.regularTextColor}})),[o]);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(v.ZP,{left:(0,P.jsx)(M.Z,{style:{marginLeft:4,marginRight:7},children:(0,P.jsx)(u.FormattedMessage,{defaultMessage:"Prefix",id:"database.viewSettings.propertyTab.autoIncrementIdPrefix"})}),value:I,inputOuterStyle:G.prefixInputOuterStyle,onChange:z,onBlur:H,placeholder:T.autoIncrementIdPrefixPlaceholder.defaultMessage,onSubmit:()=>W(I.trim()),focusInitial:!1,selectAll:!1,disabled:!1}),A||!R?(0,P.jsx)(Z,{prefixName:I,hasRequestCompleted:R,errorMessage:A}):(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(M.Z,{isSmall:!0,isSecondaryColor:!0,style:{marginTop:16,marginLeft:16},children:(0,P.jsx)(u.FormattedMessage,{defaultMessage:"{prefixWithHyphen}1, {prefixWithHyphen}2, {prefixWithHyphen}3, ...",id:"database.viewSettings.propertyTab.autoIncrementIdPrefixPreview",values:{prefixWithHyphen:I?`${I}-`:""}})})}),(0,P.jsx)(C.Z,{isLarge:!0,style:{margin:"8px 16px",width:"90%"},onClick:()=>{t?W(I.trim()):E()},disabled:I===o||Boolean(A)||!R,children:$()})]})}function Z(e){const{errorMessage:t,hasRequestCompleted:o}=e;return(0,P.jsx)(M.Z,{isMultiline:!0,style:{paddingTop:12,marginLeft:16,marginRight:16,...o?{color:m.ZP.red}:{},...e.styles},isSecondaryColor:!o,children:o&&t?t:(0,P.jsx)("div",{style:{paddingTop:3,paddingBottom:3},children:(0,P.jsx)(b.Z,{style:{width:14,height:14}})})})}},59862:(e,t,o)=>{o.d(t,{Z:()=>be});var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(77657),l=o(29109),c=o(9291),p=o(1898),d=o(47307),u=o(89475),m=o(16732),g=o(51592),y=o(89728),h=o(72495),f=o(32662),S=o(12205),x=o(30874),v=o(21292),b=(o(57658),o(99036)),C=o(12396),j=o(84619),w=o(12847);const M={pull_request_review_edited:!0,pull_request_review_submitted:!0,pull_request_review_requested:!0,pull_request_review_request_removed:!0,pull_request_closed:!0,pull_request_opened:!0,pull_request_reopened:!0,pull_request_converted_to_draft:!0,pull_request_edited:!0,pull_request_assigned:!0},_={pull_request_review_comment_created:!0,issue_comment_created:!0},P={installation_deleted:!0,installation_suspend:!0,installation_unsuspend:!0,...M,..._},T={pull_request_opened:!0,pull_request_review_requested:!0,pull_request_review_submitted:!0,pull_request_closed:!0};(0,p.AO)((e=>{const t=(0,p.Yd)(P);return(0,p.DE)(t,e)?{true:e}:{false:e}}));w.literals(...(0,p.Yd)({pull_request:!0,pull_request_review:!0,pull_request_review_comment:!0,installation:!0,issue_comment:!0})),w.literals(...(0,p.Yd)(P)),w.literals(...(0,p.Yd)(_)),w.literals(...(0,p.Yd)(M));var k=o(33907),Z=o(47453),I=o(37612),O=o(8406),R=o(16956),F=o(13447),A=o(75330),V=o(52275),K=o(31945),B=o(96525),D=o(61519),N=o(78140),L=o(32163),q=o(40721),z=o(58297),H=o(87968),Y=o(22084),E=o(66890),U=o(33929),W=o(60709),$=o(29376),G=o(77080),Q=o(94166),X=o(85893);const J=14,ee=(0,c.defineMessages)({autoUpdate:{defaultMessage:"Auto-update",id:"collectionSettingsGithubAutomationConfig.statusPicker.autoUpdate"},when:{defaultMessage:"when PR is",id:"collectionSettingsGithubAutomationConfig.statusPicker.when"},addStatusDescription:{defaultMessage:"Add a status property to set up automations.",id:"collectionSettingsGithubAutomationConfig.addStatusDescription"},addStatusButton:{defaultMessage:"Add status property",id:"collectionSettingsGithubAutomationConfig.statusPicker.addStatusButton"},newStatusPropertyButton:{defaultMessage:"New status",id:"collectionSettingsGithubAutomationConfig.statusPicker.newStatusPropertyButton"},pull_request_opened:{defaultMessage:"Opened",id:"collectionSettingsGithubAutomationConfig.pullRequestOpened"},pull_request_review_requested:{defaultMessage:"Review requested",id:"collectionSettingsGithubAutomationConfig.pullRequestReviewRequested"},pull_request_review_submitted:{defaultMessage:"Approved",id:"collectionSettingsGithubAutomationConfig.pullRequestApproved"},pull_request_closed:{defaultMessage:"Merged",id:"collectionSettingsGithubAutomationConfig.pullRequestMerged"},noAutomations:{defaultMessage:"None",id:"collectionSettingsGithubAutomationConfig.noAutomation"},removeStatusOption:{defaultMessage:"Clear",id:"collectionSettingsGithubAutomationConfig.removeStatusOption"},linkBackToggle:{defaultMessage:"Enable Linkbacks to the linked page on GitHub",id:"collectionSettingsGithubAutomationConfig.linkBackToggle"},activityCommentsToggle:{defaultMessage:"Show GitHub activity on the linked page",id:"collectionSettingsGithubAutomationCofnig.activityToggle"}}),te={pull_request_opened:U.default.formatMessage(ee.pull_request_opened),pull_request_review_requested:U.default.formatMessage(ee.pull_request_review_requested),pull_request_review_submitted:U.default.formatMessage(ee.pull_request_review_submitted),pull_request_closed:U.default.formatMessage(ee.pull_request_closed)},oe=U.default.formatMessage(ee.noAutomations),re={pull_request_opened:null,pull_request_review_requested:null,pull_request_review_submitted:null,pull_request_closed:null},ne={github_linkbacks:!0,activity_comments:!1};function ie(e){const{gitHubProperty:t,selectedStatusProperty:o,setSelectedStatusProperty:a,intl:s}=e,l=(0,n.O7)(),c=(0,E.Y$)(),d=(0,n.Fy)(),u=ce(),m=(0,i.VK)((()=>G.default.checkGate("show_github_connected_property_settings")),[]),g=(0,i.VK)((()=>{const e=(0,$.KV)(c,t);if(e&&(0,b.NK)(e))return e}),[c,t]),y=(0,i.VK)((()=>{const e=c.normalizedSchemaStore.state;return(0,p.qP)(e).flatMap((e=>{let[t,o]=e;return o&&(0,b.gB)(o)?[{id:t,schema:o}]:[]}))}),[c.normalizedSchemaStore]),S=(0,i.VK)((()=>g&&(0,b.NK)(g)&&(0,p.$K)(g.connectedRelation.automationSettings)?g.connectedRelation.automationSettings:ne),[g]);(0,r.useEffect)((()=>{w(S)}),[S]),(0,r.useEffect)((()=>{if(!o&&y.length>0){if(null!=g&&g.connectedRelation.automation)for(const t of y)if(g.connectedRelation.automation[t.id])return void a(t);const e=y[0];a(e)}}),[y,g,o,a]);const[x,v]=(0,r.useState)(re),[C,w]=(0,r.useState)(ne),M=(0,r.useCallback)((e=>{const r=c.collectionStore();if(!(r&&o&&g&&(0,b.p_)(g)))return;const n=g.connectedRelation;n.automationSettings=e;const i={...g,connectedRelation:{...n}};F.createAndCommit({userAction:"CollectionSettingsConfigureGithubAutomation",environment:l,perform:e=>{A.xO({environment:l,collectionStore:r,update:{[t]:i},transaction:e})}}),w(e)}),[c,l,t,g,o]);(0,r.useEffect)((()=>{var e,t;o&&g&&(0,b.NK)(g)&&null!==(e=g.connectedRelation.automation)&&void 0!==e&&e[o.id]?v(null===(t=g.connectedRelation.automation)||void 0===t?void 0:t[o.id]):v(re)}),[g,o]);const _=(0,r.useCallback)((e=>{const r=c.collectionStore();if(!(r&&o&&g&&(0,b.p_)(g)))return;const n=g.connectedRelation;if(!n||!o.id)return;n.automation={...n.automation,...e};const i={...g,connectedRelation:{...n}};O.$q({environment:l,collectionContextStore:c,property:o.id,from:"github_pull_requests_property",action:"configure_github_pr_automation",githubAutomationConfigured:e}),F.createAndCommit({userAction:"CollectionSettingsConfigureGithubAutomation",environment:l,perform:e=>{A.xO({environment:l,collectionStore:r,update:{[t]:i},transaction:e})}})}),[c,o,g,l,t]),P=(0,i.VK)((()=>o&&o.schema.options?o.schema.options:[]),[o]),Z=(0,i.VK)((()=>{const e={};return P.forEach((t=>{e[t.id]=t})),e}),[P]),R=(0,i.VK)((()=>{var e,t;const r=null==o||null===(e=o.schema)||void 0===e?void 0:e.groups,n=null==o||null===(t=o.schema)||void 0===t?void 0:t.options;return r&&n?r.map((e=>{const t=n.filter((t=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));if(0!==t.length)return{group:e,groupOptions:t}})).filter(p.$K):[]}),[o]);function z(e,t){const r=R.map((t=>{let{group:r,groupOptions:n}=t;const i=n.map((t=>({key:t.id,render:e=>(0,X.jsx)(V.Z,{...e,focused:e.focused,isTokenTitle:!0,title:(0,X.jsx)(Y.F,{format:j.lo.Small,value:t.value,color:t.color,showRemoveButton:!1,groupColor:r.color,isSingle:!0})}),action:()=>{const r={...x,[e]:t.id};o&&(_({[o.id]:r}),v(r))}}))).filter(p.$K);return{key:r.name,render:e=>(0,X.jsx)(h.Z,{...e,title:r.name,topBorder:e.index>0}),items:i}}));if(x[e]){function n(){const r={...x,[e]:null};o&&(_({[o.id]:r}),v(r)),t.close()}const i={key:"removeOptionSection",render:e=>(0,X.jsx)(h.Z,{...e,topBorder:!0}),items:[{key:"removeOptionButton",render:e=>(0,X.jsx)(V.Z,{...e,focused:!1,title:s.formatMessage(ee.removeStatusOption),left:(0,I.y)({width:12}),onClick:n}),action:e=>{n()}}]};r.push(i)}return r}return o?(0,X.jsxs)(h.Z,{topBorder:!1,disableDesktopPadding:!0,disableMobilePadding:!0,title:(0,X.jsx)(se,{selectedStatusProperty:o,setSelectedStatusProperty:a,existingStatusProperties:y,intl:s}),children:[(0,p.Yd)(T).map((e=>(0,X.jsx)(B.Z,{focused:!1,placementToOrigin:K.pO.Top,alignmentToOrigin:K.vR.End,popupType:d.isMobile?K.Z4.SlideUp:K.Z4.Popup,render:t=>{const o=d.isMobile?{menuType:W.og.Modal,right:(0,X.jsx)(q.DoneMenuText,{}),onClickRight:t.close}:{menuType:W.og.Popup,width:150};return(0,X.jsx)(N.Z,{...o,children:(0,X.jsx)(L.Z,{type:L.i.Vertical,sections:z(e,t),initialFocus:void 0,onAccept:t.close})})},renderOrigin:t=>{const r=x[e];let n=(0,X.jsx)("div",{style:u.noneText,children:oe});if(r){const e=Z[r];if(e){var i;const t=null==o||null===(i=o.schema)||void 0===i||null===(i=i.groups)||void 0===i||null===(i=i.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(r)})))||void 0===i?void 0:i.color;n=(0,X.jsx)(Y.F,{format:j.lo.Small,showRemoveButton:!1,isSingle:!0,value:e.value,color:e.color,groupColor:t})}}return(0,X.jsx)(Q.Z,{...t,focused:!1,icon:()=>(0,X.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",justifyContent:"flex-start",whiteSpace:"nowrap"},children:[te[e],(0,X.jsx)(f.Z,{size:8}),(0,k.n)(u.automationMenuItemArrow)]}),title:(0,X.jsx)("div",{style:{width:"100%",display:"inline-flex",justifyContent:"flex-end"},children:n}),showChevron:!0,chevronStyle:{margin:0}})}},e))),(0,X.jsx)(D.Z,{size:"100%",innerStyle:{borderColor:u.addStatusDivider.borderColor}}),m&&[{property:"github_linkbacks",setting:(0,X.jsx)(H.Z,{title:"Linkbacks in GitHub",subtitle:s.formatMessage(ee.linkBackToggle),on:C.github_linkbacks,onChange:()=>{M({...C,github_linkbacks:!C.github_linkbacks})}})},{property:"activity_comments",setting:(0,X.jsx)(H.Z,{title:"Activity Comments",subtitle:s.formatMessage(ee.activityCommentsToggle),on:C.activity_comments,onChange:()=>M({...C,activity_comments:!C.activity_comments})})}].map((e=>(0,X.jsx)("div",{style:u.otherAutomationsSettings,children:e.setting},e.property)))]}):(0,X.jsx)(ae,{setSelectedStatusProperty:a,intl:s})}function ae(e){const{setSelectedStatusProperty:t,intl:o}=e,r=(0,n.O7)(),i=(0,E.Y$)(),a=ce();return(0,X.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,X.jsx)(D.Z,{size:"100%",innerStyle:a.addStatusDivider}),(0,X.jsx)("div",{style:a.addStatusDescription,children:o.formatMessage(ee.addStatusDescription)}),(0,X.jsxs)(z.Z,{style:a.addStatusButton,onClick:e=>{e.stopPropagation(),le(r,i,t)},children:[(0,Z.R)({width:14}),(0,X.jsx)(f.Z,{size:4}),o.formatMessage(ee.addStatusButton)]}),(0,X.jsx)(f.Z,{size:4})]})}function se(e){const{selectedStatusProperty:t,setSelectedStatusProperty:o,existingStatusProperties:r,intl:i}=e,s=(0,n.O7)(),l=(0,E.Y$)(),c=(0,n.Fy)(),d=ce(),u=(0,a.Fg)(),m=r.map((e=>{const{id:t,schema:r}=e;return{key:t,action:()=>{o(e)},render:t=>(0,X.jsx)(V.Z,{...t,icon:(0,X.jsx)(C.ZP,{size:J,theme:u,icon:e&&e.schema.icon,type:"status"}),title:r.name})}})).filter(p.$K),g={key:"newStatusProperty",action:()=>{le(s,l,o)},render:e=>(0,X.jsx)(V.Z,{...e,icon:(0,Z.R)(d.statusPickerIcon),title:i.formatMessage(ee.newStatusPropertyButton)})};return(0,X.jsxs)("div",{style:d.statusPickerWrapper,children:[(0,X.jsxs)("div",{style:{display:"inline-flex",alignItems:"center"},children:[i.formatMessage(ee.autoUpdate),c.isMobile&&(0,X.jsx)(f.Z,{size:4}),(0,X.jsx)(K.ZP,{placementToOrigin:K.pO.Bottom,alignmentToOrigin:K.vR.Start,popupType:c.isMobile?K.Z4.SlideUp:K.Z4.Popup,renderOrigin:e=>(0,X.jsx)(V.Z,{...e,title:t.schema.name,focused:!1,style:d.statusPickerButtonCore,textWrapperStyle:d.statusPickerButtonTextWrapper,left:(0,X.jsx)(C.ZP,{size:J,theme:u,icon:t.schema.icon,type:"status"}),leftStyle:{marginLeft:2},showExtensionArrow:!0,extensionArrowStyle:d.statusPickerExtensionArrow}),render:e=>{const t=c.isMobile?{menuType:W.og.ActionSheet}:{menuType:W.og.Popup,width:150};return(0,X.jsx)(N.Z,{...t,children:(0,X.jsx)(L.Z,{type:L.i.Vertical,sections:[{key:0,render:e=>(0,X.jsx)(h.Z,{...e}),items:[...m,g]}],initialFocus:0,onAccept:e.close})})}})]}),c.isMobile&&(0,X.jsx)(f.Z,{size:4}),i.formatMessage(ee.when)]})}function le(e,t,o){const r=t.collectionStore();r&&F.createAndCommit({userAction:"CollectionSettingsConfigureGithubAutomationCreateNewStatusProperty",environment:e,perform:n=>{const i=R.G3({environment:e,collectionStore:r,collectionViewArgs:void 0,propertyType:"status",transaction:n}),a=(0,$.KV)(t,i);a&&(0,b.gB)(a)&&o({id:i,schema:a})}})}function ce(){const e=(0,n.Fy)().isMobile;return(0,a.yK)((t=>({addStatusDivider:{borderColor:t.tableDividerColor},addStatusDescription:{width:"calc(100% - 24px)",padding:e?"16px 8px":"14px 0px",fontSize:e?16:12,color:t.lightTextColor},addStatusButton:{width:"calc(100% - 24px)",display:"inline-flex",alignItems:"center",justifyContent:"center"},noneText:{color:t.lightTextColor},automationMenuItemArrow:{width:12,fill:t.lightIconColor,stroke:t.lightIconColor,strokeOpacity:.5,strokeWidth:2},statusPickerWrapper:{display:"inline-flex",alignItems:"center",flexWrap:"wrap",rowGap:2,marginBottom:e?10:void 0},statusPickerButtonTextWrapper:{margin:"0px 4px",fontSize:12},statusPickerButtonCore:{minHeight:e?28:20,borderRadius:5,maxWidth:e?150:100},statusPickerIcon:{width:J,height:J},statusPickerExtensionArrow:{transform:"rotate(180deg)",marginRight:2},otherAutomationsSettings:{padding:e?"0px 8px":"4px 14px"}})),[e])}var pe=o(64155);const de=(0,c.defineMessages)({tabTitle:{defaultMessage:"GitHub Pull Requests",id:"database.viewSettings.githubConfigTab.tabTitle"},connect:{defaultMessage:"Connect to GitHub (Workspace)",id:"database.viewSettings.githubConfigTab.connect"},connectDescriptionAdmin:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) connection.",id:"database.viewSettings.githubConfigTab.connectDescriptionAdmin"},authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.githubConfigTab.authError"},tabDescriptionNoIdPrefix:{defaultMessage:"This feature requires a prefixed ID property to link GitHub PRs to Notion {pluralItemName}.",id:"database.viewSettings.githubConfigTab.tabDescriptionNoIdPrefix"},tabDescriptionNoStatus:{defaultMessage:"Link PRs by adding the {singleItemName} ID to the PR title.",id:"database.viewSettings.githubConfigTab.tabDescriptionNoStatus"},tabDescription:{defaultMessage:"Link PRs by adding the {singleItemName} ID to the PR title. Set up automated status updates in Notion based on PR status changes.",id:"database.viewSettings.githubConfigTab.tabDescription"}});function ue(e){let{collectionContextStore:t,intl:o}=e;const r=ve(),{hoveredBackground:a,pressedBackground:s}=xe(),l=(0,S.J)(),c=(0,n.O7)(),p=Se(),g=function(e){return(0,i.VK)((()=>{var t;return null===(t=e.collectionStore())||void 0===t?void 0:t.getSpaceId()}),[e])}(t);return(0,X.jsxs)(h.Z,{disableMobileBorders:!0,mobileStyle:r.previewContentContainer,style:r.previewContentContainer,children:[(0,X.jsx)("img",{src:"/images/external_integrations/github-icon.png",style:{width:36,height:36}}),(0,X.jsx)("p",{style:r.connectDescription,children:l?(0,m.GT)().description:o.formatMessage(de.connectDescriptionAdmin)}),(0,X.jsx)(y.Z,{style:r.connectButton,hoveredStyle:{background:a},pressedStyle:{background:s},disabled:!l,disabledFeedback:!l,onClick:async e=>{if(e.preventDefault(),g&&p)try{await u.hM({environment:c,spaceId:g,integration:p,from:"connected_relation_property_menu"})}catch(t){const e=o.formatMessage(de.authError);d.showErrorMessage(e)}},children:o.formatMessage(de.connect)}),(0,X.jsx)(f.Z,{size:4})]})}function me(e){let{collectionContextStore:t}=e;const o=ve(),{isMobile:r}=(0,n.Fy)(),i=fe(t);return(0,X.jsxs)(h.Z,{disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,mobileStyle:o.previewContentContainer,style:o.previewContentContainer,children:[(0,X.jsx)(f.Z,{size:r?16:8}),(0,X.jsx)(pe.Z,{width:"calc(100% - 24px)",uniqueIdPrefix:null==i?void 0:i.prefix})]})}function ge(e){let{collectionContextStore:t,intl:o,selectedStatusProperty:r}=e;const n=(0,i.VK)((()=>t.databaseType),[t]),a=fe(t),s=ve(),l=(0,g.sN)(n),c=(0,g.Q_)(n);let p;return p=a&&a.prefix?r?o.formatMessage(de.tabDescription,{singleItemName:l}):o.formatMessage(de.tabDescriptionNoStatus,{singleItemName:l}):o.formatMessage(de.tabDescriptionNoIdPrefix,{pluralItemName:c}),(0,X.jsx)(h.Z,{disableMobileBorders:!0,disableMobilePadding:!0,mobileStyle:s.tabDescription,style:s.tabDescription,children:p})}function ye(e){let{collectionContextStore:t}=e;const o=fe(t);return o&&o.prefix?null:(0,X.jsx)(v.Z,{collectionContextStore:t,uniqueIdProperty:o&&{propertyId:o.id,propertySchema:o.schema},prefixValue:null==o?void 0:o.prefix})}function he(e){let{collectionContextStore:t,selectedStatusProperty:o,setSelectedStatusProperty:r,property:n,intl:i}=e;const a=fe(t);return a&&a.prefix?(0,X.jsx)(ie,{selectedStatusProperty:o,setSelectedStatusProperty:r,gitHubProperty:n,intl:i}):null}function fe(e){return(0,i.VK)((()=>{var t,o;const r=null===(t=e.collectionStore())||void 0===t||null===(t=t.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey(),n=null===(o=e.collectionStore())||void 0===o?void 0:o.getSchema(),i=n&&(0,p.qP)(n).find((e=>{let[,t]=e;return t&&"auto_increment_id"===t.type}));if(i){const[e,t]=i;if(t&&"auto_increment_id"===t.type)return{id:e,schema:t,prefix:r}}}),[e])}function Se(){return(0,i.VK)((()=>x.Z.integrations.state.find((e=>e.id===s.U9))),[])}function xe(){const e=Se(),t=(0,a.Fg)();return(0,i.VK)((()=>(0,l.d)(e,t.mode)),[e,t.mode])}function ve(){const{isMobile:e}=(0,n.Fy)(),{background:t}=xe();return(0,a.yK)((o=>({previewContentContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},connectButton:{fontSize:14,maxWidth:"calc(100% - 24px)",height:void 0,color:o.regularInvertedTextColor,background:t,whiteSpace:"normal",padding:8,textAlign:"center"},connectDescription:{maxWidth:"calc(100% - 24px)",color:o.lightTextColor,fontSize:14,textAlign:"center"},tabDescription:{padding:e?18:14,fontSize:e?16:12,color:o.lightTextColor}})),[e,t])}const be=(0,c.injectIntl)((function(e){const{collectionContextStore:t,property:o,intl:n}=e,[a,l]=(0,r.useState)(void 0);return(0,i.VK)((()=>{const e=x.Z.bots.state.find((e=>e.integration_id===s.U9));return Boolean(e)}),[])?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(me,{collectionContextStore:t}),(0,X.jsx)(ge,{collectionContextStore:t,intl:n,selectedStatusProperty:a}),(0,X.jsx)(ye,{collectionContextStore:t}),(0,X.jsx)(he,{collectionContextStore:t,selectedStatusProperty:a,setSelectedStatusProperty:l,property:o,intl:n})]}):(0,X.jsx)(ue,{collectionContextStore:t,intl:n})}))},64155:(e,t,o)=>{o.d(t,{Z:()=>p});o(67294);var r=o(480),n=o(24405),i=o(41892),a=o(9291),s=o(37810),l=o(32662),c=o(85893);function p(e){const t=(0,a.useIntl)(),o=function(e){const{isMobile:t}=(0,r.Fy)(),o=t?18:14,i=1,a=6,l=20;return(0,n.yK)((t=>({githubContainer:{display:"flex",alignSelf:"center",flexDirection:"column",width:e||"90%",padding:l,border:`${i}px solid ${t.tableDividerColor}`,borderRadius:a,borderBottomRightRadius:4,cursor:"default"},githubPrTitleRow:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:`calc(100% + ${l}px)`,overflow:"hidden"},githubPrTitle:{display:"inline-flex",fontSize:o,fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",background:t.whiteButtonBackground,padding:"2px 4px",borderTopLeftRadius:5,borderBottomLeftRadius:5,borderLeft:`2px solid ${t.blueColor}`,borderTop:`2px solid ${t.blueColor}`,borderBottom:`2px solid ${t.blueColor}`,width:"100%"},githubTask:{background:"light"===t.mode?t.accentColors.blue[50]:t.accentColors.blue[400]},githubPrInfoRow:{display:"inline-flex"},githubPrInfoPill:{display:"flex",flexDirection:"row",alignItems:"center",width:"fit-content",padding:"4px 10px",borderRadius:"2em",background:"#238636",flexShrink:0,...s.Z.textOverflowStyle},githubPrInfoOpenText:{color:"white",fontSize:o-2,fontWeight:500},githubPrInfoMergeInto:{display:"inline-flex",alignItems:"center",fontSize:o-2,color:t.lightTextColor,...s.Z.textOverflowStyle},githubPrInfoMain:{padding:"0px 4px",fontFamily:s.Z.baseFontFamily.githubMono,background:t.cardPressedBackground,borderRadius:a,color:t.regularTextColor,verticalAlign:"text-bottom",...s.Z.textOverflowStyle}})),[o,e])}(e.width),p=(0,c.jsx)("div",{id:"github-preview-github-pr-title-row",style:o.githubPrTitleRow,children:(0,c.jsxs)("div",{id:"github-preview-github-pr-title-wrapper",style:o.githubPrTitle,children:[(0,c.jsx)(l.Z,{size:2}),"[",(0,c.jsxs)("div",{id:"github-preview-github-pr-task",style:o.githubTask,children:[e.uniqueIdPrefix||t.formatMessage(d.idPrefix),e.uniqueIdValue?`-${e.uniqueIdValue}`:"-1"]}),"]",(0,c.jsx)(l.Z,{size:2}),t.formatMessage(d.prTitle)]})}),u=(0,c.jsxs)("div",{id:"github-preview-github-pr-info-row",style:o.githubPrInfoRow,children:[(0,c.jsxs)("div",{id:"github-preview-github-open-pr-pill",style:o.githubPrInfoPill,children:[(0,c.jsx)("img",{src:i.Z.images.externalIntegrations.githubPullOpenIconWhitePng,style:{width:16,height:16}}),(0,c.jsx)(l.Z,{size:2}),(0,c.jsx)("div",{style:o.githubPrInfoOpenText,children:t.formatMessage(d.open)})]}),(0,c.jsx)(l.Z,{size:8}),(0,c.jsx)("div",{id:"github-preview-github-merge-into-main",style:o.githubPrInfoMergeInto,children:(0,c.jsxs)("span",{style:o.githubPrInfoMergeInto,children:[t.formatMessage(d.mergeInto),(0,c.jsx)(l.Z,{size:4}),(0,c.jsx)("span",{style:o.githubPrInfoMain,children:t.formatMessage(d.main)})]})})]});return(0,c.jsxs)("div",{id:"github-preview-github-container",style:o.githubContainer,children:[p,(0,c.jsx)(l.Z,{size:12}),u]})}const d=(0,a.defineMessages)({dismissButtonAriaLabel:{defaultMessage:"A button to dismiss the user education preview.",id:"database.viewSettings.githubConfigTab.preview.dismissButtonAriaLabel"},idPrefix:{defaultMessage:"TASK",id:"database.viewSettings.githubConfigTab.preview.idPrefix"},prTitle:{defaultMessage:"GitHub PR Title",id:"database.viewSettings.githubConfigTab.preview.prTitle"},open:{defaultMessage:"Open",id:"database.viewSettings.githubConfigTab.preview.open"},mergeInto:{defaultMessage:"Merge into",id:"database.viewSettings.githubConfigTab.preview.mergeInto"},main:{defaultMessage:"main",id:"database.viewSettings.githubConfigTab.preview.main"}})},57842:(e,t,o)=>{o.d(t,{Z:()=>F});var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(84169),l=o(72141),c=o(9291),p=o(53965),d=o(8406),u=o(68894),m=o(58297),g=o(76798),y=o(72495),h=o(86825),f=o(26388),S=o(64369),x=o(12534),v=o(29376),b=o(4023),C=o(85893);function j(e){const{temporaryAutoRelateState:t,handleAutoRelateToggle:o,collectionContextStore:r,targetCollectionStore:n,autoRelate:l,hasInverseRelation:p}=e,d=(0,i.VK)((()=>r.collectionStore()),[r]),u=(0,i.VK)((()=>Boolean(null==d?void 0:d.isSyncedCollection())),[d]),m=(0,i.VK)((()=>(null==d?void 0:d.getFormat().bot_id)||n.getFormat().bot_id),[d,n]),g=(0,i.VK)((()=>!!m&&(u||!u&&p)),[m,u,p]),y=(0,a.yK)((e=>({errorLabel:{margin:"0px 14px",color:e.errorText},helpIcon:{width:16,fill:e.lightIconColor,marginLeft:6}})),[]),S=(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",whiteSpace:"pre"},children:[(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Automatically Relate",id:"database.viewSettings.setupRelationTab.autoRelate.title"}),(0,C.jsx)(f.ZP,{render:e=>(0,C.jsx)("div",{...e,children:(0,s.m)(y.helpIcon)}),style:{width:200},placement:b.u.Bottom,textWrap:!0,renderTooltip:()=>(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Relations will automatically populate based on links found in page properties.",id:"database.viewSettings.setupRelationTab.autoRelateTooltip"})})]});return g?(0,C.jsx)(h.Z,{title:S,on:t?t.enabled:!!l&&(null==l?void 0:l.enabled),focused:!1,onClick:()=>o(m),textWrapperStyle:{opacity:1}}):null}var w=o(45238);const M=(0,w.IU)("collectionRelationArrow",{viewBox:"-1 -1 136 22",svg:(0,C.jsx)("path",{d:"M129.646 21.854a.501.501 0 00.708 0l3.182-3.182a.5.5 0 00-.708-.707L130 20.793l-2.828-2.828a.501.501 0 00-.708.707l3.182 3.182zM1 21.5V6H0v15.5h1zm4.5-20H125v-1H5.5v1zm124 4.5v15.5h1V6h-1zM125 1.5a4.5 4.5 0 014.5 4.5h1A5.5 5.5 0 00125 .5v1zM1 6a4.5 4.5 0 014.5-4.5v-1A5.5 5.5 0 000 6h1z"})}),_=(0,w.IU)("collectionRelationSmallArrowRight",{viewBox:"0 0 33 8",svg:(0,C.jsx)("path",{d:"M32.3536 4.35355C32.5488 4.15829 32.5488 3.84171 32.3536 3.64645L29.1716 0.464466C28.9763 0.269204 28.6597 0.269204 28.4645 0.464466C28.2692 0.659728 28.2692 0.976311 28.4645 1.17157L31.2929 4L28.4645 6.82843C28.2692 7.02369 28.2692 7.34027 28.4645 7.53553C28.6597 7.7308 28.9763 7.7308 29.1716 7.53553L32.3536 4.35355ZM0 4.5H32V3.5H0V4.5Z"})}),P=(0,w.IU)("collectionSelfRelationArrow",{viewBox:"-1 -1 139 22",svg:(0,C.jsx)("path",{d:"M4.146 21.854a.5.5 0 00.708 0l3.182-3.182a.5.5 0 10-.708-.707L4.5 20.793l-2.828-2.828a.5.5 0 10-.708.707l3.182 3.182zm129.5 0a.501.501 0 00.708 0l3.182-3.182a.5.5 0 00-.708-.707L134 20.793l-2.828-2.828a.501.501 0 00-.708.707l3.182 3.182zM5 21.5V6H4v15.5h1zm4.5-20H129v-1H9.5v1zm124 4.5v15.5h1V6h-1zM129 1.5a4.5 4.5 0 014.5 4.5h1A5.5 5.5 0 00129 .5v1zM5 6a4.5 4.5 0 014.5-4.5v-1A5.5 5.5 0 004 6h1z"})});var T=o(42696),k=o(37810),Z=o(31278);function I(e){const{collectionContextStore:t,targetCollectionStore:o,propertySchema:r,propertyName:n,temporaryInverseState:s,hasInverseRelation:l,inverseRelationName:p,isInitialPropertyName:d}=e,u=(0,c.useIntl)(),m=(0,i.VK)((()=>t.collectionStore()),[t]),g=s?s.hasInverseRelation:l,h=(0,i.VK)((()=>Boolean(m&&o.id===m.id)),[m,o]),f=(0,i.VK)((()=>{const e=s?s.inverseName:p;return e||(null!=m&&m.isDefined()?v.aI(u,{sourceCollection:m.getModel(),isSelfRelation:h,targetCollectionStore:o,createUnique:!0}):"")}),[m,u,p,h,s,o]),x=(0,i.VK)((()=>null!=m&&m.isDefined()?f===v.aI(u,{sourceCollection:m.getModel(),isSelfRelation:h,targetCollectionStore:o,createUnique:!1}):void 0),[m,u,f,h,o]),b=Boolean(!h&&d&&(!g||g&&x)),j=(0,a.yK)((e=>({preview:{background:e.inputBackground,marginLeft:14,marginRight:14,padding:b?"42px 12px":12,boxShadow:e.inputBoxShadow,borderRadius:4,display:"flex",flexDirection:"column",justifyContent:"center"},condensedView:{height:22,display:"flex",justifyContent:"center",alignItems:"center"},condensedProperties:{width:33,height:g?20:10,margin:"0px 12px",display:"flex",flexDirection:"column",justifyContent:"center"},databasesRow:{height:22}})),[b,g]);return m?(0,C.jsx)(y.Z,{title:(0,C.jsx)(S.Z,{isSmall:!0,isSecondaryColor:!0,children:(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Preview",id:"database.viewSettings.setupRelationTab.relationVisualizer.title"})}),disableMobileBorders:!0,children:(0,C.jsx)("div",{style:j.preview,children:b?(0,C.jsxs)("div",{style:j.condensedView,children:[(0,C.jsx)(R,{collectionStore:m,condensedView:!0}),(0,C.jsxs)("div",{style:j.condensedProperties,children:[(0,C.jsx)(O,{propertyName:n||(null==r?void 0:r.name),condensedView:!0}),g&&(0,C.jsx)(O,{propertyName:f,condensedView:!0,isInverse:!0})]}),(0,C.jsx)(R,{collectionStore:o,condensedView:!0,isTarget:!0})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(O,{propertyName:n||(null==r?void 0:r.name),bidirectional:h&&!g}),(0,C.jsxs)("div",{style:j.databasesRow,children:[(0,C.jsx)(R,{collectionStore:m}),(0,C.jsx)(R,{collectionStore:o,isTarget:!0})]}),g&&(0,C.jsx)(O,{propertyName:f,isInverse:!0})]})})}):null}function O(e){const{propertyName:t,bidirectional:o,isInverse:r,condensedView:n}=e,i=(0,a.yK)((e=>({propertyLabel:{fontSize:12,wordBreak:"break-word",...k.Z.textOverflowStyle,maxWidth:200,alignSelf:"center",color:e.mediumTextColor,fill:e.mediumIconColor},arrow:{width:136,height:25,alignSelf:"center",transform:r?"rotate(180deg)":void 0,margin:r?"6px 12px 0px 6px":"0px 6px 6px 6px",opacity:.3,fill:e.regularIconColor},smallArrow:{height:8,paddingLeft:1,marginTop:r?2:void 0,display:"inherit",transform:r?"rotate(180deg)":void 0,opacity:.3,fill:e.regularIconColor}})),[r]),s=(0,C.jsx)("div",{style:i.propertyLabel,children:t||""});return(0,C.jsxs)(C.Fragment,{children:[!r&&!n&&s,n?_(i.smallArrow):o?P(i.arrow):M(i.arrow),r&&!n&&s]})}function R(e){const{collectionStore:t,condensedView:o,isTarget:r}=e,n=(0,i.VK)((()=>t.getIcon()),[t]),s=(0,a.yK)((e=>({wrapper:{display:"flex",alignItems:"center",padding:2,color:e.mediumTextColor,fill:e.mediumIconColor,position:o?void 0:"absolute",left:o?void 0:r?"72%":"28%",transform:o?void 0:"translate(-50%, 0)",width:"fit-content"},icon:{marginRight:4,width:12,height:12},title:{fontSize:12,wordBreak:"break-word",...k.Z.textOverflowStyle,maxWidth:100}})),[o,r]);return(0,C.jsxs)("div",{style:s.wrapper,children:[n?(0,C.jsx)(Z.Z,{icon:n,isEmptyPage:!1,size:12,disabled:!0,style:s.icon}):(0,T.t)(s.icon),(0,C.jsx)(g.Z,{store:t,style:s.title})]})}function F(e){const{collectionContextStore:t,property:o,propertyName:p,targetCollectionStore:u,onSubmit:S,buttonContents:w,isInitialPropertyName:M,temporaryInverseState:_,setTemporaryInverseState:P,from:T}=e,k=(0,n.O7)(),Z=(0,i.VK)((()=>o?v.KV(t,o):void 0),[t,o]),O=(0,i.VK)((()=>t.collectionStore()),[t]),R=(0,i.VK)((()=>Boolean(O&&O.id===u.id)),[O,u]),F=(0,i.VK)((()=>Boolean(o?v.OP(t,o,u):void 0)),[t,o,u]),V=(0,i.VK)((()=>{if("relation"!==(null==Z?void 0:Z.type))return"";const e=Z.property;if(!e||e===o)return"";const t=u.getRole();if(!t||!l.YX(t))return"";const r=u.getSchema()[e];return(null==r?void 0:r.name)||""}),[u,o,Z]),K=(0,i.VK)((()=>"relation"===(null==Z?void 0:Z.type)&&Z.autoRelate?Z.autoRelate:{enabled:!1}),[Z]),B=(0,i.VK)((()=>Boolean(v.gZ(u))),[u]),D=(0,i.VK)((()=>Boolean((null==O?void 0:O.getDatabaseType())&&o&&(null==O?void 0:O.isTypedProperty(o)))),[O,o]),N=(0,i.VK)((()=>t.contextType),[t]),L=(0,a.yK)((e=>({errorLabel:{margin:"0px 14px",color:e.errorText},helpIcon:{width:16,fill:e.lightIconColor,marginLeft:6}})),[]),q=(0,r.useMemo)((()=>_?_.hasInverseRelation:F),[_,F]),z=(0,r.useMemo)((()=>_?_.inverseName:V),[_,V]),H=(0,r.useMemo)((()=>_?_.autoRelate:K),[_,K]),Y=(0,r.useCallback)((()=>{const e=null!=O&&O.isSyncedCollection()?H:q?{enabled:!1}:H;P({hasInverseRelation:!q,inverseName:q?void 0:z,autoRelate:e}),o&&d.$q({environment:k,collectionContextStore:t,property:o,from:"collectionPage"===N?"page_properties":"view_settings",action:q?"relation_toggle_inverse_off":"relation_toggle_inverse_on",is_self_relation:R})}),[P,q,z,H,t,O,o,N,R,k]),E=(0,r.useCallback)((e=>{P({hasInverseRelation:!0,inverseName:e.target.value,autoRelate:H})}),[P,H]),U=(0,r.useCallback)((e=>{const r=null!=H&&H.enabled?{enabled:!1}:{enabled:!0,bot_id:e};P({hasInverseRelation:q,inverseName:z,autoRelate:r}),o&&d.$q({environment:k,collectionContextStore:t,property:o,from:"collectionPage"===N?"page_properties":"view_settings",action:r.enabled?"auto_relation_toggle_on":"auto_relation_toggle_off"})}),[o,P,t,N,z,q,H,k]),W=(0,r.useCallback)((e=>{(0,x.ZP)({event:e,context:x.Af.CollectionSettingsClick,callback:S})}),[S]),$=(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",whiteSpace:"pre"},children:[R?(0,C.jsx)(c.FormattedMessage,{id:"database.viewSettings.setupRelationTab.selfRelation.reverse",defaultMessage:"Separate directions"}):(0,C.jsx)(c.FormattedMessage,{id:"database.viewSettings.setupRelationTab.relation.reverse",defaultMessage:"Show on {databaseName}",values:{databaseName:(0,C.jsx)(g.Z,{style:{display:"inline"},store:u})}}),(0,C.jsx)(f.ZP,{render:e=>(0,C.jsx)("div",{...e,children:(0,s.m)(L.helpIcon)}),style:{width:200},placement:b.u.Bottom,textWrap:!0,renderTooltip:()=>!B||D?(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Cannot edit target database.",id:"database.viewSettings.setupRelationTab.inverseDisabledWarning.title"}):R?(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Create separate properties for each direction of a two-way relation. Useful for modeling Parent task/Sub-tasks, Blocked by/Blocking, and more.",id:"database.viewSettings.setupRelationTab.inverseRelationTooltip.selfRelation"}):(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Create a property on {databaseName} showing backlinks to the current database",id:"database.viewSettings.setupRelationTab.inverseRelationTooltip",values:{databaseName:(0,C.jsx)(g.Z,{style:{display:"inline"},store:u})}})})]});return(0,C.jsxs)(C.Fragment,{children:[!(R&&F)&&!T&&(0,C.jsx)(h.Z,{title:$,on:q,focused:!1,onClick:Y,disabled:!B||R&&F||D,textWrapperStyle:{opacity:1}}),(0,C.jsx)(A,{collectionContextStore:t,targetCollectionStore:u,isSelfRelation:R,temporaryInverseState:_,hasInverseRelation:F,inverseRelationName:V,disabled:!B||D,onChange:E,from:T}),(0,C.jsx)(j,{handleAutoRelateToggle:U,temporaryAutoRelateState:null==_?void 0:_.autoRelate,collectionContextStore:t,autoRelate:K,targetCollectionStore:u,hasInverseRelation:q}),(()=>{if("relation"!==(null==Z?void 0:Z.type))return!0;if(_){if(_.hasInverseRelation!==F)return!0;if(_.inverseName&&_.inverseName!==V)return!0;if(_.autoRelate&&_.autoRelate.enabled!==K.enabled)return!0}return!1})()&&(0,C.jsx)(y.Z,{children:(0,C.jsx)(m.Z,{style:{display:"flex",margin:"6px 12px 0px 12px"},onClick:W,children:w})}),"subitem"!==T&&"timeline_arrows_by"!==T&&(0,C.jsx)(I,{propertySchema:Z,propertyName:p,collectionContextStore:t,targetCollectionStore:u,temporaryInverseState:_,hasInverseRelation:F,inverseRelationName:V,isInitialPropertyName:M})]})}function A(e){const{collectionContextStore:t,targetCollectionStore:o,isSelfRelation:r,temporaryInverseState:n,hasInverseRelation:a,inverseRelationName:s,disabled:l,onChange:d,from:m}=e,h=(0,c.useIntl)(),f=(0,i.VK)((()=>{const e=t.collectionStore();return null!=e&&e.isDefined()?v.aI(h,{sourceCollection:e.getModel(),isSelfRelation:r,targetCollectionStore:o,createUnique:!0,from:m}):h.formatMessage({id:"database.viewSettings.setupRelationTab.inverseRelationName.placeholder",defaultMessage:"Related to target"})}),[t,h,r,o,m]);return(n?n.hasInverseRelation:a)?(0,C.jsx)(y.Z,{title:!m&&(0,C.jsx)(S.Z,{isSmall:!0,isSecondaryColor:!0,children:(0,C.jsx)(c.FormattedMessage,{defaultMessage:"Related property on {databaseName}",id:"database.viewSettings.setupRelationTab.inverseRelationNameInput.title",values:{databaseName:(0,C.jsx)(g.Z,{style:{display:"inline"},store:o})}})}),children:(0,C.jsx)(u.ZP,{value:"subitem"!==m&&"timeline_arrows_by"!==m?(null==n?void 0:n.inverseName)||s:f,placeholder:f,onChange:d,onBlur:p.yR,onSubmit:p.yR,focusInitial:!1,selectAll:!1,disabled:l})}):null}},73590:(e,t,o)=>{o.d(t,{Z:()=>c});o(67294);var r=o(480),n=o(84169),i=o(25888),a=o(16354),s=o(94166),l=o(85893);const c=function(e){const{title:t,href:o,analyticsFrom:c}=e,p=(0,r.O7)();return(0,l.jsx)(a.Z,{href:o,onClick:()=>i.Fs(p,{from:c}),external:!0,children:(0,l.jsx)(s.Z,{icon:n.m,title:t,isGray:!0})})}},71268:(e,t,o)=>{o.d(t,{C:()=>y,U:()=>h});var r=o(67294),n=o(480),i=o(99036),a=o(9291),s=o(8406),l=o(13447),c=o(75330),p=o(65183),d=o(85893);function u(e,t,o){return"1"===e?"relation"===t?o&&!0===o?(0,d.jsx)(a.FormattedMessage,{defaultMessage:"1 item",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne.connectedRelation"}):(0,d.jsx)(a.FormattedMessage,{defaultMessage:"1 page",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne.relation"}):(0,d.jsx)(a.FormattedMessage,{defaultMessage:"1 {type}",id:"database.viewSettings.collectionPropertyLimitHelpers.limitOne",values:{type:p.SO[t]}}):"no_limit"===e?(0,d.jsx)(a.FormattedMessage,{defaultMessage:"No limit",id:"database.viewSettings.collectionPropertyLimitHelpers.noLimit"}):void 0}function m(e,t,o){return{key:e,title:u(e,t,o)}}var g=o(18533);function y(e){const{property:t,propertySchema:o,collectionContextStore:a}=e,p=(0,n.O7)(),u=(0,r.useCallback)((e=>{const r=a.collectionStore();if(!r||!(0,i.en)(o))return;const n={...o,limit:Number(e)?1:void 0};l.createAndCommit({userAction:"CollectionSettingsLimitOptions.handleLimitChange",environment:p,perform:e=>{c.xO({environment:p,collectionStore:r,update:{[t]:n},transaction:e})}});const d=Number(e)?`${o.type}_toggle_limit_on`:`${o.type}_toggle_limit_off`;s.$q({environment:p,collectionContextStore:a,property:t,from:"view_settings",action:d})}),[a,p,t,o]);return(0,i.en)(o)?"relation"===o.type&&o.connectedRelation?(0,d.jsx)(h,{propertyType:o.type,connectedRelation:!0,selectedKey:o.limit?"1":"no_limit",onChange:u}):(0,d.jsx)(h,{propertyType:o.type,selectedKey:o.limit?"1":"no_limit",onChange:u}):null}function h(e){const{propertyType:t,selectedKey:o,connectedRelation:r,onChange:n}=e;return(0,d.jsx)(g.Z,{title:(0,d.jsx)(a.FormattedMessage,{defaultMessage:"Limit",id:"database.viewSettings.collectionPropertyLimitHelpers.limit"}),selectedKey:o,popupStyle:{minWidth:190},options:[m("1",t,r),m("no_limit",t)],onChange:n})}},17515:(e,t,o)=>{o.d(t,{w:()=>wo,Z:()=>Et});o(21703),o(57658);var r=o(67294),n=o(73935),i=o(83355),a=o(1302),s=o(480),l=o(86628),c=o(24405),p=o(49085),d=o(99036),u=o(80951),m=o(12396),g=o(79362),y=o(5257),h=o(88437),f=o(44643),S=o(55964),x=o(16184),v=o(37612),b=o(19889),C=o(3791),j=o(9291),w=o(31701),M=o(1898),_=o(37810),P=o(7801),T=o(10910),k=o(8406),Z=o(16956),I=o(5149),O=o(87085),R=o(96802),F=o(80402),A=o(13447),V=o(34517),K=o(40663),B=o(51592),D=o(43627),N=o(75330),L=o(10906),q=o(30905),z=o(91965),H=o(74420),Y=o(31278),E=o(76798),U=o(72495),W=o(32662),$=o(24006),G=o(26388),Q=o(18145),X=o(65183),J=o(43224),ee=o(99417),te=o(19124),oe=o(33929),re=o(18514),ne=o(77546),ie=o(94841),ae=o(67695),se=o(61766),le=o(77080),ce=o(83212),pe=o(6258),de=o(88280),ue=o(17095),me=o(27871),ge=o(21292),ye=o(13991),he=o(40506),fe=o(11843),Se=o(18533),xe=o(85893);const ve=function(e){let{collectionContextStore:t,property:o}=e;const r=(0,j.useIntl)(),n=(0,s.O7)(),i=(0,l.VK)((()=>be(t,o)),[t,o]),a=(0,l.VK)((()=>t.getPropertyFormat(o)),[t,o]);if(!i)return null;const c=(null==a?void 0:a.date_format)||i.date_format||he.sF,p=function(e){const t=Ce();for(const o in t)if(t[o]===e)return o;return"12h"}((null==a?void 0:a.time_format)||i.time_format||he.c_);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Se.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Date format",id:"database.viewSettings.dateOptions.dateFormat"}),selectedKey:c,popupStyle:{minWidth:190},options:he.Zy.map((e=>({key:e,title:r.formatMessage(he.fy[e])}))),onChange:e=>function(e,t,o,r){const n="collectionTypedView"===o.contextType;if(n){const n=o.formatStore();if(!n)return;const i=o.getPropertyFormatKey();if(!i)return;A.createAndCommit({userAction:"CollectionSettingsDateOptions.handleMsvDateFormatChange",environment:t,perform:t=>{Z.er({formatStore:n,formatKey:i,property:r,update:{date_format:e},transaction:t})}})}else{const n=o.collectionStore(),i=be(o,r);if(!n||!i)return;const a={...i,date_format:e};A.createAndCommit({userAction:"CollectionSettingsDateOptions.handleDateFormatChange",environment:t,perform:e=>{N.xO({environment:t,collectionStore:n,update:{[r]:a},transaction:e})}})}k.$q({environment:t,collectionContextStore:o,property:r,from:"view_settings",action:"date_change_format"})}(e,n,t,o)}),(0,xe.jsx)(Se.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Time format",id:"database.viewSettings.dateOptions.timeFormat"}),selectedKey:p,popupStyle:{minWidth:190},options:he.L7.map((e=>({key:e,title:r.formatMessage(he.Fi[e])}))),onChange:e=>function(e,t,o,r){const n=Ce()[e],i="collectionTypedView"===o.contextType;if(i){const e=o.formatStore();if(!e)return;const i=o.getPropertyFormatKey();if(!i)return;A.createAndCommit({userAction:"CollectionSettingsDateOptions.handleMsvClockFormatChange",environment:t,perform:t=>{Z.er({formatStore:e,formatKey:i,property:r,update:{time_format:n},transaction:t})}})}else{const e=o.collectionStore(),i=be(o,r);if(!e||!i)return;const a={...i,time_format:n};A.createAndCommit({userAction:"CollectionSettingsDateOptions.handleClockFormatChange",environment:t,perform:o=>{N.xO({environment:t,collectionStore:e,update:{[r]:a},transaction:o})}})}k.$q({environment:t,collectionContextStore:o,property:r,from:"view_settings",action:"date_change_time_format"})}(e,n,t,o)})]})};function be(e,t){const o=e.normalizedSchemaStore.state[t];if(o)return"date"===o.type||"created_time"===o.type||"last_edited_time"===o.type||"last_visited_time"===o.type?o:void 0}function Ce(){return(0,fe.E)(ye.SP).time}var je=o(22686);function we(e){const{collectionContextStore:t,property:o,propertySchema:n}=e,i=(0,s.O7)(),a=(0,r.useCallback)((e=>{const r={...n,default:"created_by"===e?"created_by":void 0},a=t.collectionStore();a&&(N.HW({environment:i,collectionStore:a,performTransaction:t=>{A.applyOperation({store:(0,pe.Kv)(a,a.pointer),operation:{pointer:a.pointer,command:"update",path:["schema",o],args:{default:e}},transaction:t})}}),A.createAndCommit({userAction:"CollectionSettingsDefaultPersonPicker.handleChange",environment:i,perform:e=>{N.xO({environment:i,collectionStore:a,update:{[o]:r},transaction:e})}}))}),[t,i,o,n]);return(0,xe.jsx)(Se.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Default",id:"CollectionSettingsDefaultPersonPicker.default.title"}),selectedKey:n.default?"created_by":"no_default",popupStyle:{minWidth:190},options:[{key:"no_default",title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"No default",id:"CollectionSettingsDefaultPersonPicker.options.noDefault"})},{key:"created_by",title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Created by",id:"CollectionSettingsDefaultPersonPicker.options.creator"}),icon:(0,je.f)({width:16})}],onChange:a})}var Me=o(26249),_e=o(31945),Pe=o(53437),Te=o(72589),ke=o(77907),Ze=o(94166);function Ie(e){let{collectionContextStore:t,collectionSettingsStore:o,property:n}=e;const i=(0,s.O7)(),a=(0,l.qz)(void 0,se.Z),c=(0,r.useCallback)((e=>{const r=t.collectionStore();if(!r)return null;const a=t.normalizedSchemaStore.state[n];if("formula"!==(null==a?void 0:a.type))return;const s=Boolean(r.getDatabaseType()&&r.isTypedProperty(n)),l=null==o?void 0:o.getState().fromBlock;return(0,xe.jsx)(ke.DependencyConsumer,{dependency:ke.deps.formulas,children:t=>(0,xe.jsx)(Te.Z,{handleClose:e.close,property:n,getRecordModel:r.getRecordModel,propertySchema:a,collectionStore:r,handleSave:e=>function(e,t){const{newValue:o,newType:r,propertySchema:n,property:i,collectionStore:a}=e,s=o?{...n,formula2:{code:o,result_type:r},version:"v2"}:{...n,formula2:void 0,version:"v2"};A.createAndCommit({userAction:"CollectionSettingsFormulaOptions.handleFormulaChange",environment:t,perform:e=>{N.xO({environment:t,collectionStore:a,update:{[i]:s},transaction:e})}})}(e,i),formulas:t,disabled:s,blockStore:l,analyticsFrom:"view_settings"})})}),[t,o,i,n]);return(0,xe.jsx)(_e.ZP,{popupType:i.device.isMobile?Pe.kQ.SlideUp:Pe.kQ.Popup,alignmentToOrigin:_e.vR.End,renderOrigin:e=>(0,xe.jsx)(Ze.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Formula",id:"database.viewSettings.formulaOptions.title"}),right:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Edit",id:"database.viewSettings.formulaOptions.edit"}),showChevron:!0,rotateChevron:a.state.open,...e}),render:c,buttonPopupStore:a})}const Oe=r.memo(Ie,Me.Z);var Re=o(59862),Fe=o(73590),Ae=o(71268),Ve=o(97372),Ke=o(71214),Be=o(35011),De=o(34299),Ne=o(35102),Le=o(42853),qe=o(23512),ze=o(64921),He=o(74194),Ye=o(85248),Ee=o(78942),Ue=o(58573),We=o(15157),$e=o(60709),Ge=o(29798),Qe=o(52275),Xe=o(68894),Je=o(78140),et=o(32163);const tt="LastUsedCurrency",ot=p.default.createClass("");const rt=function(e){let{collectionStore:t,property:o,schema:n,onClose:i}=e;const a=(0,s.O7)(),c=(0,l.qz)(void 0,Ge.Z),p=(0,l.qz)(void 0,ot),d=(0,r.useCallback)((e=>function(e,t,o){t.setState(e.target.value),o.setState({...o.state,focus:{section:0,indexLocal:0,indexGlobal:0}})}(e,p,c)),[p,c]),u=(0,l.VK)((()=>p.state),[p]),m=(0,l.VK)((()=>function(e,t,o,r,n,i){const a=We.Z.get({userId:e.currentUser.id,key:tt}),s=(0,Ue.ZP)(n.state,(0,qe.jD)(a),(e=>e));return s.map((n=>{const a={key:n,render:e=>(0,xe.jsx)(nt,{name:n,props:e}),action:()=>function(e,t,o,r,n,i){const a=r[o];if(!a)return;if("number"!==a.type&&"formula"!==a.type)return;const s={...a,number_format:e,..."percent"===e&&void 0!==(null==a?void 0:a.show_as)?{show_as:{...null==a?void 0:a.show_as,maxValue:1}}:{}};"number"===a.type&&(0,qe.b3)(e)&&We.Z.set({userId:n.currentUser.id,key:tt,value:e});A.createAndCommit({userAction:"NumberFormatMenu.handleNumberFormatChange",environment:n,perform:e=>{N.xO({environment:n,collectionStore:t,update:{[o]:s},transaction:e})}}),null==i||i()}(n,t,o,r,e,i)};return a}))}(a,t,o,n,p,i)),[a,t,o,n,p,i]),{device:g}=a;let y;y=g.isMobile?{menuType:$e.og.ActionSheet}:{menuType:$e.og.Popup};const h=!g.isMobile&&(0,xe.jsx)(U.Z,{isInput:!0,children:(0,xe.jsx)(Xe.ZP,{value:u,onChange:d,focus:!0,focusAfterAnimation:!0,placeholder:oe.default.getIntl().formatMessage({defaultMessage:"Filter formatsâ€¦",id:"blockPropertyValue.filterForNumberFormats.placeholder"}),preventCaptureDeleteWhenEmpty:!0})});return(0,xe.jsx)(Je.Z,{...y,header:h,children:(0,xe.jsx)(et.Z,{type:et.i.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,xe.jsx)(U.Z,{...e}),items:m}],store:c})})};function nt(e){let{name:t,props:o}=e;return(0,xe.jsx)(Qe.Z,{...o,title:(0,qe.Bo)(oe.default.getIntl(),t)})}var it=o(9050),at=o(66890),st=o(16187);function lt(e){let{collectionContextStore:t,property:o}=e;const{propertySchema:r,numberFormat:n}=(0,l.VK)((()=>{const e=t.collectionStore(),r=t.normalizedSchemaStore.state[o];if(!r||!e)return{};if("number"===r.type)return{propertySchema:r,numberFormat:r.number_format??qe.dk};if("formula"===r.type)return"number"===(0,Be.mm)(r)||r.formula2&&"number"===(0,Ne.aL)(r.formula2.result_type).type?{propertySchema:r,numberFormat:r.number_format??qe.dk}:{};if("rollup"===r.type){var n;if(r.aggregation&&"show_unique"!==r.aggregation){var i;const n=null===(i=(0,De.gT)({property:o,schema:t.normalizedSchemaStore.state,getRecordModel:e.getRecordModel}))||void 0===i?void 0:i.targetPropertySchema;if(void 0===(null==n?void 0:n.type))return{};const a=(0,st.SD)(r.aggregation,(0,st.SD)(r.aggregation,"number_format"in n?n.number_format:void 0));return a?{propertySchema:r,numberFormat:a}:{}}const a=null===(n=(0,De.gT)({property:o,schema:t.normalizedSchemaStore.state,getRecordModel:e.getRecordModel}))||void 0===n?void 0:n.targetPropertySchema;if("number"===(null==a?void 0:a.type)||"formula"===(null==a?void 0:a.type)&&"number"===(0,Be.r9)(a))return{propertySchema:r,numberFormat:a.number_format??qe.dk}}return{}}),[t,o]);if(!r)return null;const i="rollup"!==r.type;return(0,xe.jsxs)(xe.Fragment,{children:[i?(0,xe.jsx)(ct,{numberFormat:n,property:o}):null,(0,xe.jsx)(pt,{property:o,propertySchema:r,numberFormat:n})]})}function ct(e){let{numberFormat:t,property:o}=e;const r=(0,at.Y$)(),n=(0,l.qz)(void 0,se.Z),i=(0,j.useIntl)(),a=(0,s.O7)();return(0,xe.jsx)(_e.ZP,{popupType:a.device.isMobile?Pe.kQ.SlideUp:Pe.kQ.Popup,alignmentToOrigin:_e.vR.End,renderOrigin:e=>(0,xe.jsx)(Ze.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Number format",id:"database.viewSettings.numberOptions.numberFormat"}),right:(0,xe.jsx)("span",{style:{..._.Z.textOverflowStyle},children:(0,qe.Bo)(i,qe.dX.find((e=>e===t))??qe.dk)}),showChevron:!0,rotateChevron:n.state.open,...e}),render:e=>{const t=r.collectionStore(),n=r.normalizedSchemaStore.state;if(t)return(0,xe.jsx)(rt,{collectionStore:t,property:o,schema:n,onClose:e.close})},buttonPopupStore:n})}function pt(e){let{property:t,propertySchema:o,numberFormat:n}=e;const{show_as:i}=o,a=(0,at.Y$)(),l=(0,s.O7)(),p=(0,c.Fg)(),d=r.useRef({color:(null==i?void 0:i.color)??"green",maxValue:(null==i?void 0:i.maxValue)??100,showValue:(null==i?void 0:i.showValue)??!0}),u={type:(null==i?void 0:i.type)??"number",color:(null==i?void 0:i.color)??d.current.color,maxValue:(null==i?void 0:i.maxValue)??d.current.maxValue,showValue:(null==i?void 0:i.showValue)??d.current.showValue},m=(0,c.yK)((e=>({card:{boxSizing:"content-box",height:36,flex:1,margin:1,boxShadow:`0 0 0 1px ${e.regularDividerColor}`,color:e.mediumTextColor,borderRadius:4,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingLeft:12,paddingRight:12,paddingTop:6,paddingBottom:6,cursor:"pointer"},selectedCard:{boxShadow:`0 0 0 2px ${e.blueColor}`,color:e.blueColor},cardVisual:{height:20,marginBottom:4,width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},cardText:{lineHeight:1,fontSize:12},progressBar:{width:"100%"},showAsTypeOption:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginLeft:16,marginRight:16,marginTop:6,gap:12},extraOptionStyle:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16,gap:16,height:28,width:"100%"}})),[]),g=(0,r.useCallback)((e=>{const r=a.collectionStore();o&&r&&(A.createAndCommit({userAction:"CollectionSettingsProperty.handleNumberShowAsChange",environment:l,perform:n=>{N.xO({environment:l,collectionStore:r,update:{[t]:{...o,show_as:e}},transaction:n})}}),k.$q({environment:l,collectionContextStore:a,property:t,from:"view_settings",action:"number_change_show_as",number_show_as:(null==e?void 0:e.type)??"number"}))}),[a,l,t,o]),y=[{key:"number",visual:(0,xe.jsx)("div",{style:{fontSize:16,fontWeight:_.Z.fontWeight.medium},children:"42"}),text:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Number",id:"database.viewSettings.numberOptions.showAsNumber"})},{key:"bar",visual:(0,xe.jsx)(Ye.k,{percentage:50,filledColor:"bar"===u.type?p.blueColor:p.regularDividerColor,unfilledColor:"bar"===u.type?p.accentColors.blue[50]:p.regularDividerColor,style:{width:"100%"}}),text:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Bar",id:"database.viewSettings.numberOptions.showAsBar"})},{key:"ring",visual:(0,xe.jsx)(Ee.e,{size:20,percentage:40,filledColor:"ring"===u.type?p.blueColor:p.regularDividerColor,unfilledColor:"ring"===u.type?p.accentColors.blue[50]:p.accentColors.gray[100],style:{width:"100%"}}),text:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Ring",id:"database.viewSettings.numberOptions.showAsRing"})}],h=(0,xe.jsx)("div",{style:m.showAsTypeOption,children:y.map((e=>{const t=u.type===e.key;return(0,xe.jsxs)(ze.Z,{onClick:()=>{const t="number"===e.key?void 0:{type:e.key,color:u.color,maxValue:"percent"===n?1:u.maxValue,showValue:u.showValue};void 0!==t&&(d.current=t),g(t)},style:{...m.card,...t?m.selectedCard:{}},children:[(0,xe.jsx)("div",{style:m.cardVisual,children:e.visual}),(0,xe.jsx)("div",{style:m.cardText,children:e.text})]},e.key)}))}),f=e=>{const t="number"!==u.type?{...u,type:u.type,...e}:void 0;void 0!==t&&(d.current=t),g(t)},S="number"!==u.type?(0,xe.jsxs)("div",{style:m.extraOptionStyle,children:[(0,xe.jsx)("div",{style:{flex:6,fontSize:14},children:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Color",id:"database.viewSettings.numberOptions.color"})}),(0,xe.jsx)("div",{style:{display:"flex",flexWrap:"wrap",flex:6,gap:7},children:(0,xe.jsx)(_e.ZP,{popupType:l.device.isMobile?_e.Z4.SlideUp:_e.Z4.Popup,renderOrigin:e=>(0,xe.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"end"},...e,children:(0,xe.jsx)(it.Z,{color:u.color,focused:!1,buttonStyle:{width:"auto",marginLeft:0,marginRight:0,borderRadius:4,color:p.lightTextColor},style:{minHeight:36},right:(0,Le.i)({width:12,height:12})})}),render:e=>{const t=w.AP.map((t=>(0,xe.jsx)(it.Z,{color:t,checkState:t===u.color,focused:!1,style:{width:"100%"},onClick:()=>{f({color:t}),e.close()}},t)));return(0,xe.jsx)("div",{style:{minWidth:150,paddingTop:8,paddingBottom:8},children:t})}})})]}):null,x="number"!==u.type?"percent"!==n&&(0,xe.jsxs)("div",{style:m.extraOptionStyle,children:[(0,xe.jsx)("div",{style:{flex:6,fontSize:14},children:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Divide by",id:"database.viewSettings.numberOptions.divideBy"})}),(0,xe.jsx)("div",{style:{flex:6},children:(0,xe.jsx)(He.Z,{value:u.maxValue.toString(),onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,""),o=parseFloat(t);!isNaN(o)&&o>0&&f({maxValue:o})},inputStyle:{textAlign:"right"}})})]}):null,v="number"!==u.type?(0,xe.jsxs)("div",{style:m.extraOptionStyle,children:[(0,xe.jsx)("div",{style:{flex:6,fontSize:14},children:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Show number",id:"database.viewSettings.numberOptions.showValue"})}),(0,xe.jsx)("div",{style:{flex:6,display:"flex",justifyContent:"flex-end"},children:(0,xe.jsx)($.Z,{on:u.showValue,onClick:()=>{f({showValue:!u.showValue})},disabled:!1})})]}):null,b=Boolean(S||x||v),C=(0,xe.jsxs)("div",{style:{backgroundColor:p.accentColors.gray[30],borderRadius:5,marginTop:b?12:0,marginLeft:b?14:0,marginRight:b?14:0,paddingTop:b?12:0,paddingBottom:b?12:0,maxHeight:b?1e3:0,transition:"max-height 0.5s ease-in-out",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[S,x,v]});return(0,xe.jsxs)(U.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Show as",id:"database.viewSettings.numberPercentOptions.showAs"}),topBorder:!0,disableMobileBorders:!0,children:[h,C,(0,xe.jsx)("div",{style:{marginTop:12,marginLeft:18,marginRight:18,fontSize:12,color:p.lightTextColor},children:(0,xe.jsx)(j.FormattedMessage,{id:"database.CollectionSettings.NumberOptions.applyAllViews",defaultMessage:"Changes apply to all views showing this property."})})]})}var dt=o(27948),ut=o(49579),mt=o(47453),gt=o(15828),yt=o(47307),ht=o(50959),ft=o(79131),St=o(73063),xt=o(3386),vt=o(92658),bt=o(84619),Ct=o(73456),jt=o(22084),wt=o(4023);function Mt(e){var t;const o=(0,s.O7)(),n=(0,c.Fg)(),{isMobile:i}=(0,s.Fy)(),{property:a,option:p,statusGroup:d,propertySchema:u,isDefault:m,disabled:g}=e,y=(0,at.Y$)(),h=(0,l.VK)((()=>{var e;return null===(e=y.collectionStore())||void 0===e?void 0:e.id}),[y]),f=(0,l.qz)(void 0,se.Z),S=(0,l.VK)((()=>f.state.open),[f]),x=(0,r.useCallback)((()=>{f.setState({open:!0})}),[f]),v=(0,r.useCallback)((()=>{f.setState({open:!1})}),[f]),b=(0,r.useCallback)((e=>{const t=y.collectionStore();t&&N.HW({environment:o,collectionStore:t,performTransaction:o=>{for(const r of e)A.applyOperation({store:(0,pe.Kv)(t,r.pointer),operation:r,transaction:o})}})}),[y,o]),C=(0,c.yK)((()=>({defaultText:{fontSize:12,fontWeight:500,textTransform:"uppercase"}})),[]);return h?(0,xe.jsx)(Ct.Z,{open:S,origin:(0,xe.jsx)(G.ZP,{renderTooltip:e=>(0,xe.jsxs)("div",{...e,style:J.F6,children:[(0,xe.jsx)("div",{children:p.value}),(0,xe.jsx)("div",{style:{color:n.mediumInvertedTextColor},children:p.description})]}),placement:wt.u.Left,disableTooltip:!(null!==(t=p.description)&&void 0!==t&&t.length),render:e=>{var t,o;return(0,xe.jsx)(Ze.Z,{...e,showDragHandle:!0,showChevron:!0,disabled:g,rotateChevron:S,title:"status"===u.type?(0,xe.jsx)(jt.F,{format:i?bt.lo.Large:bt.lo.Medium,value:p.value,color:p.color,hideTooltip:!(null===(t=p.description)||void 0===t||!t.length),tooltipPlacement:wt.u.Left,showRemoveButton:!1,isSingle:!0,groupColor:null==d?void 0:d.color}):(0,xe.jsx)(jt.a,{format:i?bt.lo.Large:bt.lo.Medium,value:p.value,color:p.color,hideTooltip:!(null===(o=p.description)||void 0===o||!o.length),tooltipPlacement:wt.u.Left,showRemoveButton:!1,isSingle:!0}),right:m?(0,xe.jsx)("span",{style:C.defaultText,children:(0,xe.jsx)(j.FormattedMessage,{id:"database.statusProperty.default",defaultMessage:"Default"})}):void 0,onClick:x})}}),option:p,property:a,propertySchema:u,statusGroup:d,collectionId:h,analyticsFrom:"view_settings",alignmentToOrigin:wt.v.End,onChange:b,onClose:v}):null}const _t=p.default.createClass(void 0);const Pt=function(e){let{collectionContextStore:t,property:o,disabled:r,aIAutofillOption:n}=e;const i=(0,s.O7)(),a=(0,l.qz)(void 0,_t),c=(0,l.qz)(void 0,vt.Z),p=(0,l.VK)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getSchema()}),[t]),u=(0,l.VK)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getFormat().app_config_uri}),[t]),m=(0,l.VK)((()=>Zt(t,o)),[t,o]),g=(0,l.VK)((()=>c.state),[c]),y=(0,l.VK)((()=>a.state),[a]);if(!p||!m)return null;if("status"===m.type){const e=m.groups??[];if(0===e.length)return null;const n=m.options??[],s=e.map((e=>{const t=n.filter((t=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));return{group:e,groupOptions:t}})),l=m.defaultOption,d=[...s[0].groupOptions.map((e=>e.value))];for(const{group:t,groupOptions:o}of s.slice(1))d.push({key:`group-header-${t.name}`,draggable:!1}),d.push(...o.map((e=>e.value)));const h=(0,K.Hw)(u,p,o)?{tooltipCaption:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"These options are core to the property and cannot be changed.",id:"database.viewSettings.selectOptions.disabledGroupMessage"})}:void 0,f=(i,p)=>{if(i.startsWith("group-header-")){const e=i.substring(13),n=s.findIndex((t=>{let{group:o}=t;return o.name===e})),{group:l,groupOptions:p}=s[n];return(0,xe.jsxs)(Tt,{title:(0,xe.jsx)(ht.r_,{disableGroup:h,group:l,showIcon:!1}),right:!g.focus&&(0,xe.jsx)(It,{collectionContextStore:t,property:o,onClick:()=>Rt(c,a,n)}),disabled:r,children:[y===n&&(0,xe.jsx)(At,{collectionContextStore:t,property:o,inputStore:c,inputGroupIndexStore:a}),!g.focus&&0===p.length&&(0,xe.jsx)(Vt,{inputStore:c,inputGroupIndexStore:a,groupIndex:n})]})}{const t=n.find((e=>e.value===i));if(!t)return null;const a=e.find((e=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));return(0,xe.jsx)(Mt,{option:t,statusGroup:a,propertySchema:m,property:o,isDefault:t.value===l,disabled:r},t.value)}};return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsxs)(Tt,{title:(0,xe.jsx)(ht.r_,{disableGroup:h,group:s[0].group}),right:!g.focus&&(0,xe.jsx)(It,{collectionContextStore:t,property:o,onClick:()=>Rt(c,a,0)}),disabled:r,children:[0===y&&(0,xe.jsx)(At,{collectionContextStore:t,property:o,inputStore:c,inputGroupIndexStore:a}),!g.focus&&0===s[0].groupOptions.length&&(0,xe.jsx)(Vt,{inputStore:c,inputGroupIndexStore:a,groupIndex:0})]}),(0,xe.jsx)(ft.ZP,{direction:"vertical",keys:d,renderKey:f,onDrop:e=>Ot(e,i,o,t),disabled:r})]})}{const e=m.options??[],s=e.map((e=>e.value)),l=m.auto_sort_options||"manual";return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Se.Z,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Sort",id:"database.viewSettings.selectOptions.autoSort"}),selectedKey:l,options:[{key:"manual",title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Manual",id:"database.viewSettings.selectOptions.autoSort.none"})},{key:"alphabetical",title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Alphabetical",id:"database.viewSettings.selectOptions.autoSort.alphabetical"})},{key:"reverse_alphabetical",title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Reverse alphabetical",id:"database.viewSettings.selectOptions.autoSort.reverseAlphabetical"})}],onChange:e=>function(e,t,o,r){const n=o.collectionStore(),i=o.normalizedSchemaStore.state,a=Zt(o,r);if(!n||!a)return;if(!(0,d.cu)(a))return;const s=[{pointer:n.pointer,command:"update",path:["schema",r],args:{auto_sort_options:e}}];"alphabetical"!==e&&"reverse_alphabetical"!==e||s.push(...(0,L.L5)({collectionId:n.id,property:r,propertySchema:a,schema:i,isAscending:"alphabetical"===e})||[]);N.HW({environment:t,collectionStore:n,performTransaction:e=>{for(const t of s)A.applyOperation({store:(0,pe.Kv)(n,t.pointer),operation:t,transaction:e})}}),k.$q({environment:t,collectionContextStore:o,property:r,from:"view_settings",action:"select_change_auto_sort_options"})}(e,i,t,o),popupStyle:{minWidth:190}},"autoSortMenuItem"),n,(0,xe.jsx)(Tt,{title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Options",id:"database.viewSettings.selectOptions.title"}),right:!g.focus&&s.length>0&&(0,xe.jsx)(It,{collectionContextStore:t,property:o,onClick:()=>Rt(c,a)}),disabled:r,children:(0,xe.jsx)(At,{collectionContextStore:t,property:o,inputStore:c,inputGroupIndexStore:a})},"sectionHeader"),s.length>0&&(0,xe.jsx)(ft.ZP,{direction:"vertical",keys:s,renderKey:t=>{const n=e.find((e=>e.value===t));return n?(0,xe.jsx)(Mt,{option:n,property:o,propertySchema:m,isDefault:!1,statusGroup:void 0,disabled:r},n.value):null},onDrop:e=>Ot(e,i,o,t)}),!g.focus&&0===s.length&&(0,xe.jsx)(Vt,{inputStore:c,inputGroupIndexStore:a})]})}};function Tt(e){let{title:t,right:o,children:r,disabled:n,overrideStyle:i}=e;return(0,xe.jsx)(U.Z,{topBorder:!0,title:t,desktopTitleStyle:{height:20},right:!n&&o,style:{width:"100%",paddingBottom:0,...i},children:!n&&r})}function kt(){return(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Option already exists.",id:"database.optionExistsAlreadyError.message"})}function Zt(e,t){const o=e.normalizedSchemaStore.state[t];if(o&&((0,d.cu)(o)||"status"===o.type))return o}function It(e){let{onClick:t,collectionContextStore:o,property:r}=e;const n=(0,j.useIntl)();return(0,l.VK)((()=>Zt(o,r)),[o,r])?(0,xe.jsx)(St.Z,{icon:mt.R,onClick:t,style:{width:20,height:20},ariaLabel:n.formatMessage({defaultMessage:"Add an option",id:"database.viewSettings.selectOptions.addOption"})}):null}function Ot(e,t,o,r){const n=r.normalizedSchemaStore.state,i=r.collectionStore();if(!i)return;const a=n[o];let s;if("status"===(null==a?void 0:a.type)){s=[[]];for(const t of e)t.startsWith("group-header-")?s.push([]):s[s.length-1].push(t)}else s=e;const l=(0,L.YL)({newOptions:s,collectionId:i.id,property:o,schema:n});if(l){if(a&&(0,d.cu)(a)){"manual"!==(a.auto_sort_options||"manual")&&l.push({pointer:i.pointer,command:"update",path:["schema",o],args:{auto_sort_options:"manual"}})}N.HW({environment:t,collectionStore:i,performTransaction:e=>{for(const t of l)A.applyOperation({store:(0,pe.Kv)(i,t.pointer),operation:t,transaction:e})}})}k.$q({environment:t,collectionContextStore:r,property:o,from:"view_settings",action:"select_options_reorder"})}function Rt(e,t,o){e.setState({focus:!0,inputValue:""}),void 0!==o&&t.setState(o)}function Ft(e,t){const o=e.device.isPhone?t.state.inputValue:"";t.setState({focus:!1,inputValue:o})}function At(e){let{collectionContextStore:t,property:o,inputStore:n,inputGroupIndexStore:i}=e;const a=(0,s.O7)(),c=(0,j.useIntl)(),p=(0,r.useCallback)((()=>function(e,t,o,r,n){const i=t.collectionStore(),a=Zt(t,o);if(!a||!i)return;const s=a.options||[],l=r.state.inputValue.trim();if(l){let t=(0,d.TL)(s);if("status"===a.type){const e=n.state;if(void 0!==e){var c;const o=null===(c=a.groups)||void 0===c||null===(c=c[e])||void 0===c?void 0:c.color;o&&(t=o)}}if(s.find((e=>e.value===l)))return yt.showErrorMessage((0,xe.jsx)(kt,{})),void Ft(e,r);const p={id:(0,gt.ZP)(),value:l,color:t};let u,m;if(u=!(0,d.cu)(a)||"alphabetical"!==a.auto_sort_options&&"reverse_alphabetical"!==a.auto_sort_options?{pointer:i.pointer,command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:p}}:(0,d.Ch)({collectionId:i.id,property:o,propertySchema:a,newOption:p,isAscending:"alphabetical"===a.auto_sort_options}),"status"===a.type){const e=n.state;void 0!==e&&(m={pointer:i.pointer,command:"listBefore",path:["schema",o,"groups",e,"optionIds"],args:{id:p.id}})}N.HW({environment:e,collectionStore:i,performTransaction:e=>{A.applyOperation({store:(0,pe.Kv)(i,u.pointer),operation:u,transaction:e}),m&&A.applyOperation({store:(0,pe.Kv)(i,m.pointer),operation:m,transaction:e})}})}r.setState({focus:!0,inputValue:""}),k.$q({environment:e,collectionContextStore:t,property:o,from:"view_settings",action:"select_add_option"})}(a,t,o,n,i)),[a,t,o,n,i]),u=(0,r.useCallback)((e=>function(e,t){const o=e.target.value.replace(/,/g,"");t.setState({focus:!0,inputValue:o})}(e,n)),[n]),m=(0,r.useCallback)((()=>Ft(a,n)),[a,n]),g=(0,l.VK)((()=>n.state),[n]);return g.focus?(0,xe.jsx)(xt.Z,{debugName:"CollectionSettingsSelectOptions",capture:!0,onEsc:m,children:(0,xe.jsx)(Xe.ZP,{value:g.inputValue,focus:!0,placeholder:c.formatMessage({defaultMessage:"Type a new optionâ€¦",id:"database.viewSettings.selectOptions.newSelectOption.inputPlaceholder"}),style:{marginTop:2,marginBottom:8},onChange:u,onBlur:m,onSubmit:p,mobileKeyboardOnDismiss:p})}):null}function Vt(e){let{groupIndex:t,inputStore:o,inputGroupIndexStore:r}=e;return(0,xe.jsx)(Qe.Z,{icon:(0,mt.R)({width:14}),focused:!1,title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Add an option",id:"database.viewSettings.selectOptions.noOptions"}),style:{width:"100%"},onClick:()=>Rt(o,r,t)})}var Kt=o(42283),Bt=o(53866);const Dt=(0,j.defineMessages)({statusShowAsLabel:{id:"database.viewSettings.statusOptions.showAs",defaultMessage:"Show as"},statusCheckboxLabel:{id:"database.viewSettings.statusOptions.showAs.checkbox",defaultMessage:"Checkbox"},statusSelectLabel:{id:"database.viewSettings.statusOptions.showAs.select",defaultMessage:"Select"}});function Nt(e){let{collectionContextStore:t,property:o,disabled:r}=e;const n=(0,s.O7)(),i=(0,c.yK)((e=>({icon:{width:16,height:16,fill:e.mediumIconColor}})),[]),[a,p]=(0,l.VK)((()=>{var e;return[Lt(t,o),(null===(e=t.getPropertyFormat(o))||void 0===e?void 0:e.statusShowAs)??"select"]}),[t,o]);if(!a)return null;const d=[{key:"checkbox",title:oe.default.formatMessage(Dt.statusCheckboxLabel),icon:(0,Kt.r)(i.icon)},{key:"select",title:oe.default.formatMessage(Dt.statusSelectLabel),icon:(0,Bt.w)(i.icon)}];return(0,xe.jsx)(Se.Z,{title:oe.default.formatMessage(Dt.statusShowAsLabel),selectedKey:p,popupStyle:{minWidth:190},options:d,onChange:e=>function(e,t,o,r){const n=o.formatStore();if(!n)return;const i=o.getPropertyFormatKey();if(!i)return;A.createAndCommit({userAction:"CollectionSettingsStatusOptions.handleShowAsChange",environment:t,perform:t=>{Z.er({formatStore:n,formatKey:i,property:r,update:{statusShowAs:e,visible:!0},transaction:t})}}),k.$q({environment:t,collectionContextStore:o,property:r,from:"view_settings",action:"status_change_format"})}(e,n,t,o),disabled:r})}function Lt(e,t){const o=e.normalizedSchemaStore.state[t];if(o&&"status"===o.type)return o}function qt(e){let{collectionContextStore:t,property:o,propertySchema:r}=e;const n=(0,s.O7)();return(0,xe.jsx)(Ze.Z,{title:(0,xe.jsx)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Show full URL",id:"database.viewSettings.propertyTab.toggleShowFullUrl"})}),showChevron:!1,right:(0,xe.jsx)($.Z,{on:Boolean(r.show_full_url),onClick:()=>zt(n,t,o,r),disabled:!1,noColor:!1}),onClick:()=>zt(n,t,o,r)})}function zt(e,t,o,r){const n=t.collectionStore();if(!r||!n||"url"!==r.type)return;const i=!Boolean(r.show_full_url);A.createAndCommit({userAction:"CollectionSettingsProperty.handleNumberShowAsChange",environment:e,perform:t=>{N.xO({environment:e,collectionStore:n,update:{[o]:{...r,show_full_url:i}},transaction:t})}}),k.$q({environment:e,collectionContextStore:t,property:o,from:"view_settings",action:i?"url_toggle_show_full_on":"url_toggle_show_full_off"})}Nt.displayName="CollectionSettingsStatusOptions";var Ht=o(23159);class Yt extends i.Z{constructor(){super(...arguments),this.storeTypes={inputStore:p.default.createClass(""),propertyTypeButtonPopupStore:se.Z,showPropertyDescriptionStore:p.default.createClass(!1)},this.handlePropertyTypeClick=()=>{const{collectionSettingsStore:e,collectionContextStore:t}=this.props,o=ro(this.props.collectionContextStore,this.props.property);t.collectionStore()&&I.H4({collectionSettingsStore:e,item:{type:"propertyType",propertySchema:o,onAccept:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyTypeAccept}})},this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyNameSubmit=e=>function(e,t,o,r,n){if(bo(o,r,n))return;const i=Ut(r);if(!i)return;const a=i.getSchema()[o];if(!a)return;if(a.name===e)return;A.createAndCommit({userAction:"CollectionSettingsProperty.handlePropertyNameSubmit",environment:t,perform:t=>{Z.Bv({collectionStore:i,property:o,name:e,transaction:t})}}),k.$q({environment:t,collectionContextStore:r,property:o,from:"view_settings",action:"rename"})}(e,this.environment,this.props.property,this.props.collectionContextStore,this.stores.inputStore),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyDescriptionSubmit=e=>function(e,t,o,r){var n;const i=o.collectionStore(),a=null==i||null===(n=i.getSchema())||void 0===n?void 0:n[r];if(!i||void 0===a||e===a.description)return;A.createAndCommit({userAction:"CollectionSettingsProperty.handleDescriptionChange",environment:t,perform:o=>{N.xO({environment:t,collectionStore:i,update:{[r]:{...a,description:e}},transaction:o})}}),k.$q({environment:t,collectionContextStore:o,property:r,from:"view_properties",action:"set_description"})}(e,this.environment,this.props.collectionContextStore,this.props.property),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handleTogglePropertyWrapClick=()=>Co(this.environment,this.props.collectionContextStore,this.props.formatKey,this.props.property,this.wrapProperty),this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyTypeAccept=e=>function(e,t,o,r,n,i,a){const s=Ut(r);if(!s)return;k.$q({environment:t,collectionContextStore:r,property:o,new_property_type:(0,d.TN)(e),from:"view_settings",action:"change_type"}),"relation"===e?I.H4({collectionSettingsStore:n,item:{type:"selectRelationSource",property:o,formatKey:i}}):(A.createAndCommit({userAction:"CollectionSettingsProperty.handlePropertyTypeAccept",environment:t,perform:r=>{Z.LC({environment:t,collectionStore:s,property:o,type:e,transaction:r})}}),I.z$({collectionSettingsStore:n}),(0,d.XU)(e)&&O.K7({propertyType:e,propertyId:o,collectionContextStore:r}));a.reset()}(e,this.environment,this.props.property,this.props.collectionContextStore,this.props.collectionSettingsStore,this.props.formatKey,this.stores.propertyTypeButtonPopupStore),this.wrapProperty=this.createComputedStore((()=>{var e;const{collectionContextStore:t}=this.props,o=t.collectionViewStore();return!!o&&(Boolean((null===(e=Qt(this.props.property,this.props.formatKey,this.props.collectionContextStore))||void 0===e?void 0:e.wrap)||o.getFormat().table_wrap)&&"timeline"!==o.getType())})),this.disableEditDescription=this.createComputedStore((()=>{var e;const t=null===(e=this.props.collectionContextStore.collectionViewBlockStore())||void 0===e?void 0:e.id;return!!t&&(0,ie.Kj)(t)}))}didMount(){a.default.afterNextFlush((()=>{a.default.afterNextFlush((()=>{!function(e,t,o){const r=t.collectionViewStore();if(!r||"table"!==r.getType())return;const i=ae.Z.findTableHeaderCell(t,e);if(!i)return;const a=i.getNode(),s=n.findDOMNode(o);if(!a||!s)return;const l=(0,ne.xH)(a);if(!l)return;const c=s.getBoundingClientRect(),p=a.getBoundingClientRect().right+20-c.left;l.scrollLeft=l.scrollLeft+p}(this.props.property,this.props.collectionContextStore,this)}))}))}renderComponent(){const{theme:e}=this,{property:t,collectionContextStore:o,selectNameInitial:r,formatKey:n}=this.props,i=ro(o,t),a=Qt(t,n,o);if(!i)return;const s=o.collectionStore(),l="collectionTypedView"===o.contextType,c=s&&s.getDatabaseType(),p=Boolean(c&&s&&s.isTypedProperty(t)),d=this.createComputedStore((()=>Boolean(s&&c&&K.cR((0,V.appConfigs)(),c,t,s)))),y=!(0,u.Kp)(i),h=l,f=l||(0,u.sh)({propertySchema:i,isTypedProperty:p}),S="collectionViewBlock"===o.contextType,x=this.stores.showPropertyDescriptionStore.state,v=i.description;return(0,xe.jsxs)(Ve.ZP,{...this.props,title:s?(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Edit property",id:"database.viewSettings.propertyTab.title"}):(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"View property",id:"database.viewSettings.propertyTab.title.viewProperty"}),footer:(0,xe.jsx)(jo,{collectionContextStore:this.props.collectionContextStore,formatKey:this.props.formatKey,property:this.props.property,collectionSettingsStore:this.props.collectionSettingsStore,wrapPropertyStore:this.wrapProperty,propertySchema:i,propertyFormat:a,isRequiredTypedProperty:d.state,databaseType:c}),unconstrainedWidth:S,children:[(0,xe.jsxs)(U.Z,{children:[(0,xe.jsx)(Ke.I,{disabled:h,initialValue:i.name||"",placeholder:oe.default.formatMessage(dt.Z.inputPlaceholder),onBlur:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyNameSubmit,onSubmit:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyNameSubmit,focusInitial:r,selectAll:r,inputStore:this.stores.inputStore,inputOuterStyle:S?{background:e.contentBackground}:void 0,iconButton:{icon:t=>(0,xe.jsx)(m.ZP,{type:i.type,icon:i.icon,size:16,theme:e,style:t}),iconStyle:{fill:g.Lr[e.mode].gray},enforceIconColor:"gray",onSubmit:e=>function(e,t,o,r){const n=Ut(o);if(!n)return;A.createAndCommit({userAction:"CollectionSettingsProperty.handlePropertyIconSubmit",environment:e,perform:e=>{Z.OK({collectionStore:n,property:t,icon:r,transaction:e})}}),k.$q({environment:e,collectionContextStore:o,property:t,icon:r,from:"view_settings",action:"change_icon"})}(this.environment,this.props.property,this.props.collectionContextStore,e)},inputRightButton:this.disableEditDescription.state?null:(0,xe.jsx)(ue.l,{description:v,showTooltip:!x,onClick:()=>{this.stores.showPropertyDescriptionStore.setState(!x)},addDescriptionText:this.props.intl.formatMessage(J.aB.addPropertyDescriptionTooltip),editDescriptionText:this.props.intl.formatMessage(J.aB.editPropertyDescriptionTooltip)})}),bo(this.props.property,this.props.collectionContextStore,this.stores.inputStore)&&(0,xe.jsx)(Ht.Z,{propertyName:this.stores.inputStore.state})]}),x&&(0,xe.jsx)(me.i,{initialDescription:v,handleSaveDescription:this.CLASS_COMPONENT_CONVERSION_DO_NOT_TOUCH_handlePropertyDescriptionSubmit}),(0,xe.jsxs)(U.Z,{children:[y&&this.renderPropertyTypeMenuItem(f,p,c),l?(0,xe.jsxs)(xe.Fragment,{children:["status"===i.type&&(0,xe.jsx)(Jt,{collectionSettingsStore:this.props.collectionSettingsStore,collectionContextStore:this.props.collectionContextStore,property:this.props.property}),("date"===i.type||"created_time"===i.type||"last_edited_time"===i.type)&&(0,xe.jsx)(to,{collectionContextStore:this.props.collectionContextStore,property:this.props.property})]}):(0,xe.jsx)(wo,{collectionContextStore:this.props.collectionContextStore,property:this.props.property,propertySchema:i})]})]})}renderPropertyTypeMenuItem(e,t,o){const{propertyTypeButtonPopupStore:r}=this.stores,n=this.props.collectionContextStore.collectionViewBlockStore(),i=ro(this.props.collectionContextStore,this.props.property),a=(0,ut.M)(n,i);if(!i)return;const s=null==a?void 0:a.getIcon(),{theme:l}=this,c=(0,u.gg)(i)||(0,u.ic)(i);return(0,xe.jsx)(G.ZP,{placement:G.ug.Left,disableTooltip:!e,renderTooltip:e=>t?(0,xe.jsx)(j.FormattedMessage,{...e,defaultMessage:"{type} type is required for this property in {databaseType}.",id:"database.viewSettings.propertyTab.restrictedProperty",description:"A tooltip to educate the users on why they can't change the type of this property.",values:{type:X.SO[i.type],databaseType:(0,B.Mn)(o)}}):(0,xe.jsx)(j.FormattedMessage,{...e,defaultMessage:"{type}'s type cannot be changed.",id:"database.viewSettings.propertyTab.untypedRestrictedProperty",description:"A tooltip to educate the users on why they can't change the type of this property.",values:{type:X.SO[i.type]}}),render:t=>(0,xe.jsx)(Ze.Z,{...t,disabled:e,rotateChevron:r.state.open,title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Type",id:"database.viewSettings.propertyTab.propertyType"}),showChevron:!0,right:(0,xe.jsxs)(xe.Fragment,{children:[e?(0,xe.jsx)("div",{...t,children:(0,x.Q)({width:14,fill:l.regularIconColor})}):(0,xe.jsx)(m.ZP,{type:i.type,icon:void 0,size:16,theme:l}),(0,xe.jsx)(W.Z,{size:4}),c?(0,xe.jsxs)("div",{style:{color:e?l.darkTextColor:void 0,display:"flex",alignItems:"center"},children:[(0,xe.jsx)(Y.Z,{icon:s,isEmptyPage:!1,size:20,disabled:!0}),(0,xe.jsx)(E.Z,{store:a,style:{display:"inline",wordBreak:"break-word",..._.Z.textOverflowStyle}})]}):(0,xe.jsx)("span",{style:{color:e?l.darkTextColor:void 0},children:X.SO[i.type]})]}),onClick:this.handlePropertyTypeClick})})}}Yt.displayName="CollectionSettingsProperty";const Et=(0,j.injectIntl)(Yt);function Ut(e){if(e.collectionViewBlockStore())return e.collectionStore()}function Wt(e,t){if(!e)return[];return t.normalizedFormatStore.state[e]||[]}function $t(e){const t=e.getViewType();if(!t)throw new Error("View type was not defined.");return t}function Gt(e){const t=Ut(e);return t?t.getSchema():e.normalizedSchemaStore.state||{}}function Qt(e,t,o){const r=Wt(t,o);return null==r?void 0:r.find((t=>t.property===e))}function Xt(e,t,o){const r=Wt(t,o);if(0===r.length)return-1;return r.filter((e=>e.visible)).findIndex((t=>t.property===e))}function Jt(e){let{collectionSettingsStore:t,collectionContextStore:o,property:r}=e;const n=(0,l.VK)((()=>{var e;return K.Hw(null===(e=o.collectionStore())||void 0===e?void 0:e.getDatabaseType(),o.normalizedSchemaStore.state,r)}),[o,r]);return(0,xe.jsxs)(xe.Fragment,{children:[n?null:(0,xe.jsx)(Nt,{collectionContextStore:o,property:r,disabled:n}),(0,xe.jsx)(Pt,{collectionSettingsStore:t,collectionContextStore:o,property:r,disabled:n,aIAutofillOption:null})]})}function eo(e){let{collectionContextStore:t,collectionSettingsStore:o,property:r}=e;return(0,xe.jsx)(Oe,{collectionContextStore:t,collectionSettingsStore:o,property:r})}function to(e){let{collectionContextStore:t,property:o}=e;return(0,xe.jsx)(ve,{collectionContextStore:t,property:o})}function oo(e){let{collectionContextStore:t,property:o}=e;return(0,l.VK)((()=>{const e=t.normalizedSchemaStore.state[o];return(0,u.Kp)(e)}),[t,o])?(0,xe.jsx)(Re.Z,{collectionContextStore:t,property:o}):(0,xe.jsx)(ut.Z,{collectionContextStore:t,property:o})}function ro(e,t){return Gt(e)[t]}function no(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>ro(t,o)),[t,o]);return r&&("number"===r.type||"formula"===r.type||"rollup"===r.type)?(0,xe.jsx)(lt,{collectionContextStore:t,property:o}):null}function io(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>le.default.checkGate("collections_shorten_url")),[]),n=(0,l.VK)((()=>ro(t,o)),[t,o]),i=(0,l.VK)((()=>Ut(t)),[t]);return r&&n&&"url"===n.type&&i?(0,xe.jsx)(qt,{collectionContextStore:t,property:o,propertySchema:n}):null}function ao(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>ro(t,o)),[t,o]);return r&&"person"===r.type?(0,xe.jsx)(we,{collectionContextStore:t,propertySchema:r,property:o}):null}function so(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>ro(t,o)),[t,o]);return r&&"button"===r.type?(0,xe.jsx)(P.f,{collectionContextStore:t,propertySchema:r,propertyId:o}):null}function lo(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>ro(t,o)),[t,o]);return r?(0,xe.jsx)(Ae.C,{collectionContextStore:t,propertySchema:r,property:o}):null}function co(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>ro(t,o)),[t,o]),n=(0,l.VK)((()=>{var e;const o=null===(e=t.collectionStore())||void 0===e?void 0:e.getRecordKeyStore();return null==o?void 0:o.getRecordKey()}),[t]);return r&&"auto_increment_id"===r.type?(0,xe.jsx)(ge.Z,{uniqueIdProperty:{propertyId:o,propertySchema:r},prefixValue:n,collectionContextStore:t}):null}function po(e){let{collectionContextStore:t,property:o}=e;return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(lo,{collectionContextStore:t,property:o}),(0,xe.jsx)(ao,{collectionContextStore:t,property:o})]})}function uo(e){const{environment:t,property:o,propertySchema:n,collectionSettingsStore:i,collectionStore:a}=e,s=(0,l.VK)((()=>(0,d.q3)(n)),[n]),c=(0,l.VK)((()=>(0,te.mX)(t,ce.Z.getMode(t,a),a)),[t,a]),p=(0,r.useMemo)((()=>{const e=n.name.trim(),t=X.SO[n.type],o=new RegExp(`${t}(?:\\s?\\d+)?`);return!e||o.test(e)}),[n.name,n.type]),u=(0,r.useCallback)((()=>{if(!a||!n||!(0,d.cu)(n))return;const e=(0,d.xo)(n);if(!e)return;const r=[];if(s)T._e(t,{type:"remove_ai_inference",ai_inference_type:s.type,collection_id:a.id}),r.push({pointer:a.pointer,command:"set",path:["schema",o,e],args:void 0});else{const i={type:n.type,auto_update_on_edit:!1,add_options:!1};T._e(t,{type:"set_ai_inference",ai_inference_type:i.type,collection_id:a.id}),r.push({pointer:a.pointer,command:"set",path:["schema",o,e],args:i})}N.HW({environment:t,collectionStore:a,performTransaction:e=>{for(const t of r)A.applyOperation({store:(0,pe.Kv)(a,t.pointer),operation:t,transaction:e})}})}),[s,a,t,o,n]),m=(0,r.useCallback)((e=>{if(!n||!a||!(0,d.qQ)(n))return;const r=(0,d.xo)(n);if(!r)return;const i={pointer:a.pointer,command:"set",path:["schema",o,r],args:e};N.HW({environment:t,collectionStore:a,performTransaction:e=>{A.applyOperation({store:(0,pe.Kv)(a,i.pointer),operation:i,transaction:e})}})}),[a,t,o,n]);return(0,l.VK)((()=>c&&(0,te.KZ)()),[c])?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Tt,{disabled:!0,overrideStyle:{marginTop:6,paddingTop:6}},"aiSectionHeader"),(0,xe.jsx)(G.ZP,{disableTooltip:!p,placement:G.ug.Left,renderTooltip:e=>(0,xe.jsx)(j.FormattedMessage,{...e,defaultMessage:"Update the property name to use AI Autofill",id:"database.collectionsettings.autofilloptions.disableswitch.tooltip",description:"User needs to change the property name from the default name to turn on autofill"}),render:e=>(0,xe.jsx)(Ze.Z,{...e,title:(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"AI Autofill",id:"database.viewSettings.propertyTab.aiAutofill.open"}),(0,xe.jsx)(H.Z,{style:{display:"inline-block"}})]}),showChevron:!1,right:(0,xe.jsx)($.Z,{on:Boolean(s),onClick:u,disabled:!c||p,noColor:!1}),onClick:u,disabled:!c||p}),style:{whiteSpace:"break-spaces"}}),s&&!p&&("select"===s.type||"multi_select"===s.type)&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(z.Z,{setAiInference:m,aiInference:s,disabled:!c}),(0,xe.jsx)(Ze.Z,{title:(0,xe.jsxs)("div",{style:{display:"flex",alignItems:"center",lineHeight:1.2,color:w.ZP.uiGray},children:[(0,xe.jsx)(j.FormattedMessage,{id:"database.collectionsettings.aiAutofillOptions.more",defaultMessage:"More"}),(0,y.o)({fill:w.ZP.uiGray,width:12,height:12,marginLeft:4})]}),disabled:!1,onClick:()=>{I.H4({collectionSettingsStore:i,item:{type:"propertyAiAutofill",propertySchema:n,property:o}})}})]})]}):null}function mo(e){const{environment:t,property:o,propertySchema:r,collectionContextStore:n,collectionStore:i}=e,a=(0,l.VK)((()=>{var e;const t=(null===(e=de.subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,C.de)(t)}),[]),s=(0,l.VK)((()=>{const e=n.collectionStore();return e&&(0,te.mX)(t,ce.Z.getMode(t,e),e)}),[t,n]);return(0,l.VK)((()=>(0,d.cu)(r)&&(0,te.KZ)()&&r.select_ai_inference),[r])?(0,xe.jsx)(q.TB,{environment:t,collectionContextStore:n,collectionStore:i,property:o,propertySchema:r,doesUserHaveAIAddOn:a,isAutofillSetupEnabled:Boolean(s)}):null}function go(e){let{propertySchema:t,collectionSettingsStore:o,collectionContextStore:r,property:n}=e;const i=(0,s.O7)(),a=(0,l.VK)((()=>r.collectionStore()),[r]);return a?(0,xe.jsx)(Pt,{collectionSettingsStore:o,collectionContextStore:r,property:n,disabled:!1,aIAutofillOption:(0,xe.jsx)(uo,{environment:i,collectionStore:a,collectionSettingsStore:o,property:n,propertySchema:t})}):null}function yo(e){let{collectionContextStore:t,property:o}=e;const r=(0,l.VK)((()=>t.normalizedSchemaStore.state),[t])[o];let n;return n=(0,u.Kp)(r)?(0,xe.jsx)(Fe.Z,{href:(0,re.UY)("guides.githubRelation"),title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Learn about GitHub Pull Requests",id:"database.viewSettings.propertyTab.githubPrRelation.learnMoreButton.title"}),analyticsFrom:"view_settings_property_github_pr_relation"}):(0,xe.jsx)(Fe.Z,{href:(0,re.UY)("guides.relations"),title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Learn about relations",id:"database.viewSettings.propertyTab.relations.learnMoreButton.title"}),analyticsFrom:"view_settings_property_relation"}),(0,xe.jsx)(U.Z,{topBorder:!0,children:n})}function ho(e,t,o,r){const n=Qt(r,o,t),i=t.collectionViewStore(),a=t.normalizedFormatStore.state,s=ro(t,r);if(!s)return;if(!(n&&i&&o&&s))return;const l=Wt(o,t).map((e=>e.property===n.property?{...n,visible:!n.visible}:e)),c={...a,[o]:l};A.createAndCommit({userAction:"CollectionSettingsProperty.handleToggleVisibilityClick",environment:e,perform:a=>{N.iG({collectionViewStore:i,update:{format:c},transaction:a});const s=Xt(r,o,t);F.oz({environment:e,collectionContextStore:t,currentIndex:s,entrypoint:"CollectionSettingsProperty",transaction:a,propertyAction:n.visible?"hide":"show"})}}),k.wd({environment:e,collectionContextStore:t,action:"toggle_property_visibility",original_view_type:i.getType(),property_type:s.type})}async function fo(e,t,o,r,n,i){await Z.TI({environment:e,collectionContextStore:o,property:r,handleDeleteAccept:()=>function(e,t,o,r,n){const i=ro(o,t),a=Gt(o),s=Ut(o);i&&(s&&A.createAndCommitAsync({environment:e,userAction:"CollectionSettingsProperty.handleDeleteAccept",waitForServerCommit:!1,perform:async r=>{await Z.yV({environment:e,collectionStore:s,schema:a,property:t,transaction:r});const i=Xt(t,n,o);F.oz({environment:e,collectionContextStore:o,currentIndex:i,entrypoint:"CollectionSettingsProperty",transaction:r,propertyAction:"delete"})}}),I.z$({collectionSettingsStore:r}),k.wd({environment:e,collectionContextStore:o,action:"delete_property",property_type:null==i?void 0:i.type}),k.y9({environment:e,collectionContextStore:o,property_type:i.type,from:"view_settings",property:t}))}(e,r,o,n,i),theme:t,from:"view_settings"})}function So(e){let{collectionContextStore:t,property:o,collectionSettingsStore:r}=e;const n=(0,l.VK)((()=>ro(t,o)),[t,o]);if(!n||"text"!==n.type)return null;const i=(0,d.q3)(n);let a;return i&&(0,d.MD)(i.type)?"summarize"===i.type?a=ee.Dr.autofillSummary:"extract"===i.type?a=ee.Dr.autofillExtract:"custom"===i.type?a=ee.Dr.autofillCustom:"translate"===i.type?a=ee.Dr.autofillTranslate:(0,M.t1)(i):a=dt.Z.autofillOffLabel,(0,xe.jsx)(Ze.Z,{title:(0,xe.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"AI Autofill",id:"database.viewSettings.propertyTab.aiAutofill.open"}),(0,xe.jsx)(H.Z,{style:{display:"inline-block"}})]}),showChevron:!0,right:oe.default.formatMessage(a),onClick:()=>function(e,t,o){const r=ro(t,o);t.collectionStore()&&r&&I.H4({collectionSettingsStore:e,item:{type:"propertyAiAutofill",propertySchema:r,property:o}})}(r,t,o)})}function xo(e){let{property:t,collectionContextStore:o}=e;const r=(0,s.O7)(),n=(0,l.VK)((()=>Ut(o)),[o]),i=(0,l.VK)((()=>Gt(o)),[o]),a=(0,l.VK)((()=>Boolean((null==n?void 0:n.getDatabaseType())&&(null==n?void 0:n.isTypedProperty(t)))),[n,t]);return n?(0,xe.jsx)(Q.Z,{disabled:a,context:Q.t.ViewSettings,property:t,schema:i,analyticsFrom:"view_settings",parentStore:n,onChange:e=>function(e,t,o,r){const n=Ut(r);n&&A.createAndCommit({userAction:"CollectionSettingsProperty.handleRollupPropertyMenuChange",environment:t,perform:r=>{N.xO({environment:t,collectionStore:n,update:{[o]:e.propertySchema},transaction:r})}})}(e,r,t,o)}):null}function vo(e){let{isRequiredTypedProperty:t,databaseType:o,collectionContextStore:r,property:n,collectionSettingsStore:i,formatKey:a}=e;const l=(0,c.Fg)(),p=(0,s.O7)();return(0,xe.jsx)(G.ZP,{disableTooltip:!t,placement:G.ug.Left,renderTooltip:e=>(0,B.A7)(o,e),render:e=>(0,xe.jsx)(Ze.Z,{...e,isRed:!0,disabled:t,onClick:()=>fo(p,l,r,n,i,a),icon:()=>t?(0,xe.jsx)("div",{...e,style:{display:"inline-flex"},children:(0,x.Q)({width:14,marginLeft:4,marginRight:4})}):(0,v.y)({width:14,marginLeft:4,marginRight:4}),title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Delete property",id:"database.viewSettings.propertyTab.deleteButton.title"}),caption:p.device.isMobile&&t?(0,B.A7)(o):null})})}function bo(e,t,o){const r=Gt(t),n=o.state,i=Object.keys(r).find((t=>{var o;return t!==e&&(null===(o=r[t])||void 0===o?void 0:o.name)===n}));return Boolean(i)}function Co(e,t,o,r,n){const i=Qt(r,o,t),a=t.collectionViewStore(),s=t.normalizedFormatStore.state,l=ro(t,r);l&&i&&a&&o&&l&&(F.K4({currentValue:n.state,environment:e,property:r,collectionViewStore:a,format:s,formatKey:o}),k.wd({environment:e,collectionContextStore:t,action:"toggle_property_wrap",original_view_type:a.getType(),property_type:l.type}))}function jo(e){let{propertySchema:t,propertyFormat:o,isRequiredTypedProperty:n,databaseType:i,collectionContextStore:a,formatKey:c,property:p,collectionSettingsStore:u,wrapPropertyStore:m}=e;const g=(0,s.O7)(),y=(0,r.useCallback)((()=>Co(g,a,c,p,m)),[g,a,c,p,m]),x=(0,l.VK)((()=>a.collectionStore()),[a]),v=(0,l.VK)((()=>c&&("title"!==p||(0,L.XO)({viewType:$t(a),format:a.normalizedFormatStore.state}))),[c,p,a]),C=(0,l.VK)((()=>c&&(0,L.w0)({viewType:$t(a),property:p})),[c,p,a]),w=X.Tr.includes(t.type)&&!(0,d.dx)(t)&&x,_=X.Tr.includes(t.type)&&x,P=(0,l.VK)((()=>m.state),[m]);return(0,xe.jsxs)(xe.Fragment,{children:[C&&o&&(0,xe.jsx)(U.Z,{topBorder:!0,children:(0,xe.jsx)(Ze.Z,{isPadded:!0,title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Wrap in view",id:"database.viewSettings.propertyTab.wrapInViewButton.title"}),right:(0,xe.jsx)($.Z,{disallowTabbing:!0,on:P,onClick:y}),onClick:y})}),(v||w||_)&&(0,xe.jsxs)(U.Z,{topBorder:!0,children:[x&&(0,xe.jsx)(mo,{environment:g,collectionStore:x,collectionContextStore:a,property:p,propertySchema:t}),v&&o&&(null!=o&&o.visible?(0,xe.jsx)(Ze.Z,{icon:f.L,isPadded:!0,title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Hide in view",id:"database.viewSettings.propertyTab.hideInViewButton.title"}),onClick:()=>ho(g,a,c,p)}):(0,xe.jsx)(Ze.Z,{icon:S.N,isPadded:!0,title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Show in view",id:"database.viewSettings.propertyTab.showInViewButton.title"}),onClick:()=>ho(g,a,c,p)})),w&&(0,xe.jsx)(Ze.Z,{icon:h.a,title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Duplicate property",id:"database.viewSettings.propertyTab.duplicateButton.title"}),onClick:()=>async function(e,t,o,r,n){const i=Wt(n,o),a=Gt(o),s=Ut(o),l=o.collectionViewStore(),c=null==s?void 0:s.getSpaceId();if(!s||!l||!c)return;const p=ro(o,t);if(!p)return;const d=await(0,L.xy)({schema:a,property:t,properties:i,parentStore:s,spaceId:c});if(!d)return;const u=e.currentUser.id,m=u?{id:u,table:b.KJ}:void 0;A.createAndCommit({userAction:"CollectionSettingsProperty.handleDuplicateClick",environment:e,perform:r=>{(0,M.$K)(d.automationUpdate)&&D.duplicateAutomation({actorPointer:m,environment:e,sourceAutomationStore:d.automationUpdate.sourceAutomationStore,targetAutomationId:d.automationUpdate.targetAutomationId,transaction:r}),N.xO({environment:e,collectionStore:s,update:{[d.newProperty]:d.newPropertySchema},transaction:r});const i=Xt(t,n,o);F.oz({environment:e,collectionContextStore:o,currentIndex:i,entrypoint:"CollectionSettingsProperty",transaction:r,propertyAction:"duplicate"}),n&&R.FH({stores:[l],update:{[n]:d.newProperties},transaction:r})}}),I.FK({collectionSettingsStore:r,item:{type:"property",property:d.newProperty,formatKey:n}}),k.wd({environment:e,collectionContextStore:o,action:"duplicate_property",original_view_type:null==l?void 0:l.getType(),property_type:p.type})}(g,p,a,u,c)}),_&&(0,xe.jsx)(vo,{collectionContextStore:a,property:p,collectionSettingsStore:u,formatKey:c,isRequiredTypedProperty:n,databaseType:i})]}),"formula"===t.type&&(0,xe.jsx)(U.Z,{topBorder:!0,children:(0,xe.jsx)(Fe.Z,{href:(0,re.UY)("guides.formulas"),title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Learn about formulas",id:"database.viewSettings.propertyTab.formulas.learnMoreButton.title"}),analyticsFrom:"view_settings_property_formula"})}),"relation"===t.type&&(0,xe.jsx)(yo,{collectionContextStore:a,property:p}),"rollup"===t.type&&(0,xe.jsx)(U.Z,{topBorder:!0,children:(0,xe.jsx)(Fe.Z,{href:(0,re.UY)("guides.relations"),title:(0,xe.jsx)(j.FormattedMessage,{defaultMessage:"Learn about rollups",id:"database.viewSettings.propertyTab.rollups.learnMoreButton.title"}),analyticsFrom:"view_settings_property_relation"})})]})}function wo(e){let{property:t,propertySchema:o,collectionContextStore:r}=e;const n=(0,s.O7)(),i=r.settingsStore,a=(0,l.VK)((()=>(0,te.Zt)(n)),[n]);return(0,xe.jsxs)(xe.Fragment,{children:[a&&"text"===o.type&&(0,xe.jsx)(So,{collectionContextStore:r,property:t,collectionSettingsStore:i}),(0,d.cu)(o)&&(0,xe.jsx)(go,{collectionSettingsStore:i,collectionContextStore:r,property:t,propertySchema:o}),"status"===o.type&&(0,xe.jsx)(Jt,{collectionSettingsStore:i,collectionContextStore:r,property:t}),"formula"===o.type&&(0,xe.jsx)(eo,{collectionContextStore:r,collectionSettingsStore:i,property:t}),"rollup"===o.type&&(0,xe.jsx)(xo,{property:t,collectionContextStore:r}),("date"===o.type||"created_time"===o.type||"last_edited_time"===o.type)&&(0,xe.jsx)(to,{collectionContextStore:r,property:t}),"relation"===o.type&&(0,xe.jsx)(oo,{collectionContextStore:r,property:t}),"person"===o.type&&(0,xe.jsx)(po,{collectionContextStore:r,property:t}),(0,xe.jsx)(no,{collectionContextStore:r,property:t}),(0,xe.jsx)(io,{collectionContextStore:r,property:t}),"auto_increment_id"===o.type&&(0,xe.jsx)(co,{collectionContextStore:r,property:t}),"button"===o.type&&(0,xe.jsx)(so,{collectionContextStore:r,property:t})]})}},49579:(e,t,o)=>{o.d(t,{M:()=>x,Z:()=>S});var r=o(67294),n=o(480),i=o(86628),a=o(99036),s=o(80951),l=o(9291),c=o(8406),p=o(31869),d=o(13447),u=o(29376),m=o(6258),g=o(57842),y=o(71268),h=o(34532),f=o(85893);function S(e){const{collectionContextStore:t,property:o}=e,m=(0,n.O7)(),S=(0,l.useIntl)(),[v,b]=(0,r.useState)(void 0),C=(0,i.VK)((()=>t.collectionStore()),[t]),j=(0,i.VK)((()=>t.normalizedSchemaStore.state),[t]),w=(0,i.VK)((()=>u.KV(t,o)),[t,o]),M=w&&(0,a.NK)(w)?w.connectedRelation:void 0,_=(0,i.VK)((()=>x(t.collectionViewBlockStore(),w)),[t,w]),P=Boolean(_&&(null==C?void 0:C.id)===_.id),T=(0,i.VK)((()=>Boolean(_&&(null==w?void 0:w.name)===u.m8(S,{targetCollectionStore:_,isSelfRelation:P,sourceSchema:j,createUnique:!1}))),[w,S,_,P,j]),k=(0,i.VK)((()=>t.contextType),[t]),Z=(0,r.useCallback)((()=>{if(!v)return;const{hasInverseRelation:e,inverseName:r,autoRelate:n}=v;d.createAndCommit({userAction:"CollectionSettingsRelationOptions.handleEditRelation",environment:m,perform:i=>{p.gy({environment:m,collectionContextStore:t,property:o,hasInverseRelation:e,inverseName:r,autoRelate:n,intl:S,transaction:i})}}),c.$q({environment:m,collectionContextStore:t,property:o,from:"collectionPage"===k?"page_properties":"view_settings",action:"relation_edit",is_self_relation:P,has_inverse:e,auto_relate:null==n?void 0:n.enabled}),b(void 0)}),[v,m,t,o,k,P,S]);if(!_)return null;const I=w&&!(0,s.gg)(w)&&!(0,s.ic)(w);return(0,f.jsxs)(f.Fragment,{children:[I&&(0,f.jsx)(h.Z,{isSelfRelation:P,collectionStore:_,showAs:"link",disabled:!0}),I&&(0,f.jsx)(y.C,{collectionContextStore:t,propertySchema:w,property:o}),!Boolean(M)&&(0,f.jsx)(g.Z,{collectionContextStore:t,targetCollectionStore:_,property:o,buttonContents:(0,f.jsx)(l.FormattedMessage,{defaultMessage:"Update relation",id:"database.viewSettings.editRelation.updateButton.title"}),temporaryInverseState:v,setTemporaryInverseState:b,isInitialPropertyName:T,onSubmit:Z})]})}function x(e,t){if("relation"!==(null==t?void 0:t.type))return;const o=null==t?void 0:t.collection_pointer;return o&&e?m.NW.createChildStore(e,o):void 0}},34532:(e,t,o)=>{o.d(t,{Z:()=>y});o(67294);var r=o(480),n=o(86628),i=o(24405),a=o(15145),s=o(9291),l=o(37810),c=o(84076),p=o(31278),d=o(76798),u=o(84210),m=o(94166),g=o(85893);function y(e){const{isSelfRelation:t,collectionStore:o,showAs:y,disabled:h,onClick:f}=e,S=(0,n.VK)((()=>Boolean(o)),[o]),x=(0,n.VK)((()=>null==o?void 0:o.getIcon()),[o]),v=(0,n.VK)((()=>{if(t)return;const e=null==o?void 0:o.getParentBlockStore();return e&&(0,u.ZP)({store:e,pageVisitSource:a.tY.LinkInPage})}),[o,t]),b=(0,r.Fy)(),C=(0,i.yK)((e=>({linkBox:{display:"flex",alignItems:"center"},linkTitle:{color:e.regularTextColor,fontWeight:l.Z.fontWeight.semibold,fontSize:14,marginLeft:4*(b.isRetina?.5:1),wordBreak:"break-word",...l.Z.textOverflowStyle},chevronTitle:{display:"inline",wordBreak:"break-word",...l.Z.textOverflowStyle}})),[b]),j=(0,g.jsx)(p.Z,{icon:x,isEmptyPage:!1,size:20,disabled:!0});return(0,g.jsx)(m.Z,{title:(0,g.jsx)(s.FormattedMessage,{defaultMessage:"Related to",id:"database.viewSettings.editRelation.targetLink.title"}),showChevron:"chevron"===y,onClick:f,disabled:h,right:t?(0,g.jsx)(s.FormattedMessage,{defaultMessage:"This database",id:"database.viewSettings.editRelation.selfRelationTarget.title"}):"link"===y&&v?(0,g.jsxs)(c.Z,{href:v,innerStyle:C.linkBox,children:[j,(0,g.jsx)(d.Z,{store:o,underline:!0,style:C.linkTitle,maxLength:15})]}):S?(0,g.jsxs)(g.Fragment,{children:[j,(0,g.jsx)(d.Z,{store:o,style:C.chevronTitle})]}):(0,g.jsx)(s.FormattedMessage,{defaultMessage:"No target",id:"database.viewSettings.editRelation.noTarget.title"}),rightStyle:{flexShrink:1},textWrapperStyle:{flexShrink:0}})}},18145:(e,t,o)=>{o.d(t,{Z:()=>A,t:()=>F});var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(2032),l=o(99036),c=o(42853),p=o(9291),d=o(53965),u=o(36610),m=o(94166),g=o(66890),y=o(16187),h=o(75079),f=o(60709),S=o(98742),x=o(61766),v=o(6258),b=o(52275),C=o(31945),j=o(78140),w=o(32163),M=o(40721),_=o(53437),P=o(72495),T=o(26388),k=o(97820),Z=o(3072),I=o(69872),O=o(77498),R=o(85893);let F=function(e){return e[e.BlockPropertyOverlay=0]="BlockPropertyOverlay",e[e.ViewSettings=1]="ViewSettings",e}({});const A=function(e){let{context:t,schema:o,property:r,parentStore:s,onDismiss:l,disabled:c,analyticsFrom:u,onChange:g}=e;const y=(0,a.Fg)(),h=(0,n.O7)(),v=(0,i.qz)(void 0,x.Z),b=(0,i.qz)(void 0,x.Z),P=(0,i.qz)(void 0,x.Z),Z=(0,n.Fy)(),I=(0,i.VK)((()=>V(o,r,s)),[o,r,s]),O=Boolean(null==I?void 0:I.propertySchema.relation_property),A=Boolean((null==I?void 0:I.propertySchema.relation_property)&&(null==I?void 0:I.propertySchema.target_property)),N=(0,i.VK)((()=>d.oA([E(h,y,c,o,r,s,u,P,g),U(O,h,y,c,o,r,s,u,b,g),W(A,h,y,c,o,r,s,u,v,g)])),[O,A,h,y,c,o,r,s,u,g,v,P,b]),L=(0,i.VK)((()=>v.state.open),[v]),q=(0,i.VK)((()=>P.state.open),[P]),$=(0,i.VK)((()=>b.state.open),[b]);if(!I)return null;if(t===F.BlockPropertyOverlay){let e;return e=Z.isMobile?{menuType:f.og.Modal,title:I.propertySchema.name,right:(0,R.jsx)(M.DoneMenuText,{}),onClickRight:l}:{menuType:f.og.Popup},(0,R.jsx)(j.Z,{...e,children:(0,R.jsx)(w.Z,{type:w.i.Vertical,initialFocus:void 0,sections:N})})}return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(C.ZP,{popupType:Z.isMobile?_.kQ.SlideUp:_.kQ.Popup,alignmentToOrigin:C.vR.End,renderOrigin:e=>(0,R.jsx)(m.Z,{title:(0,R.jsx)(p.FormattedMessage,{defaultMessage:"Relation",id:"database.viewSettings.rollupOptions.relationProperty"}),disabled:c,showChevron:!0,rotateChevron:q,right:I.relationPropertySchema?(0,R.jsx)(k.Z,{propertySchema:I.relationPropertySchema,showIcon:!0}):(0,R.jsx)(p.FormattedMessage,{id:"database.viewSettings.rollupOptions.selectRelation",defaultMessage:"Select"}),...e}),render:e=>(0,R.jsx)(z,{parent:e,analyticsFrom:u,schema:o,property:r,parentStore:s,onChange:g}),buttonPopupStore:P}),(0,R.jsx)(T.ZP,{renderTooltip:()=>(0,R.jsx)(B,{}),disableTooltip:O,render:e=>(0,R.jsx)(C.ZP,{popupType:Z.isMobile?_.kQ.SlideUp:_.kQ.Popup,alignmentToOrigin:C.vR.End,renderOrigin:t=>(0,R.jsx)(m.Z,{title:(0,R.jsx)("span",{style:{...!A&&{color:y.mediumTextColor}},children:(0,R.jsx)(p.FormattedMessage,{defaultMessage:"Property",id:"database.viewSettings.rollupOptions.targetProperty"})}),disabled:!O||c,showChevron:!0,rotateChevron:$,right:O&&(I.targetPropertySchema?(0,R.jsx)(k.Z,{propertySchema:I.targetPropertySchema,showIcon:!0}):(0,R.jsx)(p.FormattedMessage,{id:"database.viewSettings.rollupOptions.selectTargetProperty",defaultMessage:"Select"})),...(0,S.Z)(e,t)}),render:e=>(0,R.jsx)(H,{parent:e,analyticsFrom:u,schema:o,property:r,parentStore:s,onChange:g}),buttonPopupStore:b})}),(0,R.jsx)(T.ZP,{renderTooltip:()=>(0,R.jsx)(D,{}),disableTooltip:A,render:e=>(0,R.jsx)(C.ZP,{popupType:Z.isMobile?_.kQ.SlideUp:_.kQ.Popup,alignmentToOrigin:C.vR.End,renderOrigin:t=>(0,R.jsx)(m.Z,{disabled:!A||c,title:(0,R.jsx)("span",{style:{...!A&&{color:y.mediumTextColor}},children:(0,R.jsx)(p.FormattedMessage,{defaultMessage:"Calculate",id:"database.viewSettings.rollupOptions.calculate"})}),showChevron:!0,rotateChevron:L,right:A&&(0,R.jsx)(K,{schema:o,property:r,parentStore:s}),...(0,S.Z)(e,t)}),render:e=>(0,R.jsx)(Y,{parent:e,analyticsFrom:u,schema:o,property:r,parentStore:s,onChange:g}),buttonPopupStore:v})})]})};function V(e,t,o){var r;const n=e[t];if(!n)return;let i,a;if(n.relation_property){const t=e[n.relation_property];t&&"relation"===t.type&&(i=t)}if(i){const e=l.j0(i);a=e?v.NW.createChildStore(o,e):void 0}const s=null===(r=a)||void 0===r?void 0:r.getValue(),c=s?l.oC(s):{};let p;if(s&&n.target_property){var d;p=c[(null===(d=a)||void 0===d?void 0:d.getMappedProperty(n.target_property))??n.target_property]}return{propertySchema:n,relationPropertySchema:i,relatedCollectionValue:s,relatedCollectionSchema:c,targetPropertySchema:p}}function K(e){let{schema:t,property:o,parentStore:r}=e;const n=(0,i.VK)((()=>V(t,o,r)),[r,o,t]);return n?n.propertySchema.aggregation?(0,R.jsx)(R.Fragment,{children:y.VN[(0,s.gu)(n.propertySchema.aggregation)]}):(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.aggregate.showOriginal",defaultMessage:"Show original"}):null}function B(){return(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editProperty.tooltip",defaultMessage:"Select an existing relation first."})}function D(){return(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editAggregate.tooltip",defaultMessage:"Select an existing relation and property first."})}function N(e,t){return e?void 0:(0,c.i)({width:11,fill:t.mediumIconColor})}function L(e){return"relation"===e.type}function q(e){return"rollup"!==e.type&&!l.Eu.includes(e.type)}function z(e){let{parent:t,analyticsFrom:o,schema:i,property:a,parentStore:s,onChange:l}=e;const c=(0,n.O7)(),p=(0,g.Y$)(),d=(0,r.useCallback)((e=>function(e,t,o,r,n,i,a,s){const l=V(r,n,i);if(!l)return;const c={...l.propertySchema,relation_property:e,target_property:"title",target_property_type:"title",aggregation:void 0};null==a||a({propertySchema:c}),u.Zr(t,{...(0,h.Pn)(s),from:o})}(e,c,o,i,a,s,l,p)),[c,o,i,a,s,l,p]);return(0,R.jsx)(O.Z,{schema:i,isRelationProperty:!0,onAccept:d,onClose:t.close,allowProperty:L})}function H(e){let{parent:t,analyticsFrom:o,schema:a,property:s,parentStore:l,onChange:c}=e;const p=(0,n.O7)(),d=(0,g.Y$)(),m=(0,r.useCallback)((e=>function(e,t,o,r,n,i,a,s){const l=V(r,n,i);if(!l||!l.relatedCollectionValue||!l.relatedCollectionSchema)return;const c=l.relatedCollectionSchema[e];if(!c)return;const p={...l.propertySchema,target_property:e,target_property_type:c.type,aggregation:void 0};null==a||a({propertySchema:p}),u.yj(t,{...(0,h.Pn)(s),from:o,property_type:c.type})}(e,p,o,a,s,l,c,d)),[p,o,a,s,l,c,d]),y=(0,i.VK)((()=>V(a,s,l)),[l,s,a]);return y?(0,R.jsx)(O.Z,{isRelationProperty:!1,schema:y.relatedCollectionSchema,onAccept:m,allowProperty:q,onClose:t.close}):null}function Y(e){let{parent:t,analyticsFrom:o,schema:a,property:l,parentStore:c,onChange:d}=e;const m=(0,n.O7)(),y=(0,g.Y$)(),f=(0,r.useCallback)((e=>function(e,t,o,r,n,i,a,l){const c=V(r,n,i);if(!c)return;const p={...c.propertySchema,aggregation:e,show_as:void 0};null==a||a({propertySchema:p});const d=e?(0,s.gu)(e):void 0;u.en(t,{...(0,h.Pn)(l),from:o,aggregation:d})}(e,m,o,a,l,c,d,y)),[m,o,a,l,c,d,y]),S=(0,i.VK)((()=>V(a,l,c)),[c,l,a]);return S&&S.propertySchema.target_property?(0,R.jsx)(Z.Z,{property:S.propertySchema.target_property,schema:S.relatedCollectionSchema,currentAggregation:S.propertySchema.aggregation,onChange:f,onClose:t.close,noneText:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.aggregate.showOriginal",defaultMessage:"Show original"}),source:"rollupPropertyMenu"}):null}function E(e,t,o,r,n,i,a,s,l){const{device:c}=e,d=V(r,n,i);if(d)return{key:0,render:e=>(0,R.jsx)(P.Z,{...e,title:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editRelation.title",defaultMessage:"Relation"}),isTitleUppercase:!0}),items:[{key:0,render:e=>(0,R.jsx)(C.ZP,{popupType:c.isMobile?_.kQ.SlideUp:_.kQ.Popup,renderOrigin:r=>d.relationPropertySchema?(0,R.jsx)(I.Z,{...(0,S.Z)(e,r),propertySchema:d.relationPropertySchema,format:I.L.Name,right:N(o,t),disabled:o}):(0,R.jsx)(b.Z,{...(0,S.Z)(e,r),title:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editRelation.buttonTitle",defaultMessage:"Select an existing relationâ€¦"}),right:N(o,t),style:{color:t.mediumTextColor},disabled:o}),render:e=>(0,R.jsx)(z,{parent:e,analyticsFrom:a,schema:r,property:n,parentStore:i,onChange:l}),buttonPopupStore:s},e.key),action:()=>{s.setState({open:!0})}}]}}function U(e,t,o,r,n,i,a,s,l,c){const{device:d}=t,u=V(n,i,a);if(u)return{key:1,render:e=>(0,R.jsx)(P.Z,{...e,title:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editProperty.title",defaultMessage:"Property"}),topBorder:!0,isTitleUppercase:!0}),items:[{key:0,render:t=>(0,R.jsx)(T.ZP,{renderTooltip:()=>(0,R.jsx)(B,{}),disableTooltip:e,render:m=>(0,R.jsx)(C.ZP,{popupType:d.isMobile?_.kQ.SlideUp:_.kQ.Popup,renderOrigin:n=>u.targetPropertySchema?(0,R.jsx)(I.Z,{...(0,S.Z)(t,n),propertySchema:u.targetPropertySchema,format:I.L.Name,right:N(r,o),disabled:r}):(0,R.jsx)(b.Z,{...(0,S.Z)(t,m),title:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editProperty.buttonTitle",defaultMessage:"Select a property to displayâ€¦"}),right:N(!e||r,o),disabled:!e||r,disabledFeedback:!0}),render:e=>(0,R.jsx)(H,{parent:e,analyticsFrom:s,schema:n,property:i,parentStore:a,onChange:c}),buttonPopupStore:l})},t.key),action:()=>{l.setState({open:!0})}}]}}function W(e,t,o,r,n,i,a,s,l,c){const{device:d}=t;if(V(n,i,a))return{key:2,render:e=>(0,R.jsx)(P.Z,{...e,title:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.editAggregate.title",defaultMessage:"Calculate"}),topBorder:!0,isTitleUppercase:!0}),items:[{key:0,render:t=>(0,R.jsx)(T.ZP,{renderTooltip:()=>(0,R.jsx)(D,{}),disableTooltip:e,render:u=>e?(0,R.jsx)(C.ZP,{popupType:d.isMobile?_.kQ.SlideUp:_.kQ.Popup,renderOrigin:e=>(0,R.jsx)(b.Z,{...(0,S.Z)(t,e),title:(0,R.jsx)(K,{schema:n,property:i,parentStore:a}),right:N(r,o),disabled:r}),render:e=>(0,R.jsx)(Y,{parent:e,analyticsFrom:s,schema:n,property:i,parentStore:a,onChange:c}),buttonPopupStore:l}):(0,R.jsx)(b.Z,{...(0,S.Z)(t,u),title:(0,R.jsx)(p.FormattedMessage,{id:"database.rollupProperty.aggregate.showOriginal",defaultMessage:"Show original"}),right:N(r,o),disabled:!0,disabledFeedback:!0})},t.key),action:()=>{l.setState({open:!0})}}]}}},73456:(e,t,o)=>{o.d(t,{Z:()=>B});o(57658);var r=o(67294),n=o(480),i=o(86628),a=o(49085),s=o(99036),l=o(84619),c=o(96711),p=o(18557),d=o(37612),u=o(6287),m=o(9291),g=o(31701),y=o(53965),h=o(37810),f=o(36610),S=o(47307),x=o(17095),v=o(27871),b=o(18533),C=o(66890),j=o(92658),w=o(75079),M=o(60709),_=o(50959),P=o(93405),T=o(68894),k=o(78140),Z=o(32163),I=o(40721),O=o(53437),R=o(72495),F=o(9050),A=o(22084),V=o(85893);const K=a.default.createClass(!1);const B=function(e){let{onClose:t,collectionId:o,propertySchema:a,property:s,onChange:l,option:c,analyticsFrom:p,statusGroup:d,origin:u,open:m,alignmentToOrigin:g}=e;const y=(0,n.O7)(),h=(0,i.qz)(void 0,K),f=(0,i.qz)(void 0,j.Z),S=(0,r.useRef)(m);(0,r.useEffect)((()=>{!S.current&&m&&f.setState({...f.state,inputValue:c.value}),S.current=m}),[m,c.value,f]);const x=(0,r.useCallback)((()=>(0,V.jsx)(N,{onClose:t,collectionId:o,propertySchema:a,property:s,onChange:l,option:c,analyticsFrom:p,statusGroup:d,renameInputStore:f,showSelectDescriptionStore:h})),[t,o,a,s,l,c,p,d,f,h]),v=(0,r.useCallback)((()=>function(e,t,o,r,n,i,a){e(),D(t,o,r,n,i,a)}(t,o,a,s,l,c,f)),[t,o,a,s,l,c,f]),{device:b}=y;return(0,V.jsx)(O.ZP,{popupType:b.isMobile?O.ZP.PopupType.SlideUp:O.ZP.PopupType.Popup,open:m,onDismiss:v,origin:u,render:x,alignmentToOrigin:g})};function D(e,t,o,r,n,i){const a=i.state.inputValue,s=t.options||[],l=s.find((e=>e.id!==n.id&&e.value.trim().toLowerCase()===a.trim().toLowerCase()));if(n.value!==a)if(a)if(l)S.showErrorMessage((0,V.jsx)(m.FormattedMessage,{defaultMessage:"This select option already exists.",id:"database.editProperty.errorDialog.duplicateSelectValue.message"}));else{const i=s.find((e=>e.id===n.id));if(!i)return;const l=a.trim(),c={...i,value:l},p={pointer:{table:u.vF,id:e},command:"keyedObjectListUpdate",path:["schema",o,"options"],args:{value:c}},d="status"===t.type&&n.value===t.defaultOption?{pointer:{table:u.vF,id:e},command:"update",path:["schema",o],args:{defaultOption:l}}:void 0;r(y.oA([p,d]))}else S.showErrorMessage((0,V.jsx)(m.FormattedMessage,{defaultMessage:"Please type a value.",id:"database.editProperty.errorDialog.missingSelectValue.message"}))}function N(e){let{onClose:t,collectionId:o,propertySchema:a,property:y,onChange:j,option:O,analyticsFrom:K,statusGroup:B,renameInputStore:N,showSelectDescriptionStore:L}=e;const q=(0,m.useIntl)(),z=(0,n.O7)(),H=(0,C.Y$)(),Y=(0,r.useCallback)((e=>function(e,t){const o=e.target.value.replace(/,/g,"");t.setState({...t.state,inputValue:o}),t.emit()}(e,N)),[N]),E=(0,r.useCallback)((()=>function(e,t,o,r,n,i,a){e(),D(t,o,r,n,i,a)}(t,o,a,y,j,O,N)),[t,o,a,y,j,O,N]),U=(0,r.useCallback)((()=>function(e,t,o,r,n,i,a,l,c,p){"status"!==i.type||t.value!==i.defaultOption?S.showDialog({showCancel:!0,keepFocus:!1,message:(0,V.jsx)(m.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",defaultMessage:"Are you sure you want to delete this option?"}),items:[{label:(0,V.jsx)(m.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",defaultMessage:"Delete"}),color:"red",onAccept:()=>{if(!s.cu(i)&&"status"!==i.type)return;const d={table:u.vF,id:o},m=[],g={pointer:d,command:"keyedObjectListRemove",path:["schema",a,"options"],args:{remove:{id:t.id}}};if(m.push(g),c&&"status"===i.type){const e=(i.groups??[]).findIndex((e=>e.id===c.id)),o={pointer:d,command:"listRemove",path:["schema",a,"groups",e,"optionIds"],args:{id:t.id}};m.push(o)}r(m),l(),f.$q(e,{...(0,w.Pn)(p),property_type:i.type,action:"select_delete_option",from:n})}}]}):S.showErrorMessage((0,V.jsx)(m.FormattedMessage,{defaultMessage:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"}))}(z,O,o,j,K,a,y,t,B,H)),[z,O,o,j,K,a,y,t,B,H]),{device:W}=z,$=(0,i.VK)((()=>L.state),[L]),G=(0,i.VK)((()=>N.state.inputValue),[N]),Q=[];$&&Q.push({key:"description",render:e=>(0,V.jsx)(R.Z,{...e,desktopStyle:{paddingTop:0},title:W.isMobile?q.formatMessage(v.k.descriptionHeader):void 0}),items:[{key:"description",render:e=>(0,V.jsx)(v.i,{...e,initialDescription:O.description,handleSaveDescription:e=>function(e,t,o,r,n,i,a,s){if(e===(s.description??""))return;const l={...s,description:e};o([{pointer:{table:u.vF,id:r},command:"keyedObjectListUpdate",path:["schema",n,"options"],args:{value:l}}]),f.$q(t,{property_type:i.type,action:"select_set_description",from:a})}(e,z,j,o,y,a,K,O),disableAutoSection:!0}),action:()=>{}}]});const X={key:"action",render:e=>(0,V.jsx)(R.Z,{...e}),items:[]};Q.push(X),X.items.push({key:"delete",render:e=>(0,V.jsx)(P.Z,{...e,title:(0,V.jsx)(m.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.deleteLabel",defaultMessage:"Delete"}),svg:d.y}),action:U}),B&&"status"===a.type&&(X.items.push({key:"setAsDefault",render:e=>(0,V.jsx)(P.Z,{...e,title:(0,V.jsx)(m.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.setAsDefault",defaultMessage:"Set as default"}),svg:p.z}),action:()=>async function(e,t,o,r,n,i,a,s,l){if("status"!==o.type||!l)return;if(i.value===o.defaultOption)return;if(void 0!==o.defaultOption&&!(await S.confirmUserAction({message:(0,V.jsx)("span",{children:(0,V.jsx)(m.FormattedMessage,{defaultMessage:"Change default to <b>{defaultValue}</b>?",id:"database.editProperty.setAsDefault.confirm.title",values:{defaultValue:i.value,b:e=>(0,V.jsx)("span",{style:{fontWeight:h.Z.fontWeight.semibold},children:e})}})}),description:(0,V.jsx)("span",{children:(0,V.jsx)(m.FormattedMessage,{defaultMessage:"New pages will start with {defaultValue} as the default status. Existing pages <b>without a status explicitly set</b> will switch to {defaultValue}.",id:"database.editProperty.setAsDefault.confirm.description",values:{defaultValue:i.value,b:e=>(0,V.jsx)("span",{style:{fontWeight:h.Z.fontWeight.semibold},children:e})}})}),acceptLabel:(0,V.jsx)(m.FormattedMessage,{defaultMessage:"Continue",id:"database.editProperty.setAsDefault.confirm.continueButton"})})))return;const c=[],p={pointer:{table:u.vF,id:e},command:"update",path:["schema",t],args:{defaultOption:i.value}};c.push(p),r(c),a(),f.$q(s,{property_type:o.type,action:"status_set_default",from:n,collection_id:e})}(o,y,a,j,K,O,t,z,B)}),X.items.push({key:"Group",render:e=>(0,V.jsx)("div",{...e,children:(0,V.jsx)(b.Z,{...e,title:(0,V.jsx)(m.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.Group",defaultMessage:"Group"}),selectedKey:B.name,options:(a.groups??[]).map((e=>({key:e.name,title:_.ZA[e.name]??e.name}))),icon:e=>(0,c.V)({...e,width:16,marginRight:0}),onChange:e=>{!function(e,t,o,r,n,i,a,s,l){if("status"!==a.type||!l)return;const c={table:u.vF,id:t},p=[],d=a.groups??[],m=d.findIndex((e=>e.id===l.id)),g=d.findIndex((t=>t.name===e));if(m===g)return;const y={pointer:c,command:"listRemove",path:["schema",r,"groups",m,"optionIds"],args:{id:o.id}},h={pointer:c,command:"listAfter",path:["schema",r,"groups",g,"optionIds"],args:{id:o.id}};p.push(y,h);const S=a.options??[],x=d.flatMap((e=>{const t=e.optionIds??[],o=S.filter((e=>t.includes(e.id)));return o})),v={pointer:c,command:"set",path:["schema",r,"options"],args:x};p.push(v),n(p),f.$q(s,{property_type:a.type,action:"status_set_default",from:i,collection_id:t})}(e,o,O,y,j,K,a,z,B)}})}),action:()=>{}}));const J=g.AP.map((e=>{const t={key:e,render:t=>(0,V.jsx)(F.Z,{...t,color:e,checkState:O.color===e}),action:()=>{!function(e,t,o,r,n,i,a,s){const l={...t,color:e};i([{pointer:{table:u.vF,id:o},command:"keyedObjectListUpdate",path:["schema",r,"options"],args:{value:l}}]),f.$q(s,{property_type:n.type,action:"select_change_color",from:a,collection_id:o})}(e,O,o,y,a,j,K,z)}};return t})),ee={key:"color",render:e=>(0,V.jsx)(R.Z,{...e,title:(0,V.jsx)(m.FormattedMessage,{id:"database.selectPropertyOptionEditMenu.colorsSection",defaultMessage:"Colors"}),isTitleUppercase:!0,topBorder:!0}),items:J};let te;return Q.push(ee),te=W.isMobile?{menuType:M.og.Modal,title:(0,V.jsx)(A.a,{format:l.lo.Large,value:O.value,color:O.color,showRemoveButton:!1,isSingle:!0}),right:(0,V.jsx)(I.DoneMenuText,{}),onClickRight:E}:{menuType:M.og.Popup,width:220},(0,V.jsxs)(k.Z,{...te,children:[(0,V.jsx)(R.Z,{isInput:!0,children:(0,V.jsx)(T.ZP,{focusInitial:!0,selectAll:!W.isMobile,value:G,maxlength:180,onChange:Y,onSubmit:E,showClearButton:!1,inputRight:(0,V.jsx)(x.l,{onClick:()=>L.setState(!$),description:O.description,showTooltip:!$})})}),(0,V.jsx)(Z.Z,{type:Z.i.Vertical,disableKeyboard:!0,initialFocus:void 0,sections:Q})]})}},91965:(e,t,o)=>{o.d(t,{Z:()=>d});var r=o(67294),n=o(9291),i=o(7032),a=o(94166),s=o(24006),l=o(26388),c=o(85893);function p(e){let{setAiInference:t,aiInference:o,disabled:p}=e;const d=(0,r.useRef)((0,i.ZP)()),u=()=>{if(!o)return;const e={...o,add_options:!o.add_options};t(e)};return(0,c.jsx)(l.ZP,{renderTooltip:()=>(0,c.jsx)(n.FormattedMessage,{id:"collectionSettingsAiAutofillAddOptionsToggle.title.description",defaultMessage:"New options are created based on property name & page details"}),placement:l.ug.Bottom,render:e=>(0,c.jsx)(a.Z,{title:(0,c.jsx)(n.FormattedMessage,{id:"collectionSettingsAiAutofillAddOptionsToggle.title.text",defaultMessage:"Generate new options"}),showChevron:!1,right:(0,c.jsx)(s.Z,{inputId:d.current,on:!(null==o||!o.add_options),onClick:u,disabled:!1,noColor:!1}),onClick:u,disabled:Boolean(p),textWrapperStyle:{minWidth:"auto"},...e})})}const d=r.memo(p)},72589:(e,t,o)=>{o.d(t,{Z:()=>K});var r=o(67294),n=o(480),i=o(86628),a=o(24405),s=o(35011),l=o(84619),c=o(73110),p=o(73717),d=o(77097),u=o(35102),m=o(42875),g=o(66673),y=o(39132),h=o(59753),f=o(9291),S=o(40470),x=o(37810),v=o(36610),b=o(66890),C=o(75079),j=o(33929),w=o(60709),M=o(73807),_=o(80444),P=o(77080),T=o(19629),k=o(30752),Z=o(8606),I=o(53876),O=o(73063),R=o(78140),F=o(65668),A=o(85893);const V=200;function K(e){var t,o,a,l;const{property:d,disabled:y,formulas:f,getRecordModel:x,propertySchema:T,collectionStore:k,handleSave:Z,handleClose:I,blockStore:O,analyticsFrom:K}=e,D=(0,n.O7)(),N=(0,b.Y$)(),[L,q]=(0,r.useState)(null==T||null===(t=T.formula2)||void 0===t?void 0:t.code),z=(0,g.Kt)(L,V,Object.is),[H,Y]=(0,r.useState)(),E=(0,r.useRef)(null===(o=T.formula2)||void 0===o?void 0:o.code),U=(0,r.useRef)(L),W=(0,r.useRef)(null==T||null===(a=T.formula2)||void 0===a?void 0:a.result_type),$=(0,r.useCallback)((e=>{U.current=e,q(e)}),[]),G=(0,r.useCallback)((e=>{W.current=e}),[]),[Q,X]=(0,r.useState)(!1),J=(0,i.VK)((()=>P.default.checkGate("advanced_formula_editor")),[]),[ee,te]=(0,r.useState)([]),oe=(0,n.Fy)();(0,r.useEffect)((()=>()=>{const e=E.current,t=U.current,o=W.current;t===e&&void 0===ae||(Z({newValue:t,newType:(0,s.x9)(o??{type:"unknown"}),propertySchema:T,collectionStore:k,property:d}),v.$q(D,{...(0,C.Pn)(N),property_type:T.type,action:"formula_v2_edit",from:K}))}),[]);const re=(0,i.VK)((()=>k.pointer),[k.pointer]),ne=(0,r.useMemo)((()=>{const e={type:"block",collection:re};return{kind:c.yp.ThisRow,type:e}}),[re]),ie=(0,r.useMemo)((()=>{const e=h.s8.fromGetRecordModelFn(x);return{sourceProperty:d,valueTypes:[ne],handleDataRequest:f.createFormulaDataRequestHandler(x,e),formulaPropertyNames:L&&(0,u.Ny)(L)}}),[L,f,x,d,ne]),ae=(0,i.VK)((()=>{if("v2"!==T.version&&T.formula)return f.convertCollectionFormulaToFormula2(T.formula,re,k.getSchema())}),[re,k,f,T.formula,T.version]),se=(0,r.useRef)(!1);(0,r.useEffect)((()=>{!async function(){if(!ae||se.current)return;const e=await f.analyzeFormula(ae,ie);let t;t=S.x.isFail(e)?{type:"unknown"}:e.value.type??{type:"unknown"},se.current=!0,$(ae),G(t)}()}),[k,f,$,G,d,T,ae,ie]);const le=(0,r.useMemo)((()=>{var e;const t="v2"===T.version?null===(e=T.formula2)||void 0===e?void 0:e.code:ae;return E.current=t,t}),[null===(l=T.formula2)||void 0===l?void 0:l.code,T.version,ae]),ce=(0,i.VK)((()=>{var e;return null===(e=_.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]),pe=(0,M._)(),de=(0,i.VK)((()=>{te([]);const e=k.getModel(),t=null==O?void 0:O.getModel(),o=null==O?void 0:O.getRecordModel;if(!(t&&e&&z&&o))return;const r=(0,s.NM)({block:t,property:d,formulaCode:z,getRecordModel:o,intl:j.default.getIntl(),userTimeZone:(0,m.r)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+pe,resultCache:new Map});if(r){if(!S.x.isFail(r))return Y(W.current),r.value;(0,p.y_)(r.error)&&te([r.error])}}),[k,O,z,d,pe]);return ie&&ce?(0,A.jsx)(R.Z,{menuType:oe.isMobile?w.og.Modal:w.og.Popup,hideMobileTopbar:!0,width:oe.isMobile?void 0:740,disableBottomPadding:!0,maxHeight:"unset",disableHeaderBorder:!0,disableScroller:!0,children:(0,A.jsx)(F.Z,{initialCode:le,outputFooter:void 0!==O&&(0,A.jsx)(B,{formulaResult:de,isAdvancedMode:Q,advancedModeExperiment:J,setIsAdvancedMode:X,formulaType:H,blockStore:O,formulaSchema:T}),formulas:f,getRecordModel:x,focus:!0,disabled:y,parentSpaceId:ce,typecheckContext:ie,onCodeChange:$,onTypeChange:G,handleClose:I,parentCollection:k,evaluationErrors:ee})}):null}const B=r.memo((e=>{let{formulaResult:t,formulaType:o,blockStore:n,formulaSchema:c,isAdvancedMode:p,advancedModeExperiment:u,setIsAdvancedMode:g}=e;const[h,S]=(0,i.VK)((()=>{var e;if(!t||"undefined"===t.type)return[[],"text"];const o=(0,k.$I)(t,n.getRecordModel,(0,m.r)());return[o,(null===(e=o[0])||void 0===e?void 0:e.type)??"text"]}),[n.getRecordModel,t]),v=(0,i.VK)((()=>{if(null==h||!h.length)return[];const e=(0,T.vQ)(S,c);return(0,A.jsx)(T.E1,{propertyType:S,rootPropertySchema:c,numberRightAlign:!1,children:h.map(((t,o)=>(0,A.jsx)(T.gZ,{token:t,targetPropertySchema:c,blockStore:n,withComma:e&&o<h.length-1,numberRightAlign:!1},`${t.id}-${o}`)))})}),[n,c,h,S]),b=(0,a.yK)((e=>({output:{display:"flex",alignItems:"center",zIndex:1,fontSize:x.Z.fontSize.UISmall.desktop,height:38,padding:10,width:"100%",borderTop:`1px solid ${e.outlineButtonBorder}`,overflow:"hidden"},equals:{fontSize:x.Z.fontSize.UIRegular.desktop,color:e.mediumTextColor,marginRight:6,marginLeft:2},type:{fontSize:x.Z.fontSize.UISmall.desktop,color:e.mediumTextColor,marginLeft:6},iconStyle:{height:20,width:20,marginLeft:"auto"}})),[]),C=(0,r.useMemo)((()=>({baseStyles:{sizing:"small",tokenFormat:l.lo.Small,textStyle:{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap"},tokenWrapStyle:{display:"flex",flexWrap:"nowrap",...I.RQ[l.lo.Medium]}},store:n,isEmpty:!1,isReadOnly:!0,shouldRenderTooltip:!1,shouldWrap:!1,collectionContextStore:void 0,templateVariableContext:void 0,property:void 0,propertyFormat:void 0,propertySchema:c,trackEditBlockProperty:()=>{},format:0,containerRef:null})),[n,c]),j=(0,r.useMemo)((()=>o?(0,s.Z5)(o):d.l7.unknown),[o]);return(0,A.jsx)(Z.O.Provider,{value:C,children:(0,A.jsxs)("div",{style:b.output,children:[(0,A.jsx)("span",{style:b.equals,children:"="}),v,p&&Boolean(t)&&(0,A.jsx)("span",{style:b.type,children:(0,A.jsx)(f.FormattedMessage,{...j})}),u&&(0,A.jsx)(O.Z,{icon:y.c,onClick:()=>g(!p),style:b.iconStyle,ariaLabel:"Toggle advanced mode on formula editor"})]})})}));B.displayName="FormulaOutputFooter"},12205:(e,t,o)=>{o.d(t,{J:()=>i});var r=o(86628),n=o(80444);function i(){const{currentSpaceStore:e}=(0,r.Kw)(n.default);return(0,r.VK)((()=>(null==e?void 0:e.canAdmin())??!1),[e])}},52489:(e,t,o)=>{o.d(t,{Z:()=>i});var r=o(49085);class n extends r.default{getInitialState(){return{isModalOpen:!1,collectionContextStore:void 0}}}const i=new n},29109:(e,t,o)=>{o.d(t,{d:()=>n});var r=o(97466);function n(e,t){const{r:o,g:n,b:i}=(null==e?void 0:e.info.accent_color)||{r:0,g:0,b:0},a=`rgba(${o},${n},${i},${"dark"===t?.6:1})`;return{background:a,hoveredBackground:(0,r._j)(a,.4),pressedBackground:(0,r._j)(a,.9)}}},11843:(e,t,o)=>{o.d(t,{E:()=>a,S:()=>i});var r=o(40506);const n={"de-DE":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"da-DK":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"fi-FI":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"nb-NO":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"nl-NL":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"sv-SE":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"en-US":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"es-ES":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"es-LA":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"fr-FR":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"pt-BR":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"},"ko-KR":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"YYYY[ë…„] MMMM"},"zh-CN":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"YYYY[å¹´]MMM"},"zh-TW":{time:{"12h":"LT","24h":"H:mm",hidden:r.n3},month:"YYYY[å¹´]MMM"},"ja-JP":{time:{"12h":"A h:mm","24h":"H:mm",hidden:r.n3},month:"YYYY[å¹´]MMM"},pseudo:{time:{"12h":"A h:mm","24h":"H:mm",hidden:r.n3},month:"MMMM YYYY"}},i=["de-DE","fr-FR"];function a(e){return n[e]}},92165:(e,t,o)=>{o.d(t,{Z:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.IU)("arrowsDiverging",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6 11.2891C6.42188 11.2891 6.63281 11.0469 6.63281 10.5625V7.3457C6.63281 7.00586 6.71875 6.64062 6.89062 6.25C7.06641 5.85938 7.29492 5.47266 7.57617 5.08984C7.86133 4.70703 8.16992 4.35547 8.50195 4.03516C8.83789 3.71484 9.16406 3.45312 9.48047 3.25L9.95508 2.94531C10.1621 2.81641 10.2656 2.63281 10.2656 2.39453C10.2656 2.21875 10.2109 2.07227 10.1016 1.95508C9.99219 1.83789 9.8418 1.7793 9.65039 1.7793C9.4668 1.7793 9.29102 1.83398 9.12305 1.94336L8.81836 2.14844C8.51367 2.34766 8.20898 2.58984 7.9043 2.875C7.59961 3.15625 7.31641 3.45508 7.05469 3.77148C6.79297 4.08398 6.56836 4.39258 6.38086 4.69727C6.19727 4.99805 6.07227 5.26953 6.00586 5.51172H5.98828C5.91797 5.26953 5.79102 4.99805 5.60742 4.69727C5.42383 4.39258 5.19922 4.08398 4.93359 3.77148C4.67188 3.45508 4.38867 3.15625 4.08398 2.875C3.7832 2.58984 3.48047 2.34766 3.17578 2.14844L2.87109 1.94336C2.69922 1.83398 2.52344 1.7793 2.34375 1.7793C2.14844 1.7793 1.99609 1.83984 1.88672 1.96094C1.78125 2.08203 1.72852 2.22461 1.72852 2.38867C1.72852 2.62695 1.83203 2.8125 2.03906 2.94531L2.51367 3.25C2.83008 3.45312 3.1543 3.71484 3.48633 4.03516C3.81836 4.35547 4.12695 4.70703 4.41211 5.08984C4.69727 5.47266 4.92773 5.85938 5.10352 6.25C5.2793 6.64062 5.36719 7.00586 5.36719 7.3457V10.5625C5.36719 11.0469 5.57812 11.2891 6 11.2891ZM1.81641 3.9707L3.71484 1.52734C3.85547 1.33984 3.88281 1.17578 3.79688 1.03516C3.71484 0.890625 3.55469 0.814453 3.31641 0.806641L0.808594 0.712891C0.613281 0.705078 0.466797 0.763672 0.369141 0.888672C0.271484 1.00977 0.251953 1.16406 0.310547 1.35156L1.02539 3.75391C1.0918 3.98438 1.20312 4.125 1.35938 4.17578C1.51953 4.22656 1.67188 4.1582 1.81641 3.9707ZM10.0898 3.95898C10.2266 4.1543 10.375 4.23047 10.5352 4.1875C10.6992 4.14062 10.8164 4.00391 10.8867 3.77734L11.6777 1.39258C11.7402 1.20508 11.7246 1.04883 11.6309 0.923828C11.541 0.798828 11.3984 0.736328 11.2031 0.736328L8.68945 0.753906C8.45117 0.753906 8.28711 0.824219 8.19727 0.964844C8.10742 1.10156 8.13086 1.26562 8.26758 1.45703L10.0898 3.95898Z"})})},5336:(e,t,o)=>{o.d(t,{r:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.IU)("basicClock",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.541 7.919a.53.53 0 01-.39-.157.53.53 0 01-.157-.39c0-.155.053-.282.157-.383a.53.53 0 01.39-.157h2.905V2.895c0-.15.053-.278.158-.383a.521.521 0 01.382-.158.53.53 0 01.39.158.521.521 0 01.157.383v4.477a.53.53 0 01-.157.39.53.53 0 01-.39.157H4.541zm3.452 6.207a6.789 6.789 0 01-2.727-.554 7.124 7.124 0 01-2.256-1.524 7.277 7.277 0 01-1.525-2.256 6.788 6.788 0 01-.553-2.728c0-.966.184-1.875.553-2.727A7.241 7.241 0 015.258.557 6.788 6.788 0 017.987.003c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 011.53 2.25c.37.852.555 1.761.555 2.727 0 .967-.185 1.876-.554 2.728a7.218 7.218 0 01-3.787 3.78 6.789 6.789 0 01-2.728.554zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 001.805-1.217 5.68 5.68 0 001.217-1.805c.291-.683.437-1.42.437-2.208a5.55 5.55 0 00-.437-2.2 5.66 5.66 0 00-3.029-3.029 5.567 5.567 0 00-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 003.98 3.052a5.715 5.715 0 00-1.21 1.811 5.55 5.55 0 00-.437 2.201c0 .789.146 1.525.438 2.208a5.735 5.735 0 001.21 1.805 5.598 5.598 0 004.013 1.654z"})})},89036:(e,t,o)=>{o.d(t,{v:()=>i});o(67294);var r=o(45238),n=o(85893);const i=(0,r.IU)("folder",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.4082 14.3672H13.7627C15.0684 14.3672 15.8271 13.6084 15.8271 12.1455V5.11816C15.8271 3.65527 15.0615 2.89648 13.585 2.89648H7.22754C6.73535 2.89648 6.44824 2.78027 6.07227 2.47266L5.67578 2.1582C5.19727 1.76172 4.8418 1.63184 4.13086 1.63184H2.19629C0.917969 1.63184 0.166016 2.37695 0.166016 3.8125V12.1455C0.166016 13.6084 0.931641 14.3672 2.4082 14.3672ZM1.50586 3.92871C1.50586 3.2998 1.84766 2.97168 2.46289 2.97168H3.77539C4.26074 2.97168 4.54102 3.08105 4.92383 3.39551L5.32031 3.7168C5.79199 4.10645 6.16113 4.23633 6.87207 4.23633H13.5098C14.1387 4.23633 14.4873 4.56445 14.4873 5.23438V5.63086H1.50586V3.92871ZM2.49023 13.0273C1.85449 13.0273 1.50586 12.6992 1.50586 12.0361V6.81348H14.4873V12.0361C14.4873 12.6992 14.1387 13.0273 13.5098 13.0273H2.49023Z"})})}}]);