"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6534],{36420:(e,t,n)=>{n.d(t,{n:()=>s,y:()=>l});n(21703);var o=n(67294),i=(n(77744),n(26249));let r,a;function l(e){r=r??new Map,a=a??function(e){let t=!1,n=[];return new ResizeObserver((o=>{n=n.concat(o),t||(t=!0,window.requestAnimationFrame((()=>{const o=new Set;[...n].reverse().filter((e=>{const t=o.has(e.target);return o.add(e.target),!t})).forEach((t=>{const n=e.get(t.target);null==n||n.forEach((e=>{const n=t.borderBoxSize[0];e({width:n.inlineSize,height:n.blockSize})}))})),n=[],t=!1})))}))}(r);const[t,n]=(0,o.useState)(void 0),l=(0,o.useCallback)((e=>{n((t=>(0,i.Z)(t,e)?t:e))}),[]);return(0,o.useLayoutEffect)((()=>{const t=e.current;if(!t)return;a.observe(t);const n=[...r.get(t)??[],l];return r.set(t,n),()=>{a.unobserve(t);const e=(r.get(t)??[]).filter((e=>e!==l));0===e.length?r.delete(t):r.set(t,e)}}),[l,e]),t}function s(e){const{children:t,onSizeChange:n}=e,i=(0,o.useRef)(null),r=l(i);(0,o.useEffect)((()=>{n&&r&&n(r)}),[r,n]);const a=o.Children.only(t);return o.cloneElement(a,{ref:i})}},3286:(e,t,n)=>{n.r(t),n.d(t,{COLLAPSE_THRESHOLD_IN_PIXELS:()=>D,FloatingTableOfContents:()=>F,FloatingTableOfContentsFullSizeContents:()=>N,FloatingTableOfContentsMiniContents:()=>$});var o=n(67294),i=n(60177),r=n(45060),a=n(64338),l=n(480),s=n(86628),d=n(24405),c=n(49271),u=n(62193),h=n(85031),g=n(80503),f=n(51454),p=n(68709),v=n(23063),x=n(84076),S=n(53437),m=n(76798),y=n(11368),b=n(43250),w=n(85957),C=n(17504),M=n(73819),R=n(28267),k=n(5971),j=n(2275),B=n(94043),L=n(95802),H=n(38676),A=n(15723),K=n(88923),V=n(50628),T=n(27724),E=n(28662),I=n(89579),z=n(49085);class O extends z.default{getInitialState(){return{displayState:"expanded"}}}var Z=n(56203),P=n(85893);const D=310,_=!1;function F(e){const{store:t}=e,n=(0,l.O7)(),o=(0,s.VK)((()=>n.device.isMobile),[n]),i=(0,k.E)("floating_table_of_contents"),{navigableAncestor:r}=(0,E.m)({parentStore:t}),a=(0,s.VK)((()=>{const e=null==r?void 0:r.getModel();return i&&e&&"off"!==e.getFloatingTableOfContentsState()}),[i,r]),d=(0,s.VK)((()=>(0,w.wq)(t)&&K.default.isSidePeekOpen()),[t]);return a?o||d?null:(0,P.jsx)(X,{store:e.store}):null}function X(e){const{store:t}=e,n=(0,o.useRef)(null),c=(0,s.qz)(void 0,O),u=(0,i.Dl)();(0,a.q7)(null==u?void 0:u.domLock);const{verticalScroller:h}=(0,o.useContext)(y.Ue)??{},{navigableAncestor:v,headerStores:x}=(0,E.m)({parentStore:t}),S=(0,l.O7)(),{closestSelectable:m,targetHorizontalRule:w}=(0,s.VK)((()=>{var e;if(!h)return{};const t=(null==h?void 0:h.getStore()).state.clientRect??h.measureSize(),{selectableRectMap:n}=V.Z.state,o=t&&t.top+t.height/4,i=L.C.findScrollToSelectablesFromIds(x.map((e=>e.id))),r=new Map(i.map((e=>[e.props.store.id,e]))),{stores:a,phase:l}=T.default.state,s=l===T.SelectionPhase.Selected?a.find((e=>r.has(e.id))):void 0,d=s&&r.get(s.id),c=d&&n.get(d);if(c&&t&&A.kK(c,t))return{closestSelectable:d,targetHorizontalRule:o};let u;if(void 0!==o)for(const h of i){const e=n.get(h);if(!e)continue;const t=e.top+e.height/2,i=Math.abs(o-t);(!u||i<u.distance)&&(u={distance:i,selectable:h})}return{targetHorizontalRule:o,closestSelectable:null===(e=u)||void 0===e?void 0:e.selectable}}),[x,h]),C=(0,R.X)(n,10),M=(0,s.VK)((()=>{var e;return null==v||null===(e=v.getModel())||void 0===e?void 0:e.getFloatingTableOfContentsState()}),[v]);(0,o.useEffect)((()=>{const e=!!C&&C.width>D,t="minimal"===M;c.setState({...c.state,displayState:e&&!t?"expanded":"collapsed_narrow"})}),[c,C,M,null==C?void 0:C.width]);const k=(0,j.WJ)(t),H=(0,s.VK)((()=>c.state.displayState),[c]);(0,o.useEffect)((()=>{_&&w&&(0,r.yX)({top:w-3,bottom:w+3,left:0,width:9e3},"active header target")}));const K=(0,d.yK)((()=>({outerContainer:{position:"absolute",top:0,width:`calc(100% - ${k}px)`,height:`calc(100vh - ${g.R6(S.device.isElectronMac)}px)`,display:"flex",flexDirection:"column"},viewportHeightContainer:{display:"flex"}})),[S.device.isElectronMac,k]),[I,z]=function(e){const t=(0,o.useRef)(null),n=(0,s.VK)((()=>{var n;const o=V.Z.state.selectableRectMap,i=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect();if(!i)return!1;for(const[t,r]of o)if(t.props.shouldShowHoverMenu&&r.left<i.right&&A.kK(r,i)){const n=t.props.store.getRecordStoreUIRoot();return e===n}return!1}),[e]);return[t,n]}(e.store),Z={store:t,navigableAncestor:v,scrollTargetY:w,activeBlockId:null==m?void 0:m.props.store.id,headerStores:x,floatingTocStore:c};return x.length<5&&"minimal"===M?null:(0,P.jsxs)(B.bj,{style:{width:"calc(100% - 46px)",gridRow:"1 / -1",paddingLeft:k,position:"sticky",top:0,zIndex:f.O9,transition:"opacity 0.2s ease",opacity:z?0:1,pointerEvents:z?"none":"auto"},children:[(0,P.jsx)("div",{style:{width:"100%",height:0},ref:n}),(0,P.jsx)("div",{className:`hide-scrollbar ${b.hBn}`,style:K.outerContainer,children:(0,P.jsx)("div",{style:K.viewportHeightContainer,children:(0,P.jsx)(p.p,{allowSelectionWithin:!0,style:{width:"100%"},children:"expanded"===H?(0,P.jsx)(q,{ref:I,...Z}):(0,P.jsx)(Y,{...Z,ref:I})})})})]})}const Y=o.forwardRef((function(e,t){const{store:n,floatingTocStore:i}=e,r=(0,o.useRef)(null),a=(0,u.sH)(),[l,c]=(0,o.useState)(!1),h=function(e){const t=(0,s.VK)((()=>(0,w.wq)(e)),[e]),n=(0,s.VK)((()=>H.sidebarExpandedStore.state),[]),i=t||!t&&n,[r,a]=(0,o.useState)(!0);return(0,o.useEffect)((()=>{if(!i)return void a(!0);let e,t,n;const o=o=>{t=e,e={x:o.clientX,y:o.clientY},t&&(n=Math.sqrt(Math.pow(o.clientX-t.x,2)+Math.pow(o.clientY-t.y,2)),a(n<5))};return window.addEventListener("mousemove",o),()=>{window.removeEventListener("mousemove",o)}}),[i]),r}(n),g=(0,o.useRef)(),f=(0,s.VK)((()=>e=>{var t;e&&!h||(Z.Z.setState({isHovered:e}),i.setState({...i.state,displayState:e?"collapsed_full":"collapsed_narrow"}),e&&(g.current=null===(t=r.current)||void 0===t?void 0:t.getBoundingClientRect()))}),[i,h]),p=(0,s.VK)((()=>"collapsed_narrow"===i.state.displayState),[i]),x=(0,d.yK)((e=>({fullSizeContainer:{width:242,display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 12px",marginRight:10,backgroundColor:e.contentBackground,boxShadow:e.largeLightBoxShadow,borderRadius:14,position:"relative",overflowY:"auto"},miniSizeContainer:{width:56,display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:12,paddingRight:8}})),[]),{verticalOffsetInPx:m,maxHeight:y}=te(e.store,i),b=(0,o.useCallback)((e=>({opacity:e?1:0})),[]);return(0,P.jsxs)("div",{style:{maxHeight:y,marginBottom:60,width:"100%"},onMouseLeave:()=>f(!1),children:[(0,P.jsx)(v.Z,{isVisible:!0,animationStyle:b(p),render:()=>(0,P.jsx)("div",{style:{maxHeight:y,display:"flex",flexDirection:"row",position:"absolute",top:m,width:"100%",overflowY:"hidden"},onMouseMove:C.V,children:(0,P.jsx)("div",{ref:a(r,t),style:x.miniSizeContainer,onMouseMove:e=>{f(!0),(0,C.V)(e)},children:(0,P.jsx)($,{...e})})})}),(0,P.jsx)(v.Z,{isVisible:!p,onAnimationStart:()=>{c(!0)},onAnimationEnd:()=>{c(!1)},animationStyle:{translateX:0,opacity:1},enterAnimationStyle:{translateX:-10,opacity:0},exitAnimationStyle:{translateX:-10,opacity:0},render:()=>(0,P.jsx)(S.ZP,{preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:S.ZP.PopupType.Popup,originGap:-56,alignmentToOrigin:S.ZP.Alignment.Start,open:!p||l,placementToOrigin:S.ZP.Placement.Right,originRect:g.current,style:{background:void 0,boxShadow:void 0,overflow:void 0,marginTop:-10},render:()=>(0,P.jsx)("div",{style:{display:"flex",flexDirection:"row",width:258,paddingLeft:16,cursor:"default"},onMouseMove:e=>{(0,C.V)(e),e.stopPropagation()},onMouseLeave:()=>f(!1),children:(0,P.jsx)("div",{style:x.fullSizeContainer,children:(0,P.jsx)(N,{...e,fillBackground:!0,maxHeight:y})})})})})]})})),q=o.forwardRef((function(e,t){const{store:n,floatingTocStore:o}=e,{verticalOffsetInPx:i,maxHeight:r}=te(n,o);return(0,P.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"end"},children:(0,P.jsx)("div",{ref:t,onMouseMove:C.V,style:{position:"absolute",top:i,marginRight:60,width:250,overflowY:"auto",maxHeight:r},className:"hide-scrollbar",children:(0,P.jsx)(N,{...e,maxHeight:r})})})}));function W(e){const t=(0,s.VK)((()=>h.y({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),n=(0,M.rv)(e.store),i=(0,d.yK)((o=>({container:{...n,cursor:"pointer",width:"100%",paddingBottom:e.isLast?16:void 0},linkBox:{width:"fit-content",color:e.isActive?o.v2.text.ui.blue.primary:o.text.secondary,transition:"color 0.15s ease"},linkBoxHovered:{background:o.tint.regular,borderRadius:4,color:e.isActive?o.v2.text.ui.blue.primary:o.text.primary},nameContainer:{display:"flex",alignItems:"center",marginLeft:12*t},name:{paddingRight:c.ZD.paddingRight,paddingLeft:c.ZD.paddingLeft,fontSize:12,lineHeight:1.3,display:"flex",alignItems:"center",padding:4}})),[n,t,e.isActive,e.isLast]),r=(0,I.R)({pageStore:e.navigableAncestor,scrollToBlockId:e.headerStore.id}),[a,l]=(0,o.useState)(!1);return e.navigableAncestor?(0,P.jsx)(x.Z,{style:{...i.container,...e.style},href:r.href,onClick:r.onClick,external:!1,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),hovered:!1,pressedStyle:{background:"none"},ignoreLocalHoverState:!0,children:(0,P.jsx)("div",{style:i.nameContainer,children:(0,P.jsx)(x.Z,{...r,external:!1,style:i.linkBox,hoveredStyle:i.linkBoxHovered,pressedStyle:i.linkBoxHovered,hovered:a,children:(0,P.jsx)("div",{style:i.name,children:(0,P.jsx)(m.Z,{store:e.headerStore,shouldWrap:!0,underline:!1,maxLines:2})})})})}):null}function N(e){const{headerStores:t,navigableAncestor:n,maxHeight:o}=e,i=(0,d.yK)((e=>({container:{maxWidth:500,maxHeight:o,width:"100%",cursor:"default"},fillContainer:{padding:6,maxWidth:500,maxHeight:o,width:"100%",cursor:"default"}})),[o]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{onMouseMove:C.V,style:e.fillBackground?i.fillContainer:i.container,children:t.map(((o,i)=>(0,P.jsx)(W,{headerStore:o,index:i,isLast:i===t.length-1,headerStores:t,store:e.store,navigableAncestor:n,isActive:o.id===e.activeBlockId,scrollTargetY:e.scrollTargetY},o.id)))})})}function U(e){const t=(0,s.VK)((()=>h.y({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),n=(0,d.yK)((n=>{const o="dark"===n.mode?n.text.primary:n.v2.text.ui.blue.primary,i="dark"===n.mode&&e.isActive;return{lineContainer:{backgroundColor:e.isActive?o:n.fill.gray,height:2,width:16-4*t,transition:"background 0.2s ease, box-shadow 0.2s ease",boxShadow:i?`0px 0px 3px ${o}`:"none",borderRadius:2,marginLeft:4*t}}}),[t,e.isActive]);return e.navigableAncestor?(0,P.jsx)("div",{children:(0,P.jsx)("div",{style:n.lineContainer})}):null}function $(e){const{headerStores:t,navigableAncestor:n}=e,o=(0,d.yK)((()=>({container:{display:"flex",flexDirection:"column",gap:12,paddingLeft:20,paddingBottom:12,height:"100%"}})),[]);return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)("div",{style:o.container,onMouseMove:C.V,children:t.map(((o,i)=>(0,P.jsx)(U,{headerStore:o,index:i,headerStores:t,store:e.store,navigableAncestor:n,isActive:o.id===e.activeBlockId},o.id)))})})}const G=113,J="70vh",Q=18,ee=80;function te(e,t){const{verticalScroller:n}=(0,o.useContext)(y.Ue)??{},i=null==n?void 0:n.getStore(),r=(0,s.VK)((()=>{const t=L.C.findNodeFromBlockId(e.id),n=null==i?void 0:i.state;if(V.Z.state.selectableElementRectMap,n&&t)return Math.max(t.offsetTop-n.scrollTop+Q,ee)}),[e,i]),a=(0,s.VK)((()=>{var e;return null==i||null===(e=i.state.clientRect)||void 0===e?void 0:e.height}),[i]),l=(0,s.VK)((()=>t.state.displayState),[t]);return{maxHeight:a&&r?a-r-("expanded"!==l?80:0):J,verticalOffsetInPx:r||G}}},64275:(e,t,n)=>{n.d(t,{D:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.IU)("closeSmall",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})}}]);