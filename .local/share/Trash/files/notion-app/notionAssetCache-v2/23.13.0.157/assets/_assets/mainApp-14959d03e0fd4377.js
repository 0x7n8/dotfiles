(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[5906],{16091:(e,t,n)=>{"use strict";n.d(t,{ND:()=>T,RD:()=>I,gc:()=>L,gl:()=>P,u7:()=>M});var o=n(67294),i=n(36769),r=n(480),s=n(86628),a=n(41432),l=n(9291),c=n(11969),d=n(13447),u=n(37181),p=n(81415),h=(n(95477),n(19124)),m=n(68056),g=n(89086),f=n(28685),v=n(80444),y=n(77080),b=n(83212),x=n(6258),S=n(24666),k=n(47449),w=n(89626),j=n(85893);const C=(0,l.defineMessages)({spaceForAiHeader:{id:"AiOnboardingTooltips.spaceForAi.header",defaultMessage:"Press ‘space’ for AI"},spaceForAiContent:{id:"AiOnboardingTooltips.spaceForAi.content",defaultMessage:"On a new line or page, press ‘space’ on your keyboard for AI to generate or edit the page. Try it now!"},askAiAnythingHeader:{id:"AiOnboardingTooltips.askAiAnything.header",defaultMessage:"Ask AI anything"},askAiAnythingContent:{id:"AiOnboardingTooltips.askAiAnything.content",defaultMessage:"Just tell AI what to do — the more details, the better. You can also start from an example in the menu."},refineAiResponseHeader:{id:"AiOnboardingTooltips.refineAiResponse.header",defaultMessage:"Tell AI what to do next"},refineAiResponseContent:{id:"AiOnboardingTooltips.refineAiResponse.content",defaultMessage:"How was it? Give AI further instructions to improve what it wrote, or hit ‘Done’ when finished."},showAssistantLocationHeader:{id:"AiOnboardingTooltips.showAssistantLocation.answersToYourQuestionHeader",defaultMessage:"Ask AI when searching"},showAssistantLocationContent:{id:"AiOnboardingTooltips.showAssistantLocation.askQuestionBody",defaultMessage:"AI can find pages and synthesize a quick, concise answer for you. Try it now."},showAssistantOriginElementLocationHeader:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.header",defaultMessage:"Start by asking a question"},showAssistantOriginElementLocationContent:{id:"AiOnboardingTooltips.ShowAssistantOriginElementLocationTooltip.content",defaultMessage:"Notion AI will find pages and compose a concise answer for you. Try it now."}});function M(){const e=(0,r.O7)(),t=function(){const e=(0,r.O7)(),t=(0,s.VK)((()=>{const t=v.default.state.mainEditorCurrentBlockStore;return t&&b.Z.getMode(e,t)}),[e]);return(0,s.VK)((()=>{if(e.device.isMobile)return;if(!y.default.checkGate("space_for_ai_tooltip_enabled"))return;const{currentUserSettingsStore:n,inAppCalloutStore:o}=v.default.state;if(!o.canShow("ai_onboarding_tooltip"))return;const i=null==n?void 0:n.getSettings();if(!i)return;if(i.signup_time&&i.signup_time>16770636e5)return;if("space_for_ai"!==(0,w.sy)())return;if(!(0,h.GD)(t))return;const r=S.default.state;if("editing"===r.mode){const e=(0,m.QY)(r.multiSelection);if(e&&(0,g.wd)(e.selection)){const t=e.store,n=f.E.findEditableWithStore(t);if(n){const e="block"===t.pointer.table?x.G.createChildStore(t,t.pointer):void 0,o=e&&e.getType(),i=Boolean(o&&(0,a.hD)(o)),r=t.getValue();if(i&&!r)return n}}}}),[e,t])}();return t?(0,j.jsx)(p.U,{origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,j.jsx)(l.FormattedMessage,{...C.spaceForAiHeader}),content:(0,j.jsx)(l.FormattedMessage,{...C.spaceForAiContent}),onCloseClick:()=>(0,w.h1)(e)}):null}function I(e){const{originRef:t,openState:n}=e,o=(0,r.O7)(),i=(0,s.VK)((()=>(0,w.sy)()),[]);if(o.device.isMobile)return null;return"ask_ai_anything"===i&&"initialPrompt"===n.stage?(0,j.jsx)(p.U,{origin:t,placementToOrigin:"top",header:(0,j.jsx)(l.FormattedMessage,{...C.askAiAnythingHeader}),content:(0,j.jsx)(l.FormattedMessage,{...C.askAiAnythingContent}),onCloseClick:()=>(0,w.h1)(o)}):null}function P(e){const{originRef:t,openState:n,isInputEmpty:o}=e,i=(0,r.O7)(),a=(0,s.VK)((()=>(0,w.sy)()),[]);if(i.device.isMobile)return null;const c="refine_ai_response"===a&&"results"===n.stage&&!n.loading&&"cursor"===n.context.type&&o;return(0,j.jsx)(p.U,{origin:c?t:void 0,placementToOrigin:"right",pointerOffset:-4,pointerLength:25,header:(0,j.jsx)(l.FormattedMessage,{...C.refineAiResponseHeader}),content:(0,j.jsx)(l.FormattedMessage,{...C.refineAiResponseContent}),onCloseClick:()=>(0,w.h1)(i)})}function T(e){const{origin:t}=e,n=(0,r.O7)();(0,o.useEffect)((()=>{c.K(n,{from:"qna_button"})}),[n]);const i=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(c.y(n,{from:"qna_button"}),(0,k.CX)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,j.jsx)(p.U,{style:{width:250},pointerLength:25,pointerPosition:"94%",origin:t,placementToOrigin:"top",header:(0,j.jsx)(l.FormattedMessage,{...C.showAssistantOriginElementLocationHeader}),content:(0,j.jsx)(l.FormattedMessage,{...C.showAssistantOriginElementLocationContent}),onCloseClick:i})}function L(e){const{origin:t}=e,n=(0,r.O7)();(0,o.useEffect)((()=>{c.K(n,{from:"qna_search"})}),[n]);const i=(0,o.useCallback)((()=>{const{currentUserSettingsStore:e}=v.default.state;e&&(c.y(n,{from:"qna_search"}),(0,k.CX)(n,{phase:"complete",transactionUserAction:"AiQnaIntroModal.debug.clickTooltipComplete",userSettingsStore:e}))}),[n]);return(0,j.jsx)(p.U,{style:{width:250},pointerLength:25,pointerPosition:"5%",origin:t,placementToOrigin:"bottom",header:(0,j.jsx)(l.FormattedMessage,{...C.showAssistantLocationHeader}),content:(0,j.jsx)(l.FormattedMessage,{...C.showAssistantLocationContent}),onCloseClick:i})}(0,i.exposeDebugEnvironmentValue)("resetAIOnboarding",(e=>()=>{const{currentUserSettingsStore:t}=v.default.state;t&&d.createAndCommit({userAction:"AiIntroModal.debugging.resetAIOnboarding",environment:e,perform:e=>{u.d2({userSettingsStore:t,transaction:e,data:{ai_onboarding_phase:"space_for_ai"}})},userId:t.id})}))},47449:(e,t,n)=>{"use strict";n.d(t,{qC:()=>g,Up:()=>m,CX:()=>h});var o=n(7032),i=n(54642),r=n(13447),s=n(37181),a=n(49085),l=n(92595);class c extends a.default{getInitialState(){return{loadingState:"initial"}}}const d=new c,u=d;(0,l.exposeDebugValue)("AiSuggestedPageQnaStore",d);var p=n(21273);function h(e,t){const{phase:n,transactionUserAction:o,userSettingsStore:i}=t;r.createAndCommit({environment:e,userAction:o,perform:e=>{s.d2({userSettingsStore:i,transaction:e,data:{ai_qna_intro_onboarding_phase:n}})}})}function m(e,t){const{userSettingsStore:n}=t;r.createAndCommit({environment:e,userAction:"aiQnaActions.setLastExposedToQnaAtToCurrentTimestamp",perform:e=>{s.d2({userSettingsStore:n,transaction:e,data:{last_exposed_to_ai_qna_at:Date.now()}})}})}async function g(e){let{environment:t,blockStore:n,reminderNumber:r,spaceId:s}=e;const a=await async function(e){let{environment:t,blockStore:n,reminderNumber:r,spaceId:s}=e;if("initial"===u.state.loadingState||u.state.reminderNumber!==r){const e=i.getSuggestedPageQna(t,{blockPointer:{...n.pointer,spaceId:s},aiSessionId:(0,o.ZP)()}).then((e=>"success"!==e.type?(u.setState({loadingState:"error",reminderNumber:r}),[]):e.data.questions));u.setState({loadingState:"loading",reminderNumber:r});const a=await e;return u.setState({loadingState:"loaded",reminderNumber:r,questions:a}),a[0]}if("loading"===u.state.loadingState)return u.waitUntil((()=>"loaded"===u.state.loadingState)).then((()=>"loaded"===u.state.loadingState?u.state.questions[0]:void 0));if("loaded"===u.state.loadingState){return u.state.questions[0]}return}({environment:t,blockStore:n,reminderNumber:r,spaceId:s});if(a&&p.Z.isQnaPageSuggestedQuestionRemindersEnabledForUser())return a}},55031:(e,t,n)=>{"use strict";n.d(t,{G:()=>u,y:()=>d});var o=n(51454),i=n(28020),r=n(39615),s=n(24646),a=n(5162),l=n(4926),c=n(99659);function d(e,t){const{theme:n,rightEdgeDistance:r,isInPeekRenderer:a}=t,d=t.width??36,p=(0,s.ll)(e,a)-(0,s.vJ)(e);return{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",background:n.whiteButtonBackground,bottom:u(e,16+l.Z.state),right:r+l.Z.state,width:d,height:d,borderRadius:"100%",fontSize:20,boxShadow:n.lightBoxShadow,zIndex:o.hT,opacity:i.tu.state?0:1,transform:`translateX(-${p}px) translateZ(0)`,transition:`\n\t\t\topacity ${c.nk}ms,\n\t\t\tcolor ${c.nk}ms,\n\t\t\ttransform 200ms\n\t\t`}}function u(e,t){const n=e.device.isMobileNative,o=(0,a.Y)("supportsNativeBottomBar"),i=n&&!o;return e.WindowSizeStore.getSafePaddingBottomCSS(t+(i?r.VG:0))}},77207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});n(67294);var o=n(480),i=n(86628),r=n(55367),s=n(80796),a=n(69784),l=n(85893);const c=function(e){const t=(0,o.Fy)(),n=(0,i.VK)((()=>({initiator:s.Z.state.initiator,isDragging:r.ZP.state.isDragging})),[]),c=(0,i.VK)((()=>({active:a.default.state.isActive,moved:!!a.default.state.isActive&&a.default.state.moved})),[]),d=c.moved?"default":n.isDragging?"-webkit-grabbing":"text";let u="notion-cursor-listener";return"-webkit-grabbing"===d&&(u+=" notion-disable-local-cursor"),t.isIOS&&("touch"===n.initiator||n.isDragging||c.active?document.body.classList.add("notion-disable-webkit-user-select"):document.body.classList.remove("notion-disable-webkit-user-select")),(0,l.jsx)("div",{style:{...e.style,cursor:d},className:u,children:e.children})}},98469:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ds});var o=n(67294),i=n(34958),r=n(77907),s=n(83355),a=n(13991),l=n(79946),c=n(49271),d=n(25278),u=n(99405),p=n(89101),h=n(29369),m=n(9852),g=n(12139),f=n(9291),v=n(31701),y=n(15828),b=n(3303),x=n(18265),S=n(17224),k=n(47839),w=n(32603),j=n(91376),C=n(32953),M=n(8055),I=n(35865),P=n(73966),T=n(70782),L=n(39634),A=n(37181),_=n(95477);const E=(0,r.lazyComponent)(r.deps.CreatorProfile,(e=>e.CreatorProfile)),R=(0,r.lazyComponent)(r.deps.LocalizedTemplates,(e=>e.LocalizedTemplates));var Z=n(80444),z=n(6258);const B=(0,r.lazyComponent)(r.deps.StudentGroupSignup,(e=>e.default));var O=n(480),V=n(86628),F=n(24405),N=n(59054),D=n(49204),U=n(37810),W=n(61519),q=n(63296),K=n(58297),H=n(64369),$=n(74016),G=n(85893);const Q=function(e){const{teamStore:t}=e,n=(0,O.O7)(),{teamName:o}=(0,V.VK)((()=>({teamName:t.getName()})),[t]),i=(0,F.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:U.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:U.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,G.jsxs)("div",{style:i.container,children:[(0,G.jsx)($.p,{store:t,disabled:!0,size:55}),(0,G.jsx)("div",{style:i.title,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkJoinPage.page.title",defaultMessage:"You've been invited to join {teamName}",values:{teamName:o}})}),(0,G.jsx)("div",{style:i.subtitle,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkJoinPage.page.subtitle",defaultMessage:"You can access the content in the teamspace if you join the teamspace."})}),(0,G.jsxs)("div",{style:i.buttonContainer,children:[(0,G.jsx)(K.Z,{isLarge:!0,onClick:async()=>{const e=n.currentUser.id;if(!e)return;const o=[{type:"member",entity_type:"user",user_id:e}];await D.um({environment:n,userId:e,teamStore:t,user:o}),S.Ph(n,{store:t,selection:"yes"})},children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkJoinPage.joinTeam.label",defaultMessage:"Join teamspace"})}),(0,G.jsx)(q.Z,{isLarge:!0,style:i.rightButton,onClick:async()=>{S.Ph(n,{store:t,selection:"no"}),await D.Id({environment:n})},children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkJoinPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,G.jsx)(W.Z,{size:48,innerStyle:i.divider}),(0,G.jsx)(H.Z,{isSmall:!0,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkJoinPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})};var Y=n(14889);function X(e){const{teamStore:t,teamName:n,onRequestClick:o}=e,i=(0,O.O7)(),r=(0,F.yK)((e=>({buttonContainer:{marginTop:15,display:"flex",justifyContent:"space-between"},container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},title:{fontWeight:U.Z.fontWeight.semibold,fontSize:20,margin:10},subtitle:{color:e.mediumTextColor,fontSize:18},divider:{maxWidth:280},rightButton:{fontWeight:U.Z.fontWeight.semibold,marginLeft:10}})),[]);return(0,G.jsxs)("div",{style:r.container,children:[(0,G.jsx)($.p,{store:t,disabled:!0,size:55}),(0,G.jsx)("div",{style:r.title,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.title",defaultMessage:"Request access to {teamName}",values:{teamName:n??J()}})}),(0,G.jsx)("div",{style:r.subtitle,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.subtitle",defaultMessage:"You can access this teamspace if a teamspace owner approves your request."})}),(0,G.jsxs)("div",{style:r.buttonContainer,children:[(0,G.jsx)(K.Z,{isLarge:!0,onClick:o,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkRequestPage.requestAccess.label",defaultMessage:"Request access"})}),(0,G.jsx)(q.Z,{isLarge:!0,style:r.rightButton,onClick:async()=>{await D.Id({environment:i})},children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkRequestPage.backToMyContentButton.label",defaultMessage:"Back to my content"})})]}),(0,G.jsx)(W.Z,{size:48,innerStyle:r.divider}),(0,G.jsx)(H.Z,{isSmall:!0,children:(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkRequestPage.contact.message",defaultMessage:"Please contact your workspace owner for any questions."})})]})}function J(){return(0,G.jsx)(f.FormattedMessage,{id:"teamInviteLinkRequestPage.privateTeamspace.label",defaultMessage:"Private Teamspace"})}const ee=function(e){const{teamStore:t}=e,[n,i]=(0,o.useState)(!1),{teamName:r}=(0,V.VK)((()=>({teamName:t.getName()})),[t]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(X,{teamStore:t,teamName:r,onRequestClick:()=>i(!0)}),(0,G.jsx)(Y.Z,{teamStore:t,teamName:r??J(),teamId:t.id,isModalOpen:n,onDismiss:()=>i(!1)})]})};function te(e){const{teamAccessLevel:t,teamStore:n}=e;switch(t){case"open":return(0,G.jsx)(Q,{teamStore:n});case"closed":case"private":return(0,G.jsx)(ee,{teamStore:n})}}const ne=function(e){const{teamId:t}=e,n=(0,O.O7)(),{teamAccessLevel:i,teamStore:s}=(0,V.VK)((()=>{const e=new z.zX(n,{table:h.e0,id:t});return{teamAccessLevel:e.getTeamAccessLevel(),teamStore:e}}),[n,t]),[{value:a}]=(0,N.r5)((async()=>await D.Ng({environment:n,teamId:t})),[n,t]);(0,o.useEffect)((()=>{!0===(null==a?void 0:a.isValidTeamRequest)&&null!=a&&a.isTeamMember&&(async()=>{var e;const t=null===(e=n.currentUser)||void 0===e?void 0:e.id;t&&s&&await D.t_({environment:n,userId:t,teamStore:s})})()}),[n,s,a]);const l=(0,F.yK)((()=>({container:{display:"flex",justifyContent:"center",height:"100%"}})),[]);return a?(0,G.jsx)("div",{style:l.container,children:a.isValidTeamRequest?(0,G.jsx)(te,{teamStore:s,teamAccessLevel:i}):"nonSpaceMember"===a.invalidRequestReason?(0,G.jsx)(r.LazyPageError,{route:{name:"teamsInvite",teamId:t},publicPageData:void 0}):(0,G.jsx)(r.LazyPageError,{route:{name:"notFound"},publicPageData:void 0})}):null};var oe=n(84549),ie=n(35061),re=n(11342);function se(e,t){const n=t.deviceType,o=t.mobileAppVersion;if(!(0,ie.wv)(e)||"local"===e||!t.isMobileNative||!o)return!1;const i=function(e){const{environmentName:t,deviceType:n,mobileAppVersion:o,androidVersions:i,iosVersions:r}=e,s=(0,re.parseMobileAppVersion)(o,"android"===n);if(!s)return!1;if("android"===n&&!i||"ios"===n&&!r)return!1;let a;if("android"===n){if(!i)return!1;a=(0,re.parseMobileAppVersion)(i[t],!0)}else{if(!r)return!1;a=(0,re.parseMobileAppVersion)(r[t],!1)}return!!a&&(0,re.isLessThanVersion)(s,a)}({environmentName:e,deviceType:n,mobileAppVersion:o,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}});return i}var ae=n(72141),le=n(3791),ce=n(51454),de=n(50950),ue=n(65729),pe=n(72899),he=n(16091),me=n(81598),ge=n(69098),fe=n(7401),ve=n(30106),ye=n(28020),be=n(4708),xe=n(15010),Se=n(19124),ke=n(64286),we=n(46654);const je=r.deps.imageEdit,Ce=(0,r.lazyComponent)(je,(e=>e.ImageEditModal));var Me=n(97448);const Ie=(0,r.lazyComponent)(r.deps.moveTo,(e=>e.MoveToMenuRenderer));var Pe=n(48451),Te=n(50770),Le=n(34017),Ae=n(94841),_e=n(61931),Ee=n(52389),Re=n(74948),Ze=n(36596),ze=n(38676);function Be(){const e=(0,V.VK)((()=>ze.sidebarExpandedStore.state),[]),t=(0,V.VK)((()=>e?ze.sidebarWidthStore.state:0),[e]),n=(0,F.yK)((n=>{const o={width:22,height:22,borderRadius:4},i={height:10,minHeight:10,borderRadius:10};return{sidebar:{backgroundColor:n.sidebarBackground,boxShadow:n.sidebarBoxShadow,display:e?"flex":"none",minWidth:t,flexDirection:"column",padding:"12px 14px",overflow:"hidden"},heroSection:{marginBottom:19,display:"flex",alignItems:"center"},heroSectionIcon:{padding:"1px",...o},heroSectionTitle:{width:177,marginLeft:8,...i},toplevelMenu:{marginBottom:16,width:78,...i},toplevelMenuLast:{marginBottom:36,width:135,...i},sectionHeader:{marginBottom:12,width:56,...i},pageRow:{display:"flex",alignItems:"center",marginBottom:8},pageChevron:{width:12,height:12,display:"block",marginRight:4,fill:"dark"===n.mode?n.accentColors.gray[300]:n.accentColors.gray[100]},pageIcon:{...o},pageTitle:{marginLeft:6,...i}}}),[e,t]),i=(0,G.jsxs)("div",{style:n.heroSection,children:[(0,G.jsx)(Ze.Z,{style:n.heroSectionIcon,emphasized:!0}),(0,G.jsx)(Ze.Z,{style:n.heroSectionTitle,emphasized:!0})]}),r=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ze.Z,{style:n.toplevelMenu,emphasized:!0}),(0,G.jsx)(Ze.Z,{style:n.toplevelMenu,emphasized:!0}),(0,G.jsx)(Ze.Z,{style:n.toplevelMenuLast,emphasized:!0})]}),s=(0,G.jsx)(Ze.Z,{style:n.sectionHeader,emphasized:!0}),a=(0,o.useMemo)((()=>Array(5).fill(null).map((()=>Array(4).fill(null).map((()=>Math.floor(4*Math.random())))))),[]).map(((e,t)=>e.map(((e,o)=>(0,G.jsxs)("div",{style:{...Oe(t),...n.pageRow},children:[(0,G.jsx)("svg",{viewBox:"0 0 30 30",style:n.pageChevron,children:(0,G.jsx)("polygon",{points:"17.4,15 7,25.2 9.8,28 23,15 9.8,2 7,4.8"})}),(0,G.jsx)(Ze.Z,{style:n.pageIcon,emphasized:!0}),(0,G.jsx)(Ze.Z,{style:{...n.pageTitle,width:80+20*e},emphasized:!0})]},`${t}-${o}`)))));return(0,G.jsxs)("div",{style:n.sidebar,children:[i,r,s,a]})}function Oe(e){return 0===e?{}:{animation:`1s ease-in ${e}s 1 normal both running fadein`}}var Ve=n(24646),Fe=n(5162),Ne=n(80736),De=n(51),Ue=n(21273),We=n(43604),qe=n(27242),Ke=n(12309),He=n(33293);function $e(){const e=(0,V.VK)((()=>Ke.Z.state.modalInfoById),[]);return(0,G.jsx)(G.Fragment,{children:Object.entries(e).map((e=>{let[t,n]=e;const{content:o,dismissUsing:i,isOpen:r,modalStyle:s,onClosed:a,onDismiss:l}=n;return(0,G.jsx)(He.q,{dismissUsing:i,isOpen:r,onClosed:a,onDismiss:l,style:s,children:o},t)}))})}n(21703);var Ge=n(30120),Qe=n(92595),Ye=n(54642);async function Xe(e,t){const n=await Ye.stripeGetTestClock(t,{spaceId:e});if("success"===n.type){if("advancing"===n.data.status)throw new Error("Test clock is advancing. Please try again in a few seconds.");return n.data.epochSeconds}}async function Je(e){const{environment:t,spaceId:n,advanceTestClockArgument:o}=e;if(o)return"number"==typeof o?o:"function"==typeof o?await async function(e){const{environment:t,spaceId:n,callback:o}=e,i=await Xe(n,t);if(i)return o(i)}({environment:t,spaceId:n,callback:o}):"object"==typeof o?await async function(e){const{environment:t,spaceId:n,durationLike:o}=e,i=await Xe(n,t);if(!i)return;const r=Ge.ou.fromSeconds(i),s=Ge.nL.fromDurationLike(o);return r.plus(s).toSeconds()}({environment:t,spaceId:n,durationLike:o}):void 0}const et=function(){const e=["local","staging","development"].includes("production"),t=(0,O.O7)();return(0,o.useEffect)((()=>{e&&((0,Qe.exposeDebugValue)("refreshTestClock",(async()=>{var e;const n=null===(e=Z.default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(n){const e=await Xe(n,t);if(e){const t=Ge.ou.fromSeconds(e);console.log(`Test clock time is ${t.toString()} (${e} seconds)`)}}})),(0,Qe.exposeDebugValue)("advanceTestClock",(async e=>{var n;if(!e)throw new Error("advanceTestClock requires an argument. You can pass an epoch timestamp in seconds, a relative DurationLike object like { months: 2 }, or a function that takes the current epoch seconds and returns the new epoch seconds.");const o=null===(n=Z.default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(!o)return;const i=await Je({environment:t,spaceId:o,advanceTestClockArgument:e});i&&await Ye.stripeAdvanceTestClock(t,{spaceId:o,epochSeconds:i})})))}),[e,t]),null};var tt=n(1404),nt=n(67181),ot=n(59260),it=n(62142),rt=n(30221),st=n(88280),at=(n(57658),n(19584)),lt=n(99334);const ct=!1,dt=(ct?1:10)*at.C0,ut=5*dt;function pt(){ct&&console.log(...arguments)}function ht(){return(0,o.useEffect)((()=>{if(!window.BroadcastChannel)return;const e=(0,m.c$)(),t=new Map,n=new BroadcastChannel("notion_tab_tracker");n.onmessage=e=>{const n=e.data;"string"==typeof n&&t.set(n,Date.now())};const o=window.setInterval((()=>{(()=>{const e=[],n=Date.now();for(const[o,i]of t.entries())n-i>ut&&e.push(o);e.length&&pt("Removing tab ids:",e);for(const o of e)t.delete(o)})(),n.postMessage(e);const o=t.size+1;pt("Tab count is",o),(0,lt.$)(o)}),dt);return()=>{n.close(),window.clearInterval(o)}}),[]),null}var mt=n(22491),gt=n(70203),ft=n(38585),vt=n(53965),yt=n(92120),bt=n(43250),xt=n(62740),St=n(24229),kt=n(48588);function wt(e){const{discussionId:t,level:n}=e;return`\n\t\t.${(0,mt.vE)({level:n})}.${(0,mt.dk)({discussionId:t})}.${ft.kB} {\n\t\t\tbackground: ${(0,v.Hu)(e)} !important;\n\t\t\topacity: unset !important;\n\t\t\tborder-bottom: 2px solid ${v.mO};\n\t\t}\n\t`}function jt(e){return`background: ${e.accentColors.uiBlue[150]} !important;\n\t\t\tborder-bottom: 2px solid ${e.accentColors.uiBlue[300]} !important;`}function Ct(e){return`background: ${e.tint.regular} !important;\n\t\t\tcolor: ${e.text.secondary} !important;\n\t\t\tborder-bottom: 2px solid ${e.state.pressed} !important;`}function Mt(){const e=(0,F.Fg)();function t(){var e,t,n;const o=(null===(e=yt.Z.state)||void 0===e?void 0:e.discussionIds)||[],i=null!==(t=St.Z.state)&&void 0!==t&&t.open&&(null===(n=St.Z.state)||void 0===n?void 0:n.discussionIds)||[];return[...o.flatMap((e=>vt.DZ(mt.nB).map((t=>wt({discussionId:e,level:t+1,hovered:!0,selected:!1}))))),...i.flatMap((e=>vt.DZ(mt.nB).map((t=>wt({discussionId:e,level:t+1,hovered:!1,selected:!0})))))].join("\n")}function n(e){var t;return((null===(t=yt.Z.state)||void 0===t?void 0:t.discussionIds)||[]).map((t=>function(e){const{discussionId:t,theme:n}=e;return`\n\t\t.${(0,mt.Ws)({type:"update"})}.${(0,mt.dk)({discussionId:t})}.${ft.kB} {\n\t\t\t${jt(n)}\n\t\t}\n\t\t.${(0,mt.Ws)({type:"remove"})}.${(0,mt.dk)({discussionId:t})}.${ft.kB} {\n\t\t\t${Ct(n)}\n\t\t}\n\t`}({theme:e,discussionId:t}))).join("\n")}function o(){var e,t;const n=null===(e=kt.Z.state)||void 0===e?void 0:e.store,o=null===(t=kt.Z.state)||void 0===t||null===(t=t.annotations)||void 0===t?void 0:t.find(gt.j0F);if(!o)return"";const i=(0,gt.zW$)(o);return"block"!==(null==n?void 0:n.table)?"":`\n\t\t\t.${(0,mt.S$)({href:i,blockId:n.id})}.${ft.kB} {\n\t\t\t\ttransition: border-color 100ms ease-in, opacity 100ms ease-in;\n\t\t\t\tborder-color: currentColor !important;\n\t\t\t\topacity: 1 !important;\n\t\t\t}\n\t\t`}function i(e){let t="";const n=xt.Z.getHoveredEdit();n&&(t=`\n\t\t\t.${(0,mt.EO)({type:"insert",editId:n.editId})} {\n\t\t\t\t${jt(e)}\n\t\t\t}\n\t\t\t.${(0,mt.EO)({type:"remove",editId:n.editId})} {\n\t\t\t\t${Ct(e)}\n\t\t\t}\n\t\t`);return`\n\t\t\t${t}\n\t\t\t${`\n\t\t\t.${bt.Y3l} .${(0,mt.jN)("insert")} {\n\t\t\t\tbackground: initial !important;\n\t\t\t\tborder-bottom: initial !important;\n\t\t\t\tcolor: ${e.regularTextColor} !important;\n\t\t\t}\n\n\t\t\t.${bt.Y3l} .${(0,mt.jN)("remove")} {\n\t\t\t\tbackground: initial !important;\n\t\t\t\tborder-bottom: initial !important;\n\t\t\t\tcolor: ${e.text.quaternary} !important;\n\t\t\t}\n\t\t`}\n\t\t`}const r=(0,V.VK)((()=>[t(),n(e),o(),i(e)].filter(Boolean).join("\n")),[e]);return r?(0,G.jsx)("style",{dangerouslySetInnerHTML:{__html:r}}):null}var It=n(77207),Pt=n(74055),Tt=n(77080),Lt=n(7339);function At(e){return(0,G.jsx)("div",{id:"test-customer-io",style:{width:334,height:200,position:"absolute",bottom:64,right:21,zIndex:1,display:e?void 0:"none"}})}const _t=function(){const e=(0,O.O7)(),{currentUser:t}=e,n=(0,V.VK)((()=>Lt.C.state.ready),[]),i=(0,V.VK)((()=>t.isLoggedIn()&&n&&Tt.default.checkGate("customerio")),[t,n]),r=(0,V.VK)((()=>Z.default.state.inAppCalloutStore),[]),s=(0,V.VK)((()=>"dark"!==e.ThemeStore.state.mode),[e]);(0,o.useEffect)((()=>{i&&(r.canShow("customer_io")?s?Pt.Z.state.suppressReason===Pt.V.IN_APP_CALLOUT_CONFLICT?Pt.Z.setState({...Pt.Z.state,isVisible:!0,suppressReason:void 0}):Pt.Z.setState({...Pt.Z.state,suppressReason:void 0}):Pt.Z.setState({isVisible:!1,suppressReason:Pt.V.DARK_MODE}):Pt.Z.setState({isVisible:!1,suppressReason:Pt.V.IN_APP_CALLOUT_CONFLICT}))}),[r,i,s]);const a=(0,V.VK)((()=>Pt.Z.state.isVisible&&r.canShow("customer_io")),[r]);return(0,o.useEffect)((()=>{if(a)return r.updateCalloutStatus({calloutId:"customer_io",visible:!0}),()=>{r.updateCalloutStatus({calloutId:"customer_io",visible:!1})}}),[r,a]),i?At(!!a):null};var Et=n(41056);function Rt(e){return(0,o.useEffect)((()=>{const e=window.setInterval(Et.u,5e3);return()=>{window.clearInterval(e)}}),[]),null}var Zt=n(98938),zt=n(41892);function Bt(){const e=(0,O.Fy)(),[t,n]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{if(e.isDesktop){const e=function(e){var t={addEvent:function(e,t,n){e.addEventListener(t,n,!1)},removeEvent:function(e,t,n){e.removeEventListener(t,n)},input:"",pattern:"38384040373937396665",keydownHandler:function(n){t.input+=n.keyCode,t.input.length>t.pattern.length&&(t.input=t.input.substr(t.input.length-t.pattern.length)),t.input===t.pattern&&(e(),t.input="")},load:function(){this.addEvent(document,"keydown",this.keydownHandler)},unload:function(){this.removeEvent(document,"keydown",this.keydownHandler)}};return t.load(),t}((()=>{n(!0)}));return()=>{e.unload()}}}),[e.isDesktop]),t?(0,G.jsx)("img",{className:"nyan",style:{position:"fixed",top:"calc(50vh - 100px)",zIndex:1e3,left:"50%",animationName:"leftOrRight",animationDuration:"9s",animationIterationCount:"infinite",pointerEvents:"none",userSelect:"none"},src:zt.Z.images.nyancatGif}):null}var Ot=n(15944),Vt=n(81415);const Ft=(0,f.defineMessages)({pressSlashHeader:{id:"EducationTooltips.pressSlash.header",defaultMessage:"Press {slashkey} for commands"}});function Nt(e){return(0,G.jsx)("div",{style:{background:v.ZP.whiteWithAlpha(.1),padding:3,paddingRight:8,paddingLeft:8,marginRight:6,marginLeft:6,borderRadius:4},children:e.char})}function Dt(){const e=(0,O.O7)(),t=Ot.o();return(0,V.VK)((()=>{const{currentUserSettingsStore:e}=Z.default.state;var t;return!e||!e.isReady()||Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.pressed_slash_tooltip)}),[])||e.device.isMobile||!t?null:(0,G.jsx)(Vt.U,{hideCloseButton:!0,origin:()=>t.getNode(),placementToOrigin:"bottom",header:(0,G.jsx)(f.FormattedMessage,{...Ft.pressSlashHeader,values:{slashkey:(0,G.jsx)(Nt,{char:"/"})}}),content:null,onCloseClick:()=>Ot.q(e)})}var Ut=n(1302),Wt=n(74725),qt=n(41432),Kt=n(43690),Ht=n(6695),$t=n(66673),Gt=n(40745),Qt=n(8597),Yt=n(13148),Xt=n(75e3),Jt=n(70663),en=n(16275),tn=n(80503),nn=n(1898),on=n(98604),rn=n(61045),sn=n(3898),an=n(64964),ln=n(993),cn=n(13447),dn=n(10906),un=n(49394),pn=n(65598),hn=n(45010),mn=n(98180),gn=n(69316),fn=n(85526),vn=n(83212),yn=n(24666),bn=n(23063),xn=n(73420),Sn=n(73063),kn=n(1743),wn=n(74194),jn=n(3386),Cn=n(58261),Mn=n(85740),In=n(26388);function Pn(e){const{environment:t,pageStore:n}=e,[i,s]=(0,o.useState)(-1),[a,l]=(0,o.useState)(""),[c]=(0,o.useState)(n.id),d=(0,o.useRef)(null),{focused:u,shouldSelectAllInput:p,findQuery:h,showReplaceInput:m,open:g}=(0,V.VK)((()=>gn.Z.state),[]);(0,o.useEffect)((()=>{c!==n.id&&on.xv({clearQuery:!0})}),[c,n.id]),(0,Wt.O)({active:g,closeHandler:()=>on.xv({clearQuery:!1}),ref:d,ignoreKeydown:!0});const v=(0,V.VK)((()=>g?[n,...(0,pn.MI)({blockStore:n,traverseTransclusionReferences:!0})]:[]),[g,n]),{schema:y,pagePropertyFormats:b,pageProperties:x}=(0,V.VK)((()=>{var e;const t=n.getProperties(),o=(null===(e=n.getAssociatedCollectionStore())||void 0===e?void 0:e.getFormat().property_visibility)??[];return{schema:n.getSchema(),pagePropertyFormats:o,pageProperties:t}}),[n]),S=(0,f.useIntl)(),k=(0,$t.D9)(h),w=(0,V.VK)((()=>{if(!g)return[];const e=function(e){const{schema:t,find:n,propertyFormats:o,pageProperties:i}=e;if(0===n.length)return[];const r=(0,Ht.n5)({schema:t,propertyFormats:o,titleProperty:"disallow"}),s={};o.forEach((e=>{const t=e.property,n="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==i?void 0:i[t]);s[t]=n}));const a=r.filter(((e,o)=>{var i;let{property:r}=e;const s=null===(i=t[r])||void 0===i?void 0:i.name.toLowerCase();return null==s?void 0:s.includes(n.toLowerCase())}));return a.map(((e,t)=>{let{property:n}=e;return{type:"property",allowReplace:!1,propertyId:n,visible:s[n]??!0}}))}({find:h,schema:y,propertyFormats:b,pageProperties:x}),t=function(e){const{find:t,childBlocks:n,intl:o}=e;if(!n||0===t.length)return[];const i=[];for(const r of n){const e=r.getType();if(!e)continue;const n=(0,qt.XD)(e)||(0,qt.W2)(e);if(!(n||"table_row"===e||"collection_view"===e))continue;const s=r.getProperties(),{title:a,caption:l,description:c}=s;if("table_row"===e){const e=vt.oA((0,un.Je)({block:r,find:t,intl:o})).map((e=>({...e,type:"block",blockId:r.id,blockStore:r,propertyType:"title"})));e&&i.push(...e)}else if(n){const e={title:a,caption:l,description:c};(0,nn.qP)(e).forEach((e=>{let[n,s]=e;if(!s)return;const a={type:"block",blockId:r.id,propertyType:n,blockStore:r},l=(0,un.ub)({textValue:s,find:t,intl:o}).map((e=>({...e,...a})));i.push(...l)}))}else if("collection_view"===e){const e=(0,dn.fm)(r);if(!e)continue;const n=e.collectionViewStore();if(!n)continue;const s=n.getType();if(!s)continue;const a=n.getFormat(),l=e.normalizedSchemaStore.state,c=Object.keys(l).filter((e=>{var t,n;return"text"===(null===(t=l[e])||void 0===t?void 0:t.type)||"title"===(null===(n=l[e])||void 0===n?void 0:n.type)})),d=vt.jj((0,Kt.ps)(a,s,l));if(!d)continue;const u=d.filter((e=>c.includes(e)));e.groupsStore.state.forEach((e=>{const s=e.resultsStore.state.flatMap((e=>{const i=e.getPropertiesStore().getValue();if(!i)return[];return u.flatMap((s=>{const a=i[s];if(!a)return[];return(0,un.ub)({textValue:a,intl:o,find:t}).map((t=>({propertyId:s,selection:t.selection,allowReplace:!1,type:"inline_collection_child_page",inlineCollectionId:r.id,inlineCollectionViewId:n.id,blockStore:e})))}))}));i.push(...vt.jj(s))}))}}return i}({find:h,childBlocks:v,intl:S}),n=[...e,...t];return h!==k?s(-1):i>=n.length&&s(n.length-1),n}),[g,h,y,b,x,v,S,k,i]);(0,o.useEffect)((()=>{w.length>0&&-1===i&&s(0);const e=w[i];if(!e)return gn.Z.update((e=>({...e,currentFocusedResult:void 0})));if("block"===e.type)return gn.Z.update((t=>({...t,currentFocusedResult:{type:"block",id:e.blockStore.id,selection:e.selection}})));if("property"===e.type){const t=e.propertyId;return gn.Z.update((e=>({...e,currentFocusedResult:{type:"property",propertyId:t}})))}if("inline_collection_child_page"===e.type){const t=e;return gn.Z.update((e=>({...e,currentFocusedResult:{type:"inline_collection_child_page",id:t.blockStore.id,inlineCollectionId:t.inlineCollectionId,inlineCollectionViewId:t.inlineCollectionViewId,propertyId:t.propertyId,selection:t.selection}})))}}),[i,w]);const{value:j}=(0,r.useDependency)(r.deps.assistant),C=(0,V.VK)((()=>Ue.Z.isInPageFindQnaOptionEnabledForUser()),[]),M=(0,o.useCallback)((async e=>{if(!j||!C)return;const o=await j.assistantActions.resetAndInitializeAssistantSession({environment:t,makeActiveSession:!0});if(!o)return;const i=mn.Z.getSessionContext(o.sessionId);i&&(i.assistantConfigurationStore.setSearchScope({pageId:n.id,type:"page"}),on.xv({clearQuery:!1}),j.assistantMenuStore.setState({open:!0,currentView:"chat"}),e&&e.length>0&&await j.handleSubmitNewQuestion({currentSkill:void 0,newValue:(0,gt.TPx)(h),environment:t,shouldForceStartNewSession:!1,source:"in_page_find"}))}),[j,t,h,n.id,C]),I=(0,o.useCallback)((async()=>{await Ut.default.afterNextFlush();const e=document.getElementsByClassName(en.qp).item(0);if(!e)return;const t=hn.Z.PageScroller;t&&rn.bx({element:e,scrollers:{verticalScroller:t,horizontalScroller:void 0},vertical:{reveal:"closest"},horizontal:void 0,animate:!0})}),[]);(0,N.r5)((async()=>{if(-1===i||!g)return;const e=w[i];e&&("block"===e.type?await sn.Nz(n,[e.blockStore.id]):"property"!==e.type||e.visible||fn.Z.state.forceShowProperties||fn.Z.update((e=>({...e,forceShowProperties:!0}))),await I())}),[i,w,g,n,I]);const P=vt.Ds((e=>gn.Z.update((t=>({...t,findQuery:e,currentFocusedResult:void 0,shouldSelectAllInput:!1})))),300),T=(0,o.useCallback)((async e=>{const{location:t,shouldRouteToQnaIfNoResults:n}=e;if(!w||0===w.length)return void(n&&h.length>0&&await M(h));if(1===w.length)return await I();const o="next"===t?1:-1,r=w[i+o],a="next"===t?0:w.length-1;s((e=>r?e+o:a))}),[w,i,h,M,I]),L=(0,V.VK)((()=>ye.tu.state),[])?0:(0,tn.R6)(t.device.isElectronMac),A=(0,V.VK)((()=>h===a),[h,a]),_=(0,V.VK)((()=>{if(!m||0===h.length||A)return!1;return Ln({match:w[i],environment:t})}),[i,t,w,m,A,h.length]),E=(0,F.yK)((e=>({findInputContainer:{display:"flex",alignItems:"center",gap:10,padding:"0px 10px"},replaceInputContainer:{display:"flex",padding:10,flexDirection:"column",alignItems:"flex-end",gap:3},container:{boxShadow:e.largeLightBoxShadow,position:"absolute",top:0,right:26,zIndex:999,backgroundColor:e.accentColors.gray[0],borderRadius:12,width:280,outline:`3px solid ${e.accentColors.uiBlue[200]}`},inputContainer:{boxShadow:"none",border:"none",outline:"none",flexGrow:1},findInput:{paddingTop:10,paddingBottom:10},input:{fontSize:14},divider:{height:1,backgroundColor:e.lightDividerColor},replaceButton:{fontSize:13,display:"flex",borderRadius:8,height:void 0,paddingTop:7,paddingBottom:7,cursor:_?"pointer":"not-allowed"},replaceAll:{fontWeight:U.Z.fontWeight.regular,color:e.text.secondary}})),[_]);return(0,G.jsx)(bn.Z,{isVisible:g,enterAnimationStyle:{opacity:0,translateY:0},animationStyle:{opacity:1,translateY:L+10},animationConfig:{durationMS:150},exitAnimationStyle:{translateY:L,opacity:0},render:()=>(0,G.jsxs)("div",{style:E.container,ref:d,children:[(0,G.jsx)("div",{style:E.findInputContainer,children:(0,G.jsx)(kn.Z,{debugName:"FindAndReplace",capture:!0,allowSearch:!0,allowOpenLinkMenu:!0,children:(0,G.jsxs)(jn.Z,{debugName:"FindAndReplace",capture:!0,onShiftEnter:()=>T({location:"previous",shouldRouteToQnaIfNoResults:!1}),onUp:()=>T({location:"previous",shouldRouteToQnaIfNoResults:!1}),onDown:()=>T({location:"next",shouldRouteToQnaIfNoResults:!1}),onGroup:e=>{e.preventDefault&&e.preventDefault(),T({location:"next",shouldRouteToQnaIfNoResults:!1})},onEsc:()=>{on.xv({clearQuery:!1})},onCommandJ:()=>M(),onCommandEnter:()=>M(h),children:[(0,G.jsx)(wn.Z,{value:h,onChange:e=>{const t=e.target.value;P.cancel(),t.length>0?P(e.target.value):gn.Z.update((e=>({...e,findQuery:"",currentFocusedResult:void 0,shouldSelectAllInput:!1})))},format:wn.B.Transparent,placeholder:"Find, replace, ask...",selectAll:p,focus:u,onFocus:()=>{on.Du(),yn.default.setState({mode:"empty"})},focusInitial:!0,onBlur:()=>gn.Z.update((e=>({...e,focused:!1}))),onSubmit:()=>T({location:"next",shouldRouteToQnaIfNoResults:!1}),inputStyle:{...E.input,...E.findInput},style:E.inputContainer},"find-input-element"),(0,G.jsx)(Tn,{numberOfMatches:w.length,currentSelectedMatchIndex:i,hasQuery:h.length>0}),0===w.length?(0,G.jsx)(Rn,{hasQuery:h.length>0,isQnaEnabled:C,onClick:()=>M(h)}):null,(0,G.jsx)(Zn,{jumpToBlockFn:T,numberOfMatches:w.length,isShowingReplaceInput:m,onReplaceIconClick:()=>on.AW(),hasFindQuery:h.length>0}),(0,G.jsx)(En,{})]})})}),m?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("div",{style:E.divider}),(0,G.jsxs)("div",{style:E.replaceInputContainer,children:[(0,G.jsx)(wn.Z,{value:a,onChange:e=>{l(e.target.value)},format:wn.B.Transparent,placeholder:"Replace with...",inputStyle:E.input,style:E.inputContainer,focusInitial:!0,onSubmit:()=>{_&&An({match:w[i],environment:t,replace:a})}},"replace-input-element"),(0,G.jsxs)(xn.X2,{gap:4,children:[(0,G.jsx)(Mn.Z,{onClick:()=>function(e){const{environment:t,matches:n,replace:o,find:i,intl:r}=e,s=n.filter((e=>Ln({match:e,environment:t}))),a=[o];let l=0;const c={id:"",offset:0};for(;-1!==l;){const e=l+_n,n=s.slice(l,e);l=n.length<_n?-1:e-1;const d=o.length-i.length;cn.createAndCommit({userAction:"findAndReplaceInstance",environment:t,perform:e=>{n.forEach((n=>{if("property"===n.type||"inline_collection_child_page"===n.type)return;const{blockStore:o,propertyType:i,selection:r}=n,s=o.id,l="title"===i?o.getTitleStore():o.getCaptionStore();l&&(c.id!==s?(c.id=s,c.offset=0):c.offset+=d,ln.pe({environment:t,editorMode:"default",selection:{startIndex:r.startIndex+c.offset,endIndex:r.endIndex+c.offset},store:l,transaction:e}),ln.mM({environment:t,index:r.startIndex+c.offset,store:l,tokens:[a],transaction:e}))}))}}),an.d4({item:{label:r.formatMessage({id:"inPageFind.replaceAll.snackbarCopy",defaultMessage:"Replaced {numMatches} matches"},{numMatches:n.length})},undoFunc:()=>{}})}}({matches:w,environment:t,replace:a,find:h,intl:S}),style:{...E.replaceButton,...E.replaceAll},disabled:0===h.length||A,isLightGray:0===h.length||A,children:(0,G.jsx)(f.FormattedMessage,{id:"inPageFind.matches.replaceAll",defaultMessage:"Replace all"})}),(0,G.jsx)(K.Z,{onClick:()=>An({match:w[i],environment:t,replace:a}),style:E.replaceButton,disabled:!_,children:(0,G.jsxs)(xn.X2,{gap:4,alignItems:"center",children:[(0,G.jsx)(f.FormattedMessage,{id:"inPageFind.matches.individualReplace",defaultMessage:"Replace"}),(0,G.jsx)("span",{children:(0,Xt.U)({height:14,width:14})})]})})]})]})]}):null]})})}function Tn(e){const t=(0,F.yK)((e=>({exclamation:{width:14,height:14,color:e.accentColors.red[500]},notFound:{whiteSpace:"nowrap",fontSize:12,color:e.text.tertiary}})),[]),{currentSelectedMatchIndex:n,numberOfMatches:o,hasQuery:i}=e;return o?(0,G.jsx)(zn,{currentSelectionIndex:n,numberOfMatches:o}):i&&0===o?(0,G.jsx)("span",{style:t.notFound,children:(0,G.jsx)(f.FormattedMessage,{id:"inPageFind.matchCount.noMatches",defaultMessage:"Not found"})}):null}function Ln(e){const{match:t,environment:n}=e;if(!t||"property"===t.type||"inline_collection_child_page"===t.type||!t.allowReplace)return!1;const{blockStore:o}=t,i=vn.Z.getMode(n,o),r=o.canEdit()&&"comment"!==i.permission;return i.permission,!!r}function An(e){const{match:t,environment:n,replace:o}=e;if(!t||"property"===t.type||!t.allowReplace)return;const{blockStore:i,selection:r,propertyType:s}=t,a="title"===s?i.getTitleStore():i.getCaptionStore();if(!a)return;const l=[o];cn.createAndCommit({userAction:"findAndReplaceInstance",environment:n,perform:e=>{ln.pe({environment:n,editorMode:"default",selection:r,store:a,transaction:e}),ln.mM({environment:n,index:r.startIndex,store:a,tokens:[l],transaction:e})}})}const _n=200;function En(){const[e,t]=(0,o.useState)(!1),n=(0,F.yK)((t=>({icon:{width:12,height:12,color:e?t.accentColors.gray[500]:t.icon.secondary,cursor:e?"pointer":void 0,strokeWidth:.4,stroke:"currentcolor"}})),[e]);return(0,G.jsx)(Sn.Z,{icon:e=>(0,Yt.U)(n.icon),ariaLabel:"Button to toggle the filter bar",onClick:()=>on.xv({clearQuery:!1}),onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),style:{padding:3,width:void 0,height:void 0}})}function Rn(e){const{hasQuery:t,isQnaEnabled:n,onClick:o}=e,i=(0,F.yK)((e=>({container:{fontSize:13,display:"flex",borderRadius:8,height:void 0,paddingTop:7,paddingBottom:7},icon:{width:12,height:12}})),[]);return t&&n?(0,G.jsx)(In.ZP,{placement:In.ug.Bottom,originGap:18,renderTooltip:()=>(0,G.jsx)(Cn.Z,{name:"commandEnter"}),allowHover:!1,render:e=>(0,G.jsx)(K.Z,{style:i.container,...e,onClick:o,children:(0,G.jsx)(f.FormattedMessage,{id:"inPageFind.matchCount.ask",defaultMessage:"Ask AI"})})}):null}function Zn(e){const{numberOfMatches:t,jumpToBlockFn:n,isShowingReplaceInput:o,onReplaceIconClick:i}=e,r=(0,V.VK)((()=>t>0),[t]),s=(0,F.yK)((e=>({icon:{width:12,height:12,color:r?e.icon.secondary:e.icon.quaternary,cursor:r?"pointer":"not-allowed",strokeWidth:.4,stroke:"currentcolor"},hoveredBackground:{background:e.buttonHoveredBackground},activeHoveredBackground:{background:o?e.accentColors.uiBlue[100]:e.buttonHoveredBackground},active:{color:o?e.accentColors.uiBlue[600]:e.icon.secondary,cursor:"pointer"},iconWrapper:{padding:3,width:void 0,height:void 0}})),[r,o]);return(0,G.jsxs)(xn.X2,{alignItems:"center",gap:2,children:[r?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Sn.Z,{icon:e=>(0,Qt.Z)(s.icon),ariaLabel:"Button to navigate to the previous result",hoveredStyle:s.hoveredBackground,onClick:()=>n({location:"previous",shouldRouteToQnaIfNoResults:!1}),style:s.iconWrapper}),(0,G.jsx)(Sn.Z,{icon:e=>(0,Gt.M)(s.icon),ariaLabel:"Button to navigate to the next result",hoveredStyle:s.hoveredBackground,onClick:()=>n({location:"next",shouldRouteToQnaIfNoResults:!1}),style:s.iconWrapper})]}):null,r||o?(0,G.jsx)(Sn.Z,{icon:e=>(0,Jt.h)({...s.icon,...s.active}),ariaLabel:"Button to the replace input section",hoveredStyle:s.activeHoveredBackground,onClick:i,style:s.iconWrapper}):null]})}function zn(e){const{numberOfMatches:t,currentSelectionIndex:n}=e,o=(0,F.yK)((e=>({container:{fontSize:".8rem",color:e.text.tertiary}})),[]);return 0===t?null:(0,G.jsx)("div",{style:o.container,children:(0,G.jsxs)(xn.X2,{gap:4,alignItems:"center",children:[(0,G.jsx)("span",{children:n+1}),(0,G.jsx)(f.FormattedMessage,{id:"inPageFind.matchCount.ofSpacer",defaultMessage:"of"}),(0,G.jsx)("span",{children:t})]})})}var Bn=n(24085),On=n(30664),Vn=n(36610),Fn=n(65556);function Nn(){const e=(0,O.O7)();return(0,o.useEffect)((()=>{function t(t){Vn.f7(e,{reason:t})}return Fn.showConfirmationDialogEventEmitter.addListener(t),()=>{Fn.showConfirmationDialogEventEmitter.removeListener(t)}}),[e]),null}var Dn=n(82540),Un=n(15145),Wn=n(50475),qn=n(70096),Kn=n(92973),Hn=n(87420),$n=n(75754),Gn=n(75079),Qn=n(85957),Yn=n(18245),Xn=n(34859),Jn=n(4926),eo=n(42330),to=n(82136),no=n(88923),oo=n(42057),io=n(27724),ro=n(41464),so=n(68785),ao=n(4827),lo=n(53336),co=n(26957),uo=n(69206),po=n(31192),ho=n(78901),mo=n(3553),go=n(55064),fo=n(92996),vo=n(40654),yo=n(82855),bo=n(16880),xo=n(7525),So=n(26999);function ko(e){const{theme:t,isSidePeekOpen:n,borderRadius:o,isUnifiedTitleBarEnabled:i,isElectronWindows:r,isShowingTabBar:s,zoomFactor:a}=e;return{zIndex:n?ce.LI:ce.Bh,background:t.peekModalBackground,borderTopLeftRadius:o??5,borderTopRightRadius:o??5,paddingRight:i&&r&&n&&!s?(0,vo.RO)(a):void 0}}function wo(e){const{environment:t,padding:n,height:o}=e,i=t.device.isMobile?4:n??12;return{height:o??tn.R6(t.device.isElectronMac)-1,display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:i,paddingRight:i}}var jo=n(73819),Co=n(81170),Mo=n(24042),Io=n(91551);const Po=new(n(61766).Z);var To=n(98452),Lo=n(99332),Ao=n(24612),_o=n(58493),Eo=n(42853),Ro=n(11302),Zo=n(58239);var zo=n(48779),Bo=n(89728),Oo=n(31278),Vo=n(76798),Fo=n(45653);const No={display:"flex",alignItems:"center",fontSize:14,minWidth:0};function Do(e,t){return e&&e instanceof z.H2&&t&&e.id===t.id}function Uo(e){const{parentStore:t,prefixText:n}=e,o=(0,O.O7)(),i=(0,V.VK)((()=>(0,ye.B7)(o)),[o]),r=(0,V.VK)((()=>t instanceof z.G&&t.isEmptyPage()),[t]),s=(0,V.VK)((()=>t instanceof z.H2?(0,zo.Wd)(o,t):t.getIcon()),[o,t]),a=(0,V.VK)((()=>t instanceof z.H2?(0,zo.rn)(o,t):void 0),[o,t]),l=(0,V.VK)((()=>{const{currentSpaceStore:e}=Z.default.state;return Do(t,e)}),[t]),c=(0,F.yK)((()=>({privatePagesText:{fontWeight:U.Z.fontWeight.medium,marginLeft:4,...U.Z.textOverflowStyle,overflow:"hidden"},icon:{marginRight:4,marginTop:1},title:{fontWeight:U.Z.fontWeight.semibold}})),[]);return(0,G.jsx)(G.Fragment,{children:l?(0,G.jsxs)(G.Fragment,{children:[n,(0,G.jsx)(Fo.Z,{size:22,avatarShouldShowShadow:!0,userStore:i}),(0,G.jsx)("span",{style:c.privatePagesText,children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Private pages",id:"peekMoveToMenu.addTo.privatePages"})})]}):(0,G.jsxs)(G.Fragment,{children:[n,(0,G.jsx)(Oo.Z,{disabled:!0,icon:s,isEmptyPage:r,title:a,size:18,style:c.icon}),(0,G.jsx)(Vo.Z,{style:c.title,store:t})]})})}const Wo=function(e){let{store:t,prefix:n,buttonStyle:i,saveParent:r,pageType:s,forceUntyped:a}=e;const l=(0,F.Fg)(),c=(0,O.O7)(),d=(0,V.VK)((()=>{const e=Z.default.state.mainEditorCurrentBlockStore;return e&&(0,Ae.WE)(e)?"home_tab":e&&(0,ye.qG)(e.id)?"aggregated_type":"quick_add"}),[]),u=(0,V.VK)((()=>t.getParentStore()),[t]),p=(0,o.useRef)(null),h=(0,o.useCallback)((e=>function(e,t,n,o,i,r,s,a){e.preventDefault(),t&&Ro.bA({environment:n,blocks:[o],originRect:t.getBoundingClientRect(),moveToContext:r,onAccept:e=>function(e,t,n,o){const{currentSpaceStore:i}=Z.default.state;if(i&&t){let t;!function(e){const{pageType:t,spaceStore:n,currentUserId:o,result:i}=e;(0,Zo.rq)({currentUserId:o,spaceId:n.id,value:i}),t&&(0,Zo.ZT)({currentUserId:o,spaceId:n.id,databaseType:fo.wg[t],parent:i})}({pageType:t||o,spaceStore:i,currentUserId:n.currentUser.id,result:e})}}(e,i,n,s),isAddTo:!0,isDefaultPrivateLocation:qo(o),disableSuccessToast:!0,forceUntyped:a||Ko(s)})}(e,p.current,c,t,r,d,s,a)),[p,c,t,r,d,s,a]);if(u&&!(u instanceof z.T5)&&!(u instanceof z.zq)&&!(u instanceof z.Vf)){const e=n?(0,G.jsx)("span",{style:{color:l.mediumTextColor,marginRight:4},children:(0,G.jsx)(f.FormattedMessage,{...n})}):void 0;return(0,G.jsx)(jn.Z,{debugName:"PeekMoveToMenu",capture:!0,onMoveTo:h,children:(0,G.jsx)("div",{style:No,children:(0,G.jsx)(In.ZP,{renderTooltip:()=>(0,G.jsxs)("div",{children:[(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Set the default page or database",id:"peekMoveToMenu.tooltip"}),(0,G.jsx)("br",{}),(0,G.jsx)(Cn.Z,{style:{color:l.mediumInvertedTextColor},name:"moveTo"})]}),render:t=>(0,G.jsxs)(Bo.Z,{onClick:h,ref:p,shouldShrink:!0,style:i,...t,children:[(0,G.jsx)(Uo,{parentStore:u,prefixText:e}),(0,Eo.i)({width:10,marginLeft:4,fill:l.lightTextColor})]})})})})}return null};function qo(e){const t=e.getParentStore(),{currentSpaceStore:n}=Z.default.state;return Do(t,n)}function Ko(e){return!e||"page"===e}var Ho=n(25906),$o=n(28311),Go=n(26399),Qo=n(43377),Yo=n(5002),Xo=n(68626),Jo=n(64530),ei=n(52629),ti=n(8406),ni=n(5149),oi=n(48543),ii=n(84210),ri=n(33929),si=n(60709),ai=n(98165),li=n(52275),ci=n(31945),di=n(16354),ui=n(78140),pi=n(32163),hi=n(53437),mi=n(72495),gi=n(49085),fi=n(3418);const vi=165888e7;class yi extends s.Z{constructor(){super(...arguments),this.storeTypes={visible:gi.default.createClass(!1)},this.timeout=void 0}UNSAFE_willMountOrUpdate(){(function(e){const{device:t}=e;if(t.isPhone)return!1;if(fi.Z.state.openPopups.size>0)return!1;const{currentUserSettingsStore:n}=Z.default.state;if(!n||!n.isReady())return!1;const o=n.getSettings();if(null!=o&&o.signup_time&&(null==o?void 0:o.signup_time)>vi)return!1;if(null!=o&&o.seen_peek_mode_tooltip)return!1;return!0})(this.environment)?(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.stores.visible.setState(!0)}),500)):(clearTimeout(this.timeout),this.stores.visible.setState(!1))}renderComponent(){const{origin:e}=this.props,{visible:t}=this.stores,{device:n}=this.environment;return n.isMobile?e:(0,G.jsxs)("div",{style:{position:"relative"},children:[e,(0,G.jsx)(bn.Z,{isVisible:t.state,animationStyle:{opacity:1},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>(0,G.jsx)(xi,{})})]})}}yi.displayName="PeekModeIntroTooltip";const bi=(0,f.injectIntl)(yi);function xi(){const e=(0,F.Fg)(),t=(0,O.O7)();return(0,G.jsxs)("div",{style:{fontSize:12,color:v.ZP.white,position:"absolute",top:"calc(100% + 12px)",left:"calc(50% - 110px)",background:v.ZP.blue,borderRadius:6,padding:"8px 12px 12px 12px",width:220,boxShadow:e.largeLightBoxShadow,zIndex:99},children:[(0,G.jsx)("div",{style:{position:"absolute",top:-12,left:"calc(50% - 2.5px)",background:v.ZP.blue,width:5,height:5,borderRadius:5,boxShadow:`0 0 0 1.5px ${e.contentBackground}`}}),(0,G.jsx)("div",{style:{position:"absolute",top:-12,left:"calc(50% - 1px)",background:v.ZP.blue,width:2,height:12}}),(0,G.jsx)("div",{style:{width:"90%",fontWeight:500,marginBottom:2},children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"New! Open pages in side peek",id:"peekModeIntroTooltip.title"})}),(0,G.jsx)("div",{style:{opacity:.8,lineHeight:1.35},children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Use Tables, Boards, Lists and Timelines while opening pages on the side for faster workflows. Switch to other peek modes here.",id:"peekModeIntroTooltip.subtitle"})}),(0,G.jsx)(Sn.Z,{icon:Yt.U,style:{position:"absolute",top:4,right:4,opacity:.8},iconStyle:{width:12,fill:v.ZP.white},onClick:()=>function(e){Hn.Om({environment:e,seen:!0})}(t)})]})}const Si=(0,f.defineMessages)({changeForThisView:{id:"peekTopbar.changePeekOption.changeForThisView",defaultMessage:"Edit view default"}});class ki extends s.Z{UNSAFE_willMount(){const e=ji(this.theme),t=no.default.getPeekMode();e.find((e=>vt.Xy(e.key,t)))||Xo.log({level:"warning",from:"TopbarPeekModeButton",type:"InvalidSelectedPeekMode",error:(0,ei.Ui)("Selected key is invalid.")})}renderComponent(){const{device:e}=this.environment,{mainEditorCurrentBlockStore:t}=Z.default.state,n=ji(this.theme),o=no.default.getPeekMode();return o?(0,G.jsx)(ci.ZP,{popupType:e.isMobile?hi.kQ.SlideUp:hi.kQ.Popup,alignmentToOrigin:ci.vR.Center,placementToOrigin:ci.pO.Bottom,style:{minWidth:190},originGap:0,onClick:()=>function(e){if(!no.default.state.open)return;const t=no.default.state.collectionContextStore;t?ti.nS({environment:e,collectionContextStore:t,from:"peek_topbar",peek_target_id:no.default.state.target.id,from_peek_mode:no.default.state.mode}):Kn.v2(e,{from:"peek_topbar",peek_target_id:no.default.state.target.id,from_peek_mode:no.default.state.mode})}(this.environment),renderOrigin:e=>(0,G.jsx)(bi,{origin:(0,G.jsx)(In.ZP,{renderTooltip:()=>(0,G.jsx)(G.Fragment,{children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Switch peek mode",id:"peekTopbar.openPagesAs.button"})}),render:t=>(0,G.jsx)(Sn.Z,{...e,...t,icon:(0,oi.RO)(o),iconStyle:{fill:this.theme.mediumIconColor}})})}),render:i=>{var r,s,a;let l;l=e.isMobile?{menuType:si.og.ActionSheet}:{menuType:si.og.Popup,width:220};const c=vt.oA([...n.map(((e,t)=>{const n=e.key,r="full_page"===n?(0,ii.ZP)({store:this.props.store,fullyQualified:!1,pageVisitSource:Un.tY.Expand}):function(e,t){const{mainEditorCurrentBlockStore:n}=Z.default.state,o=ai.uJ(t),i=t.isNavigableBlock()?o.slice(1):[...o],r=i.length>0?i[0]:void 0;return(0,dn.mb)({store:t,mainEditorCurrentBlockStore:r instanceof z.G&&!no.default.state.open?r:n,collectionContextStore:no.default.state.collectionContextStore,fullyQualified:!1,overridePeekMode:(0,no.getPeekModeFromCollectionPeekModeFormat)(e)})}(n,this.props.store);return{key:t,render:t=>(0,G.jsx)(di.Z,{href:r,onClick:()=>{var e;Hn.Om({environment:this.environment,seen:!0}),Kn.UZ(this.environment,{from:"peek_topbar",peek_mode:n,from_peek_mode:o,target_page_id:null===(e=no.default.peekTarget.state)||void 0===e?void 0:e.id}),i.close()},children:(0,G.jsx)(li.Z,{...t,disabled:!1,title:e.title,icon:e.icon,caption:e.caption,body:e.body,checkState:vt.Xy(e.key,o)})}),action:()=>{}}}))]),d=no.default.state.open?no.default.state.collectionContextStore:void 0,u=no.default.state.open?no.default.state.target:void 0,p=t&&t.id===(null==d||null===(r=d.collectionViewBlockStore())||void 0===r?void 0:r.getRecordStoreUIRoot().id),h=(null==d||null===(s=d.collectionStore())||void 0===s?void 0:s.id)===(null==u||null===(a=u.getAssociatedCollectionStore())||void 0===a?void 0:a.id)&&(null==d?void 0:d.permissionScopes.state.canConfigureBlock)&&p;return(0,G.jsx)(ui.Z,{...l,children:(0,G.jsx)(pi.Z,{type:pi.i.Vertical,sections:vt.oA([{key:0,render:e=>(0,G.jsx)(mi.Z,{enableActionSheetTitle:!0,...e}),items:c},h&&{key:1,render:e=>(0,G.jsx)(mi.Z,{enableActionSheetTitle:!0,topBorder:!0,...e}),items:[{key:"change_for_view",render:e=>(0,G.jsx)(li.Z,{...e,disabled:!1,title:ri.default.formatMessage(Si.changeForThisView),icon:(0,Jo.y)({width:16,height:16,fill:this.theme.regularIconColor})}),action:e=>{!function(e,t){const n=no.default.state.open?no.default.state.collectionContextStore:void 0;n&&(Hn.Om({environment:e,seen:!0}),no.default.isCenterPeekOpen()&&t&&t(),ni.r$({collectionContextStore:n,collectionSettingsStore:n.settingsStore}),ni.H4({collectionSettingsStore:n.settingsStore,item:{type:"layout"}}),n.settingsStore.setState({...n.settingsStore.state,openButtonPopup:"peekModeFormat"}))}(this.environment,this.props.onClose),i.close()}}]}]),initialFocus:0})})}}):null}}ki.displayName="TopbarPeekModeButton";const wi=ki;function ji(e){return["side_peek","center_peek","full_page"].map((t=>({key:t,title:(0,oi.LQ)(t),icon:(0,oi.RO)(t)({width:16,fill:e.mediumTextColor})})))}var Ci=n(58810);const Mi=function(e){const{store:t,shouldShowMoveToMenu:n}=e,i=(0,O.O7)(),r=(0,f.useIntl)(),s=(0,V.VK)((()=>(0,ii.ZP)({store:t,fullyQualified:!1,pageVisitSource:Un.tY.Expand})),[t]),a=(0,F.yK)((e=>({keyboardShortcut:{color:e.mediumInvertedTextColor},iconButtonWrapper:{height:24}})),[]),l=(0,o.useCallback)((()=>{var e,t,o;Kn.sx(i,{isNewPage:n,peek_mode:no.default.state.mode,from:"topbar_button",target_page_id:null===(e=no.default.peekTarget.state)||void 0===e?void 0:e.id}),Kn.$C(i,{peek_mode:no.default.state.mode,from:"topbar_open_as_page_button",target_page_id:null===(t=no.default.peekTarget.state)||void 0===t?void 0:t.id,target_parent_id:null===(o=no.default.peekTarget.state)||void 0===o?void 0:o.getParentId()})}),[i,n]);return(0,G.jsx)(In.ZP,{renderTooltip:()=>(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("div",{children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Open in full page",id:"peekTopbar.navigateToPage.tooltip"})}),(0,G.jsx)(Cn.Z,{style:a.keyboardShortcut,name:"commandEnter"})]}),render:e=>(0,G.jsx)("div",{style:a.iconButtonWrapper,children:(0,G.jsx)(Sn.Z,{...e,icon:Ci.Z,iconStyle:{width:16,height:16},href:s,onClick:l,ariaLabel:r.formatMessage({id:"peekTopbar.navigateToPage.tooltip",defaultMessage:"Open in full page"})})})})};var Ii=n(86467),Pi=n(7715),Ti=n(94107);const Li=(0,f.defineMessages)({moveToPrefixText:{id:"peekMoveToMenu.moveTo.moveTo",defaultMessage:"Move to"},addToPrefixText:{id:"peekMoveToMenu.addTo.addTo",defaultMessage:"Add to"},closeButton:{defaultMessage:"Close",id:"peekTopbar.close.button"},previousPageTooltip:{defaultMessage:"Previous page",id:"peekTopbar.peekNavUpArrow.tooltip"},nextPageTooltip:{defaultMessage:"Next page",id:"peekTopbar.peekNavDownArrow.tooltip"}});const Ai=function(e){let{store:t,shouldShowMoveToMenu:n,onClose:o,spaceStore:i,spaceViewStore:s,pageVisitStore:a,presenceStore:l}=e;const c=(0,F.Fg)(),d=(0,O.O7)(),u=(0,V.VK)((()=>no.default.isSidePeekOpen()),[]),p=(0,V.VK)((()=>Io.Z.state.banners),[]),{isShowingTabBar:h,isUnifiedTitleBarEnabled:m,zoomFactor:g}=(0,V.VK)((()=>{var e;return{isShowingTabBar:Boolean(Mo.Z.state.isShowingTabBar),isUnifiedTitleBarEnabled:Boolean(null===(e=Mo.Z.state.preferences)||void 0===e?void 0:e.isUnifiedTitleBarEnabled),zoomFactor:Mo.Z.state.zoomFactor||vo.lO}}),[]),f=m?d.device.isElectron&&!h&&u:d.device.isElectronMac&&!h&&u;return(0,G.jsx)(mo.Z,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:v}=e;return(0,G.jsxs)("div",{...v,style:ko({theme:c,isSidePeekOpen:u,isUnifiedTitleBarEnabled:m,isElectronWindows:d.device.isElectronWindows,isShowingTabBar:h,zoomFactor:g}),className:f?bt.pMC:void 0,children:[(0,G.jsxs)("div",{style:wo({environment:d}),children:[(0,G.jsxs)("div",{style:{display:"grid",gridAutoFlow:"column",gridColumnGap:2,alignItems:"center"},children:[(0,G.jsx)(Ri,{onClose:o}),(0,G.jsx)(Mi,{store:t,shouldShowMoveToMenu:n}),no.default.state.open&&(0,G.jsx)(wi,{store:t,onClose:o}),(0,G.jsx)(Zi,{shouldShowMoveToMenu:n}),(0,G.jsx)(_i,{store:t,shouldShowMoveToMenu:n}),(0,G.jsx)(_o.Z,{store:t,isMobile:!1,buttonStyle:{...!n&&{marginLeft:12}}})]}),(0,G.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),(0,G.jsx)(Ei,{store:t,spaceStore:i,spaceViewStore:s,pageVisitStore:a,presenceStore:l})]}),(0,G.jsx)(r.LazyBannersRenderer,{banners:p,isMobile:!1,isInPeekRenderer:!0})]})}})};function _i(e){let{store:t,shouldShowMoveToMenu:n}=e;const{open:o,saveParent:i,pageVisitSource:r,collectionContextStore:s}=(0,V.VK)((()=>({open:no.default.state.open,saveParent:!!no.default.state.open&&no.default.state.saveParent,pageVisitSource:no.default.state.open?no.default.state.pageVisitSource:void 0,collectionContextStore:no.default.state.collectionContextStore})),[]),a=(0,V.VK)((()=>{const e=t.getAssociatedCollectionStore();return(null==e?void 0:e.getDatabaseType())===fo.iS?"tasks":void 0}),[t]),l=(0,V.VK)((()=>"collectionTypedView"===(null==s?void 0:s.contextType)),[s]);return o&&n?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Yo.Z,{}),(0,G.jsx)(Wo,{store:t,saveParent:i,prefix:l?Li.moveToPrefixText:Li.addToPrefixText,pageType:a,forceUntyped:r===Un.tY.SidebarQuickAdd})]}):null}function Ei(e){let{store:t,spaceStore:n,spaceViewStore:o,pageVisitStore:i,presenceStore:s}=e;const a=(0,O.O7)(),{device:l}=a,c=(0,V.VK)((()=>(0,we.IJ)(a,t)),[a,t]),d=(0,V.VK)((()=>ye.qG(t.id)),[t]),u=(0,V.VK)((()=>(0,Ae.Kj)(t.id)),[t]),p=!l.isMobile&&n&&o&&!c&&!u,h=(0,V.VK)((()=>Boolean(n&&!n.canEdit())),[n]),m=(0,V.VK)((()=>t.canEdit()),[t]),g=(0,V.VK)((()=>t.isRestricted()),[t]),f=(0,V.VK)((()=>!l.isMobile&&Tt.default.checkGate("page_layouts")),[l.isMobile]),v=n&&o&&!c&&(0,Ho.UP)({isSpaceGuest:h,canEditPage:m})&&!u,y=(0,jo.cR)(t);return(0,G.jsxs)("div",{style:{display:"flex",alignItems:"stretch",flexGrow:0,flexShrink:0,zIndex:1},children:[g&&(0,G.jsx)(Pi.Z,{style:{marginRight:14},onClick:()=>{Lo.Z.setState({open:!0})}}),m&&(0,G.jsx)(Ii.Z,{rootStore:t,pageVisitStore:i,presenceStore:s}),v&&(0,G.jsx)(r.LazyTopbarShareButton,{store:t,buttonPopupStore:Lo.Z}),p&&(0,G.jsx)($o.Z,{blockStore:t,spaceStore:n,buttonPopupStore:Po}),p&&(0,G.jsx)(Ti.Z,{blockStore:t,spaceStore:n,buttonPopupStore:Ao.Z}),f&&(0,G.jsx)(Qo.b,{blockStore:t}),n&&o&&!c&&!y&&(0,G.jsx)(Go.Z,{store:t,spaceViewStore:o}),d&&(0,G.jsx)(Co.Z,{}),p&&(0,G.jsx)(r.LazyTopbarMoreButton,{store:t,buttonPopupStore:To.Z})]})}function Ri(e){let{onClose:t}=e;const n=(0,f.useIntl)(),o=(0,F.Fg)();return(0,V.VK)((()=>no.default.isSidePeekOpen()),[])?(0,G.jsx)(In.ZP,{renderTooltip:()=>(0,G.jsxs)("div",{children:[n.formatMessage(Li.closeButton),(0,G.jsx)("br",{}),(0,G.jsx)(Cn.Z,{style:{color:o.mediumInvertedTextColor},name:"esc"})]}),render:e=>(0,G.jsx)(Sn.Z,{...e,ariaLabel:n.formatMessage(Li.closeButton),icon:xo.t,iconStyle:{width:16,height:16},onClick:()=>t("close_button")})}):null}function Zi(e){let{shouldShowMoveToMenu:t}=e;const n=(0,f.useIntl)(),o=(0,F.Fg)(),i=(0,V.VK)((()=>no.default.state),[]),{resultsStore:r}=i,s=(0,V.VK)((()=>null==r?void 0:r.getState()),[r]);if(!i.open)return null;if(t)return null;const a=i.target.id;return s&&s.length>0&&s.some((e=>e.id===a))?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Yo.Z,{}),(0,G.jsx)(In.ZP,{renderTooltip:()=>(0,G.jsxs)("div",{children:[n.formatMessage(Li.previousPageTooltip),(0,G.jsx)("br",{}),(0,G.jsx)(Cn.Z,{style:{color:o.mediumInvertedTextColor},name:"peekUp"})]}),render:e=>(0,G.jsx)(Sn.Z,{...e,ariaLabel:n.formatMessage(Li.previousPageTooltip),disabled:a===s[0].id,icon:bo.R,onClick:()=>So.Qk(),iconStyle:{fill:o.mediumIconColor}})}),(0,G.jsx)(In.ZP,{renderTooltip:()=>(0,G.jsxs)("div",{children:[n.formatMessage(Li.nextPageTooltip),(0,G.jsx)("br",{}),(0,G.jsx)(Cn.Z,{style:{color:o.mediumInvertedTextColor},name:"peekDown"})]}),render:e=>(0,G.jsx)(Sn.Z,{...e,ariaLabel:n.formatMessage(Li.nextPageTooltip),disabled:a===s[s.length-1].id,icon:yo.E,onClick:()=>So.OW(),iconStyle:{fill:o.mediumIconColor}})})]}):null}function zi(){const{open:e}=(0,V.VK)((()=>no.default.state),[]),t=(0,V.VK)((()=>Jn.Z.state),[]),n=(0,F.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:ce.Nn,background:e.overlaySmokescreen},contentStyles:{...Di(e),top:no.PeekModeOuterPadding,left:no.PeekModeOuterPadding,right:no.PeekModeOuterPadding,marginRight:"auto",height:`calc(100% - ${no.PeekModeOuterPadding}px*2)`,maxWidth:no.CenterPeekModeOuterWidth+t,borderRadius:4}})),[t]);return(0,G.jsx)(ao.Z,{open:e,children:(0,G.jsx)(Vi,{enableCaptureClick:!0,priority:void 0,showResizer:!1,styles:n})})}function Bi(){const e=(0,O.O7)(),t=(0,V.VK)((()=>no.default.state),[]),n=(0,V.VK)((()=>no.default.getSidePeekWidth(e.WindowSizeStore.state.width)),[e]),o=(0,F.yK)((e=>({containerStyles:{position:"fixed",top:0,right:0,bottom:0,translateX:n,width:n,zIndex:ce.YO},contentStyles:{...Di(e),top:0,right:0,width:"100%",height:"100%",borderRadius:0}})),[n]);return(0,G.jsx)(bn.Z,{isVisible:!0,useCompositeLayer:!0,animationStyle:{translateX:t.open&&!t.isClosing?0:n},render:()=>(0,G.jsx)(Vi,{enableCaptureClick:!1,priority:-1,showResizer:!0,styles:o}),enterAnimationStyle:{translateX:t.open?0:n},onAnimationEnd:()=>{t.open&&t.isClosing?(no.default.setState({...t,isClosing:!1}),Hn.ME()):t.open&&t.isOpening&&no.default.setState({...t,isOpening:!1})}})}function Oi(){const e=(0,O.O7)(),t=(0,V.VK)((()=>no.default.state),[]),{currentSpaceStore:n,currentSpaceViewStore:o}=(0,V.VK)((()=>Z.default.state),[]),i=(0,V.VK)((()=>{var e;return!!t.open&&(t.showMoveTo||"collectionTypedView"===(null===(e=t.collectionContextStore)||void 0===e?void 0:e.contextType))}),[t]);return t.open?(0,G.jsx)(Ai,{store:t.target,spaceStore:n,spaceViewStore:o,pageVisitStore:t.pageVisitStore,presenceStore:t.presenceStore,shouldShowMoveToMenu:i,onClose:t=>{Hi(e,t)}}):null}function Vi(e){const{priority:t}=e,n=(0,O.O7)(),i=(0,V.VK)((()=>no.default.state),[]),{shouldShowFrame:r}=(0,V.VK)((()=>(0,ye.h1)(n)),[n]),s=(0,V.VK)((()=>Qn.Tx()),[]),a=(0,V.VK)((()=>i.open&&0===io.default.state.stores.length&&!io.default.state.pivot&&"editing"!==yn.default.state.mode&&!eo.ZP.state.isOpen),[i.open]),l=(0,o.useCallback)((()=>{$i(n)}),[n]),c=(0,o.useCallback)((()=>{!function(e){no.default.peekTarget.state&&($n._c({environment:e,store:no.default.peekTarget.state,pageVisitSource:Un.tY.Expand}),Kn.sx(e,{isNewPage:no.default.state.open&&no.default.state.showMoveTo,peek_mode:no.default.state.mode,from:"command_enter",target_page_id:no.default.peekTarget.state.id}),Kn.$C(e,{peek_mode:no.default.state.mode,from:"command_enter",target_page_id:no.default.peekTarget.state.id,target_parent_id:no.default.peekTarget.state.getParentId()}))}(n)}),[n]);return r?i.open?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ro.Z,{debugName:"PeekRenderer",priority:t,capture:s}),(0,G.jsx)(jn.Z,{debugName:"PeekRenderer",capture:a,onEsc:l,onCommandEnter:c,children:(0,G.jsx)(Fi,{...e})},i.target.id)]}):(0,G.jsx)(Fi,{...e}):null}function Fi(e){const{enableCaptureClick:t,bottomBar:n,showResizer:i,styles:s}=e,a=(0,o.useCallback)((e=>{hn.Z.PeekViewScroller=e??void 0}),[]),l=(0,f.useIntl)(),c=(0,O.O7)(),d=(0,V.VK)((()=>no.default.state),[]),u=(0,V.SI)((()=>d.open?vn.Z.getMode(c,d.target):vn.m.disabled),[c,d]),p=(0,V.VK)((()=>{if(!d.open)return;const{currentSpaceStore:e,currentSpaceViewStore:t}=Z.default.state;return{pageStore:d.target,spaceStore:e,spaceViewStore:t,presenceStore:d.presenceStore,pageVisitStore:d.pageVisitStore,publicEditModeStore:u}}),[d,u]),h=(0,o.useCallback)((()=>{$i(c)}),[c]),m=(0,o.useCallback)((e=>{let{startTime:t,endTime:n}=e;const o=d.open?dn.fm(d.target):void 0;Yn.default.measure({metricName:"collections.max_scroll_lag_in_session",startTime:t,endTime:n},{environment:c,data:Gn.vS(o)})}),[c,d]),g=(0,o.useCallback)((()=>{!function(e){Hi(e,"empty_space_click")}(c)}),[c]);return(0,o.useEffect)((()=>{d.open&&d.mode===qn.l?k.setOverlay(!0):k.setOverlay(!1)}),[d.open,d.mode]),(0,G.jsx)(Dn.Mi,{value:p,children:(0,G.jsx)("div",{role:"region","aria-label":l.formatMessage({id:"peekRenderer.ariaLabel",defaultMessage:"Side Peek"}),"aria-hidden":!d.open||void 0,style:s.containerStyles,className:bt.p1Q,children:d.open&&(0,G.jsxs)(G.Fragment,{children:[t&&(0,G.jsx)("div",{style:{width:"100%",height:"100%"},onClick:g}),(0,G.jsxs)("div",{style:s.contentStyles,children:[i&&(0,G.jsx)(go.Z,{type:"peek"}),(0,G.jsx)(Oi,{}),(0,G.jsx)(mo.Z,{store:d.target,isDefaultContainer:!0,droppable:!0,isPeekRenderer:!0,render:e=>{let{selectableEvents:t,selectableHoverMenuOverlay:n}=e;return(0,G.jsx)(o.Suspense,{fallback:(0,G.jsx)(co.Z,{peekMode:no.default.getPeekMode(),isVisible:!0,store:d.target}),children:(0,G.jsx)(uo.Z,{pageStore:d.target,pageVisitStore:d.pageVisitStore,initialChunkSize:25,incrementChunkSize:25,store:d.loadingContainerStore,render:e=>{let{ready:i,initialRequestCompleted:s,endOfResultsReached:l,isCollectionInPage:p}=e;return(0,G.jsxs)(o.Fragment,{children:[(0,G.jsxs)(lo.Z,{ref:a,onScrollLagMeasure:p?m:void 0,preventType:i?rn.Q7(c):Xn.Z.All,type:Xn.Z.Y,style:i?Ui:Wi,store:oo.Z,...t,children:[n,(0,Se.GD)(u.state)&&(0,G.jsx)(pe.GC,{scrollerStore:oo.Z}),(0,G.jsx)(fe.vo,{scrollerStore:oo.Z}),s&&(0,G.jsxs)(o.Fragment,{children:[(0,G.jsx)(r.LazyScrollableSitesBannerContainer,{blockStore:d.target}),(0,G.jsx)(po.ZP,{context:to.S.PeekView,store:d.target,onTitleEsc:h,forceSelectTitleOnMount:!0,paddingBottom:80,styleOverrides:Ni,disabled:!d.open||d.isClosing}),(0,G.jsx)(ho.Z,{pageVisitStore:d.pageVisitStore,presenceStore:d.presenceStore,isPeekView:!0})]}),i&&!l&&(0,G.jsx)(so.Z,{style:Ki})]}),(0,G.jsx)(co.Z,{peekMode:no.default.getPeekMode(),isVisible:!i,store:d.target})]})}})})}},d.target.id),n]})]})})})}const Ni={pageCoverHeight:"20vh"};function Di(e){return{flexDirection:"column",position:"absolute",display:"flex",marginLeft:"auto",background:e.peekModalBackground,boxShadow:e.largeLightBoxShadow}}const Ui={display:"flex",flexDirection:"column",flexGrow:1,position:"relative",transform:"translateZ(0)"},Wi={...Ui,opacity:0,pointerEvents:"none",height:0},qi="1.375em",Ki={zIndex:1,opacity:.5,width:qi,height:qi,marginTop:0,marginBottom:24,marginLeft:"auto",marginRight:"auto"};function Hi(e,t){Hn.xv(e,t)}function $i(e){Hi(e,"esc")}const Gi=function(){const e=(0,O.O7)(),t=(0,V.VK)((()=>{const e=no.default.state.open?no.default.state.target:void 0;return null==e?void 0:e.getSystemBlockTypeStore().getValue()}),[]),n=(0,o.useCallback)((()=>{no.default.state.open&&no.default.isSidePeekOpen()&&(Re.toggleLeftSidebarByWindowSize(e),no.default.setState({...no.default.state,isOpening:!1}))}),[e]);switch((0,o.useEffect)((()=>(e.WindowSizeStore.addListener(n),()=>e.WindowSizeStore.removeListener(n))),[e.WindowSizeStore,n]),(0,o.useEffect)((()=>{(0,Wn.u7)(t)&&Hn.xv(e,"invalid_peek_page")}),[e,t]),(0,V.VK)((()=>no.default.getPeekMode()),[])){case qn.l:return(0,G.jsx)(zi,{});case qn.R:return(0,G.jsx)(Bi,{})}};var Qi=n(20993),Yi=n(90965);function Xi(e){let{}=e;const t=(0,V.VK)((()=>Z.default.state.currentSpaceStore),[]),n=(0,V.VK)((()=>{var e;if(!t)return;const n=null===(e=t.getSettings())||void 0===e?void 0:e.space_request;return(0,Yi.DI)(n)?n:void 0}),[t]);return n?(0,G.jsx)(r.LazyTransferWorkspaceModal,{workspaceTransfer:n}):null}class Ji extends s.Z{constructor(){super(...arguments),this.appRenderState=this.createComputedStore((()=>ye.h1(this.environment))),this.showHelpButtonStore=this.createComputedStore((()=>{if(!this.environment.currentUser.isLoggedIn())return!1;if(this.environment.device.isMobile)return!1;const{mainEditorCurrentBlockStore:e}=Z.default.state;return!!e&&(!(0,we.IJ)(this.environment,e)&&(!this.shouldIncludeAssistantButton.state&&(!this.isPageLayoutEditorOpen.state&&!this.shouldShowAssistantUpsellButton.state)))})),this.isFullPageAssistantChatEnabled=this.createComputedStore((()=>Ue.Z.isFullPageAssistantChatEnabled(this.environment.device))),this.shouldIncludeAssistantButton=this.createComputedStore((()=>{const{device:e}=this.environment,{RouterStore:t}=this.environment,{route:n}=t.state;return"chat"!==n.name&&(!this.isPageLayoutEditorOpen.state&&Ue.Z.shouldShowAssistantInCorner(e))})),this.shouldShowAssistantEphemeralViewModal=this.createComputedStore((()=>{const{device:e}=this.environment;return Ue.Z.isEphemeralViewDatabaseQueryingEnabled(e)})),this.shouldShowAssistantUpsellButton=this.createComputedStore((()=>{var e;const{inAppCalloutStore:t,currentUserSettingsStore:n}=Z.default.state;if(!t.canShow("ai_add_on_upsell"))return!1;const{device:o}=this.environment,{RouterStore:i}=this.environment,{route:r}=i.state;if("chat"===r.name)return!1;const s=(null===(e=st.subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];if((0,le.de)(s))return!1;if(!n)return!1;if(void 0!==n.getSettingsStore().getKeyStore("ai_qna_upsell_dismissed_at").getValue())return!1;if(Number((0,xe.e2)(n))<=2)return!1;const a=Ne.Z.state;if(!a.loaded)return!1;const l=a.isOnWaitlist&&(0,ae.zz)(a.spaceRole),c=!a.isOnWaitlist&&(0,ae.Jy)(a.spaceRole);return!(!l&&!c||!Ue.Z.shouldShowAssistantUpsellInCorner(o))})),this.isPageLayoutEditorOpen=this.createComputedStore((()=>Le.Z.getState().isOpen&&(0,Me.fastCheckGate)("page_layouts")))}UNSAFE_willMount(){ye.rq()}didMount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!0)}willUnmount(){var e;null!==(e=this.environment.mobileNative)&&void 0!==e&&e.api.appComponentMountState&&this.environment.mobileNative.api.appComponentMountState(!1)}renderComponent(){const{isElectronMac:e,isMobile:t}=this.environment.device,{RouterStore:n}=this.environment,{route:o}=n.state,{mainEditorCurrentBlockStore:i,currentSpaceStore:s,currentUserRootStore:a,currentCollectionViewStore:l}=Z.default.state,{publicPageData:c}=De.Z.state,d=this.environment.currentUser.isLoggedIn(),h=ze.sidebarOpenStore.state,m=(0,Ve.in)(this.environment),{state:{shouldShowSidebar:g,shouldShowFrame:f,shouldShowError:v,shouldRedirectFromHome:b}}=this.appRenderState,x="page"===o.name&&ve.Z.state.open&&(0,we.S4)(ve.Z.state.blockStore),S=!d&&"modal"===o.name&&(o.templateGalleryItem||o.projectManagementLaunch),k=(0,u.wO)(o)&&a||"nativeTab"===o.name&&a||"quickSearch"===o.name&&a||a||i,w="nativeTab"===o.name&&"search"===o.tab||"quickSearch"===o.name,j=this.isFullPageAssistantChatEnabled.state&&"chat"===o.name,C="quickSearch"===o.name,I="nativeTab"===o.name,P=(0,Fe.Y)("supportsNativeHome"),T=se("production",this.environment.device)||!(0,Fe.Y)("supportsNativeSearch"),L=(0,Te.H7)(this.environment),A=(0,be.VI)(this.environment),_=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(r.LazySidebarCreateTeamModal,{}),(0,G.jsx)(r.LazySidebarTeamModal,{}),(0,G.jsx)(r.LazyCreateTeamFromPageConfirmModal,{}),(0,G.jsx)(r.LazyConfirmPrivilegedActionModal,{})]});de.wk({environment:this.environment});const E=st.subscriptionDataStoreInstance.state;if(S){const{environment:e}=this;return o.projectManagementLaunch?ue.j({currentUserId:void 0,params:{tg:"gallery"}}):o.templateGalleryItem&&ue.j({currentUserId:void 0,params:{tg:o.templateGalleryItem}}),void M.c4({environment:e,url:p._j.login})}return C?(0,G.jsxs)(It.Z,{style:nr(this.environment,this.theme),children:[k&&!v&&T&&(0,G.jsx)(r.LazySearch,{parentStore:k,renderAsPage:!0,renderId:(0,y.ZP)(),quickSearchMode:!0}),"rendered"===Z.default.state.renderPhase&&(0,G.jsx)(r.LazyAppComponents,{})]}):(0,G.jsxs)(It.Z,{style:nr(this.environment,this.theme),children:[g&&!t&&(0,G.jsx)(er,{isElectronMac:e,isExpanded:m}),g&&t&&!P&&(0,G.jsx)(r.LazySidebarMobile,{}),g&&t&&P&&(0,G.jsx)(r.LazyTopLevelMobileComponents,{}),g&&(L||A)&&(0,G.jsx)(r.LazySecondarySidebar,{}),(0,G.jsx)(Mt,{}),(0,G.jsx)(oe.R,{}),"workspaceSetup"===o.name&&(0,G.jsx)(r.LazyAppsSetup,{}),i&&f&&(this.isPageLayoutEditorOpen.getState()?(0,G.jsx)(r.LazyPageLayoutEditor,{}):(0,G.jsx)(Bn.Z,{routerState:this.props.routerState,store:i,collectionViewStore:l})),j&&"chat"===o.name&&(0,G.jsx)(me.PS,{}),x&&(0,G.jsx)(r.LazyForkPageModalWrapper,{}),(v||b)&&c&&!x&&(0,G.jsx)(r.LazyPageError,{route:this.props.routerState.route,publicPageData:c,shouldRedirectFromHome:b}),g&&!(0,Ve.Jr)(this.environment)&&h&&(0,G.jsx)(ir,{}),(0,G.jsx)(_t,{}),this.showHelpButtonStore.state&&(0,G.jsx)(On.Z,{}),this.shouldIncludeAssistantButton.state&&(0,G.jsx)(me.eC,{}),(0,G.jsx)(fe.at,{}),this.shouldIncludeAssistantButton.state?(0,G.jsx)(me.Q,{}):this.shouldShowAssistantUpsellButton.state?(0,G.jsx)(me.F$,{}):void 0,this.shouldShowAssistantEphemeralViewModal.state&&(0,G.jsx)(me.DO,{}),i&&(0,G.jsx)(Pn,{pageStore:i,environment:this.environment}),(0,Se.GD)(void 0)&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(he.u7,{}),(0,G.jsx)(pe.oF,{})]}),(0,ke.u)(this.environment)&&(0,G.jsx)(Dt,{}),!t&&"nativeTab"!==this.props.routerState.route.name&&"workspaceSetup"!==this.props.routerState.route.name&&(0,G.jsx)(Gi,{}),"rendered"===Z.default.state.renderPhase&&(0,G.jsxs)(G.Fragment,{children:[d&&(0,G.jsxs)(G.Fragment,{children:[_,(0,G.jsx)(Ce,{}),(0,G.jsx)(Ie,{}),(0,G.jsx)(r.LazyCustomizePageMenuRenderer,{}),(0,G.jsx)(r.LazyTopbarPageAnalyticsOptOutMenu,{}),(0,G.jsx)(r.LazyImportModal,{}),(0,G.jsx)(r.LazyExportModal,{}),(0,G.jsx)(r.LazyImportIntoNewPageModal,{}),(0,G.jsx)(r.LazyPageTemplateModal,{}),(0,G.jsx)(r.LazyTemplateGalleryModal,{}),(0,G.jsx)(r.LazyGoogleAuthPromptModal,{}),(0,G.jsx)(r.LazyStudentNotEligibleModal,{}),(0,G.jsx)(r.LazyTypedDBMigrationModal,{}),(0,G.jsx)(r.LazyContactModal,{}),(0,G.jsx)(r.LazyCookieModal,{}),rt.Z.state.open&&(0,G.jsx)(r.LazyContactSalesModal,{...rt.Z.state}),We.Z.state.open&&(0,G.jsx)(r.LazyConfirmOverwriteModal,{...We.Z.state}),Ee.Z.state.open&&(0,G.jsx)(r.LazyTipsInAppModal,{...Ee.Z.state}),(0,G.jsx)(r.LazyConfigureIntegrationModal,{}),(0,G.jsx)(r.LazyConnectOAuthIntegrationModal,{}),s&&E&&qe.Z.state.open&&(0,G.jsx)(r.LazySpaceSubscriptionUpgradeModal,{data:E,spaceStore:s}),s&&E&&it.Z.state.open&&(0,G.jsx)(r.LazyClaimAndUpgradeModal,{spaceStore:s,data:E}),s&&E&&(0,G.jsx)(r.LazySpaceSubscriptionUpdateModal,{data:E}),s&&E&&(0,G.jsx)(r.LazyAddOnUpgradeModal,{data:E}),s?(0,G.jsx)(r.LazySubscriptionDebugCommands,{}):null,f&&(0,G.jsx)(r.LazyOpenInDesktopAppPopup,{}),f&&(0,G.jsx)(r.LazyWikiPromoPopup,{}),f&&(0,G.jsx)(r.LazyAddOnDiscountPopup,{}),f&&(0,G.jsx)(r.LazyNotionCalendarLaunchModal,{}),f&&(0,G.jsx)(r.LazyAiQnaIntroModal,{}),f&&(0,G.jsx)(r.LazyAiQnaWaitlistModal,{}),f&&(0,G.jsx)(r.LazyEnterpriseLaunchModal,{}),f&&(0,G.jsx)(r.LazyJiraSyncTeamSpaceModal,{})]}),(0,G.jsx)(r.LazyAutomationModal,{}),(0,G.jsx)(r.LazyReportPageModal,{}),k&&!v&&T&&(0,G.jsx)(r.LazySearch,{parentStore:k,renderAsPage:w,renderId:w?(0,y.ZP)():void 0,quickSearchMode:!1}),I&&(0,G.jsx)(r.LazyMobileNativeFullPageComponents,{route:o}),(0,G.jsx)(r.LazyForkPagePopup,{}),void 0,(0,G.jsx)(Xi,{}),void 0]}),(0,G.jsx)(Zt.Z,{}),"rendered"===Z.default.state.renderPhase&&(0,G.jsx)(Rt,{}),"rendered"===Z.default.state.renderPhase&&(0,G.jsx)(r.LazyAppComponents,{}),(0,G.jsx)(Bt,{}),g&&!t&&i&&(0,G.jsx)(Pe.$H,{currentBlockStore:i,isElectronMac:e}),(0,G.jsx)(r.LazyAdminModeBannerListener,{}),(0,G.jsx)(tt.Z,{}),(0,G.jsx)(nt.Z,{}),(0,G.jsx)(ot.Z,{}),(0,G.jsx)(Qi.Z,{subscriptionDataStore:st.subscriptionDataStoreInstance}),(0,G.jsx)(et,{}),(0,G.jsx)($e,{}),(0,G.jsx)(ge.j,{}),(0,G.jsx)(ht,{}),(0,G.jsx)(Nn,{})]})}}function er(e){let{isElectronMac:t,isExpanded:n}=e;const i=(0,o.useCallback)((()=>(0,G.jsx)(Be,{})),[]);return(0,G.jsx)(r.LazySidebarComponent,{isElectronMac:t,isExpanded:n,renderLoading:i})}Ji.displayName="App";const tr=Ji;function nr(e,t){const{mainEditorCurrentBlockStore:n}=Z.default.state,o=(0,Ae.WE)(n),i=e.device.isPhone;return{width:"100vw",height:"100%",position:"relative",display:"flex",flex:1,background:o?(0,_e.$1)({theme:t,isPhone:i}):t.contentBackground}}function or(){Re.close()}function ir(){const e=(0,O.O7)(),t=(0,V.VK)((()=>function(e){return{position:"absolute",top:0,left:(0,Ve.qG)(e),right:0,bottom:0,zIndex:ce.l6}}(e)),[e]);return(0,G.jsx)("div",{style:t,onClick:or})}var rr=n(3403);var sr=n(40754);function ar(e){let{payload:t}=e;const n=(0,O.O7)(),[i,r]=(0,o.useState)(t?{type:"unconfirmed"}:{type:"error"}),s=(0,o.useCallback)((async()=>{if(!t)return void r({type:"error"});r({type:"loading"});const e=await async function(e){let{environment:t,payload:n}=e;const o=await Ye.unsubscribeFromEmails(t,{payload:n});return"success"===o.type?{type:"success",spaceName:o.data.spaceName}:{type:"error"}}({environment:n,payload:t});r("error"===e.type?{type:"error"}:{type:"confirmed",spaceName:e.spaceName})}),[n,t]),a=(0,F.yK)((()=>({confirmUnsubscribeDescription:{marginBottom:10}})),[]);switch(i.type){case"loading":return(0,G.jsx)(sr.Z,{children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Loading…",id:"confirmUnsubscribePage.loadingMessage"})});case"unconfirmed":return(0,G.jsxs)(sr.Z,{children:[(0,G.jsx)("div",{style:a.confirmUnsubscribeDescription,children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Are you sure you want to unsubscribe from this list?",id:"unsubscribeFromEmails.workspace.confirmUnsubscribeDescription"})}),(0,G.jsx)(K.Z,{isLarge:!0,onClick:s,analyticsName:"unsubscribe_confirm",children:(0,G.jsx)(f.FormattedMessage,{id:"confirmUnsubscribePage.confirmButton",defaultMessage:"Unsubscribe"})})]});case"confirmed":return(0,G.jsx)(sr.Z,{children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"You have successfully unsubscribed from emails for {workspaceName}",values:{workspaceName:(0,G.jsx)("b",{children:i.spaceName})},id:"unsubscribeFromEmails.workspace.message"})});case"error":return(0,G.jsx)(sr.Z,{children:(0,G.jsx)(f.FormattedMessage,{id:"confirmUnsubscribePage.errorMessage",defaultMessage:"Could not unsubscribe."})});default:(0,nn.t1)(i)}}n(82801);var lr=n(32441);const cr=(0,f.defineMessages)({pageTitle:{id:"desktopEmailConfirmPage.title",defaultMessage:"Please check your email to confirm"},pageCaption:{id:"desktopEmailConfirmPage.subtitle",defaultMessage:"Almost there!"},pageDescription1:{id:"desktopEmailConfirmPage.description1",defaultMessage:"Please check your email and click the link to confirm."},pageDescription2:{id:"desktopEmailConfirmPage.description2",defaultMessage:"Once confirmed, you'll be able to return to the desktop app to complete signup."},checkYourGmail:{id:"desktopEmailConfirmPage.button.checkYourGmail",defaultMessage:"Check your Gmail inbox"}});function dr(){return(0,G.jsxs)("svg",{style:{display:"block",height:42},viewBox:"0 0 87 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,G.jsx)("path",{d:"M1.805 1.294l16.6-1.226c2.039-.175 2.563-.057 3.845.875l5.299 3.733c.874.642 1.165.817 1.165 1.516v20.473c0 1.283-.466 2.042-2.097 2.158L7.34 29.99c-1.224.058-1.807-.117-2.448-.934L.99 23.982c-.7-.934-.99-1.633-.99-2.45V3.334c0-1.049.466-1.924 1.805-2.04z",fill:"#fff"}),(0,G.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.405.068l-16.6 1.226C.466 1.41 0 2.285 0 3.334v18.198c0 .817.29 1.516.99 2.45l3.902 5.074c.641.817 1.224.992 2.448.934l19.277-1.167c1.63-.116 2.097-.875 2.097-2.158V6.192c0-.663-.262-.854-1.033-1.42a85.473 85.473 0 01-.133-.096L22.25.943c-1.282-.932-1.806-1.05-3.845-.875zM7.776 5.857c-1.574.106-1.931.13-2.825-.597L2.678 3.452c-.231-.234-.115-.526.467-.584l15.958-1.166c1.34-.117 2.038.35 2.562.758l2.737 1.983c.117.059.408.408.058.408l-16.48.992-.204.014zM5.941 26.49V9.11c0-.759.233-1.109.931-1.168L25.8 6.834c.642-.058.932.35.932 1.108v17.264c0 .759-.117 1.401-1.165 1.459l-18.113 1.05c-1.048.058-1.513-.291-1.513-1.225zm17.88-16.448c.116.525 0 1.05-.525 1.11l-.873.173v12.832c-.758.408-1.456.641-2.039.641-.932 0-1.165-.292-1.863-1.166l-5.709-8.982v8.69l1.806.409s0 1.05-1.457 1.05l-4.017.233c-.117-.234 0-.817.407-.933l1.049-.291v-11.49L9.144 12.2c-.117-.525.174-1.283.99-1.342l4.31-.29 5.94 9.098v-8.049l-1.514-.174c-.117-.643.349-1.11.931-1.167l4.02-.234z",fill:"#000"}),(0,G.jsx)("path",{className:"fill",d:"M41.434 21.251v-7.91h.137l5.704 7.91h1.796V9.627h-1.997v7.902h-.137l-5.704-7.902H39.43V21.25h2.005zM54.715 21.429c2.635 0 4.238-1.724 4.238-4.584 0-2.852-1.611-4.584-4.238-4.584-2.618 0-4.237 1.74-4.237 4.584 0 2.86 1.595 4.584 4.237 4.584zm0-1.676c-1.393 0-2.19-1.063-2.19-2.908 0-1.837.797-2.908 2.19-2.908 1.386 0 2.183 1.071 2.183 2.908 0 1.845-.789 2.908-2.183 2.908zM60.778 10.28v2.215h-1.393v1.595h1.393v4.809c0 1.708.806 2.393 2.828 2.393.386 0 .757-.04 1.047-.097v-1.563c-.242.024-.395.04-.677.04-.837 0-1.208-.386-1.208-1.256V14.09h1.885v-1.595h-1.885v-2.216h-1.99zM65.85 21.251h1.99v-8.813h-1.99v8.813zm.991-10.27c.66 0 1.192-.533 1.192-1.201 0-.669-.531-1.209-1.192-1.209-.652 0-1.192.54-1.192 1.209 0 .668.54 1.2 1.192 1.2zM73.299 21.429c2.634 0 4.237-1.724 4.237-4.584 0-2.852-1.611-4.584-4.237-4.584-2.619 0-4.238 1.74-4.238 4.584 0 2.86 1.595 4.584 4.238 4.584zm0-1.676c-1.394 0-2.192-1.063-2.192-2.908 0-1.837.798-2.908 2.192-2.908 1.385 0 2.183 1.071 2.183 2.908 0 1.845-.79 2.908-2.183 2.908zM78.725 21.251h1.998V16.12c0-1.297.75-2.119 1.941-2.119 1.217 0 1.78.677 1.78 2.022v5.228h1.999v-5.703c0-2.103-1.072-3.287-3.037-3.287-1.314 0-2.2.604-2.619 1.587h-.137v-1.41h-1.925v8.813z",fill:"#000"})]})}function ur(){return(0,G.jsx)("div",{style:{padding:24},children:(0,G.jsx)(dr,{})})}function pr(e){const{experimentVariant:t}=e;return(0,G.jsx)("div",{style:{width:800,height:"80vh",margin:"0 auto"},children:(0,G.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"80vh"},children:[(0,G.jsxs)(xn.sg,{gap:16,padding:16,children:[(0,G.jsx)("div",{style:{fontSize:36,fontWeight:U.Z.fontWeight.bold},children:(0,G.jsx)(f.FormattedMessage,{...cr.pageTitle})}),(0,G.jsx)("div",{style:{fontWeight:U.Z.fontWeight.bold},children:(0,G.jsx)(f.FormattedMessage,{...cr.pageCaption})}),(0,G.jsx)("div",{children:(0,G.jsx)(f.FormattedMessage,{...cr.pageDescription1})}),(0,G.jsx)("div",{children:(0,G.jsx)(f.FormattedMessage,{...cr.pageDescription2})}),"with_gmail_cta"===t&&(0,G.jsx)(K.Z,{style:{width:"fit-content"},isLarge:!0,onClick:()=>{window.location.href="https://mail.google.com/mail/u/0/#search/Your+Notion+signup+code+is"},children:(0,G.jsx)(f.FormattedMessage,{...cr.checkYourGmail})})]}),(0,G.jsx)(xn.sg,{children:(0,G.jsx)("img",{style:{width:350},src:zt.Z.images.onboarding.couch2Png})})]})})}function hr(){const e=(0,O.O7)(),[t,n]=(0,o.useState)(null);return(0,o.useEffect)((()=>{try{const t=new URLSearchParams(window.location.search).get("state");if(!t)return;const o=JSON.parse(atob(t));o.experimentVariant&&n(o.experimentVariant),o.email&&o.deviceId&&lr.$k(e,{desktopAppRerouteEmail:o.email,desktopAppDeviceId:o.deviceId})}catch(t){}}),[e,n]),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(ur,{}),(0,G.jsx)(pr,{experimentVariant:t})]})}n(42875),n(23586),n(33626),n(15950);var mr=n(13559),gr=n(44819);function fr(e){const{preventFrontRedirect:t}=e,n=(0,O.O7)(),{pathname:o,search:i,hash:s}=window.location;if(!t&&(0,gr.XR)(n,o)){const e=i.length>0?`${i}&${mr.AM}=1`:`?${mr.AM}=1`;return window.location.href=o+e+s,null}return(0,G.jsx)(r.LazyFrontLoginPage,{isSignup:!n.currentUser.isLoggedIn()})}var vr=n(26198);function yr(e){const t=(0,o.useRef)(new Map),n=(0,o.useCallback)((()=>{const n=Array.from(t.current.values()).filter((e=>e.isSpawned)),o=n.length-e.maxPreferredIFrames;if(o<=0)return;const i=n.filter((e=>!e.isVisible));i.sort(((e,t)=>e.latestTimestamp-t.latestTimestamp));for(const e of i.slice(0,o))e.isSpawned=!1,e.onVisibilityChange(!1)}),[e.maxPreferredIFrames]),i=(0,o.useCallback)((e=>{for(const n of e){if(!(n.target instanceof HTMLElement))continue;const e=t.current.get(n.target);e&&(e.isVisible=n.isIntersecting,e.latestTimestamp=n.time,e.isVisible&&!e.isSpawned&&(e.isSpawned=!0,e.onVisibilityChange(!0)))}n()}),[n]),r=(0,o.useRef)(void 0!==window.IntersectionObserver?new IntersectionObserver(i):null);(0,o.useEffect)((()=>()=>{r.current&&(r.current.disconnect(),r.current=null)}),[]);const s=(0,$t.D9)(e.maxPreferredIFrames);(0,o.useEffect)((()=>{s&&e.maxPreferredIFrames<s&&n()}),[n,e.maxPreferredIFrames,s]);const a=(0,o.useMemo)((()=>({track:(e,n)=>{r.current?(t.current.set(e,{isVisible:!1,isSpawned:!1,latestTimestamp:0,onVisibilityChange:vt.Ds(n,50)}),r.current.observe(e)):vr.uf.track(e,n)},untrack:e=>{r.current?(r.current.unobserve(e),t.current.delete(e)):vr.uf.untrack(e)}})),[]);return(0,G.jsx)(vr.Lr.Provider,{value:a,children:e.children})}function br(e){let t=e.isMobile?10:50;return e.ramSizeInGB&&(t=Math.floor(2*e.ramSizeInGB)),{maxPreferredIFrames:t}}var xr=n(25777);const Sr=function(e){const t=(0,O.O7)(),n={position:"absolute",top:0,left:0,bottom:0,right:0},{device:o}=t;return t.currentUser.isLoggedIn()?(0,G.jsx)("div",{style:n,children:(0,G.jsx)(xr.Z,{style:{width:"100%",height:"100%"},spinnerSize:Bn.T,showSpinnerTimeout:500})}):o.isElectron?(0,G.jsx)(r.LazyLoginDesktop,{}):o.isMobileNative?(0,G.jsx)(r.LazyLoginMobileNative,{}):(0,G.jsx)(fr,{preventFrontRedirect:!0})};var kr=n(42402),wr=n(83785),jr=n(84076);const Cr=function(e){let{redirect:t}=e;const n=(0,F.Fg)(),i=(0,O.O7)();return(0,o.useEffect)((()=>{Mr(t,i)}),[i,t]),(0,G.jsxs)(sr.Z,{children:[(0,G.jsx)("div",{style:{color:n.regularTextColor},children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Redirecting to your Notion app…",id:"webApp.redirectingToDesktop.message"})}),(0,G.jsx)(jr.Z,{onClick:()=>Mr(t,i),style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:n.lightTextColor},children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"If you weren't redirected, click here.",id:"webApp.redirectingToDesktop.directLink.message"})}),(0,G.jsx)(jr.Z,{href:t,style:{maxWidth:300,textAlign:"center",textDecoration:"underline",color:v.ZP.uiGray},children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Or, continue in your browser",id:"webApp.redirectingToDesktop.continueInBrowser.message"})})]})};function Mr(e,t){M.RX({url:e,environment:t})}var Ir=n(84747),Pr=n(93214),Tr=n(24211),Lr=n(35793),Ar=n(47307),_r=n(57400),Er=n(7802),Rr=n(97978),Zr=n(30581),zr=n(78354),Br=n(77788),Or=n(45483);function Vr(e){const t=(0,V.VK)((()=>Tt.default.checkGate("inert_html_attribute")),[]),n=(0,V.VK)((()=>Or.Z.state.openModals.size>0),[]),o={inert:t&&n?"true":null};return(0,G.jsx)("div",{style:e.style,...o,children:e.children})}var Fr=n(91948),Nr=n(31104),Dr=n(17294),Ur=n(50506);const Wr=function(){const e=(0,V.VK)((()=>Nr.Z.state),[]);return(0,G.jsx)(Ur.Z,{open:e.open,render:()=>(0,G.jsx)(Hr,{}),overlayZIndex:ce._})};function qr(e){return{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:180,padding:"18px 24px 20px",textAlign:"center",maxWidth:e.device.isMobile?"300px":"100%"}}function Kr(e){return{display:"flex",alignItems:"center",fontSize:14,color:e.mediumTextColor}}function Hr(){const e=(0,F.Fg)(),t=(0,O.O7)(),n=(0,V.VK)((()=>Nr.Z.state),[]),{targetRecordId:o}=n,i=(0,V.VK)((()=>function(e){return void 0!==e&&Boolean(Dr.Z.state[e])}(o)),[o]);return n.open?(0,G.jsxs)("div",{style:qr(t),children:[(0,G.jsxs)("div",{style:Kr(e),children:[n.message,(0,G.jsx)(so.Z,{style:{marginLeft:6}})]}),i&&o&&(0,G.jsx)(Fr.Z,{targetRecordId:o,style:{marginTop:10}})]}):null}var $r=n(18466),Gr=n(12847);const Qr="render_duration";new Set(["destinations","emergencyThrottlePercentage","amplitudeOptions","datadogOptions","snowflakeOptions","statsigOptions"]),Gr.literals("connected_apps_settings","compliance_connected_apps_settings","external_object_instance_block","external_object_instance_inline_popup","external_object_instance_block_error_dropdown","placeholder_root_external_collection_view_block","connected_relation_property_menu","source_picker_connect_another_account","integration_gallery","collection_settings_property_type","integration_file_picker","send_to_notion","unfurl","messages_tab","install_redirect","all_updates","notifications_and_settings","collection_view_settings","share_menu","space_settings","workspace_connections_redirect");var Yr=n(76870);function Xr(){return 1}function Jr(e){let{id:t,targetRenderPhase:n="all",samplePercent:i=Xr(),children:r}=e;const s=(0,O.O7)(),a=(0,o.useCallback)(((e,t,o,r,a,l)=>{(0,Yr.lB)(i)&&("all"!==n&&t!==n||Rr.j(s,`${Qr}.${e}`,{time:o,render_phase:t}))}),[s,n,i]),[l]=(0,o.useState)($r.Z.withListenerIgnored((()=>Tt.default.checkGate("client-performance-profiler"))));return l?(0,G.jsx)(o.Profiler,{id:t,onRender:a,children:r}):(0,G.jsx)(G.Fragment,{children:r})}function es(e){let{children:t}=e;const n=(0,f.useIntl)(),i=(0,O.O7)(),r=(0,F.Fg)();(0,Ir.Z)((()=>{const{device:e,mobileNative:t}=i;if(Lr.mc(i),_r.Yh(i),t&&t.hideSplashscreen(),e.isMobile){const e=document.body.parentElement;e&&e.classList.add(bt.aiP)}Rr.pH(i),l.rQ({device:e,config:_.default,cookieService:i.cookieService}),e.isElectronMac&&k.getAppPath().then((e=>{e&&(e.startsWith("/Volumes/Notion Installer")||e.startsWith("/Volumes/Notion Dev Installer")||e.startsWith("/Volumes/Notion Stg Installer"))&&Ar.showMessage({message:n.formatMessage({defaultMessage:"Please move the Notion.app into the /Applications folder for the auto-updater to work.",id:"notionAppContainer.dialog.notionAppNotInApplications.message"})})})),Tr.DM(a.SP),(0,Pr.yN)(window.location.href)})),(0,o.useEffect)((()=>{const{device:e}=i;"external"===(0,u.Wj)({url:window.location.href,isMobile:e.isMobile,baseUrl:_.default.domainBaseUrl,publicDomainName:_.default.publicDomainName,protocol:_.default.protocol,currentUrl:window.location.href}).name&&Ar.showDialog({message:"Mismatch between origin and baseUrl (dev).",showCancel:!1,keepFocus:!1,items:[{label:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Okay",id:"notionAppContainer.dialog.mismatchedOriginURL.okayButton.label"}),onAccept:()=>{const e=x.O_({relativeUrl:x.T1(window.location.href),baseUrl:_.default.domainBaseUrl}),t=x.Qc(e);t.protocol=x.Qc(window.location.href).protocol,window.location.href=x.WU(t)}}]})}),[i]),(0,o.useEffect)((()=>{const{mobileNative:e}=i;null==e||e.markTransitionReady({type:"mount"})}),[i]);const s="light"===r.mode?bt.MsS:bt.Xj_,d=(0,F.yK)((e=>({root:{...(0,c.N7)(a.SP),color:e.regularTextColor,WebkitFontSmoothing:"auto",backgroundColor:e.contentBackground}})),[]);return(0,G.jsxs)(Jr,{id:"app",targetRenderPhase:"mount",children:[(0,G.jsx)(Er.Z,{}),(0,G.jsxs)("div",{style:d.root,className:["notion-app-inner",s].join(" "),children:[(0,G.jsx)(Vr,{style:{height:"100%"},children:t}),(0,G.jsx)(Br.Z,{store:Zr.Z,zIndex:ce.mJ,isDefault:!0}),(0,G.jsx)(zr.Z,{}),(0,G.jsx)(Wr,{})]})]})}var ts=n(94273),ns=n(12714);function os(){const e=(0,O.O7)();return(0,Ir.Z)((()=>{const t=b.u5({schemeUrl:window.location.href,baseUrl:_.default.domainBaseUrl});ns.D({environment:e,url:t}),ts.vq(),M.c4({environment:e,url:p._j.root,redirect:!0})})),null}class is extends s.Z{constructor(){super(...arguments),this.didCatchError=!1,this.caughtErrorId=void 0,this.openSupportMessages=()=>{L.j({environment:this.environment,from:"page_error"})},this.handleOpenNativeLink=e=>{"string"==typeof e?this.handleOpenNativeLinkV2(e,!1,!1):this.handleOpenNativeLinkV2(e.url,!1,!1)},this.handleOpenNativeLinkV2=(e,t,n)=>{const{RouterStore:o}=this.environment,i=b.RD({url:e,protocol:_.default.protocol,baseUrl:_.default.domainBaseUrl}),r=b.u5({schemeUrl:i,baseUrl:_.default.domainBaseUrl}),s=u.Wj({url:r,baseUrl:_.default.domainBaseUrl,publicDomainName:_.default.publicDomainName,isMobile:this.environment.device.isMobile,protocol:_.default.protocol,currentUrl:window.location.href});(this.environment.device.isAndroid||t)&&C.Hu({RouterStore:o,currentUserId:this.environment.currentUser.id}),this.environment.mobileNative&&this.environment.mobileNative.closeInAppBrowser(),"googleAuthCallback"!==s.name&&"samlAuthCallback"!==s.name?M.c4({environment:this.environment,url:r,redirect:t,updateMobileTabbedRouterArgs:{clearNativeRootPageOverride:n},queryId:"page"===s.name?s.queryId:void 0}):M.c4({environment:this.environment,url:r})}}didMount(){this.environment.currentUser.isLoggedIn()&&Z.default.waitUntil((()=>{const e=Z.default.state.currentUserSettingsStore,t=(null==e?void 0:e.isDefined())??!1;if(e&&t){const t=e.getSettings(),n=null==t?void 0:t.disable_auto_set_timezone;t&&!n&&P.wk({environment:this.environment,userSettingsStore:e})}return t}))}UNSAFE_willMount(){const{RouterStore:e,currentUser:t}=this.environment,n=t.id;window.addEventListener("beforeunload",(()=>{C.Vz({historyId:e.state.id,currentUserId:n})})),window.onpopstate=async t=>{const n=window.location.href,o=t.state?t.state.currentUserId:void 0;let i=this.environment;o&&o!==this.environment.currentUser.id&&(i=await T.x({environment:i,newCurrentUserId:o}));const r=e.state.route,s=u.Wj({url:n,isMobile:i.device.isMobile,baseUrl:_.default.domainBaseUrl,publicDomainName:_.default.publicDomainName,protocol:_.default.protocol,currentUrl:window.location.href}),a="page"===r.name&&"page"===s.name&&r.blockId===s.blockId,l="onboarding"!==r.name&&"onboarding"===s.name;C.Vz({historyId:e.state.id,currentUserId:o}),await I.e({environment:i,id:t.state&&t.state.id||(0,y.ZP)(),action:"pop",href:n}),l&&!this.environment.device.isMobileNative&&M.c4({environment:i,url:p._j.root}),a&&M.Oj(i)},this.environment.mobileNative&&this.environment.mobileNative.subscribeToOpenLink(this.handleOpenNativeLinkV2),k.subscribeToProtocolUrl(this.handleOpenNativeLink),k.subscribeToSettingsMenuItem(cs),k.ready(),k.onNewWindow(((e,t)=>{e.preventDefault(),M.c4({environment:this.environment,url:t,openInNew:"tab"})}))}componentDidCatch(e,t){console.error("Client crash during React render:",e),this.caughtErrorId=g.rn(e,{from:"Router",type:"ClientCrash",data:{miscDataToConvertToString:t}}),this.didCatchError=!0,this.forceUpdate()}renderComponent(){return(0,G.jsx)(f.IntlProvider,{defaultLocale:"en-US",locale:a.SP,messages:a.sY,children:(0,G.jsx)(yr,{...br(this.environment.device),children:this.renderRouteOrError()})})}renderRouteOrError(){return this.didCatchError?(0,G.jsxs)("div",{style:ss,children:[(0,d.H)({width:42,height:42}),(0,G.jsxs)("div",{style:as,children:[(0,G.jsx)("div",{children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Oops! Something went wrong.",id:"router.renderErrorPage.message.part1"})}),(0,G.jsx)("div",{children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Please refresh and try again or <textlink>message support</textlink>.",id:"router.renderErrorPage.message.part2",values:{textlink:e=>(0,G.jsx)(kr.Z,{onClick:this.openSupportMessages,children:e})}})}),this.caughtErrorId&&(0,G.jsx)("div",{style:ls,children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Error ID: {errorId}",id:"router.renderErrorPage.message.errorId",values:{errorId:this.caughtErrorId.slice(0,8)}})})]}),(0,G.jsx)(K.Z,{isLarge:!0,onClick:()=>window.location.reload(),children:(0,G.jsx)(f.FormattedMessage,{defaultMessage:"Refresh",id:"router.renderErrorPage.reloadButton.label"})})]}):(0,G.jsx)(es,{children:this.renderRoute()})}renderRoute(){const{RouterStore:e}=this.environment,t=e.state;if("root"!==t.route.name&&"page"!==t.route.name&&"space"!==t.route.name&&(w.setInitialRenderCompleted(),Z.default.setState({...Z.default.state,renderPhase:"rendered"})),this.environment.currentUser.isLoggedIn()||"page"===t.route.name||"space"===t.route.name||l.j({device:this.environment.device,event:{facebook:{eventName:"PageView",data:{content_name:window.location.href}},google:{eventName:"pageView",path:window.location.pathname}},cookieService:this.environment.cookieService}),this.environment.currentUser.isLoggedIn()&&Z.default.state.currentUserSettingsStore){const{currentUserSettingsStore:e}=Z.default.state;A.dM(this.environment,e)}const{device:o}=this.environment;if(o.isNative&&u.lQ[t.route.name])return(0,G.jsx)(os,{});if("front"===t.route.name)return(0,G.jsx)(fr,{preventFrontRedirect:t.route.alreadyRedirected});if("root"===t.route.name)return(0,G.jsx)(Sr,{route:t.route});if("nativeRedirect"===t.route.name)return(0,G.jsx)(Cr,{redirect:t.route.redirect});if("login"===t.route.name)return(0,G.jsx)(r.LazyLoginPage,{isSignup:!1,email:t.route.email,redirectURL:t.route.redirectURL});if("desktopEmailConfirm"===t.route.name)return(0,G.jsx)(hr,{});if("teamsInvite"===t.route.name){const{teamId:e}=t.route;return S.uA(this.environment,{teamId:e}),(0,G.jsx)(wr.Z,{fetch:async()=>{const t=new z.zX(this.environment,{table:h.e0,id:e});await t.load()},render:()=>(0,G.jsx)(ne,{teamId:e})})}if("signup"===t.route.name)return(0,G.jsx)(r.LazyLoginPage,{isSignup:!0,email:t.route.email});if("unsubscribe"===t.route.name)return(0,G.jsx)(ar,{payload:t.route.payload});if("onboarding"===t.route.name)return(0,G.jsx)(r.LazyOnboarding,{});if("upcomingInvoice"===t.route.name)return(0,G.jsx)(r.LazyInvoice,{route:t.route});if("invoiceById"===t.route.name)return(0,G.jsx)(r.LazyInvoice,{route:t.route});if("settingsConsoleOrganization"===t.route.name){if(this.environment.currentUser.isLoggedIn())return(0,G.jsx)(r.LazyOrganizationSettingsConsole,{organizationId:t.route.organizationId,tabRoute:t.route.tabRoute,properties:t.route.properties,params:t.route.params});{const e=x.bf({url:`${p._j.settingsConsoleOrganization}/${t.route.organizationId}`}),n=x.bf({url:`${_.default.domainBaseUrl}${p._j.login}`,query:{redirectURL:e}});M.c4({environment:this.environment,url:n,redirect:!0})}}if("settingsConsoleWorkspace"===t.route.name&&M.c4({environment:this.environment,url:p._j.root}),t.route.name,t.route.name,"admin"===t.route.name&&_.default.isAdminMode)return(0,G.jsx)(wr.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(4162),n.e(637),n.e(2328)]).then(n.bind(n,68611)),render:e=>{let{default:t}=e;return(0,G.jsx)(t,{})}});if("adminListData"===t.route.name){const{category:e}=t.route;if(_.default.isAdminMode)return(0,G.jsx)(wr.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(4162),n.e(637),n.e(2328)]).then(n.bind(n,65585)),render:t=>{let{default:n}=t;return(0,G.jsx)(n,{category:e})}})}if("adminSingleRecord"===t.route.name&&_.default.isAdminMode){const{id:e,table:o}=t.route;return(0,G.jsx)(wr.Z,{fetch:()=>Promise.all([n.e(2743),n.e(782),n.e(2069),n.e(1275),n.e(4162),n.e(637),n.e(3854)]).then(n.bind(n,48807)),render:t=>{let{default:n}=t;return(0,G.jsx)(n,{table:o,id:e})}})}if("oauthAuthorization"===t.route.name){const{responseType:e,redirectUri:o,integrationId:i,state:r,owner:s,userId:a,spaceId:l}=t.route;return(0,G.jsx)(wr.Z,{fetch:()=>Promise.all([n.e(2774),n.e(2743),n.e(3844),n.e(3370)]).then(n.bind(n,18330)),render:t=>{let{default:n}=t;return(0,G.jsx)(n,{responseType:e,redirectUri:o,integrationId:i,state:r,owner:s,userId:a,spaceId:l})}})}if("notionCalendarAuthorization"===t.route.name){const{csrf:e,calendarCsrf:o,redirectUri:i,spaceId:r,state:s}=t.route;return(0,G.jsx)(wr.Z,{fetch:()=>n.e(7304).then(n.bind(n,67943)),render:t=>{let{default:n}=t;return(0,G.jsx)(n,{csrf:e,calendarCsrf:o,redirectUri:i,spaceId:r,state:s})}})}if("initiateExternalAuthentication"===t.route.name){const{notion_user_id:e,notion_workspace_id:o,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:s,callback_type:a,integration_id:l,redirectToAuth:c}=t.route;return(0,G.jsx)(wr.Z,{fetch:()=>n.e(1023).then(n.bind(n,84750)),render:t=>{let{default:n}=t;return(0,G.jsx)(n,{notion_user_id:e,notion_workspace_id:o,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:s,callback_type:a,integration_id:l,redirectToAuth:c})}})}if("initiateExternalAuthenticationFromDesktop"===t.route.name){const{redirectUri:e}=t.route;if(this.environment.currentUser.isLoggedIn())return(0,G.jsx)(wr.Z,{fetch:()=>n.e(3871).then(n.bind(n,94810)),render:t=>{let{default:n}=t;return(0,G.jsx)(n,{redirectUri:e})}});{const t=x.bf({url:`${_.default.domainBaseUrl}${p._j.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:e}}),n=x.bf({url:`${_.default.domainBaseUrl}${p._j.login}`,query:{redirectURL:t}});m.hw(),M.c4({environment:this.environment,url:n,redirect:!0})}}if("myIntegrations"===t.route.name)return"pointer"in t.route?(0,G.jsx)(r.LazyDeveloperIntegrationViewV2,{botOrIntegrationPointer:t.route.pointer}):(0,G.jsx)(r.LazyDeveloperIntegrationsList,{});if("myIntegrationsLab"===t.route.name)return(0,G.jsx)(r.LazyDeveloperIntegrationLab,{integrationPointer:t.route.pointer});if("inAppTemplateSubmission"===t.route.name&&M.c4({environment:this.environment,url:p._j.creatorProfileTemplates,redirect:!0}),"inAppTemplateCreatorSubmission"===t.route.name&&M.c4({environment:this.environment,url:p._j.creatorProfile,redirect:!0}),"creatorProfileAnalytics"===t.route.name&&M.c4({environment:this.environment,url:p._j.creatorProfile,redirect:!0}),"creatorProfile"===t.route.name||"creatorProfileTemplates"===t.route.name){if(this.environment.currentUser.isLoggedIn())return(0,G.jsx)(E,{});{const e=x.bf({url:`${p._j[t.route.name]}`}),n=x.bf({url:`${_.default.domainBaseUrl}${p._j.login}`,query:{redirectURL:e}});M.c4({environment:this.environment,url:n,redirect:!0})}}if("localizedTemplates"===t.route.name){if(this.environment.currentUser.isLoggedIn())return(0,G.jsx)(R,{});{const e=x.bf({url:`${p._j[t.route.name]}`}),n=x.bf({url:`${_.default.domainBaseUrl}${p._j.login}`,query:{redirectURL:e}});M.c4({environment:this.environment,url:n,redirect:!0})}}return"studentGroupSignup"===t.route.name?(0,G.jsx)(B,{}):"notFound"===t.route.name?(0,G.jsx)(r.LazyPageError,{route:t.route,publicPageData:void 0}):"page"===t.route.name||"space"===t.route.name||"nativeTab"===t.route.name||"workspaceSetup"===t.route.name||"modal"===t.route.name||"quickSearch"===t.route.name||"chat"===t.route.name?(0,G.jsx)(tr,{routerState:t}):(0,G.jsx)(rr.Z,{})}}is.displayName="Router";const rs=is,ss={width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,c.N7)(a.SP)},as={fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:v.ZP.uiGray},ls={fontSize:10,marginTop:8};function cs(e){j.r$({currentTab:e})}function ds(e){let{environment:t,onMount:n}=e;const s=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{s.current||(s.current=!0,null==n||n())}),[n]),(0,G.jsx)(i.B9,{value:t,children:(0,G.jsx)(r.DependencyProviderAll,{children:(0,G.jsx)(rs,{})})})}},14694:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});n(67294);var o=n(480),i=n(86628),r=n(24405),s=n(39567),a=n(50659),l=n(77080),c=n(85893);function d(){const e=(0,r.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,s.Y)(e.icon)})}function u(e){var t;const n=(0,o.O7)(),s=n.device.isMobile,u=(0,i.VK)((()=>{var t,o;if(s)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(o=e.style)||void 0===o?void 0:o.paddingLeft:10)}),[n.WindowSizeStore,s,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),p=(0,i.VK)((()=>l.default.checkGate("sidebar_redesign")),[]),h=(0,r.yK)((t=>({wrapper:{...s?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:u,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,color:p?e.isBottomItem?t.mediumTextColor:t.v2.text.primary:void 0,fontWeight:p?450:void 0,minHeight:e.isBottomItem?24:27,paddingTop:2,paddingBottom:2,marginTop:1,marginBottom:1,...(0,a.MF)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:s?28:22,height:s?24:18,marginLeft:p?void 0:-3,marginRight:p?8:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:s?26:22,height:s?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!s?"clip":"ellipsis",...e.childrenStyle}})),[s,u,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle,p]);return(0,c.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:h.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:h.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:h.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(d,{})]}),(0,c.jsx)("div",{style:h.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:h.right,children:e.right})]})}},55064:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var o=n(67294),i=n(480),r=n(86628),s=n(24405),a=n(51454),l=n(9291),c=n(1898),d=n(17659),u=n(87420),p=n(24677),h=n(28651),m=n(98742),g=n(89224),f=n(48276),v=n(28161),y=n(16746),b=n(74948),x=n(24646),S=n(38676),k=n(36391),w=n(77080),j=n(96049),C=n(88923),M=n(6685),I=n(26388),P=n(85893);const T=function(e){let{type:t}=e;const n=(0,i.O7)(),s=(0,r.qz)(void 0,h.Z),l=(0,o.useRef)(!1),y=(0,o.useCallback)((()=>function(e,t){t.setState({...t.state,mousePressed:!1}),L({isResizing:!1},e)}(t,s)),[t,s]),w=(0,o.useCallback)((()=>function(e,t,n,o){if(!o.current){switch(t){case"page":b.setExpand({environment:e,isExpanded:!S.sidebarExpandedStore.state,from:"sidebar_resizer"}),S.sidebarOpenStore.setState(!1);break;case"update":b.setUpdateExpand({environment:e,isExpanded:!(0,x.Sx)(e),from:"drag"});break;case"peek":u.xv(e,"resizer_click");break;case"secondary_sidebar":d.qQ({environment:e,open:!1});break;default:(0,c.t1)(t)}n.setState({...n.state,mouseEntered:!1})}n.setState({...n.state,mousePressed:!1}),L({isResizing:!1},t)}(n,t,s,l)),[n,t,s]),T=(0,o.useCallback)((e=>function(e,t,n,o){switch(g.clear(t),o.current=!0,n){case"page":b.setWidth({width:A(e.currentX,n),environment:t});break;case"update":b.setUpdateWidth({width:A(e.currentX,n),environment:t});break;case"peek":b.setPeekWidth({width:A(e.currentX,n),environment:t});break;case"secondary_sidebar":v.ZP.setWidth(A(e.currentX,n));break;default:(0,c.t1)(n)}}(e,n,t,l)),[n,t]),R=(0,o.useCallback)((()=>function(e,t,n,o){p.ZH(e),n.setState({...n.state,mousePressed:!0}),o.current=!1,L({...S.sidebarResizingStore.state,isResizing:!0},t)}(n,t,s,l)),[n,t,s]),{device:Z}=n,z=(0,r.VK)((()=>function(e){const t=function(e){switch(e){case"page":return S.sidebarWidthStore.state;case"secondary_sidebar":return S.sidebarWidthStore.state+f.l_();case"update":return k.ZP.state.width;case"peek":return C.default.state.preferredSidePeekWidth;default:(0,c.t1)(e)}}(e);switch(e){case"page":case"secondary_sidebar":return t;case"peek":case"update":return window.innerWidth-t;default:(0,c.t1)(e)}}(t)),[t]),B=(0,r.VK)((()=>S.sidebarMouseEnterYStore.state),[]),O=(0,r.VK)((()=>j.Z.state),[]),V=(0,r.VK)((()=>function(e){return{cursor:"col-resize",height:"100%",width:12,marginLeft:"update"===e?-k.ZP.state.width:-6}}(t)),[t]),F=(0,r.VK)((()=>function(e,t){const n=(0,x.in)(t);return{position:"absolute",left:"peek"===e?0:void 0,right:"peek"!==e?0:void 0,width:0,flexGrow:0,zIndex:"peek"===e?a.YO:1,top:n?0:-1,bottom:n?0:-1,pointerEvents:"auto"}}(t,n)),[t,n]);return O||Z.isChromebook?null:(0,P.jsx)(I.ZP,{renderTooltip:()=>(0,P.jsx)(_,{type:t}),originRect:new DOMRect(z,B,0,0),delayThreshold:500,placement:"page"===t||"secondary_sidebar"===t?I.ug.Right:I.ug.Left,originGap:10,render:e=>(0,P.jsx)("div",{style:F,...(0,m.Z)(e,{onMouseMove:()=>function(e){L({isResizerHovered:!0},e)}(t),onMouseLeave:()=>function(e){L({isResizerHovered:!1},e)}(t),onMouseEnter:E}),children:(0,P.jsx)(M.Z,{onDraggableDragStart:R,onDraggableDragMove:T,onDraggableDragEnd:w,onDraggableDragCancel:y,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:e=>(0,P.jsx)("div",{style:V,...e})})})})};function L(e,t){switch(t){case"page":S.sidebarResizingStore.update((t=>({...t,...e})));break;case"update":k.ZP.update((t=>({...t,...e})));break;case"secondary_sidebar":y.Z.update((t=>({...t,...e})));break;case"peek":break;default:(0,c.t1)(t)}}function A(e,t){let n;switch(t){case"page":n=e;break;case"secondary_sidebar":n=e-(S.sidebarExpandedStore.state?S.sidebarWidthStore.state:0);break;case"peek":case"update":n=window.innerWidth-e;break;default:(0,c.t1)(t)}const o=function(e){const t=window.innerWidth;switch(e){case"page":return 480;case"update":return Math.min(t/2,x.Nc);case"peek":return t>2*C.sidePeekMinWidth?t/1.5:t;case"secondary_sidebar":return v.o$;default:(0,c.t1)(e)}}(t),i=function(e){const t=w.default.checkGate("sidebar_redesign");switch(e){case"page":return t?S.SIDEBAR_MIN_WIDTH:S.LEGACY_SIDEBAR_MIN_WIDTH;case"update":return k.AO;case"peek":return C.sidePeekMinWidth;case"secondary_sidebar":return v.um;default:(0,c.t1)(e)}}(t);return n>o?o:n<i?i:n}function _(e){let{type:t}=e;const n=(0,s.Fg)(),a=(0,i.O7)(),d=(0,r.VK)((()=>function(e,t){switch(e){case"page":return(0,x.in)(t);case"update":return(0,x.Sx)(t);case"peek":return C.default.state.open;case"secondary_sidebar":return y.Z.isOpen();default:(0,c.t1)(e)}}(t,a)),[t,a]),u=n.mediumInvertedTextColor;return(0,P.jsxs)("div",{style:{textAlign:"center"},children:[(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Drag <invertedcolor>to resize</invertedcolor>",id:"sidebarResizer.tooltip.dragMessage",values:{invertedcolor:e=>(0,P.jsx)("span",{style:{color:u},children:e})}}),(0,P.jsxs)(o.Fragment,{children:[(0,P.jsx)("br",{}),(0,P.jsx)(l.FormattedMessage,{defaultMessage:"Click <invertedcolor>to {expanded, select, true {close} other {lock open}}</invertedcolor>",id:"sidebarResizer.clickToToggleSidebar.message",values:{expanded:d,invertedcolor:e=>(0,P.jsx)("span",{style:{color:u},children:e})}})]})]})}function E(e){S.sidebarMouseEnterYStore.setState(e.clientY)}},30664:(e,t,n)=>{"use strict";n.d(t,{Z:()=>A});var o=n(67294),i=n(480),r=n(6740),s=n(86628),a=n(24405),l=n(84169),c=n(9291),d=n(25888),u=n(13991),p=n(88642),h=n(39634),m=n(97978),g=n(79897),f=n(58455),v=n(77080);var y=n(43250),b=n(98742),x=n(77907),S=n(475),k=n(16194),w=n(55031),j=n(64921),C=n(31945),M=n(26388),I=n(14694),P=n(85893);const T="?";function L(e){const t=(0,i.O7)(),{isMobile:n}=t.device,d=(0,c.useIntl)(),u=(0,a.Fg)(),p=(0,s.VK)((()=>S.Z.state.open),[]),h=(0,a.yK)((e=>({helpIcon:{fill:e.mediumIconColor,width:16,height:16},hoveredStyle:{background:e.whiteButtonHoveredBackground},pressedStyle:{background:e.whiteButtonPressedBackground}})),[]),m=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,r.E)(t)&&k.Z.setState(!0)}),[]),g=(0,o.useCallback)((()=>{k.Z.setState(!1)}),[]);if(n)return(0,P.jsx)(j.Z,{hovered:p,testId:y.lmr,mobileFeedback:n,...e,children:(0,P.jsx)(I.Z,{left:(0,l.m)(h.helpIcon),disableMobileBorder:!0,children:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Help & feedback",id:"helpButton.mobileHelpFeedbackButton.label"})})});const f=d.formatMessage({defaultMessage:"Help, feedback, and keyboard shortcuts",id:"helpButton.desktopHelpButton.ariaLabel"}),v=(0,b.Z)(e,{onFocus:m,onBlur:g});return(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(M.ZP,{renderTooltip:()=>(0,P.jsx)("span",{children:(0,P.jsx)(c.FormattedMessage,{defaultMessage:"Help, feedback, and {br}keyboard shortcuts",id:"helpButton.desktopHelpButton.tooltip",values:{br:(0,P.jsx)("br",{})}})}),render:e=>(0,P.jsx)(j.Z,{ariaLabel:f,className:y.lmr,testId:y.lmr,style:(0,w.y)(t,{theme:u,rightEdgeDistance:16,isInPeekRenderer:!1}),hoveredStyle:h.hoveredStyle,pressedStyle:h.pressedStyle,...(0,b.Z)(v,e),children:T})})})}const A=(0,c.injectIntl)((function(){const e=(0,i.O7)(),{isMobile:t}=e.device,n=(0,s.VK)((()=>{var t;return(null===(t=e.mobileNative)||void 0===t?void 0:t.supportsNativeHomeOnPhone())||!1}),[e]),r=(0,o.useCallback)((()=>{d.Ar(e,{from:"corner"}),function(e){const t=f.default.state;if((0,m.Ug)()&&t.isZendeskEnabled){const{userHighestPlanType:n,isSalesAssistedPlan:o}=(0,g.rf)(e);p.j({locale:u.SP,analyticsSettings:t,isForethoughtEnabled:v.default.checkGate("forethought"),forethoughtInitializeArgs:h.z(e),userHighestPlanType:n,isSalesAssistedPlan:o,cookieService:e.cookieService})}}(e)}),[e]);return(0,P.jsx)(C.ZP,{popupType:t?C.Z4.SlideUp:C.Z4.Popup,hidesMobileNativeBottomBar:n,preventSlideUpTransition:n,renderOrigin:e=>(0,P.jsx)(L,{...e}),originGap:t?0:12,placementToOrigin:t?C.pO.Right:C.pO.Top,alignmentToOrigin:t?C.vR.Center:C.vR.End,buttonPopupStore:S.Z,onClick:r,render:()=>(0,P.jsx)(x.LazyHelpButtonContent,{shouldRenderAsStaticModal:n})})}))},46457:(e,t,n)=>{"use strict";n.d(t,{_:()=>h});var o=n(67294),i=n(480),r=n(86628),s=n(24405),a=n(9291),l=n(77907),c=n(34859),d=n(7184),u=n(53336),p=n(85893);function h(e){let{loginModalStore:t,loginStore:n,title:s,description:a,isSignup:c,disableLoginLink:u,redirectURL:h,className:v,onDismiss:y}=e;const b=(0,i.O7)(),x=(0,r.VK)((()=>t.state.open),[t]),S=(0,o.useId)(),k=(0,o.useId)(),w={loginStore:n,title:s,description:a,isSignup:c,redirectURL:h,disableLoginLink:u,titleAriaId:S,descriptionAriaId:k};return(0,p.jsx)(d.c,{ariaLabelledBy:S,ariaDescribedBy:k,isOpen:x,onDismiss:()=>{f({loginModalStore:t,loginStore:n,onDismiss:y})},areaConstraint:{width:{min:480,max:480},height:{scroll:!0}},children:(0,p.jsx)(m,{children:(0,p.jsxs)("div",{className:v,children:[!b.device.isMobile&&(0,p.jsx)(g,{loginModalStore:t,loginStore:n,onDismiss:y}),(0,p.jsx)(l.LazyLoginModalContent,{...w})]})})})}function m(e){let{children:t}=e;return(0,i.O7)().device.isMobile?(0,p.jsx)(u.Z,{type:c.Z.Y,children:t}):t}function g(e){let{loginModalStore:t,loginStore:n,onDismiss:o}=e;const i=(0,s.Fg)();return(0,p.jsx)("div",{style:{fontSize:14,color:i.mediumTextColor,position:"absolute",right:0,marginTop:16,marginRight:16,cursor:"pointer"},onClick:()=>{f({loginModalStore:t,loginStore:n,onDismiss:o})},children:(0,p.jsx)(a.FormattedMessage,{defaultMessage:"Cancel",id:"sidebarSwitcherMultiAccount.addAccountModal.cancelButton.label"})})}function f(e){const{loginModalStore:t,loginStore:n,onDismiss:o}=e;n.reset(),t.setState({open:!1}),o&&o()}},69098:(e,t,n)=>{"use strict";n.d(t,{j:()=>d,o:()=>o});var o={};n.r(o),n.d(o,{showAsyncModal:()=>p,showAsyncModalComponent:()=>h,testOnly:()=>S});var i=n(67294),r=n(86628),s=n(49085);class a extends s.default{getInitialState(){return{asyncModals:[]}}}const l=new a;var c=n(85893);const d=i.memo((function(e){const{store:t=l}=e,n=(0,r.VK)((()=>t.state.asyncModals),[t]);return(0,c.jsx)(c.Fragment,{children:n.map((e=>{const{id:t,internalRenderModal:n,isOpen:o}=e,r=n(o);return(0,c.jsx)(i.Fragment,{children:r},t)}))})}));var u=n(7032);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return new Promise(((n,o)=>{try{m({asyncModal:y({renderModal:e,promiseResolve:n,promiseReject:o,store:t}),store:t})}catch(i){o(i)}}))}function h(e){return p((t=>i.createElement(e,t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:l)}function m(e){const{asyncModal:t,store:n=l}=e;n.update((e=>({asyncModals:[...e.asyncModals,t]})))}function g(e){const{id:t,promiseResolve:n,store:o=l}=e;return e=>{const i=b({id:t,store:o});null!=i&&i.isOpen&&(x({id:t,store:o,update:{isOpen:!1}}),n(e))}}function f(e){const{id:t,promiseResolve:n,store:o=l}=e;return()=>{const e=b({id:t,store:o});null!=e&&e.isOpen&&(x({id:t,store:o,update:{isOpen:!1}}),n())}}function v(e){const{id:t,store:n=l}=e;return()=>{n.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function y(e){const{renderModal:t,promiseResolve:n,promiseReject:o,store:i=l}=e,r=(0,u.ZP)(),s=v({id:r,store:i}),a=f({id:r,promiseResolve:n,store:i}),c=g({id:r,promiseResolve:n,store:i});return{id:r,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:s,onDismiss:a,resolve:c})}catch(n){throw o(n),n}},isOpen:!0}}function b(e){const{id:t,store:n=l}=e;return n.state.asyncModals.find((e=>e.id===t))}function x(e){const{id:t,update:n,store:o=l}=e;o.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...n}))})))}const S={addAsyncModal:m,createAsyncModal:y,createOnClosed:v,createOnDismiss:f,createResolve:g,getAsyncModal:b,updateAsyncModal:x}},83420:(e,t,n)=>{"use strict";n.d(t,{TL:()=>u,nc:()=>d,ue:()=>c});var o=n(66897),i=n(54368),r=n(77420),s=n(19889),a=n(1898),l=n(6258);function c(e){const{parentStore:t,pointer:n}=e,i=(0,l.Kv)(t,n).getValue();if(i)return(0,o.LU)({table:n.table,value:i})}function d(e){const{parentStore:t,pointer:n}=e;return n.table===r.cZ?l.Qx.createChildStore(t,n):n.table===s.KJ?l.U6.createChildStore(t,n):n.table===i.y0?l.fg.createChildStore(t,n):void(0,a.t1)(n)}function u(e){return e.table===r.cZ?(0,o.ON)(e.getValue()):e.table===s.KJ?(0,o.m3)(e.getValue()):e.table===i.y0?(0,o.I4)(e.getValue()):void(0,a.t1)(e)}},65556:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupOnBeforeUnload:()=>r,showConfirmationDialogEventEmitter:()=>o});const o=new(n(33147).Z),i={transaction_queue_has_tasks:"Changes you made may not be saved. Are you sure you want to quit?",uploading_files:"The files you are currently uploading may not be saved. Are you sure you want to quit?",generating_ai_completions:"Changes being made by AI may not be saved. Are you sure you want to quit?"};function r(e){const{TransactionQueue:t,device:n,AppUpdateStore:r,GlobalFileUploadStore:s}=e;window.onbeforeunload=function(){const e=!t.hasTasks()||n.isMobileNative||n.isElectron||r.isMajorUpdate()?s.isUploading()?"uploading_files":void 0:"transaction_queue_has_tasks";if(e)return o.emit(e),i[e]}}},70511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{setupTransactionLoadGenerator:()=>l});var o=n(92595),i=n(993),r=n(13447),s=n(80444),a=n(24666);function l(e){(0,o.exposeDebugValue)("generateTransactionLoad",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const l=s.default.state.mainEditorCurrentBlockStore;if(!l)return void console.info("Cannot generateTransactionLoad: No current block");const c=l.getTitleStore();if(!c)return void console.info("Cannot generateTransactionLoad: block has no title");if("editing"!==a.default.state.mode)return void console.info("not editing anything. Click the page title.");const d=t=>{r.createAndCommit({userAction:"generateTransactionLoad.createTransaction",environment:e,perform:o=>{console.info("createAndCommit #",t);for(let r=0;r<n;r++){const n=`This is transaction #${t+1}, op ${r+1}, of load started at ${u}`;i.aS({environment:e,editorMode:"default",store:c,newValue:n,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:o})}}})},u=new Date;if(0===o)for(let e=0;e<t;e++)d(e);else{let e=0;const n=setInterval((()=>{e<t?(d(e),e++):clearInterval(n)}),o)}}))}},19077:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initialize:()=>a});var o=n(68626),i=n(95477),r=n(77080),s=n(15517);function a(e){"object"==typeof i.default&&i.default.version&&(o.clientLogglyEnvironmentData.version=i.default.version);const{device:t,currentUser:n}=e;t.isMobileNative&&(o.clientLogglyEnvironmentData.isMobileNative=!0),t.isMobile&&(o.clientLogglyEnvironmentData.isMobile=!0),t.isAndroid&&(o.clientLogglyEnvironmentData.isAndroid=!0),t.isIOS&&(o.clientLogglyEnvironmentData.isIOS=!0),t.isElectron&&(o.clientLogglyEnvironmentData.isElectron=!0),t.isChromeExtension&&(o.clientLogglyEnvironmentData.isChromeExtension=!0),o.clientLogglyEnvironmentData.os=t.os,o.clientLogglyEnvironmentData.platform=t.platform,window.navigator.userAgent&&(o.clientLogglyEnvironmentData.userAgent=window.navigator.userAgent),document.referrer&&(o.clientLogglyEnvironmentData.referrer=document.referrer),n.id&&(o.clientLogglyEnvironmentData.userId=n.id),o.clientLogglyEnvironmentData.experiments=r.default.getUsedNonControlExperimentsMap(),r.default.addListener((()=>{o.clientLogglyEnvironmentData.experiments=r.default.getUsedNonControlExperimentsMap()})),(0,s.sK)().then((e=>{e&&(o.clientLogglyEnvironmentData.storageUsageEstimate=e.usage,o.clientLogglyEnvironmentData.storageQuotaEstimate=e.quota)}))}},50659:(e,t,n)=>{"use strict";n.d(t,{G$:()=>s,MF:()=>a,Z3:()=>r});var o=n(77080);const i=4;function r(e){let{isMobile:t}=e;const n=o.default.checkGate("sidebar_redesign");return{...!t&&{borderRadius:n?12:3}}}function s(e){let{isMobile:t}=e;return t?{}:{...r({isMobile:t}),display:"flex",marginLeft:i,marginRight:i,width:`calc(100% - ${2*i}px)`,transition:"background 100ms ease-out"}}function a(){return{paddingLeft:14-i,paddingRight:14-i}}},48916:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mainApp:()=>o});n(21703);async function o(e){const{minimalEnvironment:t,mainStartTime:o,prefetchInitiatedTime:i,prefetchCache:r}=e,{device:s}=t,[{setupOnBeforeUnload:a},l,{createClientEnvironment:c},{setupTransactionQueue:d},{default:u},p]=await Promise.all([Promise.resolve().then(n.bind(n,65556)),Promise.resolve().then(n.bind(n,68626)),Promise.resolve().then(n.bind(n,38110)),Promise.resolve().then(n.bind(n,53730)),Promise.resolve().then(n.bind(n,27411)),Promise.resolve().then(n.bind(n,44133))]);let h=await c({minimalEnvironment:t,prefetchCache:r});const{ElectronSqlite:m}=h;p.setupRecordCacheDebugging(s);const g=await d(h);a({device:s,TransactionQueue:g,AppUpdateStore:h.AppUpdateStore,GlobalFileUploadStore:u});const[f,{default:v}]=await Promise.all([Promise.resolve().then(n.bind(n,19077)),Promise.resolve().then(n.bind(n,18245))]);if(f.initialize(h),s.isMobileNative){const e=v.mark("mobilenative.initialize_from_js"),[t,o]=await Promise.all([Promise.resolve().then(n.bind(n,98958)),Promise.resolve().then(n.bind(n,57491))]);await t.initializeMobileNativeApp(h),Object.assign(l.clientLogglyEnvironmentData,o.getMobileNativeDeviceInfo()),v.measure(e,{environment:h,data:{}})}if(s.isElectron){const e=await Promise.resolve().then(n.bind(n,47839));await e.initializeElectron({device:s,electronSqlite:m});const t=await Promise.resolve().then(n.bind(n,74503)),o=await t.getDesktopDeviceInfo();Object.assign(l.clientLogglyEnvironmentData,o,{desktopVersion:s.desktopAppVersion})}const[y,b,x,S,k]=await Promise.all([Promise.resolve().then(n.bind(n,97977)),Promise.resolve().then(n.bind(n,74948)),Promise.resolve().then(n.bind(n,89224)),Promise.resolve().then(n.bind(n,32219)),Promise.resolve().then(n.bind(n,13447))]),{setupTransactionLoadGenerator:w}=await Promise.resolve().then(n.bind(n,70511));w(h);const j=performance.now(),[{default:C},M,I,P,{CurrentUser:T},{getGhostAdminUserId:L},{default:A}]=await Promise.all([Promise.resolve().then(n.bind(n,98469)),Promise.resolve().then(n.t.bind(n,67294,19)),Promise.resolve().then(n.t.bind(n,73935,19)),Promise.resolve().then(n.t.bind(n,20745,19)),Promise.resolve().then(n.bind(n,87997)),Promise.resolve().then(n.bind(n,12955)),Promise.resolve().then(n.bind(n,77080))]);b.initialize(),x.startListeners(s),h=await y.initialize(h),h.updateCurrentUserId=async e=>{const t=await L(h),n={...e.environment,currentUser:new T({id:e.currentUserId,loggedInUserIds:e.userIds,adminUserId:t})};N(n)},S.initialize(h),g.startLoop();const[{maybeClearCookies:_,refreshNotionCookies:E,validateHasPermissionArgs:R,clearNotionCookiesWithNoPermission:Z,clearThirdPartyCookiesAndLocalStorageWithNoPermission:z},{clearNotionLocalStorageWithNoPermission:B},O,V]=await Promise.all([Promise.resolve().then(n.bind(n,12955)),Promise.resolve().then(n.bind(n,18613)),Promise.resolve().then(n.bind(n,32223)),Promise.resolve().then(n.bind(n,32603))]);_(),Promise.all([Z(h),z(h)]).then((()=>E(h))),B(),R(h);const[{TransactionQueueDependenciesImpl:F}]=await Promise.all([Promise.resolve().then(n.bind(n,68026))]),N=e=>{const t=performance.now(),n=document.querySelector("#notion-app");if(!n)throw new Error('Could not find element with id "notion-app"');const r=A.checkGate("react_18_concurrent_rendering");g.updateDependencies(new F(e)),k.updateConnectionState(e),O.updateEnvironment(e),l.clientLogglyEnvironmentData.userId=e.currentUser.id;const s=()=>{const e=document.getElementById("initial-loading-spinner"),n=document.getElementById("skeleton");e&&e.remove(),n&&n.remove();const r=performance.now();V.setSubMetricsAtRenderCallback({mainStartTime:o,prefetchInitiatedTime:i,renderStartTime:t,renderEndTime:r,mainImportEndTime:j})},a=M.createElement(C,{environment:e,onMount:r?s:void 0});if(r){P.createRoot(n).render(a)}else I.render(a,n,s)};return N(h),{transactionQueue:g,environment:h}}},52389:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(49085);class i extends o.default{getInitialState(){return{open:!1}}}const r=new i},38110:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createClientEnvironment:()=>Te});var o=n(26263),i=n(45631),r=n(87997),s=n(58287),a=n(94023),l=n(91814),c=n(27328),d=n(42389),u=n(20475),p=n(99747),h=n(47839),m=n(22974),g=n(97978),f=n(12955),v=n(49051);function y(e){return!!e.isBrowser&&(!!function(e){if(!e.isChrome)return!1;if("Edge"===e.browserName)return!0;try{const t=Number(e.browserVersion.split(".")[0]),{MIN_CHROME_VERSION:n,MAX_CHROME_VERSION:o}=v.HA.CHROME;return t>=n&&t<=o}catch(t){return!1}}(e)&&("localhost"!==window.location.hostname||"3003"===window.location.port))}var b=n(69151),x=n(69475),S=(n(21703),n(68626)),k=n(7032),w=n(65044),j=n(77892);const C=[WebSocket.OPEN,WebSocket.CONNECTING];class M{constructor(){this.sqliteConnection=void 0,this.requests=new Map}async initialize(){if(h.electronApi&&h.electronApi.sqliteServerEnabled){await this.initializeWebSocket();const e={execSqliteBatchV2:async e=>{const t=(0,k.ZP)(),{batch:n,precondition:o}=e,i=JSON.stringify({id:t,batch:n,precondition:o,auth:this.authToken});return await this.execSqliteBatchInner(t,i)},execSqliteBatch:async e=>{const t=(0,k.ZP)(),n=JSON.stringify({id:t,batch:e,auth:this.authToken});return await this.execSqliteBatchInner(t,n)}};this.sqliteConnection=new w.s({connection:e,type:"v2",migrations:await(0,j.kk)(e)})}}async execSqliteBatchInner(e,t){const n=new Promise((t=>{this.requests.set(e,t)}));this.ws.readyState===WebSocket.CLOSED&&await this.initializeWebSocket();try{this.ws.send(t)}catch(i){const e=this.ws;this.ws.onopen=function(n){e.send(t)}}const o=await n;if(o.error)throw new Error("Received SQLite error.");return o.value}async initializeWebSocket(){if(!h.electronApi||!h.electronApi.getSqliteMeta)return;const e=await h.electronApi.getSqliteMeta();if(e.error)return;if(this.ws&&C.includes(this.ws.readyState))return;const{serverProcessPort:t,authToken:n}=e.value;this.authToken=n;const o=`ws://127.0.0.1:${t}`;this.ws=new WebSocket(o),this.ws.onclose=()=>{S.log({level:"warning",from:"electronSqlite",type:"reinitializingWebsocket"}),this.initializeWebSocket()},this.ws.addEventListener("message",(e=>{const t=e.data.toString(),{id:n,result:o}=JSON.parse(t),i=this.requests.get(n);i&&(this.requests.delete(n),i({value:o}))})),await new Promise((e=>{this.ws.onopen=()=>{e()}}))}}const I=Symbol("Comlink.proxy"),P=Symbol("Comlink.endpoint"),T=Symbol("Comlink.releaseProxy"),L=Symbol("Comlink.finalizer"),A=Symbol("Comlink.thrown"),_=e=>"object"==typeof e&&null!==e||"function"==typeof e,E=new Map([["proxy",{canHandle:e=>_(e)&&e[I],serialize(e){const{port1:t,port2:n}=new MessageChannel;return R(e,t),[n,[n]]},deserialize:e=>(e.start(),z(e))}],["throw",{canHandle:e=>_(e)&&A in e,serialize({value:e}){let t;return t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[t,[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function R(e,t=globalThis,n=["*"]){t.addEventListener("message",(function o(i){if(!i||!i.data)return;if(!function(e,t){for(const n of e){if(t===n||"*"===n)return!0;if(n instanceof RegExp&&n.test(t))return!0}return!1}(n,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);const{id:r,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(q);let c;try{const t=a.slice(0,-1).reduce(((e,t)=>e[t]),e),n=a.reduce(((e,t)=>e[t]),e);switch(s){case"GET":c=n;break;case"SET":t[a.slice(-1)[0]]=q(i.data.value),c=!0;break;case"APPLY":c=n.apply(t,l);break;case"CONSTRUCT":c=function(e){return Object.assign(e,{[I]:!0})}(new n(...l));break;case"ENDPOINT":{const{port1:t,port2:n}=new MessageChannel;R(e,n),c=function(e,t){return U.set(e,t),e}(t,[t])}break;case"RELEASE":c=void 0;break;default:return}}catch(d){c={value:d,[A]:0}}Promise.resolve(c).catch((e=>({value:e,[A]:0}))).then((n=>{const[i,a]=W(n);t.postMessage(Object.assign(Object.assign({},i),{id:r}),a),"RELEASE"===s&&(t.removeEventListener("message",o),Z(t),L in e&&"function"==typeof e[L]&&e[L]())})).catch((e=>{const[n,o]=W({value:new TypeError("Unserializable return value"),[A]:0});t.postMessage(Object.assign(Object.assign({},n),{id:r}),o)}))})),t.start&&t.start()}function Z(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function z(e,t){return N(e,[],t)}function B(e){if(e)throw new Error("Proxy has been released and is not useable")}function O(e){return K(e,{type:"RELEASE"}).then((()=>{Z(e)}))}const V=new WeakMap,F="FinalizationRegistry"in globalThis&&new FinalizationRegistry((e=>{const t=(V.get(e)||0)-1;V.set(e,t),0===t&&O(e)}));function N(e,t=[],n=function(){}){let o=!1;const i=new Proxy(n,{get(n,r){if(B(o),r===T)return()=>{!function(e){F&&F.unregister(e)}(i),O(e),o=!0};if("then"===r){if(0===t.length)return{then:()=>i};const n=K(e,{type:"GET",path:t.map((e=>e.toString()))}).then(q);return n.then.bind(n)}return N(e,[...t,r])},set(n,i,r){B(o);const[s,a]=W(r);return K(e,{type:"SET",path:[...t,i].map((e=>e.toString())),value:s},a).then(q)},apply(n,i,r){B(o);const s=t[t.length-1];if(s===P)return K(e,{type:"ENDPOINT"}).then(q);if("bind"===s)return N(e,t.slice(0,-1));const[a,l]=D(r);return K(e,{type:"APPLY",path:t.map((e=>e.toString())),argumentList:a},l).then(q)},construct(n,i){B(o);const[r,s]=D(i);return K(e,{type:"CONSTRUCT",path:t.map((e=>e.toString())),argumentList:r},s).then(q)}});return function(e,t){const n=(V.get(t)||0)+1;V.set(t,n),F&&F.register(e,t,e)}(i,e),i}function D(e){const t=e.map(W);return[t.map((e=>e[0])),(n=t.map((e=>e[1])),Array.prototype.concat.apply([],n))];var n}const U=new WeakMap;function W(e){for(const[t,n]of E)if(n.canHandle(e)){const[o,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:o},i]}return[{type:"RAW",value:e},U.get(e)||[]]}function q(e){switch(e.type){case"HANDLER":return E.get(e.name).deserialize(e.value);case"RAW":return e.value}}function K(e,t,n){return new Promise((o=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),o(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)}))}var H=n(52629),$=n(1898),G=n(97448),Q=n(77144),Y=n(37850);class X{constructor(e){this.initializePromise=void 0,this.initializePromise=new Y._W(this.initialize(e))}async waitForInitialize(){await this.initializePromise.wrappedPromise}async execSqliteBatch(e){if(!document.hasFocus())return{body:this.emptyResults(e)};const{status:t}=this.initializePromise.state;if("pending"===t||"rejected"===t)return{body:this.emptyResults(e)};if("resolved"===t){const t=this.initializePromise.state.value;return this.requestWebLock((()=>t.execSqliteBatch(e)))}(0,$.t1)(t)}async initialize(e){return this.requestWebLock((async()=>{await e.initialize();const t={execSqliteBatch:e.execSqliteBatch,execSqliteBatchV2:e.execSqliteBatchV2};return new w.s({connection:t,type:"v2",migrations:await(0,j.kk)(t)})}))}emptyResults(e){return e.body.map((e=>"getData"in e?{type:"DataOk",data:[]}:{type:"Ok"}))}requestWebLock(e){var t;if("function"!=typeof(null===(t=navigator.locks)||void 0===t?void 0:t.request))throw new Error("This browser does not support Web Locks");return navigator.locks.request("wasm_sqlite",e)}}class J{constructor(){this.sqliteConnection=void 0,this.sqliteConnection=new X(z(new Worker(new URL(n.p+n.u(7244),n.b))))}static createInstance(){const e=(0,G.fastGetGroup)("browser_sqlite");switch(e){case"on":ee("loading");const t=new J;return t.waitForInitialize().then((()=>{ee("success")}),(e=>{ee("error"),S.log({level:"error",from:"clientEnvironment",type:"wasmSqliteInitializeError",error:(0,H.Ui)(e)})})),t;case"control":return void ee("skipped-control-group");case void 0:return void ee("skipped-undefined-group");default:(0,$.t1)(e)}}async waitForInitialize(){return await this.sqliteConnection.waitForInitialize()}}function ee(e){Q.Z.state.metricData.update((t=>({...t,wasm_sqlite_initialized:e})))}var te=n(758),ne=n(77080),oe=n(49085),ie=n(70203),re=n(77907);class se extends oe.default{getInitialState(){return{loading:!1,loaded:!1}}async loadIfNeeded(e){if(this.state.loaded||this.state.loading)return;const t=e();if(!t)return;if(0===ie.CGe(t).length)return;const n=re.deps.katex.loader();this.setState({loading:!0,loaded:!1,result:n}),this.setState({loading:!1,loaded:!0,result:await n})}getKatex(){if(this.state.loaded)return this.state.result}}var ae=n(15157),le=n(44615),ce=n(606),de=n(21202),ue=n(53965),pe=n(19584),he=n(54642),me=n(2688),ge=n(53730);class fe extends oe.default{static getCacheKey(e){return`LocalBacklinkStore2:${e}`}getInitialState(){return{}}initializeBacklinks(e){let{block:t,currentUserId:n,environment:o}=e;if(this.instanceState[t.id])return;const i=this.getCachedBacklinkState({blockId:t.id,currentUserId:n});i?this.setState({...this.instanceState,[t.id]:{state:i,loaded:!0}}):this.setState({...this.instanceState,[t.id]:{state:{backlinks:[],inaccessibleBacklinkCount:0},loaded:!1}}),ve(o,t),this.startMessageListeners(t,o)}awaitLoaded(e){return this.waitUntil((()=>{const t=this.state[e];return Boolean(t&&t.loaded)}))}destroyBacklinks(e,t){this.stopMessageListeners(e,t),delete this.instanceState[e]}getBacklinkState(e){let{blockId:t,currentUserId:n}=e;const o=this.state[t];return o?o.state:this.getCachedBacklinkState({blockId:t,currentUserId:n})||{backlinks:[],inaccessibleBacklinkCount:0}}setBacklinkState(e){let{blockId:t,state:n,currentUserId:o}=e;this.setCachedBacklinkState({blockId:t,state:n,currentUserId:o});const i=this.state[t];i&&this.setState({...this.state,[t]:{...i,state:n,loaded:!0}})}updateBacklinks(e){const{createdBacklinks:t,deletedBacklinks:n,currentUserId:o}=e,i=(0,pe.cf)(t),r=(0,pe.cf)(n),s=i.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),a=r.reduce(((e,t)=>{const{block_id:n}=t;return e[n]=e[n]?[...e[n],t]:[t],e}),{}),l=new Set([...Object.keys(s),...Object.keys(a)]);return l.forEach((e=>{const t=s[e]||[],n=a[e]||[],i=this.getBacklinkState({blockId:e,currentUserId:o}),r=t.filter((e=>!i.backlinks.some((t=>ue.Xy(e,t))))),l=[...i.backlinks,...r].filter((e=>!n.some((t=>ue.Xy(e,t)))));this.setBacklinkState({blockId:e,state:{...i,backlinks:l},currentUserId:o})})),Array.from(l)}resetBacklinkState(e){let{blockIds:t,currentUserId:n}=e;for(const o of t)this.setCachedBacklinkState({blockId:o,state:{backlinks:[],inaccessibleBacklinkCount:0},currentUserId:n})}getCachedBacklinkState(e){let{blockId:t,currentUserId:n}=e;return ae.Z.get({userId:n,key:fe.getCacheKey(t)})}setCachedBacklinkState(e){let{blockId:t,state:n,currentUserId:o}=e;return ae.Z.set({userId:o,key:fe.getCacheKey(t),value:n})}async startMessageListeners(e,t){const n=ce.dr.fromSpaceShardRecordId(e,de.iU);ge.transactionQueue.isPendingTransactionForRecord(n)&&await ge.transactionQueue.drain();const o=this.instanceState[n.id];if(!o)return;let i,r=!1;const s=ue.P2(((n,o)=>{const s=i,a=o||void 0;i=a,r?s!==a&&ve(t,e):r=!0}),1e3),a=(0,le.Mv)(n.id);o.messageStoreListenerReference=me.ZP.addListener(a,s,void 0,t)}stopMessageListeners(e,t){const n=this.instanceState[e];n&&n.messageStoreListenerReference&&(me.ZP.removeListener(n.messageStoreListenerReference,t),n.messageStoreListenerReference=void 0)}}async function ve(e,t){await ge.transactionQueue.awaitRecordTransaction({id:t.id,table:de.iU});const n=await he.getBacklinksForBlock(e,{block:t});"failed"!==n.type&&e.LocalBacklinkStore.setBacklinkState({blockId:t.id,state:{backlinks:n.data.backlinks,inaccessibleBacklinkCount:n.data.inaccessibleBacklinkCount},currentUserId:e.currentUser.id})}class ye extends oe.default{getInitialState(){return{isOpen:!1,subMenuType:null,menuType:null,shouldRestoreSelectionForMenu:!0,enableShouldShowDebugging:!1}}clear(e){this.update((t=>({...t,menuType:null,shouldRestoreSelectionForMenu:e})))}async clearNativeActionMenuAndRestoreSelectionIfNecessary(){null!==this.state.menuType&&(this.clear(!0),await Y.Vs(10))}}function be(e){return`PageDetailsStore:${e.type}:${e.id}`}class xe extends oe.default{getInitialState(){return{}}static getDefaultToggleState(e){return"discussion"===e.type||"backlinks"!==e.type&&void(0,$.t1)(e)}getToggleState(e){const t=be(e);if(t in this.state)return this.state[t]}setToggleState(e,t){const n=be(e);this.setState({...this.state,[n]:t})}}n(57658);var Se=n(54153);const ke="spellcheckEnabled";class we{constructor(e){let{device:t}=e;this.enabled=void 0,this.currentLanguages=void 0;const n=Se.Z.get(ke);this.setEnabled(void 0===n||n)}setEnabled(e){var t,n;(this.enabled=e,Se.Z.set(ke,e),null!==(t=h.electronApi)&&void 0!==t&&t.setSpellCheckerEnabled)&&(null===(n=h.electronApi)||void 0===n||n.setSpellCheckerEnabled(e))}isEnabled(){return this.enabled}getCorrections(e){return e.dictionarySuggestions}addToDictionary(e){var t;null!==(t=h.electronApi)&&void 0!==t&&t.addToDictionary&&h.electronApi.addToDictionary(e)}setLanguages(e){var t;ue.Xy(this.currentLanguages,e)||(this.currentLanguages=e,null!==(t=h.electronApi)&&void 0!==t&&t.setSpellCheckerLanguages&&h.electronApi.setSpellCheckerLanguages(0===e.length?[navigator.language]:e))}async getLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=h.electronApi)&&void 0!==e&&e.getSpellCheckerLanguages){const e=await h.electronApi.getSpellCheckerLanguages();for(const o of e)n.push({code:o,name:t.of(o)})}return n}async getAvailableLanguages(){var e;const t=new Intl.DisplayNames([navigator.language],{type:"language"}),n=[];if(null!==(e=h.electronApi)&&void 0!==e&&e.getAvailableSpellCheckerLanguages){const e=await h.electronApi.getAvailableSpellCheckerLanguages();for(const o of e)n.push({code:o,name:t.of(o)})}return n}}var je=n(14577);class Ce extends je.Z{}const Me=["nativeRedirect","page","space","nativeTab","onboarding","unsubscribe","unknown","uiDoc","root","chat","settingsConsoleOrganization"],Ie=[...Me,"login","signup","quickSearch"];let Pe=0;async function Te(e){var t,n;const{minimalEnvironment:v,prefetchCache:S}=e,{device:k,mobileNative:w,cookieService:j}=v,C=""+Pe++,I=k.isElectron&&Boolean(null===(t=h.electronApi)||void 0===t?void 0:t.sqliteServerEnabled)?await async function(e){var t;if(!e.device.isElectron||null===(t=h.electronApi)||void 0===t||!t.sqliteServerEnabled)return;const n=new M;return await n.initialize(),n}({device:k}):void 0,P=y(k)?J.createInstance():void 0,T=new l.Z,L=new c.Xk,A=new u.Z;let _;_=null!==(n=h.electronApi)&&void 0!==n&&n.getAvailableSpellCheckerLanguages?new we({device:k}):new te.P({device:k});const E=(null==w?void 0:w.sqliteConnection)||(null==I?void 0:I.sqliteConnection)||(null==P?void 0:P.sqliteConnection),R=E?new x.A({connection:E,maxSize:k.isDesktop?1e6:1e5,verifyRecordPointerMismatches:true}):void 0,Z=new i.q({inMemoryRecordCache:new o.Z({name:"default",verifyRecordPointerMismatches:true}),persistedRecordCache:R});P&&P.waitForInitialize().catch((()=>{Z.disablePersistedRecordCache()}));const z=function(e){const{device:t,RouterStore:n,ThemeStore:o}=e;let i=Me;return(t.isElectron||t.isMobileNative)&&(i=Ie),new Ce((()=>{const e=n.state.route;return e&&i.includes(e.name)?o.state.mode:"light"}),{debugName:"ThemeModeStore"})}({device:k,RouterStore:T,ThemeStore:A}),B=k.isMobile?new ye:void 0,O=await f.getPublicDomainUserId({device:k,mobileNative:w,cookieService:j}),V={key:C,AppUpdateStore:new s.D,device:k,WindowSizeStore:new p.j({device:k},window,{mobileBrowserRemoveBottomPaddingHack:ne.default.checkGate("mobile_browser_remove_bottom_padding_hack")}),KeyboardShortcutStackStore:new a.h({device:k}),defaultRecordCache:Z,mobileNative:w,RouterStore:T,ThemeStore:A,ThemeModeStore:z,ElectronSqlite:I,KatexStore:new se,LocalBacklinkStore:new fe,PageDetailsStore:new xe,updateCurrentUserId:void 0,currentUser:new r.CurrentUser,SpellCheckStore:_,NativeMobileActionBarStore:B,TextSelectionCompositionStore:new d.h,recordSubscriptionActions:b,prefetchCache:S,TabbedRouterStore:L,cookieService:j,publicDomainUserId:O};return m.LH(V),R&&(R.setTrackWithDynamicSampling((e=>g.kB({environment:V,...e}))),R.setIsBrowser(V.device.isBrowser)),V}},69475:(e,t,n)=>{"use strict";n.d(t,{A:()=>v,l:()=>y});n(21703),n(57658);var o=n(28084),i=n(68626),r=n(55652),s=n(45953),a=n(21202),l=n(49984),c=n(35092),d=n(12139),u=n(66504),p=n(49051),h=n(53965),m=n(52629),g=n(84693);let f=1;class v{constructor(e){let{connection:t,maxSize:n,verifyRecordPointerMismatches:a}=e;this.trackWithDynamicSampling=void 0,this.getLatency=new r.s,this.isBrowser=void 0,this.batchReadWorkers=15,this.connection=void 0,this.maxSize=void 0,this.verifyRecordPointerMismatches=void 0,this.pendingWrites=s.Ao.create(),this.getManyFromDisk=async e=>{const t=s.Ao.create();e.forEach(((e,n)=>{let{pointer:o}=e;t.set(o,n)}));const n=await g.Q6(this.connection,e),o=s.Ao.create();for(const i of n)this.setCachedRecordMap(o,i);return e.map((e=>{let{pointer:t,userId:n}=e;const i=this.getInMemory(t,n);if(i)return i;const r=o.get(t);return r&&r[n]}))},this.diskReadQueue=new o.Z({batchSize:Math.floor(c.mz/3)-1,maxWorkers:this.batchReadWorkers>0?this.batchReadWorkers:1,performRequests:this.getManyFromDisk}),this.flushWrites=async()=>{const e=this.pendingWrites;this.pendingWrites=s.Ao.create();const t=h.VS(Array.from(e),(e=>{let{value:t}=e;return t?Object.values(t):[]}));try{var n;await g.Y3(this.connection,this.maxSize,t),null===(n=this.trackWithDynamicSampling)||void 0===n||n.call(this,{eventName:"sqlite_record_cache.flush_writes",eventProperties:{status:"success"},options:{preboot:!0,defaultSampleRateOverride:0}})}catch(r){var o;i.log({level:"warning",from:"SqliteRecordCache",type:"applyRecordCacheOperationsError",error:(0,m.Ui)(r),data:this.getExtraDataForReadOrWriteError(r)},{forceSuppressConsoleLog:!0}),null===(o=this.trackWithDynamicSampling)||void 0===o||o.call(this,{eventName:"sqlite_record_cache.flush_writes",eventProperties:{status:"error"},options:{preboot:!0,defaultSampleRateOverride:0}})}},this.debouncedFlushWrites=h.Ds(this.flushWrites,500,{maxWait:3e3}),this.connection=t,this.maxSize=n,this.verifyRecordPointerMismatches=a}waitForInitialize(){var e,t;return(null===(e=(t=this.connection).waitForInitialize)||void 0===e?void 0:e.call(t))||Promise.resolve()}set(e,t,n,o,r){if(void 0===e||void 0===e.id){const t=new Error("Attempting to set a record with an invalid pointer.");return i.log({level:"error",from:"SqliteRecordCache",type:"SqliteRecordCache.setBadPointer",error:{message:"Attempting to set a record with an invalid pointer.",stack:t.stack},data:{pointer:e}}),void d.IE(t)}const s={pointer:e,userId:o=o||u.I,value:t,timestamp:Date.now(),importance:n};this.removePendingWrite(e,o,"delete"),this.enqueueWrite({type:"set",record:s,maybeStaleRecord:r})}async get(e,t){const n=`get ${f}`;t=t||u.I,f++,this.getLatency.start(n);try{const i=this.getInMemory(e,t);if(i)return this.enqueueWrite({type:"access",record:i}),this.getLatency.end(n,"memory"),i.value;const r=await(this.batchReadWorkers>0?this.diskReadQueue.enqueue({pointer:e,userId:t}):this.getFromDiskUnbatched(e,t));var o;if(r)return this.enqueueWrite({type:"access",record:r}),this.getLatency.end(n,"disk"),null===(o=this.trackWithDynamicSampling)||void 0===o||o.call(this,{eventName:"sqlite_record_cache.get_record",eventProperties:{status:"success"},options:{preboot:!0,defaultSampleRateOverride:0}}),r.value&&"comment"===r.pointer.table&&y.commentIds.add(r.pointer.id),r.value&&"notion_user"===r.pointer.table&&y.userIds.add(r.pointer.id),r.value}catch(s){var r;return i.log({level:"warning",from:"SqliteRecordCache",type:"getError",error:(0,m.Ui)(s),data:this.getExtraDataForReadOrWriteError(s)},{forceSuppressConsoleLog:!0}),void(null===(r=this.trackWithDynamicSampling)||void 0===r||r.call(this,{eventName:"sqlite_record_cache.get_record",eventProperties:{status:"error"},options:{preboot:!0,defaultSampleRateOverride:0}}))}finally{this.getLatency.end(n,"miss")}}deleteRecord(e,t){t=t||u.I,this.removePendingWrite(e,t,"set"),this.enqueueWrite({type:"delete",record:{pointer:e,userId:t}})}async getBlocksWithParent(e){const t=Date.now(),n=e.userId||u.I,o=await g.lR(this.connection,{...e,timestamp:t,userId:n}),i=s.Ao.create(),r=h.oA(Array.from(this.pendingWrites).map((o=>{const r=o&&o.value&&n&&o.value[n];if(!r||"set"!==r.type)return;const s=r.record.value?r.record.value.value:void 0;if(!s)return;if(r.record.pointer.table!==a.iU)return;const l=s;return l.parent_id===e.parent.id&&l.parent_table===e.parent.table?(i.set(r.record.pointer,!0),r.record.timestamp<t&&(r.record.timestamp=t),r.record.value):void 0})));for(const s of o)i.get(s.pointer)||this.getInMemory(s.pointer,s.userId)||r.push(s.value);return r}async getPageBlocksByParent(e){const t=Date.now(),n=e.userId||u.I,o=await g.GF(this.connection,{...e,timestamp:t,userId:n});return o.forEach((e=>{this.enqueueWrite({type:"access",record:{pointer:e.pointer,timestamp:t,userId:n,importance:void 0,value:e.value}})})),o}async reset(){this.pendingWrites=s.Ao.create(),await g.G$(this.connection)}setTrackWithDynamicSampling(e){this.trackWithDynamicSampling=e}setIsBrowser(e){this.isBrowser=e}enqueueWrite(e){this.debouncedFlushWrites();const{pointer:t,userId:n}=e.record,o=this.pendingWrites.get(t),i=o&&o[n];if(i){if("set"===i.type&&"access"===e.type){const t={type:"set",record:{...i.record,timestamp:e.record.timestamp}};return void this.setCacheOperationMap(this.pendingWrites,t)}const t="set"===i.type&&!i.maybeStaleRecord&&i.record.value&&i.record.value.value?i.record.value.value.version:void 0,n="set"===e.type&&e.maybeStaleRecord&&e.record.value&&e.record.value.value?e.record.value.value.version:void 0;if("number"==typeof t&&"number"==typeof n&&t>=n)return}this.setCacheOperationMap(this.pendingWrites,e)}async getFromDiskUnbatched(e,t){const[n]=await this.getManyFromDisk([{pointer:e,userId:t}]);return n}getInMemory(e,t){const n=this.pendingWrites.get(e),o=n&&n[t];if(o&&"set"===o.type)return o.record}setCacheOperationMap(e,t){const n=t,{pointer:o,userId:i}=n.record,r=e.get(o)||{};e.set(o,{...r,[i]:n})}setCachedRecordMap(e,t){const{pointer:n,userId:o}=t,i=e.get(n)||{};e.set(n,{...i,[o]:t})}removePendingWrite(e,t,n){const o=this.pendingWrites.get(e);o&&o[t]&&o[t].type===n&&this.pendingWrites.delete(e)}getExtraDataForReadOrWriteError(e){return{errorSql:(0,l.l)(e)?e.debugInfo.errorSql:void 0,lastSuccessfulSqlBatch:e instanceof l.q2?e.debugInfo.lastSuccessfulSqlBatch:void 0,sqliteCode:(0,l.l)(e)?e.debugInfo.sqliteCode:void 0,wasmSqliteDbVersion:this.isBrowser?p.wE:void 0}}}const y={commentIds:new Set([]),userIds:new Set([])}},43604:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});const o=n(49085).default.createValue({open:!1})},74055:(e,t,n)=>{"use strict";n.d(t,{V:()=>i,Z:()=>s});var o=n(49085);let i=function(e){return e.IN_APP_CALLOUT_CONFLICT="in-app callout conflict",e.DARK_MODE="not shown in dark mode",e}({});class r extends o.default{getInitialState(){return{isVisible:!1,suppressReason:void 0}}}const s=new r},96071:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var o=n(49085);class i extends o.default{getInitialState(){return{open:!1}}}const r=i},12309:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(49085),i=n(7032);class r extends o.default{getInitialState(){return{modalInfoById:{}}}async showModal(e){const t=(0,i.ZP)();return new Promise((n=>{const o=e((e=>{n(e),this.internalCloseModal(t,(()=>{this.internalRemoveModal(t)}))}));this.update((e=>({modalInfoById:{...e.modalInfoById,[t]:{...o,isOpen:!0}}})))}))}internalRemoveModal(e){this.update((t=>{const n={...t.modalInfoById};return delete n[e],{modalInfoById:n}}))}internalCloseModal(e,t){this.update((n=>({modalInfoById:{...n.modalInfoById,[e]:{...n.modalInfoById[e],isOpen:!1,onClosed:t}}})))}}const s=new r},82855:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,i.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},25278:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.IU)("eyes",{viewBox:"0 0 72 72",svg:(0,i.jsx)("path",{d:"M17.0312 64.4375C26.25 64.4375 33.5625 52.9688 33.5625 36.4375C33.5625 19.9062 26.25 8.46875 17.0312 8.46875C7.8125 8.46875 0.5 19.9062 0.5 36.4375C0.5 52.9688 7.8125 64.4375 17.0312 64.4375ZM54.9688 64.4375C64.1875 64.4375 71.5 52.9688 71.5 36.4375C71.5 19.9062 64.1875 8.46875 54.9688 8.46875C45.75 8.46875 38.4375 19.9062 38.4375 36.4375C38.4375 52.9688 45.75 64.4375 54.9688 64.4375ZM10.0625 47.1875C15.125 47.1875 18.4688 43.6562 18.4688 38.3438C18.4688 33.0938 15.125 29.5625 10.0625 29.5625C7.6875 29.5625 5.71875 30.3125 4.25 31.6875C5.375 19.9375 10.6875 11.9375 17.0312 11.9062C24.25 11.875 30.125 22.0312 30.125 36.4375C30.125 50.7812 24.25 60.9688 17.0312 61C11.5312 61.0312 6.78125 54.9688 4.90625 45.5938C6.28125 46.625 8.03125 47.1875 10.0625 47.1875ZM47.9688 47.1875C53 47.1875 56.4062 43.6562 56.4062 38.3438C56.4062 33.0938 53 29.5625 47.9688 29.5625C45.5938 29.5625 43.5938 30.3438 42.1562 31.6875C43.2812 19.9375 48.5938 11.9375 54.9688 11.9375C62.1562 11.9062 68 22.0938 68 36.4375C68 50.7812 62.1562 60.9688 54.9688 60.9688C49.4375 61 44.6875 54.9375 42.7812 45.5938C44.1562 46.5938 45.9375 47.1875 47.9688 47.1875ZM45.5312 37.4062C44.4375 37.25 43.75 35.9688 44.0312 34.6562C44.3125 33.3125 45.3125 32.3438 46.375 32.5312C47.4688 32.75 48.0938 34.0312 47.8438 35.3125C47.5938 36.6562 46.5938 37.5938 45.5312 37.4062ZM7.625 37.4062C6.53125 37.25 5.84375 35.9688 6.09375 34.6562C6.375 33.3125 7.40625 32.3438 8.4375 32.5312C9.5625 32.7812 10.1875 34.0312 9.9375 35.3125C9.6875 36.6562 8.65625 37.5938 7.625 37.4062Z"})})},70954:(e,t,n)=>{"use strict";n.d(t,{C:()=>r});n(67294);var o=n(45238),i=n(85893);const r=(0,o.IU)("notionLogoStroked",{viewBox:"0 0 41 42",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M4.253 2.903h0-.01c-1.02.09-1.806.481-2.322 1.142-.5.642-.671 1.441-.671 2.21v23.228c0 1.267.47 2.316 1.416 3.577h0l.006.008 4.99 6.477h0l.005.005c.465.593.963 1.017 1.617 1.256.63.23 1.33.26 2.138.221h.01l24.652-1.49h.008c1.137-.08 2.038-.396 2.632-1.071.588-.668.746-1.543.746-2.431V9.904c0-.584-.133-1.05-.508-1.486-.27-.311-.669-.602-1.113-.925a54.305 54.305 0 01-.176-.13l-.007-.004-.005-.004-6.772-4.761c-.838-.609-1.516-1.017-2.365-1.21-.824-.187-1.75-.156-3.047-.044L4.253 2.903z",fill:"#fff",stroke:"#fff",strokeWidth:"1.5"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.257 3.158L5.176 4.637c-1.62.14-2.184 1.197-2.184 2.464v21.971c0 .987.352 1.83 1.198 2.959l4.72 6.126c.776.987 1.48 1.198 2.96 1.127l23.32-1.408c1.973-.14 2.537-1.057 2.537-2.606V10.552c0-.801-.316-1.032-1.25-1.714l-.16-.117-6.41-4.507c-1.55-1.126-2.184-1.268-4.65-1.056zM12.4 10.146c-1.904.129-2.337.158-3.418-.72l-2.75-2.183c-.28-.283-.14-.635.565-.705L26.102 5.13c1.62-.141 2.466.423 3.1.916l3.311 2.394c.141.07.493.492.07.492L12.645 10.13l-.245.016zM10.179 35.06V14.074c0-.916.281-1.338 1.126-1.41l22.898-1.337c.777-.07 1.128.423 1.128 1.338v20.844c0 .916-.14 1.691-1.41 1.761l-21.91 1.268c-1.269.07-1.832-.352-1.832-1.48zm21.63-19.86c.141.635 0 1.268-.635 1.34l-1.056.21v15.492c-.916.493-1.761.775-2.466.775-1.128 0-1.41-.352-2.255-1.408l-6.905-10.845v10.493l2.185.493s0 1.267-1.763 1.267l-4.86.282c-.142-.282 0-.986.492-1.127l1.269-.351V17.947l-1.761-.142c-.141-.634.21-1.549 1.197-1.62l5.214-.351 7.187 10.986V17.1l-1.832-.21c-.14-.776.422-1.339 1.127-1.409l4.863-.283z",fill:"#222"})]})})},18613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{clearNotionLocalStorageWithNoPermission:()=>r});var o=n(46637),i=n(72128);function r(){o.Z.removeAllIfNoPermission(),i.Z.removeAllIfNoPermission()}},49051:(e,t,n)=>{"use strict";n.d(t,{HA:()=>o,wE:()=>i});const o={CHROME:{TOKEN:"ArlWUsTSaH+4IS65MeoOwbwM1RkZx0YWwbDOsbbhEO5z4EsRp080qH8QB0XBn5XywqlgmNGT/LT4ZgQ86H+uxg4AAABzeyJvcmlnaW4iOiJodHRwczovL25vdGlvbi5zbzo0NDMiLCJmZWF0dXJlIjoiVW5yZXN0cmljdGVkU2hhcmVkQXJyYXlCdWZmZXIiLCJleHBpcnkiOjE3MTkzNTk5OTksImlzU3ViZG9tYWluIjp0cnVlfQ==",MIN_CHROME_VERSION:92,MAX_CHROME_VERSION:124},EDGE:{TOKEN:"As03mCvy9PkdYPuaxaAQd49kbGn160q43XejPevCbQpnYeq3h4xvFd8/n1720wNf5ZQNzIvbbhDIBUZAJafg/5oAAABzeyJvcmlnaW4iOiJodHRwczovL25vdGlvbi5zbzo0NDMiLCJpc1N1YmRvbWFpbiI6dHJ1ZSwiZmVhdHVyZSI6IlVucmVzdHJpY3RlZFNoYXJlZEFycmF5QnVmZmVyIiwiZXhwaXJ5IjoxNzE0MDY5NDUyfQ=="}},i="v2"},27117:(e,t,n)=>{var o=n(17187),i=n(35717);function r(e){if(!(this instanceof r))return new r(e);"number"==typeof e&&(e={max:e}),e||(e={}),o.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=e.max||1e3,this.maxAge=e.maxAge||0}e.exports=r,i(r,o.EventEmitter),Object.defineProperty(r.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),r.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},r.prototype.remove=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];return delete this.cache[e],this._unlink(e,t.prev,t.next),t.value}},r.prototype._unlink=function(e,t,n){this.length--,0===this.length?this.head=this.tail=null:this.head===e?(this.head=t,this.cache[this.head].next=null):this.tail===e?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[t].next=n,this.cache[n].prev=t)},r.prototype.peek=function(e){if(this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return t.value}},r.prototype.set=function(e,t){var n;if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){if((n=this.cache[e]).value=t,this.maxAge&&(n.modified=Date.now()),e===this.head)return t;this._unlink(e,n.prev,n.next)}else n={value:t,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[e]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=e),this.head=e,this.tail||(this.tail=e),t},r.prototype._checkAge=function(e,t){return!(this.maxAge&&Date.now()-t.modified>this.maxAge)||(this.remove(e),this.emit("evict",{key:e,value:t.value}),!1)},r.prototype.get=function(e){if("string"!=typeof e&&(e=""+e),this.cache.hasOwnProperty(e)){var t=this.cache[e];if(this._checkAge(e,t))return this.head!==e&&(e===this.tail?(this.tail=t.next,this.cache[this.tail].prev=null):this.cache[t.prev].next=t.next,this.cache[t.next].prev=t.prev,this.cache[this.head].next=e,t.prev=this.head,t.next=null,this.head=e),t.value}},r.prototype.evict=function(){if(this.tail){var e=this.tail,t=this.remove(this.tail);this.emit("evict",{key:e,value:t})}}},20745:(e,t,n)=>{"use strict";var o=n(73935);t.createRoot=o.createRoot,t.hydrateRoot=o.hydrateRoot}}]);