"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6215],{15025:(e,t,i)=>{i.d(t,{VR:()=>u,ac:()=>c,zq:()=>l});i(67294);var o=i(24405),s=i(13148),r=i(98519),a=i(9291),n=i(85893);function d(e){const{enabled:t,labelIfEnabled:i,labelIfDisabled:s}=e,r=(0,o.yK)((e=>({container:{color:t?e.mediumTextColor:e.lightTextColor}})),[t]);return(0,n.jsxs)("div",{style:r.container,children:[g(t)," ",t?i:s]})}function l(e){const t="none"!==e;return[(0,n.jsx)(d,{enabled:t&&e.read_content,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,n.jsx)(d,{enabled:t&&e.insert_content,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,n.jsx)(d,{enabled:t&&e.update_content,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,n.jsx)(d,{enabled:t&&e.insert_comment,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,n.jsx)(d,{enabled:t&&e.read_comment,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,n.jsx)(d,{enabled:e.read_user_without_email,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,n.jsx)(d,{enabled:e.read_user_with_email,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function u(e){return[(0,n.jsx)(d,{enabled:e.link_preview,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,n.jsx)(d,{enabled:e.synced_database,labelIfEnabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,n.jsx)(a.FormattedMessage,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function g(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,r.k)(t):(0,s.U)(t)}},84015:(e,t,i)=>{i.d(t,{_:()=>l});i(67294);var o=i(480),s=i(86517),r=i(9291),a=i(15025),n=i(28992),d=i(85893);function l(e){const{role:t}=e,i=(0,r.useIntl)(),{device:l}=(0,o.O7)(),c=(0,a.zq)(t);return(0,d.jsx)(n.Z,{...e,title:i.formatMessage((0,s.Gx)(t,void 0).label),shouldWrapCaption:!0,style:l.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,d.jsx)("div",{children:c})})}},89845:(e,t,i)=>{i.d(t,{Z:()=>p});i(67294);var o=i(83355),s=i(13991),r=i(7057),a=i(53877),n=i(42875),d=i(36700),l=i(9291),c=i(31701),u=i(19584),g=i(26388),m=i(85893);class h extends o.Z{constructor(){super(...arguments),this.reminderTimer=void 0}UNSAFE_willMountOrUpdate(){this.createReminderTimer()}willUnmount(){this.clearReminderTimer()}createReminderTimer(){const e=this.props.value;if(!e)return;const t=a.KR(e,(0,n.r)());if(!t)return;const i=t.valueOf(),o=i-Date.now();o<0||o>u.A0||this.reminderTimer&&this.reminderTimer.timestamp===i||(this.reminderTimer&&clearTimeout(this.reminderTimer.timer),this.reminderTimer={timestamp:i,timer:setTimeout(this.enqueueForceUpdate,o)})}clearReminderTimer(){this.reminderTimer&&(clearTimeout(this.reminderTimer.timer),this.reminderTimer=void 0)}renderComponent(){const{value:e,withComma:t}=this.props;if(!e)return;const i=a.NK(e,(0,n.r)(),s.SP);let o;if(e.reminder){const t=a.Nm(e,(0,n.r)());o=t?{color:this.theme.errorText}:{color:c.ZP.blue}}const l=(0,m.jsxs)(m.Fragment,{children:[(0,r.ZV)({value:e,date_format:this.props.dateFormat,time_format:this.props.timeFormat,userTimeZone:(0,n.r)(),allowRelativeDates:!0,intl:this.props.intl,shortenDateAndRange:this.props.shortenDateAndRange,displayInUserTimezone:this.props.displayInUserTimezone}),e.reminder&&(0,d.m)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),t?", ":null]});return this.props.disableTooltip?(0,m.jsx)("div",{style:{...this.props.style,...o},children:l}):(0,m.jsx)(g.ZP,{renderTooltip:()=>(0,m.jsxs)(m.Fragment,{children:[this.props.tooltipHeader,(0,m.jsxs)("div",{style:f(this.theme,this.props.tooltipHeader),children:[v(i.start),i.end?` â†’ ${v(i.end)}`:""]})]}),render:e=>(0,m.jsx)("div",{style:{...this.props.style,...o},...e,children:l}),placement:this.props.tooltipPlacement})}}h.displayName="DateBox";const p=(0,l.injectIntl)(h);function v(e){return(0,r.ZW)(e,"medium")}function f(e,t){return t?{color:e.mediumInvertedTextColor}:{}}},60442:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var o=i(37810),s=i(47853),r=i(85893);const a=function(e){let{imageURL:t,imageWidth:i,imageHeight:o,caption:a,title:d}=e;if(t){const e=(0,s.D)(t);return(0,r.jsxs)("div",{style:{width:i||200,marginTop:4,marginBottom:4},children:[(0,r.jsx)("div",{style:{width:"100%",height:o||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6}}),(0,r.jsx)(n,{caption:a,title:d})]})}return(0,r.jsx)(n,{caption:a,title:d,style:{width:i}})};function n(e){let{style:t,caption:i,title:s}=e;return(0,r.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[s&&(0,r.jsx)("header",{style:{fontWeight:o.Z.fontWeight.bold,marginBottom:4},children:s}),i]})}},92559:(e,t,i)=>{i.d(t,{Z:()=>a});i(67294);var o=i(24405),s=i(31701),r=i(85893);function a(){const e=(0,o.yK)((()=>({blockContext:{flexShrink:0,display:"flex",width:3,borderRadius:4,marginLeft:2,marginRight:8,minHeight:24,background:s.DB}})),[]);return(0,r.jsx)("div",{style:e.blockContext})}},36081:(e,t,i)=>{i.d(t,{Z:()=>u});var o=i(67294),s=i(24405),r=i(9291),a=i(1898),n=i(31278),d=i(22649),l=i(85893);function c(e){let t,i,{permissionGroup:c,spaceId:u}=e;c?(t=c.icon,i=c.name||(0,l.jsx)(r.FormattedMessage,{defaultMessage:"Untitled group",id:"activity.permissionGroupTitles.untitledGroup"})):i=(0,l.jsx)(r.FormattedMessage,{defaultMessage:"Deleted group",id:"activity.permissionGroupTitles.deletedGroup"});const g=void 0!==t,m=(0,s.yK)((()=>({title:(0,d.TL)(g)})),[g]),h=(0,o.useMemo)((()=>(0,a.$K)(t)?{icon:t,pointer:{table:"space",id:u}}:void 0),[t,u]);return(0,l.jsxs)("span",{children:[h&&(0,l.jsx)(n.Z,{disabled:!0,icon:h,isEmptyPage:!1,size:18,style:d.e9}),(0,l.jsx)("span",{style:m.title,children:i})]})}const u=o.memo(c)},86567:(e,t,i)=>{i.r(t),i.d(t,{default:()=>yo});var o=i(67294),s=i(83355),r=i(40902),a=i(68626),n=i(33709),d=i(1898),l=i(50770),c=i(90060),u=(i(52262),i(24506),i(480)),g=i(86628),m=i(24405);function h(e){return e.isGuestInviteRequest()?"guest_invite_request":e.isPageAccessRequest()?"page_access_request":e.isSpaceMembershipRequest()?"space_membership_request":e.isTeamMembershipRequest()?"team_membership_request":void(0,d.t1)(e)}var p=i(58129),v=i(21202),f=i(75246),b=i(29369),y=i(19889),x=i(9291),S=i(37810),M=i(48298),j=i(78730),A=i(33929),C=i(41549),I=i(6258),R=i(7057),w=i(24211),k=i(62385),B=i(64369),_=i(49204),K=i(85893);const V=function(e){const{accessRequestStore:t,teamStore:i,useInboxRedesign:o}=e,s=(0,u.O7)(),r=(0,x.useIntl)(),{isRequestResolved:a,resolvedStatus:n,resolvedTime:d}=(0,g.VK)((()=>({isRequestResolved:t.isResolvedTeamMembershipRequest(),resolvedStatus:t.getStatus(),resolvedTime:t.getResolvedTime()})),[t]),l=(0,g.VK)((()=>{const e=t.getResolvedById();if(!e)return;const i=I.U6.createChildStore(t,{table:y.KJ,id:e});return i?i.getDisplayName(r):void 0}),[t,r]),c=async e=>{await _.ow({environment:s,teamStore:i,accessRequestStore:t,status:e})},h=(0,m.yK)((e=>({container:{display:"flex",alignItems:"center"},redesignedContainer:{display:"flex",alignItems:"center",fontSize:14,color:e.mediumTextColor},approveButton:{height:26,paddingLeft:8,paddingRight:8,fontSize:12,marginRight:10,fontWeight:500,boxShadow:e.plainButtonBoxShadow,color:e.regularTextColor},declineButton:{height:26,paddingLeft:8,paddingRight:8,color:e.regularTextColor}})),[]);return(0,K.jsx)("div",{style:h.container,children:a?e.useInboxRedesign?(0,K.jsx)("div",{style:h.redesignedContainer,children:"approved"===n?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestApprovedWithTime.title",values:{grantedBy:l,resolvedTime:(0,R.Yx)(Math.min(d??0,Date.now()),"medium_with_time",(0,w.E2)(r))}}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveTeamMembershipActivityButton.requestDeniedWithTime.title",values:{grantedBy:l,resolvedTime:(0,R.Yx)(Math.min(d??0,Date.now()),"medium_with_time",(0,w.E2)(r))}})}):(0,K.jsxs)("div",{children:[(0,K.jsx)(B.Z,{isSecondaryColor:!0,children:"approved"===n?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"approveTeamMembershipActivityButton.requestApproved.title",values:{grantedBy:l}}):o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Denied by {grantedBy}",id:"approveTeamMembershipActivityButton.requestDenied.title",values:{grantedBy:l}}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Declined by {grantedBy}",id:"approveTeamMembershipActivityButton.requestDeclined.title",values:{grantedBy:l}})}),(0,K.jsx)(B.Z,{isSmall:!0,isSecondaryColor:!0,children:(0,R.Yx)(Math.min(d??0,Date.now()),"medium_with_time",(0,w.E2)(r))})]}):(0,K.jsxs)("div",{children:[(0,K.jsx)(k.Z,{style:h.approveButton,onClick:()=>c("approved"),children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approve",id:"approveTeamMembershipActivityButton.approveButton.label"})}),(0,K.jsx)(k.Z,{style:o?h.approveButton:h.declineButton,onClick:()=>c("rejected"),children:e.useInboxRedesign?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Deny",id:"approveTeamMembershipActivityButton.denyButton.label"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Decline",id:"approveTeamMembershipActivityButton.declineButton.label"})})]})})};var T=i(66897),F=i(77420),O=i(53965),P=i(91536),L=i(91376),Z=i(64404),D=i(61519);const z=function(e){let{accessRequestStore:t,onApprove:i,onReject:o,spaceStore:s,useInboxRedesign:r}=e;const a=(0,m.Fg)(),n=(0,u.O7)(),d=(0,g.VK)((()=>t.isDefined()),[t]),l=(0,g.VK)((()=>t.getModel()),[t]),c=(0,g.VK)((()=>s.canAdmin()),[s]),h=(0,g.VK)((()=>s.canEditMembership()),[s]),p=(0,g.VK)((()=>null==l?void 0:l.isResolved()),[l]),v=(0,g.VK)((()=>null==l?void 0:l.isGuestInviteRequest()),[l]),f=(0,g.VK)((()=>null==l?void 0:l.isSpaceMembershipRequest()),[l]);return d?p?(0,K.jsx)(N,{accessRequestStore:t,spaceStore:s,useInboxRedesign:r}):v&&!c||f&&!h?null:(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",...r&&{gap:10}},children:[(0,K.jsx)(k.Z,{onClick:i,style:U(r,a),children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approve",id:"approveSpaceMembershipActivityAction.approveButton.label"})}),(0,K.jsx)(k.Z,{onClick:o,style:{height:r?28:26,paddingLeft:8,paddingRight:8},children:r?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Deny",id:"approveSpaceMembershipActivityAction.denyButton.label"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Decline",id:"approveSpaceMembershipActivityAction.declineButton.label"})}),!n.device.isMobile&&(0,K.jsxs)(K.Fragment,{children:[!r&&(0,K.jsx)(D.Z,{size:1,vertical:!0,style:{height:26,paddingLeft:8,paddingRight:8}}),(0,K.jsx)(k.Z,{onClick:()=>{P.E5(n,{disable_membership_requests:s.getDisableMembershipRequests()}),L.r$({currentTab:"members",subtab:Z.Q.Requests})},style:{height:26,paddingLeft:8,paddingRight:8},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"View all requests",id:"approveSpaceMembershipActivityAction.viewAllRequests.label"})})]})]}):null};function U(e,t){return{height:e?28:26,paddingLeft:8,paddingRight:8,boxShadow:t.plainButtonBoxShadow,fontSize:12,...!e&&{marginRight:10},color:t.regularTextColor,fontWeight:500}}function q(e,t,i){if(e===y.KJ){const o=i.getRecordValue({table:e,id:t});if(o)return(0,T.dp)(o)}if(e===F.cZ){const o=i.getRecordValue({table:e,id:t});if(o)return(0,T.D$)(o)}}function E(e){let{pointer:t,accessRequestStore:i,useInboxRedesign:o}=e;const s=(0,u.O7)(),{table:r,id:a}=t,n=(0,g.VK)((()=>O.oA([q(r,a,i)])),[r,a,i]),d=(0,g.VK)((()=>(0,c.XW)(n,{...(0,C.h_)({environment:s,useInboxRedesign:o})})),[s,n,o]);return(0,K.jsx)(K.Fragment,{children:d})}function N(e){let{accessRequestStore:t,spaceStore:i,useInboxRedesign:o}=e;const s=(0,x.useIntl)(),r=(0,m.Fg)(),a=(0,g.VK)((()=>t.getModel()),[t]),n=(0,g.VK)((()=>t.getStatus()),[t]),d=(0,g.VK)((()=>t.getResolvedTime()),[t]),{isResolved:l,resolveByPointer:c}=(0,g.VK)((()=>({isResolved:(null==a?void 0:a.isResolved())??!1,resolveByPointer:null==a?void 0:a.getResolvedByPointer(i.id)})),[a,i.id]);if(!a)return null;const u=l&&c&&(0,K.jsx)(E,{accessRequestStore:t,useInboxRedesign:o,pointer:c});return o?(0,K.jsx)("div",{style:{fontSize:14,color:r.mediumTextColor},children:"approved"===n?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approved by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestApprovedWithTime.title",values:{grantedBy:u,resolvedTime:(0,R.Yx)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,w.E2)(s))}}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Denied by {grantedBy} on {resolvedTime}",id:"approveSpaceMembershipActivityAction.requestDenied.title",values:{grantedBy:u,resolvedTime:(0,R.Yx)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,w.E2)(s))}})}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(B.Z,{isSecondaryColor:!0,children:"approved"===n?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"approveSpaceMembershipActivityAction.requestApproved.title",values:{grantedBy:u}}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Declined by {grantedBy}",id:"approveSpaceMembershipActivityAction.requestDeclined.title",values:{grantedBy:u}})}),(0,K.jsx)(B.Z,{isSmall:!0,isSecondaryColor:!0,children:(0,R.Yx)(Math.min(d??1/0,Date.now()),"medium_with_time",(0,w.E2)(s))})]})}var H=i(49085),W=i(72141),G=i(54368),Y=i(19719),J=i(17659),X=i(13659),$=i(9953),Q=i(13447),ee=i(46654),te=i(17311),ie=i(88893),oe=i(88280),se=i(7567);const re=H.default.createClass(void 0);const ae=function(e){let{accessRequestStore:t,useInboxRedesign:i,targetBlockStore:o,notification:s,initialRole:r}=e;const a=(0,g.qz)(void 0,re),n=(0,g.VK)((()=>t.getValue()),[t]),d=(0,g.VK)((()=>o.canAdmin()),[o]);return n?(0,p.Kc)(n)?(0,K.jsx)(be,{accessRequestStore:t,useInboxRedesign:i,accessRequestValue:n}):d?(0,K.jsx)(fe,{accessRequestStore:t,notification:s,targetBlockStore:o,useInboxRedesign:i,initialRole:r,roleStore:a,accessRequestValue:n}):null:null};function ne(){const e=(0,m.yK)((e=>({banner:{borderRadius:te.Z.borderRadius,padding:"5px 8px",background:e.accentColors.yellow[50],marginBottom:12,fontSize:S.Z.fontSize.UISmall.desktop,lineHeight:S.Z.lineHeight.UISmall.desktop,fontWeight:S.Z.fontWeight.regular,color:e.accentColors.yellow[500]}})),[]);return(0,K.jsx)("div",{style:e.banner,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Make sure you trust this external user before sharing any content",id:"grantPageAccessActivityAction.externalWarning"})})}function de(e,t){const i=e.getValue();if(!i)return;const o=t.getPermissionItems();for(const s of o){if(i.for_actor_table===y.KJ&&(0,W.jg)(s)&&s.user_id===i.for_actor_id)return s;if(i.for_actor_table===F.cZ&&(0,W.FB)(s)&&s.bot_id===i.for_actor_id)return s}}function le(e){return{tab:Y.Jn(),activityId:null==e?void 0:e.activity_id,notificationId:null==e?void 0:e.id}}function ce(e,t){const i={height:26,paddingLeft:8,paddingRight:8,boxShadow:t.plainButtonBoxShadow,fontSize:12,marginRight:10};return e?i:{...i,color:t.regularTextColor,fontWeight:500}}function ue(e){let{notification:t,accessRequestStore:i,useInboxRedesign:o}=e;const s=(0,u.O7)();return t?t.visited?null:(0,K.jsx)(k.Z,{onClick:()=>function(e,t,i){if(!i)return;Q.createAndCommit({userAction:"GrantPageAccessActivityAction.handleArchive",environment:t,perform:t=>{J.aZ({notification:i,rootStore:e,transaction:t})}});const o=e.id,s=le(i);P.cO(t,{...s,requestId:o})}(i,s,t),style:{height:26,paddingLeft:8,paddingRight:8},children:o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Deny",id:"grantPageAccessActivityAction.ignoreButton.label.deny"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Ignore",id:"grantPageAccessActivityAction.ignoreButton.label"})}):null}function ge(e,t,i,o){const s=de(e,t),r=s&&s.role;return o.state||r||i}function me(e,t,i,o){const s=function(e,t,i,o){const s=e.getValue();if(s)return s.for_actor_table===y.KJ?{type:"user_permission",user_id:s.for_actor_id,role:ge(e,t,i,o)}:s.for_actor_table===F.cZ?{type:"bot_permission",bot_id:s.for_actor_id,role:ge(e,t,i,o)}:void(s.for_actor_table!==G.y0&&(0,d.t1)(s.for_actor_table))}(e,t,i,o);if(!s)return{};if(de(e,t))return{permissionItem:s};const r=oe.subscriptionDataStoreInstance.state;if("user_permission"===s.type){const t=e.getRecordValue({table:y.KJ,id:s.user_id}),i=r?ie.CM(r):[],o=i&&i.some((e=>e.userId===s.user_id));return t&&!o?{type:"existingUser",value:t,permissionItem:s}:{permissionItem:s}}if("bot_permission"===s.type){const t=e.getRecordValue({table:F.cZ,id:s.bot_id}),i=(r?ie.NM(r):[]).some((e=>e.botId===s.bot_id));return t&&!i?{type:"bot",value:t,permissionItem:s}:{permissionItem:s}}(0,d.t1)(s)}function he(e,t,i){if(e===y.KJ){const o=i.getRecordValue({table:e,id:t});if(o)return(0,T.dp)(o)}if(e===F.cZ){const o=i.getRecordValue({table:e,id:t});if(o)return(0,T.D$)(o)}}async function pe(e,t,i,o,s,r,a){if(i.getKeyStore("for_actor_table").getValue()!==y.KJ)return;const n=i.getKeyStore("for_actor_id").getValue(),l=(0,ee.Dt)({userId:n,store:t}).role,c=me(i,t,o,s);if(!("permissionItem"in c))return;a&&(c.permissionItem.role=a);const u=e.currentUser.id;if(!u)return;if("type"in c&&!a){let i;if("existingUser"===c.type){i=(await X.n_({environment:e,store:t,inviteTargets:[c],inviteRole:c.permissionItem.role,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else if("bot"===c.type){i=(await X.n_({environment:e,store:t,inviteTargets:[c],inviteRole:void 0,isOnboarding:!1,invite:{inviteOrigin:"page_request_access"}})).success}else(0,d.t1)(c);if(!i)return}Q.createAndCommit({userAction:"GrantPageAccessActivityAction.handleGrantPageAccess",environment:e,perform:o=>{"type"in c||X.ep({environment:e,transaction:o,store:t,permissionItems:[c.permissionItem]}),$.sW({store:i,transaction:o,data:{granted_time:Date.now(),granted_by_table:y.KJ,granted_by_id:u,resolved_time:Date.now(),resolved_by_table:y.KJ,resolved_by_id:u,status:"approved"}})}});const g=i.isDefined(),m=i.getKeyStore("id").getValue(),h=i.getKeyStore("created_time").getValue(),p=i.getKeyStore("resolved_time").getValue(),v=g&&h&&p?p-h:void 0;P.nC(e,{requestId:m,timeElapsedSinceRequest:v,newAccessLevel:c.permissionItem.role,prevAccessLevel:l,...le(r)})}function ve(e){let{table:t,id:i,accessRequestStore:o,useInboxRedesign:s}=e;const r=(0,u.O7)(),a=(0,g.VK)((()=>{const e=O.oA([he(t,i,o)]);return(0,c.XW)(e,{...(0,C.h_)({environment:r,useInboxRedesign:s})})}),[t,i,o,r,s]);return(0,K.jsx)(K.Fragment,{children:a})}function fe(e){let{accessRequestValue:t,accessRequestStore:i,notification:s,targetBlockStore:r,useInboxRedesign:a,initialRole:n,roleStore:d}=e;const l=(0,m.Fg)(),c=(0,u.O7)(),h=(0,o.useCallback)((e=>function(e,t,i,o,s){const r=i.id,a=o.state;o.setState(e),P.If(t,{requestId:r,previousAccessLevel:a,newAccessLevel:e,...le(s)})}(e,c,i,d,s)),[c,i,d,s]),b=t.parent_table===f.bx,S=(0,g.VK)((()=>de(i,r)),[i,r]),M=(0,g.VK)((()=>ge(i,r,n,d)),[i,r,n,d]),A=(0,p.b5)(t),C=(0,g.VK)((()=>(0,j.B)(t)),[t]),I=(0,g.VK)((()=>r.getType()),[r]);if(S&&!b){const e=(0,K.jsx)(ve,{accessRequestStore:i,useInboxRedesign:a,table:t.for_actor_table,id:t.for_actor_id}),o=S.role===M;if(!A||A&&(0,W.J5)(S.role))return(0,K.jsxs)(K.Fragment,{children:[A?(0,K.jsx)(B.Z,{isSecondaryColor:!0,style:{marginBottom:6},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{requestingUser} already has edit access.",id:"grantPageAccessActivityAction.alreadyHasEditAccess.label",values:{requestingUser:e}})}):(0,K.jsx)(B.Z,{isSecondaryColor:!0,style:{marginBottom:6},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{requestingUser} already has access.",id:"grantPageAccessActivityAction.alreadyHasAccess.label",values:{requestingUser:e}})}),(0,K.jsx)(se.ZP,{upgradeButtonName:"user_permission_item",role:M,table:v.iU,blockType:I,type:t.for_actor_table===y.KJ?"user_permission":"bot_permission",onChange:h,isInvite:!0,buttonStyle:ce(!0,l)}),(0,K.jsx)(k.Z,{onClick:()=>pe(c,r,i,n,d,s),style:ce(o,l),children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Change",id:"grantPageAccessActivityAction.changePermissionButton.label"})}),(0,K.jsx)(ue,{notification:s,accessRequestStore:i,useInboxRedesign:a})]})}return(0,K.jsxs)(K.Fragment,{children:[C&&(0,K.jsx)(ne,{}),!A&&(0,K.jsx)(se.ZP,{upgradeButtonName:"user_permission_item",role:M,table:v.iU,blockType:I,type:t.for_actor_table===y.KJ?"user_permission":"bot_permission",onChange:h,isInvite:!0,buttonStyle:ce(!1,l)}),A?(0,K.jsx)(k.Z,{onClick:()=>pe(c,r,i,n,d,s,"read_and_write"),style:ce(!1,l),children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantEditAccessButton.label.approve"})}):(0,K.jsx)(k.Z,{onClick:()=>pe(c,r,i,n,d,s),style:ce(!1,l),children:a?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approve",id:"grantPageAccessActivityAction.grantAccessButton.label.approve"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Grant access",id:"grantPageAccessActivityAction.grantAccessButton.label"})}),(0,K.jsx)(ue,{notification:s,accessRequestStore:i,useInboxRedesign:a})]})}function be(e){let{accessRequestValue:t,accessRequestStore:i,useInboxRedesign:o}=e;const s=(0,x.useIntl)(),r=(0,m.Fg)(),a=(0,K.jsx)(ve,{accessRequestStore:i,useInboxRedesign:o,table:t.granted_by_table,id:t.granted_by_id}),n=(0,R.Yx)(Math.min(t.granted_time,Date.now()),"medium_with_time",(0,w.E2)(s));return o?(0,K.jsx)("div",{style:{fontSize:14,color:r.mediumTextColor},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approved by {grantedBy} on {time}",id:"grantPageAccessActivityAction.accessGrantedWithTime.title",values:{grantedBy:a,time:n}})}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(B.Z,{isSecondaryColor:!0,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Approved by {grantedBy}",id:"grantPageAccessActivityAction.accessGranted.title",values:{grantedBy:a,time:n}})}),(0,K.jsx)(B.Z,{isSmall:!0,isSecondaryColor:!0,children:n})]})}var ye=i(74970),xe=i(17022),Se=i(12472),Me=i(22649),je=i(78976),Ae=i(99376),Ce=i(37444);function Ie(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{notification:n,tab:d,source:l}=o,h=(0,u.O7)(),f=(0,u.Fy)(),b=(0,g.VK)((()=>t.getEdits()),[t]),y=b[0],S=f.isMobile,M=(0,m.yK)((()=>({message:{paddingLeft:a?void 0:(0,Me.c3)({source:l,isMobile:S}),paddingRight:a?0:16,marginTop:a?0:8,marginBottom:8},messageLabel:{whiteSpace:"pre-wrap"},titleStyle:{fontSize:14,display:"flex"}})),[l,S,a]),A=(0,g.VK)((()=>I.oK.createChildStore(i,{table:p.J8,id:t.access_request_id})),[t,i]),R=(0,g.VK)((()=>A.getModel()),[A]),w=(0,g.VK)((()=>Boolean(R&&(0,j.B)(R))),[R]),k=R&&(0,K.jsx)(Re,{activity:t,accessRequest:R,rootStore:i,tabArgs:o,useInboxRedesign:a}),_=y.message,V=(0,g.VK)((()=>(0,c.P6)({edits:b,rootStore:i})),[b,i]),T=(0,g.VK)((()=>(0,c.XW)(V,{...(0,C.h_)({environment:h,useInboxRedesign:a})})),[V,a,h]),F=(0,g.VK)((()=>parseInt(t.end_time)),[t]),O=(0,g.VK)((()=>{if(null!=R&&R.isGuestInviteRequest()){const e=R.getAttributes().permission_records_and_roles[0],s=e&&I.G.createChildStore(i,{table:v.iU,id:e.id}),r=e.role;if(a&&s.isDefined())return;return(0,K.jsx)(je.Z,{titledRecordStore:s,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:r,shouldRenderEmpty:!0})}}),[o,R,t,i,a]);return k?a?(0,K.jsxs)(Ce.ZP,{timestamp:F,header:(0,K.jsx)("span",{children:k}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:n,icon:(0,K.jsx)(ye.BE,{authors:V,size:Ce.IX,style:{marginTop:0,marginRight:0},iconStyle:{right:-3},showAvatarShadow:!1,showWarningIcon:w}),showSnapshotButton:!1,url:void 0,...(0,xe.JJ)({notification:n,activity:t,environment:h,tab:d}),children:[_&&(0,K.jsx)("div",{style:M.message,children:(0,K.jsx)(B.Z,{isMultiline:!0,style:M.messageLabel,children:_})}),O&&(0,K.jsx)("div",{style:M.titleStyle,children:O}),(0,K.jsx)(Ke,{activity:t,accessRequestStore:A,rootStore:i,source:l,notification:n,useInboxRedesign:!0})]}):(0,K.jsxs)(Ae.Z,{timestamp:F,header:(0,K.jsx)("span",{children:k}),isLast:r,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:n,icon:(0,K.jsx)(ye.BE,{authors:V,size:24,showWarningIcon:w}),showSnapshotButton:!1,prominentTitleLink:O,...(0,xe.h9)({notification:n,activity:t,environment:h,tab:d}),children:[_&&(0,K.jsxs)("div",{style:M.message,children:[(0,K.jsx)(B.Z,{isSmall:!0,children:(0,K.jsx)(x.FormattedMessage,{id:"activity.accessRequested.messageLabel",defaultMessage:"Message from {author}",values:{author:T}})}),(0,K.jsx)(B.Z,{isMultiline:!0,style:M.messageLabel,children:_})]}),(0,K.jsx)(Ke,{activity:t,accessRequestStore:A,rootStore:i,source:l,notification:n,useInboxRedesign:!1}),(0,K.jsx)(Se.Z,{tabArgs:o,activity:t,isMobile:h.device.isMobile,environment:h,rootStore:i})]}):null}function Re(e){const{activity:t,accessRequest:i,rootStore:o,tabArgs:s,useInboxRedesign:r}=e,a=(0,g.VK)((()=>h(i)),[i]);switch(a){case"guest_invite_request":return(0,K.jsx)(Be,{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:r});case"space_membership_request":return(0,K.jsx)(ke,{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:r});case"team_membership_request":return(0,K.jsx)(_e,{activity:t,rootStore:o,tabArgs:s,useInboxRedesign:r});case"page_access_request":return(0,K.jsx)(we,{activity:t,tabArgs:s,rootStore:o,useInboxRedesign:r,accessRequest:i});default:(0,d.t1)(a)}}function we(e){const{activity:t,rootStore:i,tabArgs:o,useInboxRedesign:s,accessRequest:r}=e,a=(0,u.O7)(),n=(0,g.VK)((()=>t.getEdits()),[t]),d=(0,g.VK)((()=>{const e=r.getForActorPointer(i.id),t=e.table===y.KJ?I.U6.createChildStore(i,e):void 0,o=null==t?void 0:t.getModel();return null==o?void 0:o.getEmail()}),[r,i]),l=(0,g.VK)((()=>Boolean(r&&(0,j.B)(r))),[r]),m=(0,g.VK)((()=>(0,c.P6)({edits:n,rootStore:i})),[n,i]),h=(0,g.VK)((()=>l&&d?d:(0,c.XW)(m,{...(0,C.h_)({environment:a,useInboxRedesign:s})})),[l,d,m,s,a]),p=(0,g.VK)((()=>{if(t.navigable_block_id)return I.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id})}),[t,i]),f=(0,g.VK)((()=>r.isEditPageAccessRequest()),[r]);return p?f?s?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access} other {{authorOrAuthors} requested edit access}}",values:{numberOfAuthors:m.length,authorOrAuthors:h},id:"activity.editAccessRequested.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested edit access to {pageName}} other {{authorOrAuthors} requested edit access to {pageName}}}",values:{numberOfAuthors:m.length,authorOrAuthors:h,pageName:(0,K.jsx)(je.Z,{titledRecordStore:p,activity:t,tabArgs:o,getRecordModel:i.getRecordModel})},id:"activity.editAccessRequested.header"}):s?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access} other {{authorOrAuthors} requested access}}",values:{numberOfAuthors:m.length,authorOrAuthors:h},id:"activity.accessRequested.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested access to {pageName}} other {{authorOrAuthors} requested access to {pageName}}}",values:{numberOfAuthors:m.length,authorOrAuthors:h,pageName:(0,K.jsx)(je.Z,{titledRecordStore:p,activity:t,tabArgs:o,getRecordModel:i.getRecordModel})},id:"activity.accessRequested.header"}):null}function ke(e){const{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:s}=e,r=(0,u.O7)(),a=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,m.yK)((()=>({inviteePhrase:{fontWeight:S.Z.fontWeight.semibold}})),[]),d=(0,g.VK)((()=>i.getForActorPointer(o.id)),[i,o.id]),l=d.table===y.KJ?I.U6.createChildStore(o,d):void 0,h=(0,g.VK)((()=>null==l?void 0:l.getModel()),[l]),p=(0,g.VK)((()=>null==h?void 0:h.getEmail()),[h]),v=(0,g.VK)((()=>i.getForActorId()===i.getCreatedById()),[i]),f=(0,g.VK)((()=>(0,c.P6)({edits:a,rootStore:o})),[a,o]),b=(0,g.VK)((()=>(0,c.XW)(f,{...(0,C.h_)({environment:r,useInboxRedesign:s})})),[f,s,r]),M=(0,g.VK)((()=>{if(!v)return p;const e=null==h?void 0:h.getFullName(A.default.getIntl());return e?`${e} (${p})`:p}),[v,h,p]);return h&&d.table===y.KJ?v?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{invitee} requested to become a workspace member",values:{invitee:(0,K.jsx)("span",{style:n.inviteePhrase,children:M})},id:"activity.accessRequestedMembershipFromGuest.header"}):s?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested to add {invitee} as a workspace member} other {{authorOrAuthors} requested to add {invitee} as a workspace member}}",values:{numberOfAuthors:f.length,authorOrAuthors:b,invitee:(0,K.jsx)("span",{style:n.inviteePhrase,children:M})},id:"activity.accessRequestedMembership.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} requested {invitee} to become a workspace member} other {{authorOrAuthors} requested {invitee} to become a workspace member}}",values:{numberOfAuthors:f.length,authorOrAuthors:b,invitee:(0,K.jsx)("span",{style:n.inviteePhrase,children:M})},id:"activity.accessRequestedMembership.header"}):null}function Be(e){const{activity:t,accessRequest:i,rootStore:o,useInboxRedesign:s}=e,r=(0,u.O7)(),a=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,m.yK)((()=>({inviteePhrase:{fontWeight:S.Z.fontWeight.semibold}})),[]),d=(0,g.VK)((()=>i.getForActorPointer(o.id)),[i,o.id]),l=d.table===y.KJ?I.U6.createChildStore(o,d):void 0,h=(0,g.VK)((()=>null==l?void 0:l.getModel()),[l]),p=(0,g.VK)((()=>null==h?void 0:h.getEmail()),[h]),v=(0,g.VK)((()=>(0,c.P6)({edits:a,rootStore:o})),[a,o]),f=(0,g.VK)((()=>(0,c.XW)(v,{...(0,C.h_)({environment:r,useInboxRedesign:s})})),[v,s,r]);return(0,g.VK)((()=>i.isGuestInviteRequest()),[i])&&h&&d.table===y.KJ?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{requestorsPhrase} requested inviting {guestEmail} as a guest",values:{requestorsPhrase:f,guestEmail:(0,K.jsx)("span",{style:n.inviteePhrase,children:p})},id:"activity.guestInviteRequest.header.short"}):null}function _e(e){const{activity:t,rootStore:i,tabArgs:o,useInboxRedesign:s}=e,r=(0,u.O7)(),a=(0,g.VK)((()=>t.getEdits()),[t]),n=(0,g.VK)((()=>(0,c.P6)({edits:a,rootStore:i})),[a,i]),d=(0,g.VK)((()=>(0,c.XW)(n,{...(0,C.h_)({environment:r,useInboxRedesign:s})})),[n,s,r]),l=(0,g.VK)((()=>{if(t.team_id)return I.zX.createChildStore(i,{table:b.e0,id:t.team_id})}),[t,i]);return a&&l?s?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{user} requested to join {teamName}",values:{user:(0,K.jsx)("span",{style:{fontWeight:S.Z.fontWeight.semibold},children:d}),teamName:(0,K.jsx)(je.Z,{titledRecordStore:l,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{user} requested to become a member of {teamName}",values:{user:(0,K.jsx)("span",{style:{fontWeight:S.Z.fontWeight.semibold},children:d}),teamName:(0,K.jsx)(je.Z,{titledRecordStore:l,getRecordModel:i.getRecordModel,activity:t,tabArgs:o})},id:"activity.teamAccessRequest.header"}):null}function Ke(e){const{activity:t,accessRequestStore:i,rootStore:s,source:r,notification:a,useInboxRedesign:n}=e,l=(0,g.VK)((()=>t.getEdits()),[t])[0],c=(0,g.VK)((()=>i.getParentTable()),[i]),p=(0,g.VK)((()=>i.getParentId()),[i]),y=(0,g.VK)((()=>i.getModel()),[i]),x=(0,g.VK)((()=>y&&h(y)),[y]),S=(0,g.VK)((()=>{if("page_access_request"===x){var e;const t=null==y||null===(e=y.getAttributes())||void 0===e||null===(e=e.permission_records_and_roles)||void 0===e||null===(e=e.at(0))||void 0===e?void 0:e.role;if(t)return t}return"reader"}),[y,x]),M=(0,u.O7)(),j=(0,o.useCallback)((async()=>{if(x&&y)if("space_membership_request"===x)await Te("approved",M,i,s);else if("guest_invite_request"===x)await Ve("approved",M,y,s);else{if("team_membership_request"===x||"page_access_request"===x)return;(0,d.t1)(x)}}),[M,i,s,x,y]),A=(0,o.useCallback)((async()=>{if(x&&y)if("space_membership_request"===x)await Te("rejected",M,i,s);else if("guest_invite_request"===x)await Ve("rejected",M,y,s);else{if("team_membership_request"===x||"page_access_request"===x)return;(0,d.t1)(x)}}),[M,i,s,x,y]),C=M.device.isMobile,R=(0,m.yK)((e=>({actionPrimaryContainer:{paddingLeft:n?void 0:(0,Me.c3)({source:r,isMobile:C}),paddingTop:n?4:12,paddingBottom:8,paddingRight:n?0:16},actionButton:(0,Me.b9)(e)})),[r,C,n]),w=p?I.G.createChildStore(s,{table:v.iU,id:p}):void 0,k=(0,g.VK)((()=>c===v.iU&&Boolean(null==w?void 0:w.canAdmin())),[c,w]);if(!(c&&p&&x&&l))return null;if("page_access_request"===x)return k&&w?(0,K.jsx)("div",{style:R.actionPrimaryContainer,children:(0,K.jsx)(ae,{accessRequestStore:i,targetBlockStore:w,initialRole:S,buttonStyle:R.actionButton,notification:a,useInboxRedesign:n})}):null;if("space_membership_request"===x||"guest_invite_request"===x){const e=I.H2.createChildStore(s,{table:f.bx,id:p});return(0,K.jsx)("div",{style:R.actionPrimaryContainer,children:(0,K.jsx)(z,{accessRequestStore:i,spaceStore:e,initialRole:"reader",buttonStyle:R.actionButton,notification:a,useInboxRedesign:n,onApprove:j,onReject:A})})}if("team_membership_request"===x){const e=I.zX.createChildStore(s,{table:b.e0,id:p});return(0,K.jsx)("div",{style:R.actionPrimaryContainer,children:(0,K.jsx)(V,{accessRequestStore:i,teamStore:e,useInboxRedesign:n})})}(0,d.t1)(x)}async function Ve(e,t,i,o){if(!i.isGuestInviteRequest())return;const s=o.getRecordModel({id:i.getForActorId(),table:i.getForActorTable()});s&&await M.yW({environment:t,status:e,accessRequest:i,forActor:s,from:"notification"})}async function Te(e,t,i,o){if(!o.canEditMembership())return;if(!i.isDefined())return;const s=o.getRecordModel({id:i.getForActorId(),table:i.getForActorTable()});s&&s.table===y.KJ&&await M.kn({environment:t,store:o,accessRequestStore:i,forActor:s.__IM_SORRY__getValue(),status:e,from:"notification"})}const Fe=o.memo(Ie);function Oe(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{notification:n,tab:d}=o,l=(0,u.O7)(),m=(0,g.VK)((()=>t.getEdits()),[t]),h=(0,g.VK)((()=>I.oK.createChildStore(i,{table:p.J8,id:t.access_request_id})),[t,i]),f=(0,g.VK)((()=>{const e=h.getModel();return e&&e.isGuestInviteRequest()&&e.isResolved()||e&&e.isEditPageAccessRequest()&&e.isApproved()?e:void 0}),[h]),b=(0,g.VK)((()=>Boolean(null==f?void 0:f.isEditPageAccessRequest())),[f]),y=(0,g.VK)((()=>{var e;if(!f)return;return null===(e=f.getAttributes().permission_records_and_roles[0])||void 0===e?void 0:e.role}),[f]),x=(0,g.VK)((()=>(0,c.P6)({edits:m,rootStore:i})),[m,i]),S=(0,g.VK)((()=>{if(t.navigable_block_id)return I.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id})}),[t,i]),M=f&&(0,K.jsx)(Pe,{activity:t,accessRequest:f,rootStore:i,useInboxRedesign:a,isEditAccessRequest:b}),j=S&&(0,K.jsx)(je.Z,{titledRecordStore:S,activity:t,tabArgs:o,getRecordModel:i.getRecordModel,permissionRole:y,shouldRenderEmpty:!0}),A=(0,g.VK)((()=>parseInt(t.end_time)),[t]);return M&&S?a?(0,K.jsx)(Ce.ZP,{timestamp:A,header:(0,K.jsx)("span",{children:M}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:n,icon:(0,K.jsx)(ye.BE,{authors:x,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,xe.JJ)({notification:n,activity:t,environment:l,tab:d})}):(0,K.jsx)(Ae.Z,{timestamp:A,header:(0,K.jsx)("span",{children:M}),isLast:r,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:n,icon:(0,K.jsx)(ye.BE,{authors:x,size:24}),showSnapshotButton:!1,prominentTitleLink:j,...(0,xe.h9)({notification:n,activity:t,environment:l,tab:d}),children:(0,K.jsx)(Se.Z,{tabArgs:o,activity:t,isMobile:l.device.isMobile,environment:l,rootStore:i})}):null}function Pe(e){const{accessRequest:t,rootStore:i,useInboxRedesign:o,isEditAccessRequest:s}=e,r=(0,m.yK)((()=>({inviteePhrase:{fontWeight:S.Z.fontWeight.semibold}})),[]),a=(0,g.VK)((()=>i.getRecordModel({id:t.getForActorId(),table:t.getForActorTable()})),[t,i]),n=(0,g.VK)((()=>null==a?void 0:a.getEmail()),[a]),l=(0,g.VK)((()=>{const e=(null==a?void 0:a.isUser())&&(null==a?void 0:a.getFullName(A.default.getIntl()));return e?`${e} (${n})`:n}),[a,n]),u=(0,g.VK)((()=>i.getRecordModel({id:t.getResolvedById(),table:t.getResolvedByTable()})),[t,i]),h=(0,g.VK)((()=>u&&(0,c.XW)([u])),[u]),p=(0,g.VK)((()=>t.getStatus()),[t]);return h&&l?s?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{resolverPhrase} approved your request to edit the page",values:{resolverPhrase:h},id:"activity.EditAccessRequestResolvedMembership.approved.header.short"}):"approved"===p?o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{resolverPhrase} approved your request to invite {invitee} as a guest",values:{resolverPhrase:h,invitee:(0,K.jsx)("span",{style:r.inviteePhrase,children:l})},id:"activity.AccessRequestResolvedMembership.approved.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{resolverName} approved your request to invite {invitee} as a guest",values:{resolverName:h,invitee:(0,K.jsx)("span",{style:r.inviteePhrase,children:l})},id:"activity.AccessRequestResolvedMembership.approved.header.long"}):"rejected"===p?o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{resolverPhrase} denied your request to invite {invitee} as a guest",values:{resolverPhrase:h,invitee:(0,K.jsx)("span",{style:r.inviteePhrase,children:l})},id:"activity.AccessRequestResolvedMembership.rejected.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{resolverName} rejected your request to invite {invitee} as a guest",values:{resolverName:h,invitee:(0,K.jsx)("span",{style:r.inviteePhrase,children:l})},id:"activity.AccessRequestResolvedMembership.rejected.header.long"}):void(0,d.t1)(p):null}const Le=o.memo(Oe);var Ze=i(15145),De=i(41432),ze=i(89101),Ue=i(99108),qe=i(84076),Ee=i(63381),Ne=i(13658);function He(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{tab:n,notification:d,source:l}=o,m=(0,g.VK)((()=>(0,Ue.hI)(t.getEdits())),[t]),h=m.length>0,p=(0,g.VK)((()=>I.G.createChildStore(i,{table:v.iU,id:m[0].navigable_block_id})),[i,m]),f=(0,g.VK)((()=>{const e=p.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ze.tY.Notification})}),[p,i]),b=(0,g.VK)((()=>(0,c.P6)({edits:m,rootStore:i})),[m,i]),y=(0,u.O7)(),S=(0,g.VK)((()=>(0,c.XW)(b,{...(0,C.h_)({environment:y,useInboxRedesign:a})})),[b,a,y]),M=(0,g.VK)((()=>(0,c.jC)({recordId:p.id,recordType:"block",tab:n,rootStore:i,environment:y})),[p,n,i,y]),j=(0,g.VK)((()=>p.isDefined()),[p]),A=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!j||!h)return null;const R=(0,K.jsx)(je.Z,{titledRecordStore:p,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),w="pageUpdatesSidebar"===n,k=new Set;return m.forEach((e=>{Object.keys(e.property_updates).forEach((e=>{k.add(e)}))})),a?(0,K.jsx)(Ce.ZP,{timestamp:A,header:k.size>1?(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated properties} other {{authorOrAuthors} updated properties}}",id:"activity.blockEdited.standardizedHeader.multiple",values:{numberOfAuthors:b.length,authorOrAuthors:S}})}):(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated a property} other {{authorOrAuthors} updated a property}}",id:"activity.blockEdited.standardizedHeader.single",values:{numberOfAuthors:b.length,authorOrAuthors:S}})}),isFirst:s,isLast:r,isPrivate:M,rootStore:i,navigableBlockId:p.id,notification:d,icon:(0,K.jsx)(ye.BE,{authors:b,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:w,url:f,...(0,xe.JJ)({notification:d,activity:t,environment:y,tab:n}),children:(0,K.jsx)(Ne.Z,{visible:5,items:m.map(((e,t)=>(0,K.jsx)(Ee.Z,{edit:e,rootStore:i},t)))})}):(0,K.jsxs)(Ae.Z,{timestamp:A,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} updated {pageTitle}} other {{authorOrAuthors} updated {pageTitle}}}",id:"activity.blockEdited.standardizedHeader",values:{numberOfAuthors:b.length,authorOrAuthors:S,pageTitle:R}})}),isLast:r,isPrivate:M,rootStore:i,navigableBlockId:p.id,notification:d,icon:(0,K.jsx)(ye.BE,{authors:b,size:24}),showSnapshotButton:w,showRecordPath:!0,...(0,xe.h9)({notification:d,activity:t,environment:y,tab:n}),children:[(0,K.jsx)(Ne.Z,{visible:5,items:m.map(((e,s)=>(0,K.jsx)(We,{edit:e,rootStore:i,onClick:()=>(0,xe.dG)({environment:y,activity:t,...o}),source:l,isMobile:y.device.isMobile},s)))}),(0,K.jsx)(Se.Z,{tabArgs:o,activity:t,isMobile:y.device.isMobile,environment:y,rootStore:i})]})}function We(e){const{rootStore:t,edit:i,onClick:o,source:s,isMobile:r}=e,a=(0,g.VK)((()=>function(e,t){const i=t.getRecordModel({table:v.iU,id:e.block_id}),o=(null==i?void 0:i.getType())===De.Ti.tableRow?t.getRecordModel({table:v.iU,id:i.getParentId()}):i;return null==o?void 0:o.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:Ze.tY.Notification})}(i,t)||ze._j.root),[i,t]);return(0,K.jsx)(qe.Z,{href:a,onClick:o,innerStyle:(0,Me.OD)({source:s,isMobile:r}),children:(0,K.jsx)(Ee.Z,{edit:i,rootStore:t})})}var Ge=i(24636),Ye=i(92996),Je=i(41219),Xe=i(38585),$e=i(31701),Qe=i(33767),et=i(60682),tt=i(14976),it=i(65598),ot=i(75024),st=i(80444),rt=i(45325),at=i(2456),nt=i(64921),dt=i(31278),lt=i(76798);function ct(e){const{activity:t,isFirst:i,isLast:s,tabArgs:r,rootStore:a}=e,{source:l,tab:h,notification:p}=r,f=(0,g.VK)((()=>t.getEdits()),[t]);let b=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===b.length&&0!==f.length&&"updates_sidebar"!==l&&(b=f);const y=b.length>0,S=(0,u.O7)(),M=(0,g.VK)((()=>a.getRecordStore(a,{table:n.qF,id:t.discussion_id,spaceId:t.space_id})),[a,t]),j=(0,g.VK)((()=>M.isDefined()),[M]),A=(0,g.VK)((()=>{const e=M.getParentPointer();if(e)return I.G.createChildStore(a,e)}),[M,a]),R=(0,g.VK)((()=>Boolean(A&&A.isDefined())),[A]),w=(0,g.VK)((()=>{const e=null==A?void 0:A.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,A]),k=I.G.createChildStore(a,{table:v.iU,id:w}),B=(0,g.VK)((()=>k.isDefined()),[k]),_=(0,g.VK)((()=>{if(!A)return;const e=A.getModel();return e?e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ze.tY.Notification}):void 0}),[A,a,t]),V=(0,g.VK)((()=>(0,Ge.Kg)({source:l,forReplyMenu:!1})),[l]),T=(0,g.VK)((()=>(0,c.cr)({activity:t,rootStore:a})),[t,a]),F=(0,g.VK)((()=>t.getDiscussionId()),[t]),P=xt(M),L=(0,g.VK)((()=>{var e;const t=null===(e=st.default.state.currentUserStore)||void 0===e?void 0:e.id,i=P.map((e=>e.getCreatedByPointer())).filter(d.$K).map((e=>I.t1.createChildStore(M,e).getModel())).filter(d.$K).filter((e=>e.id!==t));return(0,O.mN)(i,(e=>e.id))}),[P,M]),Z=(0,g.VK)((()=>(0,c.XW)(L,{...(0,C.h_)({environment:S,useInboxRedesign:!0})})),[L,S]),D=(0,g.VK)((()=>(0,c.jC)({recordId:w,recordType:v.iU,tab:h,rootStore:a,environment:S})),[w,h,a,S]),z=null==T?void 0:T.context,U=(0,g.VK)((()=>{const e=k.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[k]),q=(0,g.VK)((()=>parseInt(t.end_time)),[t]),E=!(0,g.VK)((()=>1===P.length),[P]),N=(0,o.useCallback)((()=>{(0,xe.BE)({...r,environment:S,activity:t})}),[r,S,t]),H=(0,m.yK)((e=>({flex:{display:"flex"},discussionThreadContainer:{display:"flex",flexDirection:"column",marginTop:mt},commentContextContainer:{marginTop:2},commentContextText:{color:e.regularTextColor}})),[]);if(!(y&&B&&R&&j))return null;const W=z?E?(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.title",defaultMessage:"New comments on a thread"}):(0,K.jsx)(bt,{authorPhrase:Z,databaseType:U}):E?(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadPageLevel.title",defaultMessage:"New page comments"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented on the page",values:{author:Z},id:"activity.commentActivity.standardizedGroupedHeaderPageLevel.single"});return(0,K.jsxs)(Ce.ZP,{timestamp:q,header:W,isFirst:i,isLast:s,isPrivate:D,rootStore:a,prominentTitleLink:void 0,navigableBlockId:w,notification:p,icon:E?(0,K.jsx)(yt,{}):(0,K.jsx)(ye.BE,{authors:L,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:_,...(0,xe.JJ)({notification:p,environment:S,tab:h,activity:t}),children:[z&&(0,K.jsx)("div",{style:H.commentContextContainer,children:(0,K.jsx)(ft,{navigableBlockStore:k,discussionId:F,discussionContext:z,rootStore:a})}),(0,K.jsx)("div",{style:H.discussionThreadContainer,children:F&&(0,K.jsx)(gt,{rootStore:a,discussionId:F,discussionLocation:V,onReactionClick:N})})]})}const ut=2;function gt(e){const{rootStore:t,discussionId:i,discussionLocation:s,onReactionClick:r}=e,a=(0,u.O7)(),[d,l]=(0,o.useState)(!1),c=(0,g.VK)((()=>I.t1.createChildStore(t,{table:n.qF,id:i,spaceId:t.id})),[t,i]),h=xt(c),p=(0,o.useCallback)((e=>{l(!d),Y.EH(a,{expand:!d,comments_count:h.length,discussion_id:i}),e.stopPropagation(),e.preventDefault()}),[d,h.length,i,a]),v=h.length-ut,f=v>0,b=1===h.length,y=(0,m.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:mt},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButtonBase:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:3,paddingTop:4,paddingBotton:4,fontSize:12,color:e.lightTextColor},expandButtonHovered:{color:e.regularTextColor,background:void 0},expandButtonPressed:{color:e.regularTextColor,background:void 0},divider:{width:20,flexGrow:2,color:e.stroke.deemphasized}})),[]);if(b){const e=h[0];return(0,K.jsx)("div",{style:y.discussion,children:(0,K.jsx)(ht,{commentStore:e,discussionStore:c,discussionLocation:s,onReactionClick:r,useCommentView:!0},e.id)})}return(0,K.jsx)("div",{style:y.discussion,children:d?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(nt.Z,{style:y.expandButtonBase,hoveredStyle:y.expandButtonHovered,pressedStyle:y.expandButtonPressed,onClick:p,children:[(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"Hide {previousRepliesCount} {previousRepliesCount, plural, one {previous} other {previous}}",values:{previousRepliesCount:v}}),(0,K.jsx)(D.Z,{size:1,style:y.divider,dividerColor:y.divider.color})]}),h.map((e=>(0,K.jsx)(ht,{commentStore:e,discussionStore:c,discussionLocation:s,onReactionClick:r,useCommentView:!1},e.id)))]}):(0,K.jsxs)(K.Fragment,{children:[f&&(0,K.jsxs)(nt.Z,{style:y.expandButtonBase,hoveredStyle:y.expandButtonHovered,pressedStyle:y.expandButtonPressed,onClick:p,children:[(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThread.showPreviousRepliesCount",defaultMessage:"Show {previousRepliesCount} {previousRepliesCount, plural, one {previous} other {previous}}",values:{previousRepliesCount:v}}),(0,K.jsx)(D.Z,{size:1,style:y.divider})]}),h.slice(-2).map((e=>(0,K.jsx)(ht,{commentStore:e,discussionStore:c,discussionLocation:s,onReactionClick:r,useCommentView:!1},e.id)))]})})}const mt=4;function ht(e){const{commentStore:t,discussionStore:i,discussionLocation:s,onReactionClick:r,useCommentView:a}=e,n=(0,u.Fy)(),l=(0,x.useIntl)(),[c,h]=(0,o.useState)(!1),p=(0,g.VK)((()=>{const e=t.getCreatedByPointer();if(e)return I.t1.createChildStore(t,e)}),[t]),f=(0,g.VK)((()=>p?p.getDisplayName(l):(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[p,l]),b=(0,g.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=I.t1.createChildStore(t,{table:v.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,K.jsx)(at.ZP,{blockValue:i,rootStore:t},e)})).filter(d.$K)}),[t]),y=(0,g.VK)((()=>I.bh.getUserVisibleReactions(t).length>0),[t]),M=(0,g.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),j=!y&&n.isMobile,A=c||y,C=(0,o.useCallback)((e=>{n.isMobile?e.preventDefault():h(!0)}),[n.isMobile]),R=(0,o.useCallback)((e=>{n.isMobile?e.preventDefault():h(!1)}),[n.isMobile]),w=(0,m.yK)((e=>({avatarCommentReactionBarContainer:{...!y&&!n.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",gap:mt},commentContainer:{display:"flex",justifyContent:"space-between",gap:6,overflow:"hidden",flexGrow:1},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:2,verticalAlign:"top",textAlign:"left",lineHeight:S.Z.lineHeight.UIRegular.desktop,...S.Z.textOverflowStyle,color:e.accentColors.gray[500]},fullName:{fontWeight:S.Z.fontWeight.medium,fontSize:13,lineHeight:S.Z.lineHeight.UIRegular.desktop,marginRight:8,color:e.regularTextColor},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:{...(!y||a)&&{}},reactionBar:{...!y&&{position:"absolute",top:-8,right:0}}})),[n,a,y]);return(0,K.jsx)("div",{children:(0,K.jsxs)("div",{style:w.avatarCommentReactionBarContainer,onMouseEnter:C,onMouseLeave:R,children:[(0,K.jsx)("div",{style:w.avatarAndCommentContainer,children:(0,K.jsxs)("div",{style:w.commentContainer,children:[(0,K.jsxs)("span",{style:w.commentClampContainer,children:[!a&&(0,K.jsx)("span",{style:w.fullName,children:f}),(0,K.jsx)(vt,{discussionStore:i,commentStore:t}),b,M&&(0,K.jsx)("span",{style:w.editedBadge,children:(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),j&&(0,K.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},style:n.isMobile?w.reactionBarMobile:w.reactionBar,children:(0,K.jsx)(Qe.DU,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})}),A&&(0,K.jsx)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},style:n.isMobile?w.reactionBarMobile:w.reactionBar,children:(0,K.jsx)(Qe.DU,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})})}function pt(e){const{store:t}=e,i=(0,g.VK)((()=>t.getIcon()),[t]),o=(0,g.VK)((()=>t.isEmptyPage()),[t]),s=(0,m.yK)((()=>({container:{display:"inline-grid",gridAutoFlow:"column",gap:4,alignItems:"center"},recordTitle:{display:"inline",...S.Z.textOverflowStyle}})),[]);return(0,K.jsxs)("span",{style:s.container,children:[(0,K.jsx)(dt.Z,{icon:i,isEmptyPage:o,size:14,disabled:!0}),(0,K.jsx)(lt.Z,{store:t,style:s.recordTitle,shouldWrap:!0})]})}function vt(e){const{discussionStore:t,commentStore:i}=e,o=(0,u.O7)(),s=(0,u.Fy)(),r=(0,m.Fg)(),a=(0,g.VK)((()=>it.zP(i).getValue()),[i]),n=(0,g.VK)((()=>i.getSpaceId()),[i]),d=(0,g.VK)((()=>{if(!a||!n)return null;const e=(0,Xe.H4)({textValue:a,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,tt.IY)({environment:o,textValue:{value:e,spaceId:n},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,et.e_)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,r,a,n]),l=(0,m.yK)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:13,color:e.mediumTextColor,lineHeight:(0,ot.Dp)({device:s},"UIRegular")}})),[s]);return(0,K.jsx)("span",{style:l.commentText,children:d})}function ft(e){const{navigableBlockStore:t,discussionId:i,discussionContext:o,rootStore:s,textStyle:r}=e,a=(0,u.O7)(),n=(0,m.yK)((e=>({highlightContainer:{maxWidth:"100%",display:"flex"},highlight:{display:"inline-grid",gridAutoFlow:"column",gap:8,maxWidth:"100%",...S.Z.textOverflowStyle},text:{fontSize:13,color:e.mediumTextColor,...S.Z.textOverflowStyle,...r},highlightBlockBar:{width:2,borderRadius:1,backgroundColor:e.accentColors.yellow[200],height:22}})),[r]),d=(0,g.VK)((()=>{if(!o)return(0,K.jsx)(pt,{store:t});const e=(0,$e.gh)({theme:a.ThemeModeStore.state});return(0,tt.IY)({environment:a,textValue:o?{value:o,spaceId:s.id}:void 0,parentStore:s,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:i,theme:e,emojiType:(0,et.e_)(a),katex:a.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,s,a,o,i]);return(0,K.jsx)("div",{style:n.highlightContainer,children:(0,K.jsxs)("div",{style:n.highlight,children:[(0,K.jsx)("div",{style:n.highlightBlockBar}),(0,K.jsx)("span",{style:n.text,children:d})]})})}function bt(e){let{databaseType:t,authorPhrase:i}=e;switch(t){case Ye.iS:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented on a task",values:{author:i},id:"activity.commentTaskActivity.standardizedHeader.single"});case Ye.wW:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented on a project",values:{author:i},id:"activity.commentProjectActivity.standardizedHeader.single"});case Ye.zU:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented on a document",values:{author:i},id:"activity.commentDocActivity.standardizedHeader.single"});case Ye.GZ:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented on a wiki page",values:{author:i},id:"activity.commentWikiActivity.standardizedHeader.single"});case Ye.Fi:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented on a meeting note",values:{author:i},id:"activity.commentMeetingActivity.standardizedHeader.single"});case Ye.nG:case Ye.p$:case Ye.Be:case void 0:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{author} commented",values:{author:i},id:"activity.commentActivity.standardizedGroupedHeader.single"});default:(0,d.t1)(t)}}function yt(){const e=(0,m.yK)((e=>({icon:{marginTop:1,height:13,width:13,fill:e.icon.secondary}})),[]);return(0,K.jsx)(Ce.hn,{children:(0,Je.L)(e.icon)})}function xt(e){return(0,g.VK)((()=>{const{discussionIdToExpansionStartPointMap:t}=rt.default.state,i=e.getCommentStores().filter((e=>e.isDefined()));if(!t)return i;const o=t[e.id];if(!o)return i;const{commentId:s,timestamp:r}=o,a=s?i.findIndex((e=>e.id===s)):-1,n=r?i.findIndex((e=>e.getCreatedTime()>=r)):-1,d=a>=0?a:n;return d<0?i:i.slice(d)}),[e])}const St=o.memo(ct);var Mt=i(23867),jt=i(95306),At=i(70301),Ct=i(45653),It=i(4688);function Rt(e){const{activity:t,isFirst:i,isLast:s,tabArgs:r,rootStore:a}=e,{source:l,tab:h,notification:p}=r,f=(0,g.VK)((()=>t.getEdits()),[t]);let b=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===b.length&&0!==f.length&&"updates_sidebar"!==l&&(b=f);const y=b.length>0,x=(0,u.O7)(),S=(0,g.VK)((()=>a.getRecordStore(a,{table:n.qF,id:t.discussion_id,spaceId:t.space_id})),[a,t]),M=(0,g.VK)((()=>S.isDefined()),[S]),j=(0,g.VK)((()=>{const e=S.getParentPointer();if(e)return I.G.createChildStore(a,e)}),[S,a]),A=(0,g.VK)((()=>Boolean(j&&j.isDefined())),[j]),C=(0,g.VK)((()=>{const e=null==j?void 0:j.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,j]),R=I.G.createChildStore(a,{table:v.iU,id:C}),w=(0,g.VK)((()=>R.isDefined()),[R]),k=(0,g.VK)((()=>{if(!j)return;const e=j.getModel();return e?e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ze.tY.Notification}):void 0}),[j,a,t]),B=(0,g.VK)((()=>(0,Ge.Kg)({source:l,forReplyMenu:!1})),[l]),_=(0,g.VK)((()=>(0,c.cr)({activity:t,rootStore:a})),[t,a]),V=(0,g.VK)((()=>t.getDiscussionId()),[t]),T=(0,g.VK)((()=>(0,c.jC)({recordId:C,recordType:v.iU,tab:h,rootStore:a,environment:x})),[C,h,a,x]),F=null==_?void 0:_.context,O=(0,g.VK)((()=>{const e=a.getRecordStore(a,{table:n.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,a]),P=(0,g.VK)((()=>null==O?void 0:O.getParentId()),[O]),L=(0,g.VK)((()=>parseInt(t.end_time)),[t]),Z=(0,g.VK)((()=>(0,c.P6)({edits:b,rootStore:a})),[b,a]),D=(0,g.VK)((()=>(0,c.XW)(Z)),[Z]),z=(0,g.VK)((()=>{const e=R.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[R]),U=(0,g.VK)((()=>S.getCommentStores()),[S]),q=(0,g.VK)((()=>{const e=U[0].getCreatedByPointer();if(e&&e.table!==G.y0)return(0,c.uA)(e,a)}),[a,U]),E=(0,o.useCallback)((()=>{(0,xe.BE)({...r,environment:x,activity:t})}),[r,x,t]),N=(0,m.yK)((e=>({flex:{display:"flex"},discussionThreadContainer:{display:"flex",flexDirection:"column",marginTop:Bt},commentContextContainer:{marginTop:2},commentContextText:{color:e.regularTextColor}})),[]),H=(0,o.useCallback)((e=>{if(!P)return;const i=I.G.createChildStore(a,{table:v.iU,id:P}),o=e.target,s=null==p?void 0:p.id;jt.oK({environment:x,discussionStore:S,rect:o.getBoundingClientRect(),blockStore:i,discussionLocation:(0,Ge.Kg)({forReplyMenu:!0,source:l}),activityId:t.id,notificationId:s}),"notifications_tab"===l&&Y.gY({environment:x,notificationId:s,alreadyRead:Boolean(null==p?void 0:p.read),activity:t,tab:h})}),[t,S,x,p,P,a,l,h]);if(!(y&&w&&A&&M))return null;const W=(0,Ge.O2)({databaseType:z,authorPhrase:D,authorCount:Z.length}),J=(0,K.jsx)(K.Fragment,{children:F&&(0,K.jsx)("div",{style:N.commentContextContainer,children:(0,K.jsx)(Ot,{navigableBlockStore:R,discussionId:V,discussionContext:F,rootStore:a})})});return(0,K.jsxs)(Ce.ZP,{timestamp:L,header:W,isFirst:i,isLast:s,isPrivate:T,rootStore:a,prominentTitleLink:void 0,navigableBlockId:C,notification:p,icon:q&&(0,K.jsx)(ye.BE,{authors:[q],size:Kt,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:k,...(0,xe.JJ)({notification:p,environment:x,tab:h,activity:t}),children:[(0,K.jsx)("div",{style:N.discussionThreadContainer,children:V&&(0,K.jsx)(kt,{rootStore:a,discussionId:V,discussionLocation:B,onReactionClick:E,onMoreCommentsClick:H,discussionContextHighlight:J})}),(0,K.jsx)("div",{style:{paddingLeft:It._z+Kt+_t-It.MY},children:(0,K.jsx)(Lt,{activity:t,rootStore:a,tabArgs:r})})]})}const wt=2;function kt(e){const{rootStore:t,discussionId:i,discussionLocation:o,discussionContextHighlight:s,onMoreCommentsClick:r,onReactionClick:a}=e,d=(0,g.VK)((()=>I.t1.createChildStore(t,{table:n.qF,id:i,spaceId:t.id})),[t,i]),l=(0,g.VK)((()=>d.getCommentStores()),[d]),c=l.length-wt,u=c>0,h=1===l.length,p=(0,m.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:Bt},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButtonContainer:{paddingLeft:It._z+Kt+_t-It.MY},expandButtonBase:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:4,fontSize:14,padding:6,marginLeft:-6,color:e.lightTextColor,maxWidth:"fit-content"},divider:{width:20,flexGrow:2,color:e.stroke.deemphasized}})),[]);if(h){const e=l[0];return(0,K.jsx)("div",{style:p.discussion,children:(0,K.jsx)(Vt,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:a,useCommentView:!1,discussionContextHighlight:s,skipAuthorName:!0},e.id)})}return(0,K.jsxs)("div",{style:p.discussion,children:[l.slice(0,1).map((e=>(0,K.jsx)(Vt,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:a,useCommentView:!1,discussionContextHighlight:s,skipAuthorName:!0},e.id))),u&&(0,K.jsx)("div",{style:p.expandButtonContainer,children:(0,K.jsx)(nt.Z,{style:p.expandButtonBase,onClick:e=>{e.stopPropagation(),e.preventDefault(),r(e)},children:(0,K.jsx)(x.FormattedMessage,{id:"CommentTimeGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"{previousRepliesCount} {previousRepliesCount, plural, one {more comment} other {more comments}}",values:{previousRepliesCount:c}})})}),l.slice(-1).map((e=>(0,K.jsx)(Vt,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:a,useCommentView:!1},e.id)))]})}const Bt=4,_t=12,Kt=22;It._z;function Vt(e){const{commentStore:t,discussionStore:i,discussionLocation:s,onReactionClick:r,useCommentView:a,discussionContextHighlight:n}=e,l=(0,u.Fy)(),c=(0,x.useIntl)(),[h,p]=(0,o.useState)(!1),f=(0,g.VK)((()=>{const e=t.getCreatedByPointer();if(e)return I.t1.createChildStore(t,e)}),[t]),b=(0,g.VK)((()=>f?f.getDisplayName(c):(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[f,c]),y=(0,g.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=I.t1.createChildStore(t,{table:v.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,K.jsx)(at.ZP,{blockValue:i,rootStore:t},e)})).filter(d.$K)}),[t]),M=(0,g.VK)((()=>I.bh.getUserVisibleReactions(t).length>0),[t]),j=(0,g.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),A=!M&&l.isMobile,C=h||M,R=void 0===e.skipAuthorName||!1===e.skipAuthorName,w=(0,o.useCallback)((e=>{l.isMobile?e.preventDefault():p(!0)}),[l.isMobile]),k=(0,o.useCallback)((e=>{l.isMobile?e.preventDefault():p(!1)}),[l.isMobile]),B=(0,m.yK)((e=>({avatarCommentReactionBarContainer:{...!M&&!l.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column",paddingLeft:It._z-It.MY},highlightContainer:{paddingLeft:Kt+_t},commentContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:6,flexGrow:1,paddingLeft:Kt+_t,...!M&&!l.isMobile&&{position:"relative"},...!M&&l.isMobile&&{flexDirection:"row"}},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,verticalAlign:"top",textAlign:"left",lineHeight:S.Z.lineHeight.UIRegular.desktop,...S.Z.textOverflowStyle,color:e.accentColors.gray[500]},fullName:{fontWeight:S.Z.fontWeight.medium,fontSize:14,lineHeight:S.Z.lineHeight.UIRegular.desktop,marginRight:8,color:e.regularTextColor},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:{...(!M||a)&&{}},reactionBar:{...!M&&{position:"absolute",top:-8,right:0,zIndex:1e5}},avatarAndFullName:{display:"flex",gap:_t,maxWidth:"100%"}})),[l,a,M]);return(0,K.jsxs)("div",{style:B.avatarAndCommentContainer,children:[R&&(0,K.jsxs)("div",{style:B.avatarAndFullName,children:[f&&(0,K.jsx)(Pt,{actorStore:f,size:22,avatar:void 0}),(0,K.jsx)("div",{style:B.fullName,children:b})]}),(0,K.jsx)("div",{style:B.highlightContainer,children:n}),(0,K.jsxs)("div",{style:B.commentContainer,onMouseEnter:w,onMouseLeave:k,children:[(0,K.jsxs)("div",{style:B.commentClampContainer,children:[(0,K.jsx)(Ft,{discussionStore:i,commentStore:t}),y,j&&(0,K.jsx)("span",{style:B.editedBadge,children:(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),A&&(0,K.jsx)("div",{style:l.isMobile?B.reactionBarMobile:B.reactionBar,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,K.jsx)(Qe.DU,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})}),C&&(0,K.jsx)("div",{style:l.isMobile?B.reactionBarMobile:B.reactionBar,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,K.jsx)(Qe.DU,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})]})}function Tt(e){const{store:t}=e,i=(0,g.VK)((()=>t.getIcon()),[t]),o=(0,g.VK)((()=>t.isEmptyPage()),[t]),s=(0,m.yK)((()=>({container:{display:"inline-grid",gridAutoFlow:"column",gap:4,alignItems:"center"},recordTitle:{display:"inline",...S.Z.textOverflowStyle}})),[]);return(0,K.jsxs)("span",{style:s.container,children:[(0,K.jsx)(dt.Z,{icon:i,isEmptyPage:o,size:12,disabled:!0}),(0,K.jsx)(lt.Z,{store:t,style:s.recordTitle,shouldWrap:!0})]})}function Ft(e){const{discussionStore:t,commentStore:i}=e,o=(0,u.O7)(),s=(0,u.Fy)(),r=(0,m.Fg)(),a=(0,g.VK)((()=>it.zP(i).getValue()),[i]),n=(0,g.VK)((()=>i.getSpaceId()),[i]),d=(0,g.VK)((()=>{if(!a||!n)return null;const e=(0,Xe.H4)({textValue:a,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,tt.IY)({environment:o,textValue:{value:e,spaceId:n},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,et.e_)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,r,a,n]),l=(0,m.yK)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.mediumTextColor,lineHeight:(0,ot.Dp)({device:s},"UIRegular")}})),[s]);return(0,K.jsx)("span",{style:l.commentText,children:d})}function Ot(e){const{navigableBlockStore:t,discussionId:i,discussionContext:o,rootStore:s,textStyle:r}=e,a=(0,u.O7)(),n=(0,m.yK)((e=>({highlightContainer:{maxWidth:"100%",display:"flex"},highlight:{display:"inline-grid",gridAutoFlow:"column",gap:8,maxWidth:"100%",...S.Z.textOverflowStyle},text:{fontSize:14,color:e.mediumTextColor,...S.Z.textOverflowStyle,...r},highlightBlockBar:{width:2,borderRadius:1,backgroundColor:e.accentColors.yellow[200],height:22}})),[r]),d=(0,g.VK)((()=>{if(!o)return(0,K.jsx)(Tt,{store:t});const e=(0,$e.gh)({theme:a.ThemeModeStore.state});return(0,tt.IY)({environment:a,textValue:o?{value:o,spaceId:s.id}:void 0,parentStore:s,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:i,theme:e,emojiType:(0,et.e_)(a),katex:a.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,s,a,o,i]);return(0,K.jsx)("div",{style:n.highlightContainer,children:(0,K.jsxs)("div",{style:n.highlight,children:[(0,K.jsx)("div",{style:n.highlightBlockBar}),(0,K.jsx)("span",{style:n.text,children:d})]})})}function Pt(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===F.cZ?(0,K.jsx)(At.Z,{botStore:t,size:o}):t.table===y.KJ?(0,K.jsx)(Ct.Z,{userStore:t,size:o}):t.table===G.y0?(0,K.jsx)(Ct.Z,{userStore:void 0,size:o}):void(0,d.t1)(t):i?(0,K.jsx)(Ct.Z,{avatar:i,size:o}):(0,K.jsx)(Ct.Z,{userStore:void 0,size:o})}function Lt(e){const{activity:t,rootStore:i,tabArgs:s}=e,{source:r,notification:a,tab:d}=s,l=(0,g.VK)((()=>{const e=i.getRecordStore(i,{table:n.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),c=(0,u.O7)(),h=(0,g.VK)((()=>I.t1.createChildStore(i,{table:n.qF,id:t.discussion_id,spaceId:(0,Mt.C)(i.pointer.spaceId)})),[t,i]),p=(0,g.VK)((()=>null==l?void 0:l.getParentId()),[l]),f=(0,o.useCallback)((e=>{if(!p)return;const o=I.G.createChildStore(i,{table:v.iU,id:p}),s=e.target,n=null==a?void 0:a.id;jt.oK({environment:c,discussionStore:h,rect:s.getBoundingClientRect(),blockStore:o,discussionLocation:(0,Ge.Kg)({forReplyMenu:!0,source:r}),activityId:t.id,notificationId:n}),"notifications_tab"===r&&Y.gY({environment:c,notificationId:n,alreadyRead:Boolean(null==a?void 0:a.read),activity:t,tab:d})}),[t,h,c,a,p,i,r,d]),b=(0,m.yK)((e=>({container:{paddingTop:12,paddingBottom:4},actionButton:(0,Me.b9)(e)})),[]);return l?(0,K.jsx)("div",{style:b.container,children:(0,K.jsx)(k.Z,{style:b.actionButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),f(e)},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})})}):null}const Zt=o.memo(Rt);function Dt(e){const{activity:t,isFirst:i,isLast:s,tabArgs:r,rootStore:a}=e,{source:l,tab:h,notification:p}=r,f=(0,g.VK)((()=>t.getEdits()),[t]);let b=f.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,d.t1)(e)}}));0===b.length&&0!==f.length&&"updates_sidebar"!==l&&(b=f);const y=b.length>0,S=(0,u.O7)(),M=(0,g.VK)((()=>a.getRecordStore(a,{table:n.qF,id:t.discussion_id,spaceId:t.space_id})),[a,t]),j=(0,g.VK)((()=>M.isDefined()),[M]),A=(0,g.VK)((()=>{const e=M.getParentPointer();if(e)return I.G.createChildStore(a,e)}),[M,a]),C=(0,g.VK)((()=>Boolean(A&&A.isDefined())),[A]),R=(0,g.VK)((()=>{const e=null==A?void 0:A.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,A]),w=I.G.createChildStore(a,{table:v.iU,id:R}),k=(0,g.VK)((()=>w.isDefined()),[w]),B=(0,g.VK)((()=>{if(!A)return;const e=A.getModel();return e?e.getRenderUrl({getRecordModel:a.getRecordModel,discussionId:t.discussion_id,pageVisitSource:Ze.tY.Notification}):void 0}),[A,a,t]),_=(0,g.VK)((()=>(0,Ge.Kg)({source:l,forReplyMenu:!1})),[l]),V=(0,g.VK)((()=>(0,c.cr)({activity:t,rootStore:a})),[t,a]),T=(0,g.VK)((()=>t.getDiscussionId()),[t]),F=(0,g.VK)((()=>(0,c.jC)({recordId:R,recordType:v.iU,tab:h,rootStore:a,environment:S})),[R,h,a,S]),O=null==V?void 0:V.context,P=(0,g.VK)((()=>{const e=a.getRecordStore(a,{table:n.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,a]),L=(0,g.VK)((()=>null==P?void 0:P.getParentId()),[P]),Z=(0,g.VK)((()=>parseInt(t.end_time)),[t]),D=(0,o.useCallback)((()=>{(0,xe.BE)({...r,environment:S,activity:t})}),[r,S,t]),z=(0,m.yK)((e=>({flex:{display:"flex"},discussionThreadContainer:{display:"flex",flexDirection:"column",marginTop:qt},commentContextContainer:{marginTop:2},commentContextText:{color:e.regularTextColor}})),[]),U=(0,o.useCallback)((e=>{if(!L)return;const i=I.G.createChildStore(a,{table:v.iU,id:L}),o=e.target,s=null==p?void 0:p.id;jt.oK({environment:S,discussionStore:M,rect:o.getBoundingClientRect(),blockStore:i,discussionLocation:(0,Ge.Kg)({forReplyMenu:!0,source:l}),activityId:t.id,notificationId:s}),"notifications_tab"===l&&Y.gY({environment:S,notificationId:s,alreadyRead:Boolean(null==p?void 0:p.read),activity:t,tab:h})}),[t,M,S,p,L,a,l,h]);if(!(y&&k&&C&&j))return null;const q=(0,K.jsx)(x.FormattedMessage,{id:"commentTimeGroupingActivity.header.title",defaultMessage:"Discussion"}),E=(0,K.jsx)(K.Fragment,{children:O&&(0,K.jsx)("div",{style:z.commentContextContainer,children:(0,K.jsx)(Yt,{navigableBlockStore:w,discussionId:T,discussionContext:O,rootStore:a})})});return(0,K.jsxs)(Ce.ZP,{timestamp:Z,header:q,isFirst:i,isLast:s,isPrivate:F,rootStore:a,prominentTitleLink:void 0,navigableBlockId:R,notification:p,icon:void 0,showSnapshotButton:!1,url:B,...(0,xe.JJ)({notification:p,environment:S,tab:h,activity:t}),children:[(0,K.jsx)("div",{style:z.discussionThreadContainer,children:T&&(0,K.jsx)(Ut,{rootStore:a,discussionId:T,discussionLocation:_,onReactionClick:D,onMoreCommentsClick:U,discussionContextHighlight:E})}),(0,K.jsx)("div",{style:{paddingLeft:It._z+Nt+Et-It.MY},children:(0,K.jsx)(Xt,{activity:t,rootStore:a,tabArgs:r})})]})}const zt=2;function Ut(e){const{rootStore:t,discussionId:i,discussionLocation:o,discussionContextHighlight:s,onMoreCommentsClick:r,onReactionClick:a}=e,d=(0,g.VK)((()=>I.t1.createChildStore(t,{table:n.qF,id:i,spaceId:t.id})),[t,i]),l=function(e){return(0,g.VK)((()=>{const{discussionIdToExpansionStartPointMap:t}=rt.default.state,i=e.getCommentStores().filter((e=>e.isDefined()));if(!t)return i;const o=t[e.id];if(!o)return i;const{commentId:s,timestamp:r}=o,a=s?i.findIndex((e=>e.id===s)):-1,n=r?i.findIndex((e=>e.getCreatedTime()>=r)):-1,d=a>=0?a:n;return d<0?i:i.slice(d)}),[e])}(d),c=l.length-zt,u=c>0,h=1===l.length,p=(0,m.yK)((e=>({discussion:{display:"flex",flexDirection:"column",gap:qt},truncateRepliesButton:{display:"flex",gap:8,padding:4,marginLeft:-4,borderRadius:4},avatars:{display:"flex"},truncationText:{display:"flex",alignItems:"center",color:e.lightTextColor,fontSize:12},expandButtonContainer:{paddingLeft:It._z+Nt+Et-It.MY},expandButtonBase:{display:"flex",justifyContent:"start",alignItems:"center",gap:14,borderRadius:4,fontSize:14,padding:6,marginLeft:-6,color:e.lightTextColor,maxWidth:"fit-content"},divider:{width:20,flexGrow:2,color:e.stroke.deemphasized}})),[]);if(h){const e=l[0];return(0,K.jsx)("div",{style:p.discussion,children:(0,K.jsx)(Ht,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:a,useCommentView:!0,discussionContextHighlight:s},e.id)})}return(0,K.jsxs)("div",{style:p.discussion,children:[l.slice(0,1).map((e=>(0,K.jsx)(Ht,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:a,useCommentView:!1,discussionContextHighlight:s},e.id))),u&&(0,K.jsx)("div",{style:p.expandButtonContainer,children:(0,K.jsx)(nt.Z,{style:p.expandButtonBase,onClick:e=>{e.stopPropagation(),e.preventDefault(),r(e)},children:(0,K.jsx)(x.FormattedMessage,{id:"CommentTimeGroupingActivity.discussionThread.hidePreviousRepliesCount",defaultMessage:"{previousRepliesCount} {previousRepliesCount, plural, one {more comment} other {more comments}}",values:{previousRepliesCount:c}})})}),l.slice(-1).map((e=>(0,K.jsx)(Ht,{commentStore:e,discussionStore:d,discussionLocation:o,onReactionClick:a,useCommentView:!1},e.id)))]})}const qt=4,Et=12,Nt=22;It._z;function Ht(e){const{commentStore:t,discussionStore:i,discussionLocation:s,onReactionClick:r,useCommentView:a,discussionContextHighlight:n}=e,l=(0,u.Fy)(),c=(0,x.useIntl)(),[h,p]=(0,o.useState)(!1),f=(0,g.VK)((()=>{const e=t.getCreatedByPointer();if(e)return I.t1.createChildStore(t,e)}),[t]),b=(0,g.VK)((()=>f?f.getDisplayName(c):(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.unknownAuthorLabel",defaultMessage:"Unknown author"})),[f,c]),y=(0,g.VK)((()=>{const e=t.getContent(),i=0===e.length;if(e||!i)return e.map((e=>{const i=I.t1.createChildStore(t,{table:v.iU,id:e,spaceId:t.getSpaceId()}).getValue();if(i)return(0,K.jsx)(at.ZP,{blockValue:i,rootStore:t},e)})).filter(d.$K)}),[t]),M=(0,g.VK)((()=>I.bh.getUserVisibleReactions(t).length>0),[t]),j=(0,g.VK)((()=>t.getLastEditedTime()>t.getCreatedTime()+100),[t]),A=!M&&l.isMobile,C=h||M,R=(0,o.useCallback)((e=>{l.isMobile?e.preventDefault():p(!0)}),[l.isMobile]),w=(0,o.useCallback)((e=>{l.isMobile?e.preventDefault():p(!1)}),[l.isMobile]),k=(0,m.yK)((e=>({avatarCommentReactionBarContainer:{...!M&&!l.isMobile&&{position:"relative"}},avatarAndCommentContainer:{display:"flex",flexDirection:"column",paddingLeft:It._z-It.MY},highlightContainer:{paddingLeft:Nt+Et},commentContainer:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:6,flexGrow:1,paddingLeft:Nt+Et,...!M&&!l.isMobile&&{position:"relative"},...!M&&l.isMobile&&{flexDirection:"row"}},commentClampContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:3,verticalAlign:"top",textAlign:"left",lineHeight:S.Z.lineHeight.UIRegular.desktop,...S.Z.textOverflowStyle,color:e.accentColors.gray[500]},fullName:{fontWeight:S.Z.fontWeight.medium,fontSize:14,lineHeight:S.Z.lineHeight.UIRegular.desktop,marginRight:8,color:e.regularTextColor},editedBadge:{fontSize:13,color:e.mediumTextColor,paddingLeft:4},reactionBarMobile:{...(!M||a)&&{}},reactionBar:{...!M&&{position:"absolute",top:-8,right:0,zIndex:1e5}},avatarAndFullName:{display:"flex",gap:Et,maxWidth:"100%"}})),[l,a,M]);return(0,K.jsxs)("div",{style:k.avatarAndCommentContainer,children:[(0,K.jsxs)("div",{style:k.avatarAndFullName,children:[f&&(0,K.jsx)(Jt,{actorStore:f,size:22,avatar:void 0}),(0,K.jsx)("div",{style:k.fullName,children:b})]}),(0,K.jsx)("div",{style:k.highlightContainer,children:n}),(0,K.jsxs)("div",{style:k.commentContainer,onMouseEnter:R,onMouseLeave:w,children:[(0,K.jsxs)("div",{style:k.commentClampContainer,children:[(0,K.jsx)(Gt,{discussionStore:i,commentStore:t}),y,j&&(0,K.jsx)("span",{style:k.editedBadge,children:(0,K.jsx)(x.FormattedMessage,{id:"CommentGroupingActivity.discussionThreadComment.editedBadge",defaultMessage:"(edited)"})})]}),A&&(0,K.jsx)("div",{style:l.isMobile?k.reactionBarMobile:k.reactionBar,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,K.jsx)(Qe.DU,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})}),C&&(0,K.jsx)("div",{style:l.isMobile?k.reactionBarMobile:k.reactionBar,onClick:e=>{e.stopPropagation(),e.preventDefault()},children:(0,K.jsx)(Qe.DU,{parentStore:t,discussionLocation:s,onClick:r,disableDropShadow:!0})})]})]})}function Wt(e){const{store:t}=e,i=(0,g.VK)((()=>t.getIcon()),[t]),o=(0,g.VK)((()=>t.isEmptyPage()),[t]),s=(0,m.yK)((()=>({container:{display:"inline-grid",gridAutoFlow:"column",gap:4,alignItems:"center"},recordTitle:{display:"inline",...S.Z.textOverflowStyle}})),[]);return(0,K.jsxs)("span",{style:s.container,children:[(0,K.jsx)(dt.Z,{icon:i,isEmptyPage:o,size:12,disabled:!0}),(0,K.jsx)(lt.Z,{store:t,style:s.recordTitle,shouldWrap:!0})]})}function Gt(e){const{discussionStore:t,commentStore:i}=e,o=(0,u.O7)(),s=(0,u.Fy)(),r=(0,m.Fg)(),a=(0,g.VK)((()=>it.zP(i).getValue()),[i]),n=(0,g.VK)((()=>i.getSpaceId()),[i]),d=(0,g.VK)((()=>{if(!a||!n)return null;const e=(0,Xe.H4)({textValue:a,currentUserId:o.currentUser.id,getRecordModel:t.getRecordModel,highlightStyle:"text_only"});return(0,tt.IY)({environment:o,textValue:{value:e,spaceId:n},parentStore:t,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,et.e_)(o),katex:o.KatexStore.getKatex(),formulaValueTypes:[]})}),[o,t,r,a,n]),l=(0,m.yK)((e=>({commentText:{whiteSpace:"pre-wrap",wordBreak:"break-word",display:"inline",fontSize:14,color:e.mediumTextColor,lineHeight:(0,ot.Dp)({device:s},"UIRegular")}})),[s]);return(0,K.jsx)("span",{style:l.commentText,children:d})}function Yt(e){const{navigableBlockStore:t,discussionId:i,discussionContext:o,rootStore:s,textStyle:r}=e,a=(0,u.O7)(),n=(0,m.yK)((e=>({highlightContainer:{maxWidth:"100%",display:"flex"},highlight:{display:"inline-grid",gridAutoFlow:"column",gap:8,maxWidth:"100%",...S.Z.textOverflowStyle},text:{fontSize:14,color:e.mediumTextColor,...S.Z.textOverflowStyle,...r},highlightBlockBar:{width:2,borderRadius:1,backgroundColor:e.accentColors.yellow[200],height:22}})),[r]),d=(0,g.VK)((()=>{if(!o)return(0,K.jsx)(Wt,{store:t});const e=(0,$e.gh)({theme:a.ThemeModeStore.state});return(0,tt.IY)({environment:a,textValue:o?{value:o,spaceId:s.id}:void 0,parentStore:s,disableHover:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:i,theme:e,emojiType:(0,et.e_)(a),katex:a.KatexStore.getKatex(),formulaValueTypes:[]})}),[t,s,a,o,i]);return(0,K.jsx)("div",{style:n.highlightContainer,children:(0,K.jsxs)("div",{style:n.highlight,children:[(0,K.jsx)("div",{style:n.highlightBlockBar}),(0,K.jsx)("span",{style:n.text,children:d})]})})}function Jt(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===F.cZ?(0,K.jsx)(At.Z,{botStore:t,size:o}):t.table===y.KJ?(0,K.jsx)(Ct.Z,{userStore:t,size:o}):t.table===G.y0?(0,K.jsx)(Ct.Z,{userStore:void 0,size:o}):void(0,d.t1)(t):i?(0,K.jsx)(Ct.Z,{avatar:i,size:o}):(0,K.jsx)(Ct.Z,{userStore:void 0,size:o})}function Xt(e){const{activity:t,rootStore:i,tabArgs:s}=e,{source:r,notification:a,tab:d}=s,l=(0,g.VK)((()=>{const e=i.getRecordStore(i,{table:n.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),c=(0,u.O7)(),h=(0,g.VK)((()=>I.t1.createChildStore(i,{table:n.qF,id:t.discussion_id,spaceId:(0,Mt.C)(i.pointer.spaceId)})),[t,i]),p=(0,g.VK)((()=>null==l?void 0:l.getParentId()),[l]),f=(0,o.useCallback)((e=>{if(!p)return;const o=I.G.createChildStore(i,{table:v.iU,id:p}),s=e.target,n=null==a?void 0:a.id;jt.oK({environment:c,discussionStore:h,rect:s.getBoundingClientRect(),blockStore:o,discussionLocation:(0,Ge.Kg)({forReplyMenu:!0,source:r}),activityId:t.id,notificationId:n}),"notifications_tab"===r&&Y.gY({environment:c,notificationId:n,alreadyRead:Boolean(null==a?void 0:a.read),activity:t,tab:d})}),[t,h,c,a,p,i,r,d]),b=(0,m.yK)((e=>({container:{paddingTop:12,paddingBottom:4},actionButton:(0,Me.b9)(e)})),[]);return l?(0,K.jsx)("div",{style:b.container,children:(0,K.jsx)(k.Z,{style:b.actionButton,onClick:e=>{e.stopPropagation(),e.preventDefault(),f(e)},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})})}):null}const $t=o.memo(Dt);const Qt=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{tab:n,notification:d}=o,l=(0,u.O7)(),m=(0,g.VK)((()=>(0,Ue.hI)(t.getEdits())),[t]),h=(0,g.VK)((()=>(0,c.P6)({edits:m,rootStore:i})),[m,i]),p=(0,g.VK)((()=>(0,c.XW)(h,{...(0,C.h_)({environment:l,useInboxRedesign:a})})),[h,a,l]),{oldEmail:v,newEmail:f}=(0,g.VK)((()=>{const e=m[0];return{oldEmail:e?e.old_email:"",newEmail:e?e.new_email:""}}),[m]),b="pageUpdatesSidebar"===n,y=(0,g.VK)((()=>parseInt(t.end_time)),[t]);return a?(0,K.jsx)(Ce.ZP,{timestamp:y,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You updated your email to {newEmail}",values:{newEmail:f},id:"activity.emailEdited.header.short"})}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:d,icon:(0,K.jsx)(ye.BE,{authors:h,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:b,url:void 0,...(0,xe.JJ)({notification:d,activity:t,environment:l,tab:n})}):(0,K.jsx)(Ae.Z,{timestamp:y,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} changed email from {oldEmail} to {newEmail}} other {{authorOrAuthors} changed email from {oldEmail} to {newEmail}}}",values:{numberOfAuthors:h.length,authorOrAuthors:p,oldEmail:v,newEmail:f},id:"activity.emailEdited.header"})}),isLast:r,isPrivate:!1,rootStore:i,showRecordPath:!1,notification:d,icon:(0,K.jsx)(ye.BE,{authors:h,size:24}),showSnapshotButton:b,...(0,xe.h9)({notification:d,activity:t,environment:l,tab:n})})};var ei=i(30134),ti=i(29551);function ii(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{tab:n,notification:d,source:l}=o,c=(0,u.O7)(),h=c.device.isMobile,{activityEndTimestamp:p,edits:v}=(0,g.VK)((()=>({activityEndTimestamp:parseInt(t.end_time),edits:t.getEdits()})),[t]),f=Boolean(null==d?void 0:d.visited),b=(0,m.yK)((e=>({container:{paddingLeft:(0,Me.c3)({source:l,isMobile:h}),paddingTop:12,paddingBottom:4},newContainer:{paddingTop:12,paddingBottom:4},actionButton:(0,Me.b9)(e)})),[h,l]),y=(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Your workspace export is ready",id:"activity.exportCompleted.header"}),S=(0,K.jsx)(ti.gq,{style:{fontSize:12},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"The download link will expire in 7 days.",id:"activity.exportCompleted.downloadLink"})}),M=()=>{window.open(v[0].link,"_blank")};return a?(0,K.jsxs)(Ce.ZP,{timestamp:p,header:y,isFirst:s,isLast:r,isPrivate:!0,rootStore:i,notification:d,icon:(0,K.jsx)(oi,{}),showSnapshotButton:!1,url:void 0,...(0,xe.JJ)({notification:d,activity:t,environment:c,tab:n}),children:[S,(0,K.jsx)("div",{style:b.newContainer,children:(0,K.jsx)(k.Z,{onClick:M,style:b.actionButton,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})})})]}):(0,K.jsxs)(Ae.Z,{timestamp:p,header:y,isLast:r,isPrivate:!0,rootStore:i,notification:d,icon:(0,K.jsx)(ye.Hy,{}),showRecordPath:!0,showSnapshotButton:!1,...(0,xe.h9)({notification:d,activity:t,environment:c,tab:n}),children:[(0,K.jsx)(ti.gq,{style:{paddingLeft:(0,Me.c3)({source:l,isMobile:!1})},children:S}),(0,K.jsxs)("div",{style:b.container,children:[(0,K.jsx)(k.Z,{onClick:M,style:b.actionButton,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Download",id:"activity.actions.exportCompleted.download"})}),f&&(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(si,{}),(0,K.jsx)(Se.D,{tabArgs:o,environment:c,rootStore:i,activity:t})]})]})]})}function oi(){const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,K.jsx)(Ce.hn,{children:(0,ei.c)(e.icon)})}function si(){return(0,K.jsx)("div",{style:{width:5,display:"inline-block"}})}var ri=i(54584);function ai(e){const{activity:t,rootStore:i,isFirst:o,isLast:s,tabArgs:r,useInboxRedesign:a}=e,{tab:n,notification:d,source:l}=r,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h.length>0,f=h[0],b=I.G.createChildStore(i,{table:v.iU,id:f.navigable_block_id}),y=(0,g.VK)((()=>b.isDefined()),[b]),S=(0,g.VK)((()=>{const e=I.G.createChildStore(i,{table:v.iU,id:t.mentioned_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ze.tY.Notification})}),[t,i]),M=(0,g.VK)((()=>i.getModel()),[i]),j=(0,g.VK)((()=>(0,ri.QH)(A.default.getIntl(),M,t.mentioned_group_id)),[M,t]),R=(0,g.VK)((()=>(0,c.P6)({edits:t.getEdits(),rootStore:i})),[t,i]),w=(0,g.VK)((()=>(0,c.XW)(R,{...(0,C.h_)({environment:m,useInboxRedesign:a})})),[R,a,m]),k=m.device.isMobile,B=(0,g.VK)((()=>(0,c.jC)({recordId:b.id,recordType:v.iU,tab:n,rootStore:i,environment:m})),[b,n,i,m]),_=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!p||!y||!S)return null;const V=(0,K.jsx)(je.Z,{titledRecordStore:b,activity:t,tabArgs:r,getRecordModel:i.getRecordModel});return a?(0,K.jsx)(Ce.ZP,{timestamp:_,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned your group} other {{authorOrAuthors} mentioned your group}}",values:{numberOfAuthors:R.length,authorOrAuthors:w},id:"activity.groupMentionActivity.standardizedHeader.short"})}),isFirst:o,isLast:s,isPrivate:B,rootStore:i,navigableBlockId:b.id,notification:d,icon:(0,K.jsx)(ye.BE,{authors:R,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:S,...(0,xe.JJ)({notification:d,activity:t,environment:m,tab:n}),children:(0,K.jsx)(Ee.Z,{edit:f,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):(0,K.jsxs)(Ae.Z,{timestamp:_,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned {groupName} in a page} other {{authorOrAuthors} mentioned {groupName} in a page}}",values:{numberOfAuthors:R.length,authorOrAuthors:w,groupName:j},id:"activity.groupMentionActivity.standardizedHeader"})}),isLast:s,isPrivate:B,rootStore:i,prominentTitleLink:V,navigableBlockId:b.id,showRecordPath:!0,notification:d,icon:(0,K.jsx)(ye.BE,{authors:R,size:24}),showSnapshotButton:!1,...(0,xe.h9)({notification:d,activity:t,environment:m,tab:n}),children:[(0,K.jsx)(qe.Z,{href:S,onClick:()=>(0,xe.dG)({environment:m,activity:t,...r}),innerStyle:(0,Me.OD)({source:l,isMobile:k}),children:(0,K.jsx)(Ee.Z,{edit:f,rootStore:i,highlightCurrentUser:!0})}),(0,K.jsx)(Se.Z,{tabArgs:r,activity:t,isMobile:k,environment:m,rootStore:i})]})}var ni=i(1800),di=i(7220),li=i(23925),ci=i(30397),ui=i(74016),gi=i(95697),mi=i(24646),hi=i(62820),pi=i(9867),vi=i(86176);function fi(e){const{titledRecordStore:t,rootStore:i,activity:s,tabArgs:r,useInboxRedesign:a,stopPropagation:n}=e,l=i.getRecordModel,c=(0,g.VK)((()=>t.getModel()),[t]),h=(0,u.O7)(),p=(0,g.VK)((()=>null==c?void 0:c.getRenderIcon({getRecordModel:l})),[c,l]),S=(0,m.yK)((e=>({container:a?{display:"block",borderWidth:1,borderStyle:"solid",borderColor:e.tint.regular,borderRadius:8,marginTop:12,padding:12,background:e.contentBackground,boxShadow:"0px 1px 2px 0px "+("light"===e.mode?"rgba(0, 0, 0, 0.03)":"rgba(0, 0, 0, 0.12)")}:{...Me.lS,display:"block",border:`1px solid ${e.outlineButtonBorder}`,borderRadius:4,marginTop:8,padding:10},icon:{...Me.e9,marginRight:8},activityTitle:{fontSize:14,display:"inline",whiteSpace:"normal",marginRight:void 0!==p?3:0,wordBreak:"break-word",...Me.nP},flexRow:{display:"flex",alignItems:"center"},title:{maxWidth:"80%"},spacer:{flexGrow:1},subtitle:{fontSize:12,color:e.lightTextColor},avatarContainer:{display:"flex",flexDirection:"row",justifyContent:"start",overflow:"hidden",paddingRight:2,alignItems:"center"},overlappingAvatar:{marginRight:-5,position:"relative"},rightmostAvatar:{position:"relative"},remainderCount:{paddingLeft:2,color:e.lightTextColor}})),[p,a]),M=(0,g.VK)((()=>{if(c&&c.table!==b.e0)return c.getRenderUrl({getRecordModel:l,pageVisitSource:Ze.tY.Notification})}),[c,l]),j=(0,o.useCallback)((e=>{n&&e.stopPropagation();const i=t.table;switch(i){case v.iU:case f.bx:(0,xe.V3)({environment:h,activity:s,...r});break;case b.e0:(0,xe.dG)({environment:h,activity:s,...r}),pi.hI({environment:h,teamStore:t,shouldScroll:!0}),hi.Z.setState({...hi.Z.state,open:!1});break;default:(0,d.t1)(i)}}),[s,h,r,t,n]),C=(0,g.VK)((()=>{const e=t.table;switch(e){case"space":const i=t.getPublicSpaceData();return i&&"none"!==i.role?(0,K.jsx)("div",{children:(0,K.jsx)(x.FormattedMessage,{id:"activity.titleCard.spaceSubtitle",defaultMessage:"{numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}} Â· {planType}",values:{numberOfWorkspaceMembers:A.default.formatNumber(i.memberCount),planType:A.default.formatMessage((0,mi.em)(i.subscriptionTier))}})}):null;case"block":return(0,K.jsx)(vi.Z,{store:t});case"team":const o=t.getUserIdsInTeam().length,s=t.getTeamAccessLevel();return(0,K.jsx)("div",{children:(0,K.jsx)(x.FormattedMessage,{id:"activity.titleCard.teamSubtitle",defaultMessage:"{accessLevel} Â· {numberOfTeamMembers, plural, one {{numberOfTeamMembers} member} other {{numberOfTeamMembers} members}}",values:{accessLevel:s,numberOfTeamMembers:o}})});default:(0,d.t1)(e)}}),[t]),R=(0,g.VK)((()=>{const e=t.table;let o=[];switch(e){case"space":const s=t.getModel();if(!s)break;o=s.getUserPermissionItems().map((e=>e.user_id));break;case"block":const r=t.getCreatedByPointer();(null==r?void 0:r.table)===y.KJ&&(o=[r.id]);break;case"team":o=(0,gi.xf)({teamStore:t,spaceStore:i});break;default:(0,d.t1)(e)}const s=Math.max(0,o.length-3),r=Math.min(o.length,3);return(0,K.jsxs)("div",{style:S.avatarContainer,children:[o.slice(0,3).map(((e,i)=>{const o=I.U6.createChildStore(t,{table:y.KJ,id:e}),s=i===r-1;if(o)return(0,K.jsx)(Ct.Z,{userStore:o,size:24,avatarShouldShowShadow:!1,style:s?S.rightmostAvatar:S.overlappingAvatar,isOffline:!1,hasTooltip:!h.device.isMobile},e)})),s>0&&(0,K.jsx)("div",{style:S.remainderCount,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{remainingAvatarCount, plural, one {+{remainingAvatarCount}} other {+{remainingAvatarCount}}}",id:"activity.titleCard.members.otherCount.message",values:{remainingAvatarCount:s}})})]})}),[h.device.isMobile,S,t,i]);return c?(0,K.jsx)(qe.Z,{href:M,onClick:j,external:!1,innerStyle:S.container,inline:!0,children:(0,K.jsxs)("div",{style:S.flexRow,children:[p&&(0,K.jsx)(dt.Z,{disabled:!0,icon:p,isEmptyPage:!1,size:25,style:S.icon}),(0,K.jsxs)("div",{style:S.title,children:[(0,K.jsx)(lt.Z,{store:t,style:S.activityTitle}),!a&&(0,K.jsx)("div",{style:S.subtitle,children:C})]}),(0,K.jsx)("div",{style:S.spacer}),(0,K.jsx)("div",{children:R})]})}):null}const bi=o.memo(fi);function yi(e){var t;const{activity:i,rootStore:o,tabArgs:s,isFirst:r,isLast:a,useInboxRedesign:n}=e,{tab:d,notification:l,source:c}=s,h=(0,u.O7)(),{activityEndTimestamp:p,edits:f}=(0,g.VK)((()=>({activityEndTimestamp:parseInt(i.end_time),edits:i.getEdits()})),[i]),b=null===(t=f[0])||void 0===t?void 0:t.teamspace_id,y=(0,g.VK)((()=>ci.Z.state.teams.find((e=>e.id===b))),[b]),S=h.device.isMobile,M=(0,m.yK)((e=>({linkbox:{...(0,Me.OD)({source:c,isMobile:S}),display:"flex",alignItems:"center",fontSize:ot.yv(h,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,width:"100%"},newContainerLinkBox:{...(0,Me.OD)({source:c,isMobile:S}),display:"flex",alignItems:"center",fontSize:ot.yv(h,"UIRegular"),paddingTop:2,paddingBottom:6,marginBottom:0,paddingLeft:0,width:"100%"}})),[S,c,h]),j=Boolean(null==l?void 0:l.visited),A=(0,m.yK)((e=>({container:{paddingLeft:(0,Me.c3)({source:c,isMobile:S}),paddingTop:12,paddingBottom:4},newContainer:{paddingLeft:(0,Me.c3)({source:c,isMobile:S}),paddingTop:12,paddingBottom:4},actionButton:(0,Me.b9)(e)})),[S,c]);if(!f.length)return(0,K.jsx)(K.Fragment,{});const{import_source:C,import_status:R,landing_page:w,collection_page_ids:k}=f[0],B=(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Your {importSource} import has failed",id:"activity.importFailed.header",values:{importSource:C,importStatus:R}}),_=(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Your {importSource} import was successful",id:"activity.importSuccess.header",values:{importSource:C,importStatus:R}}),V=(0,K.jsx)(ti.gq,{style:{fontSize:ot.yv(h,"UISmall")},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"View projects and tasks in Notion",id:"activity.importCompleted.projects.redirect"})}),T=(0,K.jsx)(ti.gq,{style:{fontSize:ot.yv(h,"UISmall")},children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"View import logs",id:"activity.importCompleted.loggerPage.redirect"})}),F=(0,ni.Z)({pageId:w,pageVisitSource:Ze.tY.Import});let O="successful"===R?_:B,P=(0,K.jsx)(ti.gq,{children:(0,K.jsx)(qe.Z,{href:F,innerStyle:n?M.newContainerLinkBox:M.linkbox,children:"successful"===R?V:T})});const L="Jira"===C?(0,K.jsx)(Si,{}):(0,K.jsx)(xi,{}),Z="Jira"===C?(0,K.jsx)(ye.yI,{}):(0,K.jsx)(ye._c,{}),D=null==k?void 0:k[0];if("Jira"===C&&"successful"===R&&(y&&(O=(0,K.jsxs)("span",{style:{display:"flex",flexDirection:"column"},children:[(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Your Jira projects and tasks have been synced",id:"activity.importCompleted.jira.success.header"}),(0,K.jsxs)(ti.gq,{style:{gap:6,paddingLeft:1},children:[(0,K.jsx)(x.FormattedMessage,{defaultMessage:"to",id:"activity.importCompleted.jira.success.header.importedTo"}),(0,K.jsx)(ui.p,{disabled:!0,store:y,size:20}),(0,K.jsx)(lt.Z,{store:y})]})]})),D)){const e=I.G.createChildStore(o,{id:D.projectCollectionPageId,spaceId:o.id,table:v.iU}),t=I.G.createChildStore(o,{id:D.taskCollectionPageId,spaceId:o.id,table:v.iU});P=(0,K.jsxs)("div",{style:{paddingLeft:(0,Me.c3)({source:c,isMobile:S}),paddingRight:12},children:[(0,K.jsx)(bi,{titledRecordStore:e,rootStore:o,activity:i,tabArgs:s,useInboxRedesign:!0}),(0,K.jsx)(bi,{titledRecordStore:t,rootStore:o,activity:i,tabArgs:s,useInboxRedesign:!0})]})}return n?(0,K.jsx)(Ce.ZP,{url:void 0,timestamp:p,header:O,isPrivate:!0,isFirst:r,isLast:a,rootStore:o,notification:l,icon:L,showSnapshotButton:!1,...(0,xe.JJ)({notification:l,activity:i,environment:h,tab:d}),children:P}):(0,K.jsxs)(Ae.Z,{timestamp:p,header:O,isLast:a,isPrivate:!0,rootStore:o,notification:l,icon:Z,showRecordPath:!0,showSnapshotButton:!1,...(0,xe.h9)({notification:l,activity:i,environment:h,tab:d}),children:[P,(0,K.jsx)("div",{style:A.container,children:j&&(0,K.jsx)(Se.D,{tabArgs:s,environment:h,rootStore:o,activity:i})})]})}function xi(){const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,K.jsx)(Ce.hn,{children:(0,di.l)(e.icon)})}function Si(){const e=(0,u.O7)(),t=(0,g.VK)((()=>"dark"===e.ThemeStore.state.mode),[e]),i=(0,m.yK)((e=>({icon:{height:20,width:20,fill:t?e.primaryBlack:e.blueColor}})),[t]);return(0,K.jsx)(Ce.hn,{children:(0,li.k)(i.icon)})}var Mi=i(1302),ji=i(65422),Ai=i(98963),Ci=i(37850),Ii=i(5149),Ri=i(8055),wi=i(10906),ki=i(84210),Bi=i(60709),_i=i(61766),Ki=i(31945),Vi=i(78140),Ti=i(40721),Fi=i(53437),Oi=i(26388);function Pi(e){const{activity:t,useInboxRedesign:i}=e,o=(0,g.VK)((()=>t.getEdits()),[t]),s=o.length>0,r=(0,m.yK)((e=>({notificationContainer:{...i&&{paddingBlock:"8px 4px"},display:"flex",flexDirection:"column",rowGap:8}})),[i]);return s?(0,K.jsx)(Zi,{...e,edits:o,style:r.notificationContainer}):null}const Li=2;function Zi(e){const{rootStore:t,useInboxRedesign:i,activity:s,isLast:r,tabArgs:a,edits:n,style:l,isFirst:m}=e,{tab:h,notification:p,source:f}=a,b=(0,u.O7)(),y=n[0],{activityEndTimestamp:x}=(0,g.VK)((()=>({activityEndTimestamp:parseInt(s.end_time,10)})),[s]),S=(0,o.useRef)(null),M=(0,o.useMemo)((()=>S.current&&S.current.scrollHeight>S.current.clientHeight),[]),j=(0,g.VK)((()=>{const e=I.G.createChildStore(t,{table:v.iU,id:y.navigable_block_id});if((0,d.$K)(e))return e}),[y.navigable_block_id,t]),A=(0,g.VK)((()=>{const e=null==j?void 0:j.getModel();if(e)return e.getRenderUrl({getRecordModel:t.getRecordModel,pageVisitSource:Ze.tY.Notification})}),[t,j]),C=(0,g.VK)((()=>(0,c.jC)({recordId:null==j?void 0:j.id,recordType:v.iU,tab:h,rootStore:t,environment:b})),[j,h,t,b]);if(!(0,d.$K)(j))return null;const R=(0,K.jsx)(qi,{rootStore:t,edits:n,spaceId:s.spaceId,environment:b,shortened:!1}),w=(0,K.jsxs)("div",{style:l,children:[n.slice(-2).map(((t,i)=>(0,o.createElement)(Ui,{...e,edit:t,key:i,isViewAllMenu:!1,source:f,isLast:n.length>Li?i===n.length-1-Li:i===n.length-1,clampedMessageContainerRef:S}))),!i&&(M||n.length>1)&&(0,K.jsx)(Di,{edits:n,useInboxRedesign:i,rootStore:t,activity:s,navigableBlock:j,source:f})]}),k=(0,K.jsx)(je.Z,{titledRecordStore:j,activity:s,tabArgs:a,getRecordModel:t.getRecordModel});return i?(0,K.jsx)(Ce.ZP,{timestamp:x,header:R,isFirst:m,isLast:r,isPrivate:C,rootStore:t,navigableBlockId:j.id,notification:p,icon:(0,K.jsx)(Ni,{useInboxRedesign:i}),showSnapshotButton:!1,url:A,...(0,xe.JJ)({notification:p,activity:s,environment:b,tab:h}),children:w}):(0,K.jsx)(Ae.Z,{timestamp:x,header:R,isLast:r,isPrivate:!0,rootStore:t,notification:p,icon:(0,K.jsx)(Ni,{useInboxRedesign:i}),navigableBlockId:j.id,showRecordPath:!0,prominentTitleLink:k,showSnapshotButton:!1,...(0,xe.h9)({notification:p,activity:s,environment:b,tab:h}),children:w})}function Di(e){const{edits:t,useInboxRedesign:i,rootStore:s,activity:r,navigableBlock:a,source:n}=e,d=(0,u.Fy)(),l=(0,u.O7)(),c=(0,g.qz)(void 0,_i.Z),h=(0,o.useCallback)((()=>c.reset()),[c]),p=(0,o.useMemo)((()=>(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfNotifications, plural, one {View} =2 {View} other {View all {numberOfNotifications}}}",id:"inAppNotificationAutomationActionTriggeredActivity.renderViewAllNotificationsButton.buttonLabel",values:{numberOfNotifications:t.length}})),[t.length]);let v;v=d.isMobile?{menuType:Bi.og.Modal,title:p,right:(0,K.jsx)(Ti.DoneMenuText,{}),onClickRight:h,whiteBackground:!0}:{menuType:Bi.og.Popup,width:420,maxWidth:d.isMobileBrowser?"80vw":"100%"};const f=(0,m.yK)((e=>({oldContainer:{paddingInlineStart:(0,Me.c3)({source:n,isMobile:d.isMobile})+4,paddingBlock:4},actionButton:(0,Me.b9)(e),divider:{borderBlockEnd:`1px solid ${e.regularDividerColor}`},viewAllMenuNotificationContainer:{display:"flex",flexDirection:"column",padding:12},viewAllMenuHeaderContainer:{display:"flex",flexDirection:"row"},popupMenu:{marginInlineStart:-2,fontSize:Ce.cF}})),[d.isMobile,n]),b=(0,o.useId)(),{activityEndTimestamp:y}=(0,g.VK)((()=>({activityEndTimestamp:parseInt(r.end_time,10)})),[r]);return(0,K.jsx)("div",{style:f.oldContainer,children:(0,K.jsx)(Ki.ZP,{buttonPopupStore:c,popupType:d.isMobile?Fi.ZP.PopupType.SlideUp:Fi.ZP.PopupType.Popup,placementToOrigin:Fi.ZP.Placement.Bottom,alignmentToOrigin:Fi.ZP.Alignment.Center,originGap:4,renderOrigin:e=>(0,K.jsx)(k.Z,{...e,style:f.actionButton,children:p}),render:()=>(0,K.jsx)(Vi.Z,{...v,children:(0,K.jsx)("div",{style:f.popupMenu,children:t.map(((o,d)=>(0,K.jsxs)("div",{children:[(0,K.jsxs)("div",{style:f.viewAllMenuNotificationContainer,children:[(0,K.jsxs)("div",{style:f.viewAllMenuHeaderContainer,children:[(0,K.jsx)(Ni,{useInboxRedesign:i}),(0,K.jsx)(Ae.h,{prominentTitleLink:void 0,titleAriaId:b,onBacklinkClick:()=>null,hasChildren:!0,timestamp:y,header:(0,K.jsx)(qi,{rootStore:s,edits:[o],spaceId:r.spaceId,environment:l,closeViewAllMenu:h,shortened:!0}),rootStore:s,navigableBlockId:a.id,showRecordPath:!1})]}),(0,K.jsx)(Ui,{...e,edit:o,isViewAllMenu:!0,source:n,isLast:d===t.length-1},d)]}),d!==t.length-1&&(0,K.jsx)("div",{style:f.divider})]},d)))})})})})}const zi=4;function Ui(e){const{edit:t,rootStore:i,useInboxRedesign:o,source:s,isViewAllMenu:r,clampedMessageContainerRef:a}=e,n=(0,m.Fg)(),d=(0,u.O7)(),l=(0,u.Fy)(),{isMobile:c}=l,h=(0,g.VK)((()=>d.KatexStore.getKatex()),[d]),p=(0,et.kw)(),v=(0,g.VK)((()=>(0,K.jsx)("div",{children:(0,tt.IY)({environment:d,textValue:t.message.value?{value:t.message.value,spaceId:t.space_id}:void 0,parentStore:i,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disabled:!1,theme:n,emojiType:p,katex:h,parentBlockId:void 0,renderedPageBlockId:void 0,formulaValueTypes:[],stopLinkPropagation:!0})})),[d,p,h,n,t.message.value,i,t.space_id]),f=(0,m.yK)((e=>({oldContainer:{paddingInlineStart:r?36:(0,Me.c3)({source:s,isMobile:c})+4,paddingBlock:4},messageContainer:{position:"relative",display:"flex",justifyContent:"space-between",alignItems:"center"},clampedMessageContainer:{display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:r?void 0:zi,verticalAlign:"top",textAlign:"left",lineHeight:S.Z.lineHeight.UIRegular.desktop,...S.Z.textOverflowStyle},messageContent:{whiteSpace:"pre-wrap",wordBreak:"break-word",fontSize:Ce.cF,lineHeight:(0,ot.Dp)({device:l},"UIRegular"),paddingInlineEnd:8}})),[c,s,l,r]);return(0,K.jsx)(K.Fragment,{children:(0,K.jsx)("div",{style:{...!o&&f.oldContainer,...f.messageContainer},children:(0,K.jsx)("div",{ref:a,style:f.clampedMessageContainer,children:(0,K.jsx)("div",{style:f.messageContent,children:v})})})})}function qi(e){const{edits:t,rootStore:i,spaceId:s,environment:r,closeViewAllMenu:a,shortened:n}=e,d=(0,x.useIntl)(),l=new Set(t.map((e=>e.automation_id))),c=1===l.size,u=t[0],m=(0,g.VK)((()=>!I.Mz.createChildStore(i,{table:Ai.cv,id:u.automation_id,spaceId:i.getSpaceId()}).getAlive()),[i,u]);const h=(0,o.useCallback)((()=>{const e=t[0].automation_navigable_block_id,o=t[0].automation_id,s=I.G.createChildStore(i,{table:v.iU,id:e});if(!s||m)return;a&&a();const n=(0,ki.ZP)({store:s,preferPublicLink:!1,pageVisitSource:Ze.tY.Notification});Ri.c4({environment:r,url:n,callback:async()=>{await Mi.default.afterNextFlush();const e=await async function(e,t){const i=Date.now(),o=async()=>{const s=e();return void 0!==s?s:Date.now()-i>=t?void 0:(await(0,Ci.Vs)(10),await o())};return await o()}((()=>(0,wi.fm)(s)),2e3);if(!e)return;const t=e.settingsStore;t&&(Ii.r$({collectionContextStore:e,collectionSettingsStore:t}),c?Ii.wl({collectionSettingsStore:t,item:{type:"automationEditSettings",automationId:o}}):Ii.wl({collectionSettingsStore:t,item:{type:"automationSettings",source:"collection_view_settings"}}))}})}),[r,c,t,i,m,a]),p=(0,g.VK)((()=>[...new Set(t.map((e=>e.automation_id)))].map((e=>i.getRecordStore(i,{table:Ai.cv,id:e,spaceId:s}).getNameWithDefault(d)))),[t,d,i,s]);return n?(0,K.jsx)(Ei,{handleAutomationNavigate:h,automationNames:p,isDeleted:m,numAutomations:l.size}):(0,K.jsx)(x.FormattedMessage,{id:"inAppNotificationAutomationActionTriggeredActivity.formattedHeaderMessage.automationTitle",defaultMessage:"{automationNameWrappedHeader} sent you a notification",values:{automationNameWrappedHeader:(0,K.jsx)(Ei,{handleAutomationNavigate:h,automationNames:p,isDeleted:m,numAutomations:l.size})}})}function Ei(e){const{automationNames:t,isDeleted:i,handleAutomationNavigate:o,numAutomations:s}=e,r=(0,x.useIntl)(),a=s>1,n=t[0];let d=r.formatList(t.slice(0,2),{style:"narrow",type:"conjunction"});return t.length>2&&(d+="..."),(0,K.jsx)(Oi.ZP,{renderTooltip:e=>a?(0,K.jsx)("div",{...e,children:d}):i?(0,K.jsx)("div",{...e,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"This automation was deleted",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.deletedAutomationTooltip"})}):(0,K.jsx)("div",{...e,children:(0,K.jsx)(x.FormattedMessage,{...e,defaultMessage:"View automation",id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.viewAutomationTooltip",description:"The tooltip when hovering over an automation."})}),render:e=>(0,K.jsx)(nt.Z,{style:{display:"inline-flex"},...e,onClick:()=>{i||o()},children:(0,K.jsx)("b",{children:(0,K.jsx)(x.FormattedMessage,{...e,defaultMessage:"{numAutomations, plural, one {{firstAutomationName}} other {{numAutomations} automations}}",values:{firstAutomationName:n,numAutomations:s},id:"inAppNotificationAutomationActionTriggeredActivity.wrappedAutomationName.automationName",description:"The display name for an automation."})})})})}function Ni(e){const{useInboxRedesign:t}=e,i=(0,m.yK)((e=>({icon:{height:12,width:12,fill:e.icon.secondary}})),[]);return t?(0,K.jsx)(Ce.hn,{children:(0,ji.K)(i.icon)}):(0,K.jsx)(ye.jr,{})}const Hi=function(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{tab:n,notification:d}=o,l=(0,u.O7)(),m=(0,g.VK)((()=>t.getEdits()),[t]),h=(0,g.VK)((()=>(0,c.P6)({edits:m,rootStore:i})),[m,i]),p=(0,g.VK)((()=>(0,c.XW)(h,{...(0,C.h_)({environment:l,useInboxRedesign:a})})),[h,a,l]),f=(0,g.VK)((()=>{const e=I.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id});if(e.isDefined())return e}),[t,i]),b=(0,g.VK)((()=>Boolean(f&&(0,c.jC)({recordId:f.id,recordType:v.iU,tab:n,rootStore:i,environment:l}))),[f,n,i,l]),S=(0,g.VK)((()=>parseInt(t.end_time)),[t]),M=m[0],j=(0,g.VK)((()=>(0,c.N8)(M.from_user_id,i)),[M,i]),R=(0,g.VK)((()=>(0,c.N8)(M.to_user_id,i)),[M,i]);if(!(m.length>0&&j&&R&&f))return null;const w=(0,T.$4)(A.default.getIntl(),(0,T.LU)({table:y.KJ,value:j})),k=(0,K.jsx)(je.Z,{titledRecordStore:f,activity:t,tabArgs:o,getRecordModel:i.getRecordModel});return a?(0,K.jsx)(Ce.ZP,{timestamp:S,header:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{authorPhrase} transferred {fromUserName}{fromUserNameEndsWithS, select, true {â€™} other {â€™s}} private pages to you",values:{authorPhrase:p,fromUserName:w,fromUserNameEndsWithS:"s"===w.slice(-1).toLowerCase()},id:"activity.privateContentTransferred.standardizedHeader.short"}),prominentTitleLink:k,isPrivate:b,rootStore:i,notification:o.notification,isFirst:s,isLast:r,icon:(0,K.jsx)(ye.BE,{authors:h,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,xe.JJ)({notification:d,activity:t,environment:l,tab:n})}):(0,K.jsx)(Ae.Z,{timestamp:S,header:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{authorPhrase} transferred private content from {fromUserName} to you",values:{authorPhrase:p,fromUserName:w},id:"activity.privateContentTransferred.standardizedHeader"}),isLast:r,prominentTitleLink:k,isPrivate:b,rootStore:i,notification:o.notification,icon:(0,K.jsx)(ye.BE,{authors:h,size:24}),showSnapshotButton:!1,showRecordPath:!1,...(0,xe.h9)({notification:d,activity:t,environment:l,tab:n})})};var Wi=i(36700);function Gi(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{notification:n,tab:d,source:l}=o,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h.length>0,f=I.G.createChildStore(i,{table:v.iU,id:h[0].navigable_block_id}),b=(0,g.VK)((()=>f.isDefined()),[f]),y=(0,g.VK)((()=>{const e=I.G.createChildStore(i,{table:v.iU,id:t.reminder_block_id}).getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ze.tY.Notification})}),[t,i]),S=(0,g.VK)((()=>(0,c.jC)({recordId:f.id,recordType:v.iU,tab:d,rootStore:i,environment:m})),[f,d,i,m]),M=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!p||!b||!y)return null;const j=m.device.isMobile,A=(0,K.jsx)(je.Z,{titledRecordStore:f,getRecordModel:i.getRecordModel,activity:t,tabArgs:o});return a?(0,K.jsx)(Ce.ZP,{timestamp:M,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You have a reminder",id:"activity.reminderInActivity.header.short"})}),isFirst:s,isLast:r,isPrivate:S,rootStore:i,navigableBlockId:f.id,notification:n,icon:(0,K.jsx)(Yi,{}),showSnapshotButton:!1,url:y,...(0,xe.JJ)({notification:n,activity:t,environment:m,tab:d}),children:(0,K.jsx)(Ee.Z,{edit:h[0],rootStore:i})}):(0,K.jsx)(Ae.Z,{timestamp:M,header:(0,K.jsx)("span",{children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Reminder in {pageTitle}",id:"activity.reminderInActivity.header",values:{pageTitle:A}})}),isLast:r,isPrivate:S,rootStore:i,navigableBlockId:f.id,showRecordPath:!0,notification:n,icon:(0,K.jsx)(ye.hZ,{}),showSnapshotButton:!1,...(0,xe.h9)({notification:n,activity:t,environment:m,tab:d}),children:(0,K.jsx)(qe.Z,{href:y,onClick:()=>(0,xe.dG)({environment:m,activity:t,...o}),innerStyle:(0,Me.OD)({source:l,isMobile:j}),children:(0,K.jsx)(Ee.Z,{edit:h[0],rootStore:i})})})}function Yi(){const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,K.jsx)(Ce.hn,{children:(0,Wi.m)(e.icon)})}function Ji(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{notification:n,tab:d}=o,l=(0,u.O7)(),m=(0,g.VK)((()=>t.getEdits()),[t]),h=m.length>0,p=(0,g.VK)((()=>(0,c.P6)({edits:m,rootStore:i})),[m,i]),v=(0,g.VK)((()=>(0,c.XW)(p,{...(0,C.h_)({environment:l,useInboxRedesign:a})})),[p,a,l]),f=m[0],y=I.zX.createChildStore(i,{table:b.e0,id:f.team_id}),S=(0,g.VK)((()=>y.isDefined()),[y]),M=(0,g.VK)((()=>parseInt(t.end_time)),[t]);return h&&S?a?(0,K.jsx)(Ce.ZP,{timestamp:M,header:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:p.length,authorOrAuthors:v},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),isFirst:s,isLast:r,isPrivate:!1,rootStore:i,notification:n,icon:(0,K.jsx)(ye.BE,{authors:p,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:void 0,...(0,xe.JJ)({notification:n,activity:t,environment:l,tab:d}),children:(0,K.jsx)(bi,{titledRecordStore:y,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!0})}):(0,K.jsx)(Ae.Z,{timestamp:M,header:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a teamspace} other {{authorOrAuthors} invited you to a teamspace}}",values:{numberOfAuthors:p.length,authorOrAuthors:v},id:"activity.userInvitedToTeamActivity.standardizedHeader"}),prominentTitleLink:(0,K.jsx)(bi,{titledRecordStore:y,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!1}),isLast:r,isPrivate:!1,rootStore:i,notification:n,showRecordPath:!1,icon:(0,K.jsx)(ye.BE,{authors:p,size:24}),showSnapshotButton:!1,...(0,xe.h9)({notification:n,activity:t,environment:l,tab:d})}):null}var Xi=i(55061),$i=i(84683),Qi=i(94044),eo=i(19584),to=i(36081);function io(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{notification:n,tab:l}=o,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h[0],v=no({rootStore:i,edit:p}),f=function(e){let{data:t,spaceId:i,tab:o,rootStore:s}=e;const r=(0,u.O7)();return(0,g.VK)((()=>{let e,a;if(!t)return!1;if("block"===(null==t?void 0:t.type))e=t.block.id,a="block";else if("space"===(null==t?void 0:t.type)||"group"===(null==t?void 0:t.type)){if(!i)return!1;e=i,a="space"}else(0,d.t1)(t);return(0,c.jC)({recordId:e,recordType:a,tab:o,rootStore:s,environment:r})}),[t,r,s,i,o])}({data:v,spaceId:p.space_id,tab:l,rootStore:i}),b=(0,g.VK)((()=>(0,c.P6)({edits:h,rootStore:i})),[h,i]),y=(0,g.VK)((()=>{if("block"!==(null==v?void 0:v.type))return;return v.block}),[v]),x=(0,g.VK)((()=>{if(!y)return;const e=y.getModel();return e?e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ze.tY.Notification}):void 0}),[y,i.getRecordModel]),S=(0,g.VK)((()=>parseInt(t.end_time)),[t]),M=(0,g.VK)((()=>t.navigable_block_id),[t]);if(0===h.length||!v)return null;const j=0===b.filter(T.uC).length,A=j?void 0:a?(0,K.jsx)(ye.BE,{authors:b,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}):(0,K.jsx)(ye.BE,{authors:b,size:24});return a?(0,K.jsxs)(Ce.ZP,{timestamp:S,header:(0,K.jsx)("span",{children:(0,K.jsx)(ro,{data:v,authors:b,isFromBot:j,spaceId:p.space_id})}),isFirst:s,isLast:r,isPrivate:f,rootStore:i,navigableBlockId:M,notification:n,icon:A,showSnapshotButton:!1,url:x,...(0,xe.JJ)({notification:n,environment:m,tab:l,activity:t}),children:[(0,K.jsx)(oo,{data:v,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!0}),(0,K.jsx)(ao,{...e,edit:p})]}):(0,K.jsx)(Ae.Z,{timestamp:S,header:(0,K.jsx)("span",{children:(0,K.jsx)(so,{data:v,authors:b,isFromBot:j,spaceId:p.space_id})}),prominentTitleLink:(0,K.jsx)(oo,{data:v,rootStore:i,activity:t,tabArgs:o,useInboxRedesign:!1}),isLast:r,isPrivate:f,rootStore:i,navigableBlockId:M,showRecordPath:!1,notification:n,icon:A,showSnapshotButton:!1,...(0,xe.h9)({notification:n,environment:m,tab:l,activity:t}),children:(0,K.jsx)(ao,{...e,edit:p})})}function oo(e){var t;let{data:i,rootStore:o,activity:s,tabArgs:r,useInboxRedesign:a}=e;const n=(0,m.yK)((e=>({group:{color:e.mediumTextColor,fontSize:14}})),[]);switch(i.type){case"block":return(0,K.jsx)(bi,{tabArgs:r,titledRecordStore:i.block,rootStore:o,activity:s,useInboxRedesign:a,stopPropagation:!0});case"group":return a?(0,K.jsx)("div",{style:n.group,children:(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You will now get notifications when @{groupName} is mentioned",id:"activity.userInvitedActivity.groupInviteExplanation",values:{groupName:null===(t=i.group)||void 0===t?void 0:t.name}})}):null;case"space":return(0,K.jsx)(bi,{tabArgs:r,titledRecordStore:i.space,rootStore:o,activity:s,useInboxRedesign:a,stopPropagation:!0});default:(0,d.t1)(i)}}function so(e){let{data:t,authors:i,isFromBot:o,spaceId:s}=e;const r=(0,g.VK)((()=>(0,c.XW)(i)),[i]),a=(0,g.VK)((()=>{var e;return"block"===t.type?null===(e=t.block.getAssociatedCollectionStore())||void 0===e?void 0:e.getDatabaseType():void 0}),[t]);switch(t.type){case"block":if(o)switch(a){case Ye.wW:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a project",id:"activity.userInvitedActivityProjectByBot.standardizedHeader"});case Ye.iS:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a task",id:"activity.userInvitedActivityTaskByBot.standardizedHeader"});case Ye.zU:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a document",id:"activity.userInvitedActivityDocByBot.standardizedHeader"});case Ye.Fi:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a meeting",id:"activity.userInvitedActivityMeetingByBot.standardizedHeader"});case Ye.p$:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a sprint",id:"activity.userInvitedActivitySprintByBot.standardizedHeader"});case Ye.GZ:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a wiki",id:"activity.userInvitedActivityWikiByBot.standardizedHeader"});default:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a page",id:"activity.userInvitedActivityNavigableBlockByBot.standardizedHeader"})}else switch(a){case Ye.wW:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a project} other {{authorOrAuthors} added you to a project}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityProject.standardizedHeader"});case Ye.iS:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a task} other {{authorOrAuthors} added you to a task}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityTask.standardizedHeader"});case Ye.zU:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a document} other {{authorOrAuthors} added you to a document}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityDoc.standardizedHeader"});case Ye.Fi:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a meeting} other {{authorOrAuthors} added you to a meeting}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityMeeting.standardizedHeader"});case Ye.p$:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a sprint} other {{authorOrAuthors} added you to a sprint}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivitySprint.standardizedHeader"});case Ye.GZ:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a wiki} other {{authorOrAuthors} added you to a wiki}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityWiki.standardizedHeader"});default:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a page} other {{authorOrAuthors} added you to a page}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityNavigableBlock.standardizedHeader"})}case"group":const e=(0,K.jsx)(to.Z,{permissionGroup:t.group,spaceId:s});return o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to group {groupName}",values:{groupName:e},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to group {groupName}} other {{authorOrAuthors} added you to group {groupName}}}",values:{numberOfAuthors:i.length,authorOrAuthors:r,groupName:e},id:"activity.userInvitedActivityGroupId.standardizedHeader"});case"space":return o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to a workspace} other {{authorOrAuthors} added you to a workspace}}",values:{numberOfAuthors:i.length,authorOrAuthors:r},id:"activity.userInvitedActivityOtherInvite.standardizedHeader"});default:(0,d.t1)(t)}}function ro(e){var t,i;let{data:o,authors:s,isFromBot:r,spaceId:a}=e;const n=(0,u.O7)(),l=(0,g.VK)((()=>(0,c.XW)(s,{...(0,C.h_)({environment:n,useInboxRedesign:!0})})),[s,n]),m=(0,g.VK)((()=>{var e;return"block"===o.type?null===(e=o.block.getAssociatedCollectionStore())||void 0===e?void 0:e.getDatabaseType():void 0}),[o]);switch(o.type){case"block":if(r)switch(m){case Ye.wW:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a project",id:"activity.userInvitedActivityProjectByBot.standardizedHeader.redesign"});case Ye.iS:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a task",id:"activity.userInvitedActivityTaskByBot.standardizedHeader.redesign"});case Ye.zU:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a document",id:"activity.userInvitedActivityDocByBot.standardizedHeader.redesign"});case Ye.Fi:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a meeting",id:"activity.userInvitedActivityMeetingByBot.standardizedHeader.redesign"});case Ye.p$:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a sprint",id:"activity.userInvitedActivitySprintByBot.standardizedHeader.redesign"});case Ye.GZ:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a wiki",id:"activity.userInvitedActivityWikiByBot.standardizedHeader.redesign"});default:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a page",id:"activity.userInvitedActivityNavigableBlockByBot.standardizedHeader.redesign"})}else switch(m){case Ye.wW:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a project} other {{authorOrAuthors} invited you to a project}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityProject.standardizedHeader.redesign"});case Ye.iS:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a task} other {{authorOrAuthors} invited you to a task}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityTask.standardizedHeader.redesign"});case Ye.zU:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a document} other {{authorOrAuthors} invited you to a document}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityDoc.standardizedHeader.redesign"});case Ye.Fi:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a meeting} other {{authorOrAuthors} invited you to a meeting}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityMeeting.standardizedHeader.redesign"});case Ye.p$:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a sprint} other {{authorOrAuthors} invited you to a sprint}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivitySprint.standardizedHeader.redesign"});case Ye.GZ:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a wiki} other {{authorOrAuthors} invited you to a wiki}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityWiki.standardizedHeader.redesign"});default:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a page} other {{authorOrAuthors} invited you to a page}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityNavigableBlock.standardizedHeader.redesign"})}case"group":return r?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were added to @{groupName}",values:{groupName:null===(t=o.group)||void 0===t?void 0:t.name},id:"activity.userInvitedActivityGroupIdByBot.standardizedHeader.redesign"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} added you to @{groupName}} other {{authorOrAuthors} added you to @{groupName}}}",values:{numberOfAuthors:s.length,authorOrAuthors:l,groupName:null===(i=o.group)||void 0===i?void 0:i.name},id:"activity.userInvitedActivityGroupId.standardizedHeader.redesign"});case"space":return r?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"You were invited to a workspace",id:"activity.userInvitedActivityOtherInviteByBot.standardizedHeader.redesign"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} invited you to a workspace} other {{authorOrAuthors} invited you to a workspace}}",values:{numberOfAuthors:s.length,authorOrAuthors:l},id:"activity.userInvitedActivityOtherInvite.standardizedHeader.redesign"});default:(0,d.t1)(o)}}function ao(e){let{edit:t,activity:i,rootStore:o,tabArgs:s,useInboxRedesign:r}=e;const a=(0,u.O7)(),{isMobile:n}=a.device,{source:d}=s,l=(0,m.yK)((()=>({redesignedInviteMessage:{fontSize:14,paddingTop:8,paddingBottom:8},inviteMessage:{paddingLeft:(0,Me.c3)({source:d,isMobile:n}),paddingTop:8,paddingBottom:8,paddingRight:12,fontSize:14}})),[n,d]),c=no({rootStore:o,edit:t}),h=(0,g.VK)((()=>parseInt(i.end_time)),[i]),p=(0,g.VK)((()=>{if("block"!==(null==c?void 0:c.type))return;const e=c.block;return null!=e&&e.isDefined()?e.getModel():void 0}),[c]),v=(0,g.VK)((()=>{if(p)return(0,xe.ME)(p.getRenderUrl({getRecordModel:o.getRecordModel,pageVisitSource:Ze.tY.Notification}))}),[p,o.getRecordModel]),f=(0,g.VK)((()=>{if(!p)return{isValid:!1};const e=p&&(0,Qi.$e)(p,i);if(!e)return{isValid:!1};const t=o.getRecordModel({table:$i.Tu,id:e,spaceId:i.space_id});return t&&t.getMessage()&&t.getCreatedTime()<=h+5*eo.hM?{isValid:!0,message:t.getMessage()}:{isValid:!1}}),[i,h,p,o]);return null!=f&&f.isValid?r?(0,K.jsx)("div",{style:l.redesignedInviteMessage,children:f.message}):(0,K.jsx)(qe.Z,{href:v,onClick:()=>(0,xe.dG)({...s,environment:a,activity:i,mightCloseTab:!0}),innerStyle:l.inviteMessage,children:f.message}):null}function no(e){let{rootStore:t,edit:i}=e;return(0,g.VK)((()=>{if(i)return i.navigable_block_id?{type:"block",block:I.G.createChildStore(t,{table:v.iU,id:i.navigable_block_id})}:i.permission_group_id?{type:"group",group:(0,Xi.Bg)({spaceId:i.space_id,permissionGroupId:i.permission_group_id,getRecordValue:t.getRecordValue})}:{type:"space",space:I.H2.createChildStore(t,{table:f.bx,id:i.space_id})}}),[i,t])}const lo=o.memo(io);var co=i(70921);function uo(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{source:n,tab:d,notification:l}=o,m=(0,u.O7)(),h=(0,g.VK)((()=>t.getEdits()),[t]),p=h.length>0,f=h[0],b=I.G.createChildStore(i,{table:v.iU,id:f.navigable_block_id}),y=(0,g.VK)((()=>b.isDefined()),[b]),S=(0,g.VK)((()=>I.WJ.createChildStore(i,{table:co.TY,id:t.id,spaceId:t.space_id}).getStandardizedMentionedPropertyURI()),[t,i]),M=(0,g.VK)((()=>{const e=I.G.createChildStore(i,{table:v.iU,id:t.mentioned_block_id}).getModel();return null==e?void 0:e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ze.tY.Notification})}),[t,i]),j=(0,g.VK)((()=>(0,c.P6)({edits:h,rootStore:i})),[h,i]),A=(0,g.VK)((()=>(0,c.XW)(j,{...(0,C.h_)({environment:m,useInboxRedesign:a})})),[j,a,m]),R=(0,g.VK)((()=>(0,c.jC)({recordId:b.id,recordType:"block",tab:d,rootStore:i,environment:m})),[b,d,i,m]),w=(0,g.VK)((()=>parseInt(t.end_time)),[t]);if(!p||!y||!M)return null;const k=m.device.isMobile,B=(0,K.jsx)(je.Z,{titledRecordStore:b,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),_=function(e,t,i,o){switch(e){case Ye.Es.Assign:return(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} assigned you a task} other {{authorOrAuthors} assigned you a task}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionTaskActivity.standardizedHeader"});case Ye.zI.People:return o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you} other {{authorOrAuthors} mentioned you}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionProjectActivity.standardizedHeader.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in a project} other {{authorOrAuthors} mentioned you in a project}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionProjectActivity.standardizedHeader"});default:return o?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you} other {{authorOrAuthors} mentioned you}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionActivity.standardizedHeader.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} mentioned you in a page} other {{authorOrAuthors} mentioned you in a page}}",values:{numberOfAuthors:i.length,authorOrAuthors:t},id:"activity.mentionActivity.standardizedHeader"})}}(S,A,j,a);return a?(0,K.jsx)(Ce.ZP,{timestamp:w,header:(0,K.jsx)("span",{children:_}),isFirst:s,isLast:r,isPrivate:R,rootStore:i,navigableBlockId:b.id,notification:l,icon:(0,K.jsx)(ye.BE,{authors:j,size:Ce.IX,style:{marginTop:0,marginRight:0},showAvatarShadow:!1}),showSnapshotButton:!1,url:M,...(0,xe.JJ)({notification:l,activity:t,environment:m,tab:d}),children:(0,K.jsx)(Ee.Z,{edit:f,rootStore:i,highlightCurrentUser:!0,highlightCurrentUserStyle:"text_only"})}):(0,K.jsxs)(Ae.Z,{timestamp:w,header:(0,K.jsx)("span",{children:_}),isLast:r,isPrivate:R,rootStore:i,navigableBlockId:b.id,prominentTitleLink:B,notification:l,icon:(0,K.jsx)(ye.BE,{authors:j,size:24}),showRecordPath:!0,showSnapshotButton:!1,...(0,xe.h9)({notification:l,activity:t,environment:m,tab:d}),children:[(0,K.jsx)(qe.Z,{href:M,onClick:()=>(0,xe.dG)({environment:m,activity:t,...o}),innerStyle:(0,Me.OD)({source:n,isMobile:k}),children:(0,K.jsx)(Ee.Z,{edit:f,rootStore:i,highlightCurrentUser:!0})}),(0,K.jsx)(Se.Z,{tabArgs:o,activity:t,isMobile:k,environment:m,rootStore:i})]})}var go=i(80951),mo=i(94308),ho=i(6287),po=i(16402);function vo(e){const{activity:t,rootStore:i,tabArgs:o,isFirst:s,isLast:r,useInboxRedesign:a}=e,{tab:n,source:d,notification:l}=o,h=(0,u.O7)(),p=h.device.isMobile,f=(0,g.VK)((()=>I.G.createChildStore(i,{table:v.iU,id:t.navigable_block_id})),[t,i]),b=(0,g.VK)((()=>f.isDefined()),[f]),y=(0,g.VK)((()=>{const e=f.getModel();if(e)return e.getRenderUrl({getRecordModel:i.getRecordModel,pageVisitSource:Ze.tY.Notification})}),[f,i]),S=(0,g.VK)((()=>I.NW.createChildStore(i,{table:ho.vF,id:t.collection_id,spaceId:t.space_id})),[t,i]),M=(0,g.VK)((()=>S.isDefined()),[S]),j=(0,g.VK)((()=>{const e=S.getSchema(),t=Object.keys(e).find((t=>{var i;return"verification"===(null===(i=e[t])||void 0===i?void 0:i.type)}));let o=(0,K.jsx)(x.FormattedMessage,{id:"Activity.author.unknown",defaultMessage:"Unknown"});if(t){const e=f.getPropertyValue(t),s=go._w(e);if(s){const e=s[0],t=(0,c.uA)(e,i);t&&t.asActor&&(o=(0,c.XW)([t],{...(0,C.h_)({environment:h,useInboxRedesign:a})}))}}return o}),[f,S,i,a,h]),A=(0,g.VK)((()=>(0,c.jC)({recordId:f.id,recordType:"block",tab:n,rootStore:i,environment:h})),[f,n,i,h]),{activityStartTimestamp:R,activityEndTimestamp:w}=(0,g.VK)((()=>({activityStartTimestamp:parseInt(t.start_time),activityEndTimestamp:parseInt(t.end_time)})),[t]),k=(0,m.yK)((e=>({verificationMessage:{fontSize:14,...!a&&(0,Me.OD)({source:d,isMobile:p}),...a&&{color:e.mediumTextColor}}})),[p,d,a]);if(!b||!M)return null;const B=(0,K.jsx)(je.Z,{titledRecordStore:f,getRecordModel:i.getRecordModel,activity:t,tabArgs:o}),_=a?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Your wiki is no longer valid",id:"activity.verificationExpired.header.short"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Verification expired for <boldtext>{pageTitle}</boldtext>",values:{pageTitle:B,boldtext:e=>(0,K.jsx)("span",{style:{fontWeight:500},children:e})},id:"activity.verificationExpired.header"}),V=(0,K.jsx)("div",{style:k.verificationMessage,children:R&&w?(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Last verified by {person} from {startDate} to {endDate}",values:{person:j,startDate:(0,po.gs)(R),endDate:(0,po.gs)(w)},id:"activity.verificationExpired.contentWithTimestamp"}):(0,K.jsx)(x.FormattedMessage,{defaultMessage:"Last verified by {person}",values:{person:j},id:"activity.verificationExpired.contentWithoutTimestamp"})});return a?(0,K.jsx)(Ce.ZP,{timestamp:w,header:_,isFirst:s,isLast:r,isPrivate:A,rootStore:S,navigableBlockId:f.id,notification:l,icon:(0,K.jsx)(fo,{}),showSnapshotButton:!1,url:y,...(0,xe.JJ)({notification:l,activity:t,environment:h,tab:n}),children:V}):(0,K.jsxs)(Ae.Z,{timestamp:w,header:_,isLast:r,isPrivate:A,rootStore:S,navigableBlockId:f.id,notification:l,icon:(0,K.jsx)(ye.of,{}),showRecordPath:!0,showSnapshotButton:!1,...(0,xe.h9)({notification:l,activity:t,environment:h,tab:n}),children:[V,(0,K.jsx)(Se.Z,{tabArgs:o,activity:t,isMobile:h.device.isMobile,environment:h,rootStore:i})]})}function fo(){const e=(0,m.yK)((e=>({icon:{height:16,width:16,fill:e.icon.secondary}})),[]);return(0,K.jsx)(Ce.hn,{children:(0,mo.f)(e.icon)})}class bo extends s.Z{UNSAFE_willMountOrUpdate(){!function(e,t){if("commented"===e.type){const o=function(e,t){return t.getRecordStore(t,e)}({table:n.qF,id:e.discussion_id,spaceId:e.space_id},t);if(o.isDefined()){const e=o.getCommentStores();for(const t of e){var i;null===(i=t.getCreatedByStore())||void 0===i||i.load()}}}}(this.props.activity,this.props.rootStore),this.environment.KatexStore.loadIfNeeded((()=>function(e,t){const i=(0,c.cr)({activity:e,rootStore:t});if(!i)return;return i.context}(this.props.activity,this.props.rootStore)))}renderComponent(){const{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n}=this.props,c=e.type;if(!r.n_(c))return a.log({level:"error",from:"ActivityNotification",type:"unsupportedActivityType",data:{message:`Activity type ${c} is not supported for ActivityNotification`}}),null;switch(c){case"block-property-edited":return(0,K.jsx)(He,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"user-mentioned":return(0,K.jsx)(uo,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"commented":const r=(0,l.B7)(this.environment);return"time_grouping"===r?(0,K.jsx)($t,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s}):"comment_page_time_grouping"===r?(0,K.jsx)(Zt,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s}):n?(0,K.jsx)(St,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s}):(0,K.jsx)(Ge.lw,{activity:e,tabArgs:i,rootStore:t,isFirst:o,isLast:s});case"user-invited":return(0,K.jsx)(lo,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"reminder":return(0,K.jsx)(Gi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"email-edited":return(0,K.jsx)(Qt,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"access-requested":return(0,K.jsx)(Fe,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"access-request-resolved":return(0,K.jsx)(Le,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"team-membership-edited":return(0,K.jsx)(Ji,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"private-content-transferred":return(0,K.jsx)(Hi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"permission-group-mentioned":return(0,K.jsx)(ai,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"verification-expired":return(0,K.jsx)(vo,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"export-completed":return(0,K.jsx)(ii,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"import-completed":return(0,K.jsx)(yi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});case"in-app-notification-automation-action-triggered":return(0,K.jsx)(Pi,{activity:e,rootStore:t,tabArgs:i,isFirst:o,isLast:s,useInboxRedesign:n});default:(0,d.t1)(c)}}}bo.displayName="ActivityNotification";const yo=bo},99376:(e,t,i)=>{i.d(t,{Z:()=>V,h:()=>_});var o=i(67294),s=i(480),r=i(86628),a=i(24405),n=i(69651),d=i(8504),l=i(21202),c=i(17659),u=i(37834),g=i(13447),m=i(43250),h=i(12534),p=i(33929),v=i(16402),f=i(6258),b=i(4761),y=i(73063),x=i(86176),S=i(26388),M=i(67706),j=i(30573),A=i(32469),C=i(93963),I=i(85893);const R=16,w=12;function k(e){const[t,i]=(0,o.useState)(!1),[n,d]=(0,o.useState)(!1),{notification:l,prominentTitleLink:u,children:p,rootStore:v,icon:f,isPrivate:y,isLast:x,onBacklinkClicked:S,onArchiveClicked:M,onUnarchiveClicked:j,onNotificationFrameClicked:k,onMarkAsReadClicked:V,onMarkAsUnreadClicked:T,showRecordPath:F,navigableBlockId:O,showSnapshotButton:P,timestamp:L,header:Z}=e,D=(0,s.O7)(),z=(0,r.VK)((()=>"mentions"===b.ZP.state.currentTab),[]),U=!l||l.read,q=D.device.isMobile,E=Boolean(U&&z&&!P&&l),N=(0,r.VK)((()=>{const e=D.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[D.WindowSizeStore]),H=(0,a.yK)((e=>({container:{paddingTop:w,paddingBottom:p?12:8,paddingLeft:q?N.left:0,paddingRight:q?N.right:0,...E&&{opacity:.7}},headerAndAvatar:{display:"flex",paddingLeft:R,paddingRight:R},avatarAndStatusDot:{display:"flex",alignItems:"flex-start",position:"relative"},statusDot:{position:"absolute",opacity:1,left:-7,top:10},statusDotWrapper:{marginRight:q?3:2},privatePageBadge:{marginTop:1,marginBottom:4,marginLeft:8},divider:{borderBottom:`1px solid ${e.regularDividerColor}`}})),[p,N,q,E]),W=(0,o.useCallback)((e=>{l&&!l.read&&(n||(0,h.ZP)({event:e,context:h.Af.NotificationClick,callback:()=>{k(),g.createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:D,perform:e=>{c.$h({notification:l,rootStore:v,transaction:e,read:!0})}})}}))}),[D,n,l,k,v]),G=(0,o.useCallback)((()=>i(!0)),[]),Y=(0,o.useCallback)((()=>i(!1)),[]),J=(0,o.useId)();return(0,I.jsxs)("article",{onMouseOver:G,onMouseLeave:Y,onClick:W,"aria-labelledby":J,tabIndex:0,children:[(0,I.jsx)(B,{notification:l,rootStore:v,isMobile:q,isHovered:t,isMentionsTab:z,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onArchiveClicked:M,onUnarchiveClicked:j,onMarkAsReadClicked:V,onMarkAsUnreadClicked:T}),(0,I.jsxs)("div",{style:H.container,children:[(0,I.jsxs)("div",{style:H.headerAndAvatar,children:[(0,I.jsxs)("div",{className:m.FoE,style:H.avatarAndStatusDot,children:[(0,I.jsx)("div",{style:{marginRight:4},children:z&&(0,I.jsx)("div",{style:H.statusDotWrapper,children:!U&&(0,I.jsx)(C.z,{style:H.statusDot})})}),f]}),(0,I.jsx)(_,{timestamp:L,header:Z,prominentTitleLink:u,hasChildren:Boolean(p),navigableBlockId:O,rootStore:v,onBacklinkClick:S,showRecordPath:F,titleAriaId:J}),P&&O&&(0,I.jsx)(K,{timestamp:L,navigableBlockId:O,rootStore:v}),y&&!l&&(0,I.jsx)(A.Z,{style:H.privatePageBadge})]}),p&&(0,I.jsx)("div",{className:m.nU_,children:p})]}),!x&&(0,I.jsx)("div",{style:H.divider})]})}function B(e){const{notification:t,rootStore:i,isMobile:o,isHovered:s,isMentionsTab:r,onArchiveClicked:n,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,onMouseEnter:u,onMouseLeave:g}=e,m=(0,a.yK)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative"},body:{transition:"opacity 100ms ease-out",opacity:o||s?1:0,position:"absolute",right:R,top:w,zIndex:1}})),[o,s]);return r&&t?t.visited?null:(0,I.jsx)("div",{style:m.container,onMouseEnter:u,onMouseLeave:g,children:(0,I.jsx)("div",{style:m.body,children:(0,I.jsx)(j.Z,{notification:t,rootStore:i,onArchiveClicked:n,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,useInboxRedesign:!1})})}):null}function _(e){const{timestamp:t,prominentTitleLink:i,header:o,hasChildren:r,navigableBlockId:d,rootStore:c,showRecordPath:u,onBacklinkClick:g,titleAriaId:h}=e,p=(0,v.IS)(t,{useCompactFormat:!0}),b=(0,s.O7)().device.isMobile,y=(0,v.uy)(t),S=(0,a.yK)((e=>({container:{width:"100%"},header:{width:b?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:b?28:void 0,display:"flex",alignItems:"baseline"},flatIndentHeader:{width:b?"calc(100% - 98px)":"100%",fontSize:14,lineHeight:1.4,minWidth:0,minHeight:b?28:void 0,display:"flex",justifyContent:"space-between",alignItems:"baseline"},title:{fontSize:14,marginTop:4,marginBottom:r?8:4},time:{fontSize:12,color:e.lightTextColor,whiteSpace:"nowrap",display:"inline",paddingLeft:6},path:{marginTop:4,marginBottom:4},separatorDot:{fontSize:12,color:e.lightTextColor,marginLeft:4,marginRight:4}})),[r,b]);return(0,I.jsxs)("div",{style:S.container,children:[(0,I.jsx)("div",{style:S.header,children:(0,I.jsxs)("div",{className:m.NFf,children:[(0,I.jsx)("span",{id:h,children:o}),(0,I.jsx)("div",{style:S.time,className:m.CZG,children:(0,I.jsx)(M.Z,{text:p,tooltipText:y,icon:n.C})})]})}),u&&d&&c&&(0,I.jsx)("div",{style:S.path,children:(0,I.jsx)(x.Z,{isLink:!0,store:f.G.createChildStore(c,{table:l.iU,id:d}),onClick:g})}),i&&(0,I.jsx)("div",{style:S.title,children:i})]})}function K(e){const{timestamp:t,navigableBlockId:i,rootStore:o}=e,r=(0,s.O7)();if(t<new Date("2018-10-26").getTime())return null;const a=p.default.getIntl().formatMessage({defaultMessage:"View version for this update",id:"activitySection.viewVersionForUpdate.tooltip"}),n=()=>{const e=f.G.createChildStore(o,{table:l.iU,id:i});u.jN({environment:r,blockStore:e,openSnapshotNearTimestamp:t.toString(),from:"activity"})};return(0,I.jsx)(S.ZP,{renderTooltip:()=>a,render:e=>(0,I.jsx)(y.Z,{ariaLabel:a,onClick:n,icon:d.J,...e})})}const V=o.memo(k)},24636:(e,t,i)=>{i.d(t,{Kg:()=>D,O2:()=>z,lw:()=>U});var o=i(67294),s=i(480),r=i(86628),a=i(24405),n=i(15145),d=i(92996),l=i(21202),c=i(33709),u=i(23867),g=i(70203),m=i(9291),h=i(1898),p=i(37810),v=i(19719),f=i(95306),b=i(60682),y=i(14976),x=i(98165),S=i(77080),M=i(6258),j=i(84076),A=i(62385),C=i(63381),I=i(13658),R=i(74970),w=i(17022),k=i(92559),B=i(90060),_=i(12472),K=i(22649),V=i(78976),T=i(99376),F=i(85893);function O(e){let{activity:t,tabArgs:i,rootStore:d,isLast:u}=e;const g=(0,r.VK)((()=>t.getEdits()),[t]),{source:m,tab:p,notification:v}=i;let b=g.filter((e=>{switch(e.type){case"comment-changed":return!1;case"comment-created":case"comment-deleted":return!0;default:(0,h.t1)(e)}}));0===b.length&&0!==g.length&&"updates_sidebar"!==m&&(b=g);const y=b.length>0,A=(0,s.O7)(),_=(0,r.VK)((()=>{const e=d.getRecordStore(d,{table:c.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,d]),O=(0,r.VK)((()=>{const e=null==_?void 0:_.getParentPointer();if(e)return M.G.createChildStore(d,e)}),[_,d]),Z=(0,r.VK)((()=>Boolean(O&&O.isDefined())),[O]),U=(0,r.VK)((()=>{const e=null==O?void 0:O.getNavigableBlockStore();return(null==e?void 0:e.id)||t.navigable_block_id}),[t,O]),q=M.G.createChildStore(d,{table:l.iU,id:U}),E=(0,r.VK)((()=>q.isDefined()),[q]),N=(0,r.VK)((()=>Boolean(O&&(0,x.fl)((0,x.qA)(O)))),[O]),H=(0,r.VK)((()=>S.default.checkGate("prevent_edits_trash")?q.canComment()&&N:q.canComment()),[N,q]),W=(0,r.VK)((()=>{if(!N||!O)return;const e=O.getModel();return e?e.getRenderUrl({getRecordModel:d.getRecordModel,discussionId:t.discussion_id,pageVisitSource:n.tY.Notification}):void 0}),[N,O,d,t]),G=(0,r.VK)((()=>(0,B.P6)({edits:b,rootStore:d})),[b,d]),Y=(0,r.VK)((()=>(0,B.XW)(G)),[G]),J=N,X=(0,a.yK)((()=>({flex:{display:"flex"}})),[]),$=(0,o.useCallback)((e=>{if((0,w.dG)({...i,environment:A,activity:t,mightCloseTab:J}),!N&&O&&_){var o;const s=e.target;f.oK({environment:A,discussionStore:_,rect:s.getBoundingClientRect(),blockStore:O,discussionLocation:D({forReplyMenu:!0,source:i.source}),activityId:t.id,notificationId:null===(o=i.notification)||void 0===o?void 0:o.id})}}),[t,N,O,_,A,i,J]),Q=(0,o.useCallback)((()=>{(0,w.BE)({...i,environment:A,activity:t,mightCloseTab:J})}),[i,A,t,J]),ee=(0,F.jsx)(V.Z,{titledRecordStore:q,getRecordModel:d.getRecordModel,activity:t,tabArgs:i}),te=(0,r.VK)((()=>(0,B.jC)({recordId:U,recordType:l.iU,tab:p,rootStore:d,environment:A})),[U,p,d,A]),ie=A.device.isMobile,oe=(0,r.VK)((()=>D({source:m,forReplyMenu:!1})),[m]),se=(0,r.VK)((()=>(0,B.cr)({activity:t,rootStore:d})),[t,d]),re=null==se?void 0:se.id,ae=null==se?void 0:se.context,ne=(0,r.VK)((()=>{const e=q.getAssociatedCollectionStore();return null==e?void 0:e.getDatabaseType()}),[q]),de=(0,r.VK)((()=>parseInt(t.end_time)),[t]);if(!(y&&E&&Z&&_))return null;const le=!ae,ce=(0,F.jsxs)("div",{style:X.flex,children:[le&&(0,F.jsx)(k.Z,{}),ee]}),ue=z({authorCount:G.length,authorPhrase:Y,databaseType:ne});return(0,F.jsxs)(T.Z,{timestamp:de,header:(0,F.jsx)("span",{children:ue}),isLast:u,isPrivate:te,rootStore:d,prominentTitleLink:ce,navigableBlockId:U,notification:v,icon:(0,F.jsx)(R.BE,{authors:G,size:24}),showSnapshotButton:!1,showRecordPath:!0,...(0,w.h9)({notification:v,environment:A,tab:p,activity:t}),children:[(0,F.jsx)(P,{discussionId:re,discussionContext:ae,alwaysHighlightWithBlockBar:!0,url:W,onClick:$,rootStore:d,source:m}),(0,F.jsx)(I.Z,{visible:5,items:b.map(((e,t,i)=>(0,F.jsx)(j.Z,{onClick:$,href:W,innerStyle:(0,K.OD)({source:m,isMobile:ie}),children:(0,F.jsx)(C.Z,{edit:e,rootStore:d,type:"comment-edit",discussionLocation:oe,highlightCurrentUser:!0,onReactionClick:Q,hideAuthorName:1===b.length})},t)))}),H&&(0,F.jsx)(L,{activity:t,rootStore:d,tabArgs:i})]})}function P(e){const{url:t,onClick:i,rootStore:o,source:n,discussionId:d,alwaysHighlightWithBlockBar:l,discussionContext:c}=e,u=0===(0,g.llS)(c).length||l,m=(0,s.O7)(),h=m.device.isMobile,v=(0,a.Fg)(),f=(0,a.yK)((e=>({linkbox:{...(0,K.OD)({source:n,isMobile:h}),display:"flex",alignItems:"center",fontSize:14,...u&&{color:e.mediumTextColor},paddingTop:2,paddingBottom:6,marginBottom:0}})),[h,n,u]),x=(0,r.VK)((()=>(0,y.IY)({environment:m,textValue:c?{value:c,spaceId:o.id}:void 0,parentStore:o,disableHover:!0,disableStyleAnnotations:u,disableInsertedDeletedAnnotations:u,disableDateStyleAnnotations:!1,disabled:!0,highlightDiscussionId:d,theme:v,emojiType:(0,b.e_)(m),katex:m.KatexStore.getKatex(),formulaValueTypes:[]})),[o,m,c,d,v,u]);return c?(0,F.jsxs)(j.Z,{href:t,onClick:i,innerStyle:f.linkbox,children:[u&&(0,F.jsx)(k.Z,{}),(0,F.jsx)("div",{style:p.Z.textOverflowStyle,children:x})]}):null}function L(e){const{activity:t,rootStore:i,tabArgs:n}=e,{source:d,notification:g,tab:h}=n,p=(0,r.VK)((()=>{const e=i.getRecordStore(i,{table:c.qF,id:t.discussion_id,spaceId:t.space_id});if(e.isDefined())return e}),[t,i]),b=(0,s.O7)(),y=b.device.isMobile,x=(0,r.VK)((()=>M.t1.createChildStore(i,{table:c.qF,id:t.discussion_id,spaceId:(0,u.C)(i.pointer.spaceId)})),[t,i]),S=(0,r.VK)((()=>null==p?void 0:p.getParentId()),[p]),j=(0,o.useCallback)((e=>{if(!S)return;const o=M.G.createChildStore(i,{table:l.iU,id:S}),s=e.target,r=null==g?void 0:g.id;f.oK({environment:b,discussionStore:x,rect:s.getBoundingClientRect(),blockStore:o,discussionLocation:D({forReplyMenu:!0,source:d}),activityId:t.id,notificationId:r}),"notifications_tab"===d&&v.gY({environment:b,notificationId:r,alreadyRead:Boolean(null==g?void 0:g.read),activity:t,tab:h})}),[t,x,b,g,S,i,d,h]),C=(0,a.yK)((e=>({container:{paddingLeft:(0,K.c3)({source:d,isMobile:y}),paddingTop:12,paddingBottom:4},actionButton:(0,K.b9)(e)})),[y,d]),I=Boolean(null==g?void 0:g.visited);return p?(0,F.jsxs)("div",{style:C.container,children:[(0,F.jsx)(A.Z,{onClick:j,style:C.actionButton,children:(0,F.jsx)(m.FormattedMessage,{defaultMessage:"Reply",id:"activity.replyButton.label"})}),I&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(Z,{}),(0,F.jsx)(_.D,{tabArgs:n,environment:b,rootStore:i,activity:t})]})]}):null}function Z(){return(0,F.jsx)("div",{style:{width:5,display:"inline-block"}})}function D(e){const{forReplyMenu:t,source:i}=e;if("updates_sidebar"===i)return t?"reply_menu_updates_sidebar":"updates_sidebar";return`${t?"reply_menu_":"updates_menu_"}${v.Jn()}`}function z(e){let{databaseType:t,authorCount:i,authorPhrase:o}=e;switch(t){case d.iS:return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a task} other {{authorOrAuthors} commented on a task}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentTaskActivity.standardizedHeader"});case d.wW:return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a project} other {{authorOrAuthors} commented on a project}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentProjectActivity.standardizedHeader"});case d.zU:return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a document} other {{authorOrAuthors} commented on a document}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentDocActivity.standardizedHeader"});case d.GZ:return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a wiki page} other {{authorOrAuthors} commented on a wiki page}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentWikiActivity.standardizedHeader"});case d.Fi:return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a meeting note} other {{authorOrAuthors} commented on a meeting note}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentMeetingActivity.standardizedHeader"});case d.nG:case d.Be:case d.p$:case void 0:return(0,F.jsx)(m.FormattedMessage,{defaultMessage:"{numberOfAuthors, plural, one {{authorOrAuthors} commented on a page} other {{authorOrAuthors} commented on a page}}",values:{numberOfAuthors:i,authorOrAuthors:o},id:"activity.commentActivity.standardizedHeader"});default:(0,h.t1)(t)}}const U=o.memo(O)},57538:(e,t,i)=>{i.d(t,{Z:()=>r});var o=i(57883),s=i(1898);function r(e){switch(e){case"all":return{following:!0,followSettings:(0,o.yI)({explicitly_set_by_user:!0})};case"important":return{following:!0,followSettings:(0,o.GC)({explicitly_set_by_user:!0})};case"comments":return{following:!0,followSettings:(0,o.r$)({explicitly_set_by_user:!0})};case"none":return{following:!1,followSettings:(0,o.vU)({explicitly_set_by_user:!0})};default:(0,s.t1)(e)}}},45325:(e,t,i)=>{i.r(t),i.d(t,{default:()=>r});var o=i(49085);class s extends o.default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const r=new s},87199:(e,t,i)=>{i.d(t,{h:()=>r,k:()=>s});var o=i(9291);const s=(0,o.defineMessages)({paymentMethodUnverified:{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."},otherPaymentMethod:{id:"subscriptions.otherPaymentMethod",defaultMessage:"Other"},adminOnlyAction:{id:"subscriptions.adminOnlyAction",defaultMessage:"Only workspace owners can perform this action."},iosSubscriptionRestriction:{id:"subscriptions.iosSubscriptionRestriction",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."}}),r=(0,o.defineMessages)({trialTitle:{id:"nudges.trial.title",defaultMessage:"Notion for collaboration"},trialDescription:{id:"nudges.trial.description",defaultMessage:"Get 14 days of unlimited content creation with others"},trialCta:{id:"nudges.trial.cta",defaultMessage:"Try it for free"},trialTooltip:{id:"nudges.trial.tooltip",defaultMessage:"Use Notion as much as you want, with as many people as you like. Youâ€™ll receive a reminder when your trial is ending, and can cancel anytime."},approachingBlockLimitTitle:{id:"nudges.approachingBlockLimit.title",defaultMessage:"Upgrade to go unlimited"},approachingBlockLimitDescription:{id:"nudges.approachingBlockLimit.description",defaultMessage:"Continue using Notion to collaborate with others"},approachingBlockLimitCta:{id:"nudges.approachingBlockLimit.cta",defaultMessage:"Upgrade plan"},approachingBlockLimitTooltip:{id:"nudges.approachingBlockLimit.tooltip",defaultMessage:"Youâ€™re reaching the maximum number of free blocks given on your plan ({percent}%). You wonâ€™t be able to create more content unless you upgrade to the Plus plan."},reachedBlockLimitTitle:{id:"nudges.reachedBlockLimit.title",defaultMessage:"Keep using Notion"},reachedBlockLimitDescription:{id:"nudges.reachedBlockLimit.description",defaultMessage:"{spaceName} has used 100% of the free blocks in the workspace"},reachedBlockLimitCta:{id:"nudges.reachedBlockLimit.cta",defaultMessage:"Upgrade plan"},reachedBlockLimitTooltip:{id:"nudges.reachedBlockLimit.tooltip",defaultMessage:"Youâ€™ve reached the maximum number of free blocks for your plan (100%). You wonâ€™t be able to create more content unless you upgrade to the Plus plan."}})},44041:(e,t,i)=>{i.d(t,{y:()=>x});i(67294);var o=i(47425),s=i(9291),r=i(86572),a=i(47307),n=i(33929),d=i(52533),l=i(80444),c=i(92083),u=i(39343),g=i(87199),m=i(70060),h=i(88893),p=i(35057),v=i(88280),f=i(81023),b=i(64891),y=i(85893);async function x(e,t){var i;r.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,p.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,m.XA)(e))return void c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,o.QM)(t.for))return;const x=(0,d.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,d.Y2)({environment:e})?(0,y.jsx)(s.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,y.jsx)(s.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void a.showErrorMessage(t)}if(!x)return}const S=l.default.state.currentSpaceStore;if(!S)return;if(!S.canAdmin())return;await f.bi(e);const M=v.subscriptionDataStoreInstance.state;if(!M)return;if("unsubscribed_admin"!==M.type&&"subscribed_admin"!==M.type)return void(t.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(h.ri(M))return void a.showErrorMessage(n.default.formatMessage(g.k.paymentMethodUnverified));if(h.Q6(M)){const e=(0,y.jsx)(s.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void a.showErrorMessage(e)}if(x)return void(e.mobileNative&&S.id&&e.mobileNative.openUpgradeModal(S.id));if("revenueCat"===(null===(i=M.customerData)||void 0===i?void 0:i.activeSubscriptionPlatform)){const e=(0,y.jsx)(s.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void a.showErrorMessage(e)}const j=h.XX(M);if(t.addOnFeature&&(0,u.Fk)(j)){const e=(0,y.jsx)(s.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});a.showErrorMessage(e)}else{if(j&&h.MM(M))return t.addOnFeature?void b.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:j.interval,pageSection:t.pageSection}):void b.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:j.interval,pageSection:t.pageSection});{const i=(0,m.px)(e,t.for)?"ai_fifty_percent":void 0;f.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:i,isTrial:t.isTrial})}}}},91694:(e,t,i)=>{i.d(t,{Z:()=>p});i(67294);var o=i(480),s=i(86628),r=i(24405),a=i(47425),n=i(9291),d=i(31701),l=i(1898),c=i(37810),u=i(74136),g=i(26388),m=i(44041),h=i(85893);const p=function(e){let{subscriptionTier:t,mobileStyle:i,desktopStyle:p,analyticsName:v,onClick:f}=e;const b=(0,r.Fg)(),y=(0,o.O7)(),{device:x}=y,S=x.isIOS&&x.isNative,M=(0,s.VK)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?d.ZP.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c.Z.fontWeight.medium};default:return{}}}(t,b)),[t,b]);if(S)return null;let j;return"personal"===t?j=(0,h.jsx)(n.FormattedMessage,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,a.eR)(t)?j=(0,h.jsx)(n.FormattedMessage,{defaultMessage:"Plus â†—",id:"upgradeButton.plus.textWithArrow"}):(0,a.NG)(t)?j=(0,h.jsx)(n.FormattedMessage,{defaultMessage:"Business â†—",id:"upgradeButton.business.textWithArrow"}):(0,a.wP)(t)?j=(0,h.jsx)(n.FormattedMessage,{defaultMessage:"Enterprise â†—",id:"upgradeButton.enterprise.textWithArrow"}):(0,l.t1)(t),x.isMobile?(0,h.jsx)(u.Z,{mobileStyle:i,children:j}):(0,h.jsx)(g.ZP,{delayThreshold:120,placement:g.ug.Bottom,renderTooltip:()=>(0,h.jsxs)("div",{style:{maxWidth:500},children:[(0,h.jsx)(n.FormattedMessage,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"}),(0,h.jsx)("br",{}),(0,h.jsx)(n.FormattedMessage,{defaultMessage:"Click to learn more.",id:"upgradeButton.learnMore.tooltip"})]}),originGap:6,render:e=>(0,h.jsx)(u.Z,{desktopStyle:p,innerStyle:M,onClick:e=>function(e,t,i,o,s){m.y(o,{from:t,for:i}),s&&s(e)}(e,v,t,y,f),...e,children:j})})}},49204:(e,t,i)=>{i.d(t,{Id:()=>M,Ng:()=>j,Px:()=>x,ow:()=>S,t_:()=>y,um:()=>b});var o=i(15145),s=i(19889),r=i(9291),a=i(17224),n=i(54642),d=i(9953),l=i(64964),c=i(29974),u=i(13447),g=i(33929),m=i(48779),h=i(80444),p=i(9867),v=i(28517);const f=(0,r.defineMessages)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function b(e){let{environment:t,userId:i,teamStore:o,user:s}=e;const r=o.getSpaceId();if(!r)return;await p.Cj({environment:t,teamId:o.id,spaceId:r,teamMemberInfos:s,isSettingDefaultTeam:!1,inviterId:i})&&(a.UD(t,{store:o,joined_role:"member",from:"team_invite_link"}),await y({environment:t,userId:i,teamStore:o}),l.oV({label:g.default.formatMessage(f.joinTeamSuccessMessage,{teamName:o.getName()})}))}async function y(e){let{environment:t,userId:i,teamStore:s}=e;const r=h.default.state.currentUserRootStore,a=s.getSpaceId();if(!a||!r)return;const n=r.getSpaceViewStores().filter((e=>e.getSpaceId()===a))[0];await c.y3({environment:t,spaceViewStore:n,userSettingsStore:void 0,userRootStore:r,pageVisitSource:o.tY.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await v.I({environment:t,spaceId:a,userId:i}),p.hI({environment:t,teamStore:s,shouldScroll:!0})}async function x(e){let{environment:t,teamId:i,message:o}=e;if(!t.currentUser.id)return;"success"===(await n.requestAccess(t,{type:"current-actor-to-team",teamId:i,message:o})).type?(a.LB(t,{teamId:i}),await M({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{l.oV({label:g.default.formatMessage(f.requestTeamSuccessMessage)})}))):l.oV({label:g.default.formatMessage(f.requestTeamFailureMessage)})}async function S(e){let{environment:t,teamStore:i,accessRequestStore:o,status:r}=e;const n=o.getForActorId();if(!n)return;const l=o.getRecordModel({table:s.KJ,id:n});if(l){if("approved"===r){const e=[{type:"member",entity_type:"user",user_id:l.id}];if(!(await p.Uj({environment:t,teamStore:i,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}u.createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,perform:e=>{d.sW({store:o,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:s.KJ,resolved_by_id:t.currentUser.id,status:r}})}}),a.co(t,{store:i,resolution:r})}}async function M(e){let{environment:t}=e;const{lastVisitedSpaceView:i,userRootStore:s,userSettingsStore:r}=await(0,m.iX)({environment:t,disableRedirectUrl:!1});i?await c.y3({environment:t,spaceViewStore:i,userRootStore:s,userSettingsStore:r,pageVisitSource:o.tY.BackForward,navigationType:"switchingToOrLoadingSpace"}):await c.L5({environment:t,userRootStore:s,userSettingsStore:r,pageVisitSource:o.tY.BackForward})}async function j(e){let{environment:t,teamId:i}=e;const o=await n.getTeamAccessRequestMetadata(t,{teamId:i});if("success"===o.type)return o.data}},39343:(e,t,i)=>{i.d(t,{Fk:()=>n,U6:()=>l,nx:()=>d});var o=i(30120),s=i(13991),r=i(7057),a=i(95477);function n(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=o.ou.now().toSeconds()}function d(e){const t=function(e){if(!n(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=o.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,r.Yx)(t,"long",s.SP):void 0}function l(e){return e?a.default.trials[e.id].duration:a.default.trials.default.duration}},65422:(e,t,i)=>{i.d(t,{K:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("boltFilled",{svg:(0,s.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},13148:(e,t,i)=>{i.d(t,{U:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("close",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},90334:(e,t,i)=>{i.d(t,{O:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("ellipsis",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M2.887 9.014c.273 0 .52-.064.738-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.41 1.41 0 00-1.04-.417c-.264 0-.505.066-.724.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.307.394.526.526.219.128.46.192.725.192zm5.113 0a1.412 1.412 0 001.244-.718c.132-.219.198-.46.198-.725 0-.405-.14-.747-.423-1.025A1.386 1.386 0 008 6.129c-.264 0-.506.066-.725.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.308.394.526.526.22.128.46.192.725.192zm5.106 0c.265 0 .506-.064.725-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.394 1.394 0 00-1.026-.417 1.474 1.474 0 00-1.265.718c-.127.218-.19.46-.19.724 0 .265.063.506.19.725.133.219.308.394.527.526.223.128.47.192.738.192z"})})},13530:(e,t,i)=>{i.d(t,{s:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("historyForward",{viewBox:"0 0 14 14",svg:(0,s.jsx)("polygon",{points:"11.14107 6.25324 5.94392 1.0561 7 0 13.471958 6.47196 14 7 13.471958 7.52804 7 14 5.94392 12.94392 11.14107 7.74676 0 7.74676 1.77635684e-15 6.25324"})})},7220:(e,t,i)=>{i.d(t,{l:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("import",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},22686:(e,t,i)=>{i.d(t,{f:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("person",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,i)=>{i.d(t,{X:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,s.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,s.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},41219:(e,t,i)=>{i.d(t,{L:()=>r});i(67294);var o=i(45238),s=i(85893);const r=(0,o.IU)("topbarComment",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})})},70693:(e,t,i)=>{i.d(t,{mb:()=>n,nK:()=>d,pe:()=>l});var o=i(40506),s=i(7057),r=i(53877),a=i(42875);function n(e){const{dateTime:t,intl:i,shortenDateAndRange:o}=e,a=r.OQ.toPersistedDate(t.valueOf());return s.ZV({value:a,allowRelativeDates:!0,intl:i,shortenDateAndRange:o,displayInUserTimezone:!0})}function d(e){const{dateTime:t,intl:i,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:n}=e,d=r.OQ.toPersistedDateTime(t.valueOf(),t.zoneName);return s.ZV({value:d,allowRelativeDates:!0,intl:i,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:n})}function l(e){const{luxonRange:t,intl:i}=e,n=r.OQ.toPersistedDateRange(t),d=s.ZV({value:n,allowRelativeDates:!1,shortenDateAndRange:!0,intl:i,displayInUserTimezone:!0}),l=t.end.setZone((0,a.r)()),c=s.mr({start_time:l.toFormat(o.jK),humanReadable:!1,intl:i});return i.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:d,formattedEndTime:c})}}}]);