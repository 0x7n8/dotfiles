"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[7983],{14694:(e,t,n)=>{n.d(t,{Z:()=>u});n(67294);var s=n(480),a=n(86628),r=n(24405),o=n(39567),i=n(50659),l=n(77080),d=n(85893);function c(){const e=(0,r.yK)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.regularTextColor:"#3E3C38",stroke:"dark"===e.mode?e.sidebarBackground:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,d.jsx)("div",{children:(0,o.Y)(e.icon)})}function u(e){var t;const n=(0,s.O7)(),o=n.device.isMobile,u=(0,a.VK)((()=>{var t,s;if(o)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(s=e.style)||void 0===s?void 0:s.paddingLeft:10)}),[n.WindowSizeStore,o,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),p=(0,a.VK)((()=>l.default.checkGate("sidebar_redesign")),[]),m=(0,r.yK)((t=>({wrapper:{...o?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:8,paddingBottom:8,paddingLeft:u,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:e.disableMobileBorder?void 0:`0 1px 0 ${t.regularDividerColor}`,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,color:p?e.isBottomItem?t.mediumTextColor:t.v2.text.primary:void 0,fontWeight:p?450:void 0,minHeight:e.isBottomItem?24:27,paddingTop:2,paddingBottom:2,marginTop:1,marginBottom:1,...(0,i.MF)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:o?28:22,height:o?24:18,marginLeft:p?void 0:-3,marginRight:p?8:4,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.mediumTextColor,width:o?26:22,height:o?24:22,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!o?"clip":"ellipsis",...e.childrenStyle}})),[o,u,e.disableMobileBorder,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle,p]);return(0,d.jsxs)("div",{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:m.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,d.jsx)("div",{style:m.left,children:e.left}),e.icon&&(0,d.jsxs)("div",{style:m.icon,children:[e.icon,e.isAlias&&(0,d.jsx)(c,{})]}),(0,d.jsx)("div",{style:m.children,children:e.children}),e.right&&(0,d.jsx)("div",{style:m.right,children:e.right})]})}},1063:(e,t,n)=>{n.d(t,{X:()=>c});n(67294);var s=n(480),a=n(24405),r=n(9291),o=n(86572),i=n(35057),l=n(42402),d=n(85893);function c(e){const t=(0,s.O7)(),n=(0,a.yK)((()=>({couponLink:{fontSize:12}})),[]);return(0,d.jsx)(l.Z,{href:"https://notionup.typeform.com/to/qYXezfBW",external:!0,style:n.couponLink,onClick:()=>{const n=(0,i.zt)();o.j(t,{name:"coupon_typeform_clicked",args:{tier:e.tier,currentTier:n}})},children:(0,d.jsx)("div",{children:(0,d.jsx)(r.FormattedMessage,{id:"startupCouponInlineLink.text",defaultMessage:"Are you a startup?"})})})}},69098:(e,t,n)=>{n.d(t,{j:()=>c,o:()=>s});var s={};n.r(s),n.d(s,{showAsyncModal:()=>p,showAsyncModalComponent:()=>m,testOnly:()=>M});var a=n(67294),r=n(86628),o=n(49085);class i extends o.default{getInitialState(){return{asyncModals:[]}}}const l=new i;var d=n(85893);const c=a.memo((function(e){const{store:t=l}=e,n=(0,r.VK)((()=>t.state.asyncModals),[t]);return(0,d.jsx)(d.Fragment,{children:n.map((e=>{const{id:t,internalRenderModal:n,isOpen:s}=e,r=n(s);return(0,d.jsx)(a.Fragment,{children:r},t)}))})}));var u=n(7032);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;return new Promise(((n,s)=>{try{g({asyncModal:x({renderModal:e,promiseResolve:n,promiseReject:s,store:t}),store:t})}catch(a){s(a)}}))}function m(e){return p((t=>a.createElement(e,t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:l)}function g(e){const{asyncModal:t,store:n=l}=e;n.update((e=>({asyncModals:[...e.asyncModals,t]})))}function f(e){const{id:t,promiseResolve:n,store:s=l}=e;return e=>{const a=v({id:t,store:s});null!=a&&a.isOpen&&(b({id:t,store:s,update:{isOpen:!1}}),n(e))}}function h(e){const{id:t,promiseResolve:n,store:s=l}=e;return()=>{const e=v({id:t,store:s});null!=e&&e.isOpen&&(b({id:t,store:s,update:{isOpen:!1}}),n())}}function y(e){const{id:t,store:n=l}=e;return()=>{n.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function x(e){const{renderModal:t,promiseResolve:n,promiseReject:s,store:a=l}=e,r=(0,u.ZP)(),o=y({id:r,store:a}),i=h({id:r,promiseResolve:n,store:a}),d=f({id:r,promiseResolve:n,store:a});return{id:r,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:o,onDismiss:i,resolve:d})}catch(n){throw s(n),n}},isOpen:!0}}function v(e){const{id:t,store:n=l}=e;return n.state.asyncModals.find((e=>e.id===t))}function b(e){const{id:t,update:n,store:s=l}=e;s.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...n}))})))}const M={addAsyncModal:g,createAsyncModal:x,createOnClosed:y,createOnDismiss:h,createResolve:f,getAsyncModal:v,updateAsyncModal:b}},74244:(e,t,n)=>{n.d(t,{U:()=>o});var s=n(480),a=n(86628),r=n(93586);function o(e){const t=(0,s.O7)();return(0,a.VK)((()=>{const n=null==e?void 0:e.id;if(n)return r.Z.getData(t,{spaceId:n})}),[t,e])}},50659:(e,t,n)=>{n.d(t,{G$:()=>o,MF:()=>i,Z3:()=>r});var s=n(77080);const a=4;function r(e){let{isMobile:t}=e;const n=s.default.checkGate("sidebar_redesign");return{...!t&&{borderRadius:n?12:3}}}function o(e){let{isMobile:t}=e;return t?{}:{...r({isMobile:t}),display:"flex",marginLeft:a,marginRight:a,width:`calc(100% - ${2*a}px)`,transition:"background 100ms ease-out"}}function i(){return{paddingLeft:14-a,paddingRight:14-a}}},93586:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(92595);const a=new(n(51444).q)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:s}=t;const a=await Promise.resolve().then(n.bind(n,54642)),r=await a.getInternalDomains(e,{spaceId:s});return"success"===r.type?r.data.internalDomains:void 0}));s.exposeDebugValue("InternalDomainsStore",a);const r=a},80671:(e,t,n)=>{n.d(t,{Cl:()=>y,Kj:()=>x,jw:()=>v,k2:()=>f,v5:()=>h});n(21703);var s=n(72141),a=n(19889),r=n(90965),o=n(896),i=n(12139),l=n(53965),d=n(7032),c=n(86572),u=n(6258),p=n(88893),m=n(63423),g=n(88280);function f(){m.Z.setState({open:!0,stage:"limit_reached",addOnUpgradeId:(0,d.ZP)(),tax:0})}function h(){m.Z.setState({open:!1})}function y(e){const t=m.Z.state;t.open&&m.Z.setState({...t,stage:"confirm_purchase",coupon:e&&!(0,o.$v)(e)?e:void 0})}function x(){m.Z.setState({open:!0,stage:"cancel_plan",addOnUpgradeId:(0,d.ZP)(),tax:0})}async function v(e){const{environment:t,spaceStore:n,from:o}=e,d=function(){const e=g.subscriptionDataStoreInstance.state,t=(e?p.CM(e):[]).filter((e=>(0,r.CF)(e)&&(0,s.zz)(e.role))).map((e=>e.userId));if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,l.UP)(t)}(),m=n.getName(),f=u.U6.createChildStore(n,{table:a.KJ,id:d});await f.load();const h=f.getEmail();h?c.bf(t,{admin_id:d,admin_email:h,space_name:m,from:o}):i.IE(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}},44041:(e,t,n)=>{n.d(t,{y:()=>b});n(67294);var s=n(47425),a=n(9291),r=n(86572),o=n(47307),i=n(33929),l=n(52533),d=n(80444),c=n(92083),u=n(39343),p=n(87199),m=n(70060),g=n(88893),f=n(35057),h=n(88280),y=n(81023),x=n(64891),v=n(85893);async function b(e,t){var n;r.sA(e,{from:t.from,for_subscription_tier:t.for,addOnFeature:t.addOnFeature});if((0,f.QM)()&&["block_limit_sidebar","block_limit_settings","block_limit_banner"].includes(t.from)&&!t.addOnFeature&&(0,m.XA)(e))return void c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0});if(!t.addOnFeature&&(0,s.QM)(t.for))return;const b=(0,l.S$)({environment:e})&&"personal"===t.for;if(e.device.isMobileNative){if("ai"===t.addOnFeature){const t=(0,l.Y2)({environment:e})?(0,v.jsx)(a.FormattedMessage,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Visit on desktop to purchase Notion AI and go unlimited."}):(0,v.jsx)(a.FormattedMessage,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"This workspace has used all of its free AI responses. Unfortunately, additional AI responses cannot be purchased on this platform."});return void o.showErrorMessage(t)}if(!b)return}const M=d.default.state.currentSpaceStore;if(!M)return;if(!M.canAdmin())return;await y.bi(e);const j=h.subscriptionDataStoreInstance.state;if(!j)return;if("unsubscribed_admin"!==j.type&&"subscribed_admin"!==j.type)return void(t.dontOpenPlansOnCancel||c.Z.setState({open:!0,openedFrom:"upsell",currentTab:"plans",defaultSubtab:void 0,highlightedSetting:void 0}));if(g.ri(j))return void o.showErrorMessage(i.default.formatMessage(p.k.paymentMethodUnverified));if(g.Q6(j)){const e=(0,v.jsx)(a.FormattedMessage,{id:"upsellActions.referToSalesRep",defaultMessage:"This workspace is part of a managed account. Please contact your account representative to discuss any changes to your subscription."});return void o.showErrorMessage(e)}if(b)return void(e.mobileNative&&M.id&&e.mobileNative.openUpgradeModal(M.id));if("revenueCat"===(null===(n=j.customerData)||void 0===n?void 0:n.activeSubscriptionPlatform)){const e=(0,v.jsx)(a.FormattedMessage,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. To switch plans, cancel your subscription with Apple first."});return void o.showErrorMessage(e)}const C=g.XX(j);if(t.addOnFeature&&(0,u.Fk)(C)){const e=(0,v.jsx)(a.FormattedMessage,{id:"upsellActions.noAddOnPurchaseDuringFreeTrial",defaultMessage:"Unfortunately, additional {addOn, select, ai {AI responses} other {features}} cannot be purchased while a workspace is on a free trial.",values:{addOn:t.addOnFeature}});o.showErrorMessage(e)}else{if(C&&g.MM(j))return t.addOnFeature?void x.af({environment:e,from:t.from,view:"add_ons",addOnFeature:t.addOnFeature,billingInterval:C.interval,pageSection:t.pageSection}):void x.af({environment:e,from:t.from,view:"plans",temporarySubscriptionTier:t.for,billingInterval:C.interval,pageSection:t.pageSection});{const n=(0,m.px)(e,t.for)?"ai_fifty_percent":void 0;y.I0(e,{subscriptionTier:t.for,from:t.from,addOnFeature:t.addOnFeature,coupon:n,isTrial:t.isTrial})}}}},91493:(e,t,n)=>{n.d(t,{G:()=>i});n(67294);var s=n(9291),a=n(51133),r=n(27533),o=n(85893);function i(e){const t=(0,a.hr)(),{accountBalance:n}=e;return 0===n.amount?null:(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(s.FormattedMessage,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"})})}),(0,o.jsx)("span",{style:t.credit,children:(0,o.jsx)(r.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},59148:(e,t,n)=>{n.d(t,{T:()=>i});n(67294);var s=n(9291),a=n(51133),r=n(27533),o=n(85893);function i(e){const t=(0,a.hr)(),{discount:n,promo:i}=e;return(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(s.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"})})}),i.duration_in_months?(0,o.jsx)("span",{style:t.caption,children:(0,o.jsx)(s.FormattedMessage,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:i.duration_in_months}})}):void 0,(0,o.jsx)("span",{style:t.credit,children:(0,o.jsx)(r.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},42329:(e,t,n)=>{n.d(t,{r:()=>i});n(67294);var s=n(9291),a=n(51133),r=n(27533),o=n(85893);function i(e){const t=(0,a.hr)(),{subtotal:n}=e;return(0,o.jsxs)("div",{style:t.itemContainer,children:[(0,o.jsx)("div",{style:t.captionContainer,children:(0,o.jsx)("span",{style:t.name,children:(0,o.jsx)(s.FormattedMessage,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"})})}),(0,o.jsx)("span",{style:t.price,children:(0,o.jsx)(r.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},92041:(e,t,n)=>{n.d(t,{u:()=>d});n(67294);var s=n(9291),a=n(68785),r=n(51133),o=n(27533),i=n(85893);const l="—";function d(e){const t=(0,r.hr)(),{tax:n,calculatingTax:d}=e;return(0,i.jsxs)("div",{style:t.itemContainer,children:[(0,i.jsx)("div",{style:t.captionContainer,children:(0,i.jsx)("span",{style:t.name,children:(0,i.jsx)(s.FormattedMessage,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"})})}),(0,i.jsx)("span",{style:t.price,children:d?(0,i.jsx)(a.Z,{}):0===n.amount?l:(0,i.jsx)(o.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}},6172:(e,t,n)=>{n.r(t),n.d(t,{default:()=>pt});var s=n(86664),a=n(67294),r=n(480),o=n(86628),i=n(80994),l=n(3791),d=n(9291),c=n(54642),u=n(29497),p=n(7184),m=n(43250),g=n(48779),f=n(80444),h=n(88632),y=n(27242),x=n(30120),v=n(68626),b=n(90850),M=n(9182),j=n(53965),C=n(86572),w=n(47307),S=n(92625),I=n(92083),T=n(5682),k=n(70060),F=n(58333),P=n(95014),_=n(88893),O=n(33493),A=n(22616),Z=n(81023),B=n(85893);const D=(0,d.defineMessages)({cancelFailedSubscription:{id:"subscription.upgrade.cancel_failed_subscription",defaultMessage:"Cancelling subscription..."}});async function E(e){const{environment:t,state:n,data:s,stripe:a,elements:r,intl:o,useTestClock:i}=e;if(!r||!a)return void v.log({level:"error",from:"SpaceSubscriptionUpgradeModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});if((0,k.bP)(t)&&!n.temporaryAddress.name)return void y.Z.setValidationErrorState("name",{type:"required",message:o.formatMessage({id:"spaceSubscriptionUpgradeModal.name.required.error",defaultMessage:"Your name is required."})});let l=n.paymentData;if(!l){var c,u;const{error:e}=await r.submit();if(e)return C.VQ(t,{error:"could not submit form",error_type:"payment_method",modal_id:n.sessionId}),void y.Z.setState({...n,error:o.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});const s=await a.createPaymentMethod({elements:r});if(s.error)return C.VQ(t,{error:s.error.message,error_type:"payment_method",modal_id:n.sessionId}),void y.Z.setState({...n,error:P.translateStripeError(t,o,s.error)});if(!s.paymentMethod)return C.VQ(t,{error:"could not create token",error_type:"payment_method",modal_id:n.sessionId}),void y.Z.setState({...n,error:o.formatMessage({id:"spaceSubscriptionUpgradeModal.payment.genericError",defaultMessage:"Your payment could not be processed. Please try again."})});l={type:"paymentMethodId",value:s.paymentMethod.id},y.Z.setState({...n,paymentData:l,temporaryAddress:{...n.temporaryAddress,zipCode:(null===(c=s.paymentMethod.billing_details.address)||void 0===c?void 0:c.postal_code)??"",country:(null===(u=s.paymentMethod.billing_details.address)||void 0===u?void 0:u.country)??""}})}await async function(e){const{environment:t,data:n,paymentData:s,stripe:a,useTestClock:r}=e,o=f.default.state.currentSpaceStore,i=y.Z.state;if(!i.open||!o)return;const l=await A.aQ({environment:t,spaceId:o.id}),c=(0,T.P)(l,n),u=(0,M.Lg)(c),p=i.isTrial?x.ou.now().plus({days:14}):void 0,m=O.Z.state.selectedCurrencyCode??"USD",g=_.GD(i.temporaryBillingInterval),h=_.su(n),v=(0,j.oA)([i.subscriptionTier,i.addOnFeature]).filter((e=>"free"!==e)),k={interval:g,currency:m,quantity:h},P=v.reduce(((e,t)=>(0,F.dP)(l,e,{...k,product:t})),{...u,trialEnd:p}),E=i.appliedPromo,N=i.temporaryAddress,V=i.sessionId,R=_.Md(i,n);try{const e=await Z.Mg({environment:t,spaceStore:o,desiredState:P,paymentData:s,billingEmail:R,coupon:E&&"coupon"===E.source?E.code:void 0,customerName:N.name,businessName:N.businessName,addressLine1:N.addressLine1,addressCity:N.city,addressZip:N.zipCode,addressState:N.state,addressCountry:N.country,vatId:i.vatApplicable?i.temporaryVatCode:void 0,promoCodeId:E&&"promo_code"===E.source?E.code:void 0,from:"subscription_upgrade_modal",useTestClock:r,sessionId:i.sessionId,inAppOffer:"ai"===i.addOnFeature?i.coupon:void 0});await Z.KD({paymentIntentData:e,stripe:a,onSuccess:()=>{C.fZ(t,{payment_intent_id:e.paymentIntentId,modal_id:V})},onFailure:()=>{!function(e){const{updateSubscriptionResponse:t,environment:n,modalId:s,spaceStore:a}=e,{subscriptionStatus:r,paymentIntentId:o}=t;w.showDialog({message:"trialing"===r?(0,B.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed.trial",defaultMessage:"Please provide an alternate payment method to complete your upgrade."}):(0,B.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."}),showCancel:!1,keepFocus:!1,disableBackgroundDismiss:!0,items:[{label:(0,B.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed.pay_invoice",defaultMessage:"Complete payment"}),onAccept:()=>{C.Aq(n,{payment_intent_id:o,modal_id:s}),window.open(t.invoiceUrl,"_blank")},color:"red"},{label:(0,B.jsx)(d.FormattedMessage,{id:"subscription.upgrade.payment_failed.cancel",defaultMessage:"Cancel upgrade"}),onAccept:async()=>{C.cY(n,{payment_intent_id:t.paymentIntentId,modal_id:s}),S.j({message:D.cancelFailedSubscription}),await Z.EO({environment:n,spaceStore:a,planType:a.getPlanType()??"personal",from:"subscription_upgrade_modal-failed_payment"}),S.x()}}]})}({updateSubscriptionResponse:e,environment:t,modalId:V,spaceStore:o})}}),E&&(0,b.$r)(t.currentUser.id),function(e){const{environment:t,modalId:n}=e;y.Z.reset(),C.LY(t,{modal_id:n})}({environment:t,modalId:V}),I.Z.setState({...I.Z.state,currentTab:"billing",defaultSubtab:void 0})}catch{C.cY(t,{modal_id:V})}}({environment:t,data:s,paymentData:l,stripe:a,useTestClock:i})}async function N(e){const{environment:t,state:n,data:s,stripe:a,elements:r,intl:o,useTestClock:i}=e;C.PN(t,{modal_id:n.sessionId}),y.Z.update((e=>({...e,payButtonState:"disabled"}))),await E({environment:t,state:n,data:s,stripe:a,elements:r,intl:o,useTestClock:i});const l=y.Z.state;l.open&&y.Z.setState({...l,payButtonState:"enabled"})}var V=n(75877),R=n(51133),L=n(23079),U=n(97710),z=n(88280),W=n(75396),G=n(34310),K=(n(57658),n(18174)),H=n(63594),q=n(89024),X=n(7124),Y=n(40469),$=n(2924),Q=(n(21703),n(1898));const J={free:0,personal:1,student:1,ai:2,plus:3,business:4,enterprise:5};var ee=n(76088),te=n(96130),ne=n(56896),se=n(24405),ae=n(41892);function re(){const e=(0,se.Fg)();return(0,B.jsx)("img",{role:"presentation",src:"dark"===e.mode?ae.Z.images.pricing.dark.giftBoxPng:ae.Z.images.pricing.light.giftBoxPng,style:{height:64,width:53}})}var oe=n(27533),ie=n(75849),le=n(11751),de=n(49806),ce=n(53578),ue=n(87131);const pe=(0,d.defineMessages)({billingOptions:{id:"checkout.orderOptions.billingOptions",defaultMessage:"Billing options"},payMonthly:{id:"checkout.orderOptions.payMonthly",defaultMessage:"Pay monthly"},payAnnually:{id:"checkout.orderOptions.payAnnually",defaultMessage:"Pay annually"},savePercent:{id:"checkout.orderOptions.savePercent",defaultMessage:"Save {percent}%"},addOns:{id:"checkout.orderOptions.addOns",defaultMessage:"Add ons"},notionAI:{id:"checkout.orderOptions.notionAI",defaultMessage:"Notion AI"},pricePerMonth:{id:"checkout.orderOptions.pricePerMonth",defaultMessage:"{price} / month / member"}}),me=(0,d.defineMessages)({pricePerInterval:{id:"checkout.orderSummary.pricePerInterval",defaultMessage:"{price} / {interval, select, month {month} year {year} other {period}}"},totalForToday:{id:"checkout.orderSummary.totalForToday",defaultMessage:"Total for today"},couponAmount:{id:"checkout.orderSummary.couponAmount",defaultMessage:"{money} coupon"},balanceAmount:{id:"checkout.orderSummary.balanceAmount",defaultMessage:"{money} balance"},amountOff:{id:"checkout.orderSummary.amountOff",defaultMessage:"{money} off"},details:{id:"checkout.orderSummary.details",defaultMessage:"Details"},subtotal:{id:"checkout.orderSummary.subtotal",defaultMessage:"Subtotal"},taxIfApplicable:{id:"checkout.orderSummary.taxIfApplicable",defaultMessage:"Tax if applicable"},membersInWorkspace:{id:"checkout.orderSummary.membersInWorkspace",defaultMessage:"Members in your workspace"},perPricePerMonth:{id:"checkout.orderSummary.perPricePerMonth",defaultMessage:"x {price} / month / member"},balance:{id:"checkout.orderSummary.balance",defaultMessage:"Balance"},coupon:{id:"checkout.orderSummary.coupon",defaultMessage:"Coupon"}});function ge(e){const{addOnFeature:t,asyncPrice:n,onChange:s}=e,r=(0,se.yK)((e=>({aiIcon:{width:13,height:12,color:e.icon.purple},supportText:{width:"90%"}})),[]),o=(0,d.useIntl)(),i=(0,ne.F)({asyncPrice:n}),l=(0,a.useMemo)((()=>[{value:"ai",label:(0,B.jsxs)(q.jX,{direction:"row",align:"center-left",gap:2,children:[o.formatMessage(pe.notionAI),(0,le.t)(r.aiIcon)]}),description:o.formatMessage(pe.pricePerMonth,{price:i?(0,B.jsx)(oe.W,{cost:i,trailingZeroDisplay:"stripIfInteger"}):null}),supportText:(0,B.jsx)("div",{style:r.supportText,children:o.formatMessage(ce.oy.description)}),isSelected:"ai"===t}]),[t,i,o,r]);return(0,B.jsx)(ue.O,{title:o.formatMessage(pe.addOns),children:l.map((e=>(0,B.jsx)(de.n,{name:"add-ons",selectType:"checkbox",onChange:e=>{if(t=e.target.value,!["ai"].includes(t))throw new Error("Option is not add-on feature");var t;s(e.target.checked?e.target.value:void 0)},...e},e.value)))})}function fe(){const e=(0,se.yK)((e=>({aiIcon:{width:18,height:18,fill:e.aiCheckoutColor},aiText:{paddingLeft:4,color:e.aiCheckoutColor}})),[]);return(0,B.jsx)(q.jX,{direction:"row",children:(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.v2.ai.title",defaultMessage:"Get unlimited Notion <aistyle>AI</aistyle>",values:{aistyle:function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("span",{style:e.aiText,children:n}),(0,le.t)(e.aiIcon)]})}}})})}var he=n(8044);function ye(e){const{selectedBillingInterval:t,asyncMonthlyPrice:n,asyncYearlyPrice:s,onChange:r}=e,i=(0,se.yK)((e=>({discountText:{color:e.accentColors.green[500]}})),[]),l=(0,d.useIntl)(),c=(0,ne.F)({asyncPrice:n}),u=(0,ne.F)({asyncPrice:s}),p=(0,a.useMemo)((()=>[{value:"month",label:l.formatMessage(pe.payMonthly),description:l.formatMessage(pe.pricePerMonth,{price:c?(0,B.jsx)(oe.W,{cost:c,trailingZeroDisplay:"stripIfInteger"}):null}),isSelected:"month"===t},{value:"year",label:l.formatMessage(pe.payAnnually),description:l.formatMessage(pe.pricePerMonth,{price:u?(0,B.jsx)(oe.W,{cost:u,trailingZeroDisplay:"stripIfInteger"}):null}),isSelected:"year"===t,additionalContent:(0,B.jsx)(X.q,{styleName:"Caption-12px/Medium",style:i.discountText,children:l.formatMessage(pe.savePercent,{percent:20})})}]),[t,c,u,l,i]),{availableCurrencyCodes:m,selectedCurrencyCode:g}=(0,o.VK)((()=>({availableCurrencyCodes:O.Z.availableCurrencyCodes,selectedCurrencyCode:O.Z.selectedCurrencyCode})),[]);return(0,B.jsx)(ue.O,{title:(0,B.jsxs)(q.jX,{direction:"row",children:[l.formatMessage(pe.billingOptions),(0,B.jsx)(q.jX,{align:"top-right",children:(0,B.jsx)(he.V,{availableCurrencyCodes:m,from:"upgrade_modal",onSelectCurrency:A.yD,selectedCurrencyCode:g})})]}),children:p.map((e=>(0,B.jsx)(de.n,{name:"billing-options",selectType:"radio",onChange:e=>{if(t=e.target.value,!["month","year"].includes(t))throw new Error("Option is not billing interval");var t;r(e.target.value)},...e},e.value)))})}var xe=n(41219),ve=n(47425),be=n(82914),Me=(n(95477),n(57118)),je=n(56142);function Ce(e){const{state:t,products:n,primaryProduct:s,onClickUpgrade:r}=e,{isTrial:i,subscriptionTier:l}=t,c=(0,se.yK)((()=>({contactSalesIcon:{width:19,height:17,marginRight:4}})),[]),u=!i&&(0,ve.Rs)(l),p=i?(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.startTrial",defaultMessage:"Start {subscriptionTier, select, business {Business} other {Plus}} Trial",values:{subscriptionTier:s}}):function(e){switch(e){case"ai":return(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeAi",defaultMessage:"Upgrade Notion AI"});case"plus":return(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeToPlus",defaultMessage:"Upgrade to Plus"});case"business":return(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeToBusiness",defaultMessage:"Upgrade to Business"});case"enterprise":return(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeToEnterprise",defaultMessage:"Upgrade to Enterprise"});default:return(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeButton.upgradeNow",defaultMessage:"Upgrade now"})}}(s),m=(0,o.VK)((()=>{var e;return void 0!==(null===(e=(0,_.aS)(z.subscriptionDataStoreInstance.state))||void 0===e?void 0:e.customerId)}),[]),g=(0,o.VK)((()=>(0,k.G2)()&&!1),[m]),f=a.useCallback((()=>{(0,Me.n)(_.m_(t.subscriptionTier))}),[t.subscriptionTier]),h=[{buttonType:"primary",isDisabled:"disabled"===t.payButtonState,label:p,onClick:()=>r({useTestClock:!1})}];return g&&h.push({buttonType:"primary",isDisabled:"disabled"===t.payButtonState,label:"🚧 Upgrade with Test Clock 🚧",onClick:()=>r({useTestClock:!0})}),(0,B.jsx)(be.a6,{primaryButtons:h,secondaryButtons:u?[{buttonType:"outline",label:(0,B.jsxs)(B.Fragment,{children:[(0,xe.L)(c.contactSalesIcon),(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionSettings.upgradeModal.contactSales",defaultMessage:"Contact sales"})]}),onClick:f}]:void 0,caption:(0,B.jsx)(X.q,{styleName:"iOS/Caption-12px/Regular",colorName:"secondary",style:{textAlign:"left"},children:(0,B.jsx)(je.E,{products:n,isTrial:i})}),layout:"vertical",sectionGap:16})}function we(e){const{title:t,subtitle:n,image:s,centerAlign:a}=e;return(0,B.jsxs)(q.jX,{gap:8,align:a?"top-center":"top-left",style:a?{textAlign:"center"}:void 0,children:[s,(0,B.jsxs)(q.jX,{gap:4,children:[(0,B.jsx)(X.q,{styleName:n?"Title-22px/Bold":"Title-Large-26px/Bold",children:t}),n?(0,B.jsx)(X.q,{styleName:"Heading-17px/Regular",colorName:"secondary",children:n}):null]})]})}var Se=n(1853),Ie=n(81477);function Te(e){let{header:t,paymentContent:n,orderOptions:s,footer:a,showDismissButton:i,isTrial:l}=e;const d=(0,r.O7)(),{isMobile:c}=(0,r.Fy)(),u=(0,o.VK)((()=>(0,Ie.Z)(d)),[d])||!s,p=function(e){return(0,se.yK)((()=>({wrapper:{...!e&&{minWidth:506}},mobile:{display:"grid",gridTemplateRows:"1fr auto",overflow:"hidden auto"}})),[e])}(c),m=(0,B.jsxs)(q.jX,{direction:u?"column":"row",gap:u?20:32,style:{...c&&p.mobile},children:[(0,B.jsx)(q.jX,{direction:"column",gap:u?20:28,width:u?"fill":420,children:n}),(0,B.jsxs)(q.jX,{direction:"column",gap:u?20:28,width:u?"fill":310,children:[s,a]})]});return(0,B.jsxs)(q.jX,{direction:"column",gap:u?28:36,padding:32,width:"hug",height:"hug",style:p.wrapper,children:[t,m,i&&(0,B.jsx)(Se.U4,{})]})}var ke=n(65820),Fe=n(33993),Pe=n(82855),_e=n(90403),Oe=n(61519),Ae=n(68785),Ze=n(85740),Be=n(33941);function De(e){const{state:t,data:n,promo:s}=e,{coupon:i}=t,l=(0,r.O7)(),[d,c]=a.useState(!1),u=_.GD(t.temporaryBillingInterval),p=R.Zr(s),m=R.Lp(t,n),g=_.su(n),[f,h]=(0,o.VK)((()=>{const e=m.map((e=>O.Z.getPrice(l,(t=>t.product===e&&t.billingInterval===u))));let t;return"year"===u&&(t=m.map((e=>O.Z.getPrice(l,(t=>t.product===e&&"month"===t.billingInterval))))),[e,t]}),[u,l,m]);if(f.some((e=>!e.isLoaded)))return(0,B.jsx)(Ae.Z,{});const y=f.map((e=>e.result)).filter(Boolean),x=null==h?void 0:h.map((e=>e.result)).filter(Boolean),v=y[0].unitAmount.currencyValue,b=R.cv({prices:y,quantity:g,coupon:i}),M=x?R.cv({prices:x,quantity:g,coupon:i}).withMultipliedAmount(12):void 0,j=M?M.minus(b):void 0,C=R.VT({calculatingTax:t.calculatingTax,taxAmount:t.taxAmount,currencyValue:v}),w=R.rF({prices:y,quantity:g,promo:p}),S=R.Et(n,v),I=b.plus(C).minus(w).minus(S),T=I.amount<0?I.withMultipliedAmount(0):I;return(0,B.jsxs)(q.jX,{gap:8,children:[(0,B.jsx)(Ee,{total:T,billingInterval:u,handleToggleExpanded:()=>c((e=>!e)),isExpanded:d,discount:w,accountBalance:S,annualPriceDifference:j}),(0,B.jsx)(ke.M,{initial:!1,children:d&&(0,B.jsx)(Fe.E.div,{style:{overflow:"hidden"},initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{height:"auto"},collapsed:{height:0}},transition:{duration:.2},children:(0,B.jsxs)(q.jX,{gap:12,children:[(0,B.jsx)(Ve,{prices:y,memberCount:g}),(0,B.jsx)(Oe.Z,{size:1}),(0,B.jsx)(Ne,{subtotal:b,tax:C,discount:w,accountBalance:S,promo:p,coupon:t.coupon,isCalculatingTax:t.calculatingTax,subtotalMonthly:M})]})},"details")})]})}function Ee(e){const{total:t,billingInterval:n,handleToggleExpanded:s,isExpanded:a,discount:r,accountBalance:o,annualPriceDifference:i}=e,l=(0,d.useIntl)(),c=ze(),u=0!==r.amount,p=0!==o.amount,m=u||p?(0,B.jsx)(oe.W,{cost:t.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}):l.formatMessage(me.pricePerInterval,{price:(0,B.jsx)(oe.W,{cost:t.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}),interval:n});return(0,B.jsxs)(B.Fragment,{children:[(u||p)&&(0,B.jsx)(X.q,{styleName:"Caption-12px/Semibold",colorName:"secondary",children:l.formatMessage(me.totalForToday)}),(0,B.jsxs)(q.jX,{direction:"row",gap:"auto",align:"center",children:[(0,B.jsxs)(q.jX,{direction:"row",align:"center-left",children:[(0,B.jsx)(X.q,{styleName:"Heading-17px/Semibold",children:m}),i&&(0,B.jsx)(_e.Z,{content:l.formatMessage(me.amountOff,{money:(0,B.jsx)(oe.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})}),style:c.discountBadge}),p&&(0,B.jsx)(_e.Z,{content:l.formatMessage(me.balanceAmount,{money:(0,B.jsx)(oe.W,{cost:o.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})}),style:c.discountBadge}),u&&(0,B.jsx)(_e.Z,{content:l.formatMessage(me.couponAmount,{money:(0,B.jsx)(oe.W,{cost:r.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})}),style:c.discountBadge})]}),(0,B.jsx)(Ze.Z,{onClick:s,children:(0,B.jsxs)(q.jX,{direction:"row",gap:4,align:"center",children:[(0,B.jsx)(X.q,{styleName:"Body-14px/Regular",colorName:"primary",children:l.formatMessage(me.details)}),(0,B.jsx)(Fe.E.div,{animate:{rotate:a?180:0},transition:{duration:.2,ease:"linear"},children:(0,Pe.E)(c.detailsIcon)})]})})]})]})}function Ne(e){const{subtotal:t,tax:n,isCalculatingTax:s,accountBalance:a,promo:r,coupon:o,discount:i,subtotalMonthly:l}=e,c=(0,d.useIntl)(),u=ze(),p=0===n.amount?"—":(0,B.jsx)(oe.W,{cost:n.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}),m=0!==i.amount&&r&&!o;return(0,B.jsxs)(q.jX,{gap:4,children:[(0,B.jsx)(Le,{itemName:c.formatMessage(me.subtotal),value:(0,B.jsxs)(B.Fragment,{children:[l&&(0,B.jsx)("span",{style:u.strikethrough,children:(0,B.jsx)(oe.W,{cost:l.toMoneyValue(),trailingZeroDisplay:"auto"})}),(0,B.jsx)(oe.W,{cost:t.toMoneyValue(),trailingZeroDisplay:"auto"})]})}),(0,B.jsx)(Le,{itemName:c.formatMessage(me.taxIfApplicable),value:s?(0,B.jsx)(Ae.Z,{}):p}),m&&(0,B.jsx)(Le,{itemName:c.formatMessage(me.coupon),value:(0,B.jsxs)("span",{style:u.discountText,children:["-",(0,B.jsx)(oe.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"auto"})]})}),0!==a.amount&&(0,B.jsx)(Le,{itemName:c.formatMessage(me.balance),value:(0,B.jsxs)("span",{style:u.discountText,children:["-",(0,B.jsx)(oe.W,{cost:a.toMoneyValue(),trailingZeroDisplay:"auto"})]})})]})}function Ve(e){const{prices:t,memberCount:n}=e,s=(0,d.useIntl)(),a=t.length>1;return(0,B.jsx)(q.jX,{gap:16,children:t.map((e=>{const t=(0,B.jsx)(oe.W,{cost:e.getMonthlyUnitCost().toMoneyValue(),trailingZeroDisplay:"stripIfInteger"}),r=(0,B.jsx)(oe.W,{cost:e.getMonthlyCost({quantity:n}).toMoneyValue(),trailingZeroDisplay:"auto"});return(0,B.jsxs)(Re,{title:a?Ue(e,s):void 0,children:[(0,B.jsx)(Le,{itemName:s.formatMessage(me.membersInWorkspace),value:n}),(0,B.jsx)(Le,{itemName:s.formatMessage(me.perPricePerMonth,{price:t}),value:e&&r})]},e.product)}))})}function Re(e){const{title:t,children:n}=e;return(0,B.jsxs)(q.jX,{gap:4,children:[t&&(0,B.jsx)(X.q,{styleName:"Caption-12px/Semibold",colorName:"secondary",children:t}),n]})}function Le(e){const{itemName:t,value:n}=e;return(0,B.jsxs)(q.jX,{direction:"row",gap:"auto",children:[(0,B.jsx)(X.q,{styleName:"Body-14px/Regular",colorName:"secondary",children:t}),(0,B.jsx)(X.q,{styleName:"Body-14px/Regular",colorName:"secondary",children:n})]})}function Ue(e,t){switch(e.product){case"ai":return t.formatMessage(Be.D.ai);case"personal":return t.formatMessage(Be.D.personal);case"plus":return t.formatMessage(Be.D.plus);case"business":return t.formatMessage(Be.D.business);case"enterprise":return t.formatMessage(Be.D.enterprise);case"free":case"student":throw new Error("Free and student plans cannot be shown in upgrade modal");default:(0,Q.t1)(e.product)}}function ze(){return(0,se.yK)((e=>({detailsIcon:{width:12,color:e.icon.secondary},discountText:{color:e.accentColors.green[500]},discountBadge:{background:"light"===e.mode?e.accentColors.green[50]:e.accentColors.green[200],color:"light"===e.mode?e.accentColors.green[500]:e.accentColors.green[600]},strikethrough:{textDecorationLine:"line-through",marginRight:4}})),[])}var We=n(23061),Ge=n(16184);function Ke(e){const{hideTitle:t}=e,n=(0,o.VK)((()=>{const e=y.Z.state;if(e.open)return e.sessionId}),[]),a=(0,r.O7)(),i=(0,se.yK)((e=>({lockIcon:{width:12,color:e.icon.tertiary}})),[]),l={defaultValues:{billingDetails:(0,o.VK)((()=>{const e=f.default.state.currentUserStore;return{email:null==e?void 0:e.getEmail(),name:null==e?void 0:e.getName()}}),[])}};return(0,B.jsx)(ue.O,{title:t?null:(0,B.jsxs)(q.jX,{direction:"row",gap:"auto",align:"center",children:[(0,B.jsx)(d.FormattedMessage,{id:"checkoutPaymentField.paymentDetails.title",defaultMessage:"Payment details"}),(0,Ge.Q)(i.lockIcon)]}),children:(0,B.jsx)(s.PaymentElement,{options:l,onChange:e=>{C.Dc(a,{event:e,modal_id:n}),y.Z.update((e=>{if(!e.open)return e;const{paymentData:t,...n}=e;return n}))}})})}function He(e){const{hideTitle:t}=e,{temporaryVATCode:n,vatApplicable:s}=(0,We.Rl)(),a=(0,We.pk)();return(0,B.jsxs)("div",{children:[(0,B.jsx)(Ke,{hideTitle:Boolean(t)}),(0,B.jsx)(We.nb,{onChange:a,temporaryVatCode:n,vatApplicable:s})]})}function qe(e){const{state:t,data:n,spaceStore:i}=e,c=(0,r.O7)(),u=(0,d.useIntl)(),p=(0,s.useStripe)(),m=(0,s.useElements)(),f=(0,o.VK)((()=>h.Z.state.online),[]),x=(0,ee.P)(),v=(0,o.VK)((()=>(0,k.Gb)()),[]),b=(0,o.VK)((()=>!H.Z.state&&t.onlyShowAddOn),[t.onlyShowAddOn]),[M,w,S]=(0,o.VK)((()=>{var e;const n=[(0,K.K)(t.subscriptionTier)],s=(null===(e=z.subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[];return(0,g.CV)(i)||(0,l.de)(s)||n.push("ai"),[t.temporaryBillingInterval,t.addOnFeature,n]}),[t,i]);a.useEffect((()=>{v&&t.onlyShowAddOn&&(0,k.Ax)()&&y.Z.update((e=>({...e,temporaryBillingInterval:"year"})))}),[v,t.onlyShowAddOn]),a.useEffect((()=>{Y.W_(c)}),[c,M,w]);const I={month:(0,te.O)({billingInterval:"month",priceStore:O.Z,products:S}),year:(0,te.O)({billingInterval:"year",priceStore:O.Z,products:S})},T=R.Lp(t,n),F=(v||!t.onlyShowAddOn)&&!t.isTrial,P=function(e){if(0===e.length)return;const t=(0,j.UT)((0,j.oA)(e),(e=>J[e]));if(t)switch(t){case"ai":case"plus":case"business":case"enterprise":return t;case"free":case"personal":case"student":throw new Error("Invalid product passed into checkout.");default:(0,Q.t1)(t)}}(T);if(!t.open||!P)return null;if(!f)return(0,B.jsx)(U.L,{});const _=function(e){const{product:t,showAiLimitMessage:n,isMmOrEnt:s,isTrial:a}=e;switch(t){case"ai":return{subtitle:n?(0,B.jsx)(d.FormattedMessage,{id:"addOnUpgrade.confirmation.description.outOfFreeAiResponses",defaultMessage:"Your workspace has used all of its free AI responses"}):void 0};case"plus":return{title:a?(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.title.plusTrial.checkout",defaultMessage:"Try the Plus plan free for {isMmOrEnt, select, true {30} other {14}} days",values:{isMmOrEnt:s}}):(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.title.plus",defaultMessage:"Upgrade to Plus"}),subtitle:a?(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.trial.checkout",defaultMessage:"Use Notion as much as you want, with as many people as you like for {isMmOrEnt, select, true {four} other {two}} weeks, risk free. Cancel anytime.",values:{isMmOrEnt:s}}):(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.v2.plus",defaultMessage:"Do more with unlimited blocks, files, automations & integrations"})};case"business":return{title:a?(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.title.businessTrial",defaultMessage:"Try the Business plan for free"}):(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlan",defaultMessage:"Upgrade to Business"}),subtitle:a?(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.trial",defaultMessage:"Collaborate with unlimited people with full access to features such as file uploads and automations. {isMmOrEnt, select, true {30} other {14}} days for free. Cancel the trial stress-free at any time.",values:{isMmOrEnt:s}}):(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.v2.business",defaultMessage:"For companies using Notion to connect several teams & tools"})};case"enterprise":return{title:(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.title.enterprise",defaultMessage:"Upgrade to Enterprise"}),subtitle:(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.oneLiner.v2.enterprise",defaultMessage:"Advanced controls & support to run your entire organization"})}}}({product:P,isTrial:t.isTrial,showAiLimitMessage:b,isMmOrEnt:x});"ai"===P&&(_.title=(0,B.jsx)(fe,{}));const A=t.isTrial;return(0,B.jsx)(Te,{isTrial:Boolean(t.isTrial),showDismissButton:!0,header:(0,B.jsx)(we,{..._,image:"ai"!==P?t.isTrial?(0,B.jsx)(re,{}):(0,B.jsx)(ie.q,{product:P}):void 0,centerAlign:Boolean(t.isTrial)}),paymentContent:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)($.g,{title:A?null:(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpdateModal.billedTo",defaultMessage:"Billed to"})}),(0,B.jsxs)(q.jX,{gap:8,style:{marginBottom:0},children:[(0,B.jsx)(He,{hideTitle:Boolean(A)}),A?(0,B.jsx)(Xe,{product:P}):null]})]}),orderOptions:F?(0,B.jsxs)(q.jX,{gap:20,children:[(0,B.jsx)(ye,{selectedBillingInterval:M,asyncMonthlyPrice:I.month[P],asyncYearlyPrice:I.year[P],onChange:e=>function(e,t,n){C.FR(t,{billingInterval:e,modal_id:n}),y.Z.update((t=>({...t,temporaryBillingInterval:e})))}(e,c,t.sessionId)}),S.includes("ai")&&!t.onlyShowAddOn?(0,B.jsx)(ge,{addOnFeature:w,asyncPrice:I[M??"month"].ai,onChange:e=>function(e,t,n){C.qz(t,{addOnFeatures:e?[e]:void 0,modal_id:n}),y.Z.update((t=>({...t,addOnFeature:e})))}(e,c,t.sessionId)}):null]}):null,footer:(0,B.jsxs)(q.jX,{gap:16,children:[(0,B.jsx)(De,{state:t,data:n,promo:t.appliedPromo}),(0,B.jsx)(Ce,{state:t,products:T,primaryProduct:P,onClickUpgrade:e=>N({environment:c,intl:u,state:t,stripe:p,elements:m,data:n,useTestClock:e.useTestClock})})]})})}function Xe(e){const{product:t}=e,n=(0,te.O)({billingInterval:"month",priceStore:O.Z,products:[t]}),s=(0,ne.F)({asyncPrice:n[t]});return"ai"===t||"enterprise"===t?null:s?(0,B.jsx)(X.q,{styleName:"Caption-12px/Regular",colorName:"uiBluePrimary",children:(0,B.jsx)(d.FormattedMessage,{id:"subscriptionUpgradeModal.confirmation.trialTerms",defaultMessage:"At the end of your trial, every member of your team will be upgraded to the full price of {money} / member / month.",values:{money:s?(0,B.jsx)(oe.W,{cost:s,trailingZeroDisplay:"stripIfInteger"}):"-"}})}):null}var Ye=n(42778),$e=n(37810),Qe=n(1063),Je=n(91493),et=n(59148),tt=n(42329),nt=n(92041);function st(e){const{state:t,data:n,promo:s}=e,{coupon:a,isTrial:i}=t,l=(0,r.O7)(),c=(0,se.yK)((e=>({container:{display:"flex",flexDirection:"column",gap:16},header:{alignItems:"center",color:e.regularTextColor,display:"flex",fontSize:16,fontWeight:$e.Z.fontWeight.semibold,gap:8,marginBottom:11,lineHeight:"22px"},couponLink:{fontSize:12}})),[]),{availableCurrencyCodes:u,selectedCurrencyCode:p}=(0,o.VK)((()=>({availableCurrencyCodes:O.Z.availableCurrencyCodes,selectedCurrencyCode:O.Z.selectedCurrencyCode})),[]),m=t.temporaryBillingInterval??"month",g=R.Zr(s),f=R.Lp(t,n),h=(0,o.VK)((()=>f.map((e=>O.Z.getPrice(l,(t=>t.product===e&&t.billingInterval===m))))),[m,l,f]);if(h.some((e=>!e.isLoaded)))return(0,B.jsx)(Ae.Z,{});const y=h.map((e=>e.result)).filter(Boolean),x=_.su(n),v=y[0].unitAmount.currencyValue,b=R.cv({prices:y,quantity:x,coupon:a}),M=R.VT({calculatingTax:t.calculatingTax,taxAmount:t.taxAmount,currencyValue:v}),j=R.rF({prices:y,quantity:x,promo:g}),C=R.Et(n,v),w=b.plus(M).minus(j).minus(C),S=w.amount<0?w.withMultipliedAmount(0):w;return(0,B.jsxs)("div",{style:c.container,children:[i?null:(0,B.jsxs)("label",{style:c.header,children:[(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.header",defaultMessage:"Order summary"}),(0,B.jsx)(he.V,{availableCurrencyCodes:u,from:"upgrade_modal",onSelectCurrency:A.yD,selectedCurrencyCode:p})]}),(0,B.jsx)(ot,{prices:y,coupon:t.coupon,data:n,isTrial:i}),_.Fu(t.subscriptionTier)&&(0,B.jsx)(Qe.X,{tier:t.subscriptionTier}),(0,B.jsx)(Oe.Z,{size:1}),i?null:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(rt,{subtotal:b,tax:M,discount:j,accountBalance:C,promo:g,state:t,style:{marginBottom:8}}),(0,B.jsx)(at,{total:S})]})]})}function at(e){const t=R.hr();return(0,B.jsxs)("div",{style:t.itemContainer,children:[(0,B.jsx)("div",{style:t.captionContainer,children:(0,B.jsx)("span",{style:t.totalName,children:(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeOrderSummary.totalForToday",defaultMessage:"Total for today"})})}),(0,B.jsx)("span",{style:t.totalPrice,children:(0,B.jsx)(oe.W,{cost:e.total.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"})})]})}function rt(e){const{subtotal:t,tax:n,discount:s,accountBalance:a,style:r,promo:o}=e,{calculatingTax:i,coupon:l}=e.state;return(0,B.jsxs)("div",{style:r,children:[(0,B.jsx)(tt.r,{subtotal:t}),(0,B.jsx)(nt.u,{tax:n,calculatingTax:i}),o&&!l?(0,B.jsx)(et.T,{discount:s,promo:o}):void 0,(0,B.jsx)(Je.G,{accountBalance:a})]})}function ot(e){const{coupon:t,data:n,prices:s,isTrial:a}=e;return(0,B.jsx)(B.Fragment,{children:s.map((e=>(0,B.jsx)(it,{price:e,data:n,coupon:t,isTrial:a},e.externalId)))})}function it(e){const{price:t,data:n,coupon:s,isTrial:a}=e,r=(0,se.yK)((e=>({container:{display:"flex",justifyContent:"space-between"},item:{},title:{fontSize:14,fontWeight:$e.Z.fontWeight.medium,marginBottom:4},subtitle:{color:e.mediumTextColor,fontSize:12},price:{fontSize:14}})),[]),o=_.su(n),i=t.getCostPerBillingInterval({quantity:o,coupon:s}),l=(0,B.jsx)(oe.W,{cost:i.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});return(0,B.jsxs)("div",{style:r.container,children:[(0,B.jsxs)("div",{style:r.item,children:[(0,B.jsx)("div",{style:r.title,children:(0,B.jsx)(lt,{price:t})}),(0,B.jsx)("div",{style:r.subtitle,children:(0,B.jsx)(dt,{price:t,data:n,coupon:s,isTrial:a})})]}),a?null:(0,B.jsx)("div",{style:r.price,children:l})]})}function lt(e){const{price:t}=e;switch(t.product){case"free":case"student":return null;case"ai":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.ai.addOn",defaultMessage:"Notion AI"});case"personal":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.singlePlayerPlusPlan",defaultMessage:"Plus plan with a 1-member limit"});case"plus":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.plusPlan",defaultMessage:"Plus plan"});case"business":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.businessPlan",defaultMessage:"Business plan"});case"enterprise":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.enterprisePlan",defaultMessage:"Enterprise plan"});default:(0,Q.t1)(t.product)}}function dt(e){const{price:t,data:n,coupon:s,isTrial:a}=e,r=_.su(n),o=t.getMonthlyUnitCost(s),i=(0,B.jsx)(oe.W,{cost:o.toMoneyValue(),trailingZeroDisplay:"stripIfInteger"});if(a)return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.trial.billedYearly",defaultMessage:"{price} / member / month",values:{br:(0,B.jsx)("br",{}),price:i}});switch(t.billingInterval){case"year":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedYearly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed yearly",values:{br:(0,B.jsx)("br",{}),price:i,numberOfMembers:r}});case"month":return(0,B.jsx)(d.FormattedMessage,{id:"spaceSubscriptionUpgradeModal.orderSummary.planSubtitle.billedMonthly",defaultMessage:"{price} / member / month × {numberOfMembers, plural, one {# member} other {# members}}{br}Billed monthly",values:{br:(0,B.jsx)("br",{}),price:i,numberOfMembers:r}});default:(0,Q.t1)(t.billingInterval)}}function ct(e){const{state:t,data:n,spaceStore:a,isCheckoutV2:r}=e,{subscriptionTier:i,onlyShowAddOn:l,calculatingTax:d,temporaryBillingInterval:c,taxAmount:u,addOnFeature:p,coupon:m}=t,g=_.XX(n),f=(0,o.VK)((()=>(null==g?void 0:g.currencyCode)??O.Z.selectedCurrencyCode),[g]),{payAmount:h}=_.uN({subscriptionTier:i,currencyCode:f,promo:t.appliedPromo,data:n,onlyShowAddOn:l,calculatingTax:d,billingInterval:c??"year",taxAmount:u,addOnFeature:p,coupon:m}),y=(0,P.useElementsOptions)({type:"subscription",amount:h.amount,currency:h.currencyCode});return(0,B.jsx)(s.Elements,{stripe:(0,P.getStripe)(),options:y,children:(0,B.jsx)(ut,{state:t,data:n,spaceStore:a,isCheckoutV2:r})})}function ut(e){const{state:t,data:n,spaceStore:a,isCheckoutV2:i}=e,c=(0,r.O7)(),p=(0,d.useIntl)(),{isMobile:m}=(0,r.Fy)(),f=(0,s.useStripe)(),x=(0,s.useElements)(),v=(0,o.VK)((()=>h.Z.state.online),[]),[b,M,j,C,w]=(0,o.VK)((()=>{var e;const n=(null===(e=z.subscriptionDataStoreInstance.state)||void 0===e?void 0:e.addOns)??[],s=(0,g.CV)(a);return[t.subscriptionTier,t.temporaryBillingInterval,t.addOnFeature,!s&&!(0,l.de)(n),t.coupon]}),[t,a]);if(!t.open)return null;if(!v)return(0,B.jsx)(U.L,{});const S=R.Lp(t,n);return i?(0,B.jsx)(qe,{state:t,data:n,spaceStore:a}):(0,B.jsx)(u.CT,{showDismissButton:!0,main:(0,B.jsx)(u.T1,{width:m?"fill":450,children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("div",{style:{paddingBottom:24},children:(0,B.jsx)(G.Q,{subscriptionTier:t.subscriptionTier,onlyShowAddOn:t.onlyShowAddOn,addOnFeature:t.addOnFeature,type:t.type,isTrial:t.isTrial})}),t.onlyShowAddOn?null:(0,B.jsx)(Ye.Z,{subscriptionTier:b,billingInterval:M,addOnFeature:j,canAddAI:C,isTrial:t.isTrial,modalId:t.sessionId,coupon:w,onChangeBillingInterval:e=>{y.Z.update((t=>({...t,temporaryBillingInterval:e})))},onChangeAddOnFeature:e=>{y.Z.update((t=>({...t,addOnFeature:e})))}}),(0,B.jsx)(V.iQ,{})]})}),sidebar:(0,B.jsxs)(u.T6,{width:m?"fill":300,children:[(0,B.jsx)(st,{state:t,data:n,promo:t.appliedPromo}),(0,B.jsx)(W.f,{state:t,products:S,onClickUpgrade:e=>N({environment:c,intl:p,state:t,stripe:f,elements:x,data:n,useTestClock:e.useTestClock})})]})})}const pt=function(e){const{data:t,spaceStore:n}=e,s=(0,o.VK)((()=>y.Z.state),[]),l=(0,r.O7)(),u=(0,d.useIntl)(),g=(0,o.VK)((()=>(0,k.Pw)(l)),[l]);(0,a.useEffect)((()=>{const{state:e}=y.Z;if(!e.open)return;const{currentUserStore:n}=f.default.state,s=null!=n&&n.isDefined()?n.getModel():void 0;if(s){const n=s.getDisplayName(u);var a;if(y.Z.setState({...e,temporaryAddress:{...e.temporaryAddress,name:n}}),"subscribed_admin"===t.type||"unsubscribed_admin"===t.type)y.Z.setState({...e,appliedPromo:null===(a=t.customerData)||void 0===a?void 0:a.stripe.promo})}}),[]);const h=(0,o.VK)((()=>{const{state:e}=y.Z;return!!e.open&&e.vatApplicable}),[]),x=(0,L.y0)();return(0,a.useEffect)((()=>{(async()=>{const e=await c.getGeoIpLocation(l,{});if("success"!==e.type)return;const{countryCodeFromIp:t}=e.data;if(!(0,i.GC)(t))return;const n=null==x?void 0:x.find((e=>e.countryCode===t));y.Z.update((e=>({...e,vatApplicable:(null==n?void 0:n.vatApplicable)??!1})))})()}),[l,h,x]),(0,B.jsx)(p.c,{ariaLabelledBy:m.BaY,isOpen:s.open,onClosed:()=>Z.Fp(l),animateSizeTransition:!g,areaConstraint:{height:{scroll:g}},children:s.open?(0,B.jsx)(ct,{state:s,data:t,spaceStore:n,isCheckoutV2:g}):null})}},67479:(e,t,n)=>{n.d(t,{A:()=>l});n(67294);var s=n(79956),a=n(9291),r=n(82914),o=n(88893),i=n(85893);function l(e){let{currentProduct:t,newProduct:n,formattedPeriodEndDate:o}=e;return(0,i.jsx)(r.sR,{header:(0,i.jsx)(r.vI,{iconAndTitle:(0,i.jsx)(r.kC,{iconGroup:s.F,title:(0,i.jsx)(d,{currentProduct:t,newProduct:n})}),description:(0,i.jsx)("div",{style:{maxWidth:260},children:(0,i.jsx)(a.FormattedMessage,{id:"downgradeFlow.confirmationStep.description",defaultMessage:"You can still utilize all the features of your current plan until {hasEndDate, select, true {{date}} other {the end of your billing period}}. You can resubscribe or switch to another plan anytime.",values:{hasEndDate:!!o,date:(0,i.jsx)("span",{style:{fontWeight:590},children:o})}})})}),footer:null})}function d(e){let{currentProduct:t,newProduct:n}=e;const s=(0,a.useIntl)();return n?(0,i.jsx)(a.FormattedMessage,{id:"downgradeFlow.confirmationStep.title",defaultMessage:"Thank you for switching to {plan}",values:{plan:(0,o.t1)(n,s)}}):"ai"===t?(0,i.jsx)(a.FormattedMessage,{id:"downgradeFlow.confirmationStep.ai.title",defaultMessage:"Notion AI has been removed"}):null}},65277:(e,t,n)=>{n.r(t),n.d(t,{DowngradeModal:()=>He});var s=n(67294),a=n(13991),r=n(480),o=n(86628),i=n(7057),l=n(9182),d=n(896),c=n(47425),u=n(9291),p=n(7032),m=n(86572),g=n(64964),f=n(7184),h=n(24405),y=n(15095),x=n(93535),v=n(89024),b=n(82914),M=n(7124),j=n(63296),C=n(89728),w=n(33941),S=n(85893);function I(e){const{downgradeProduct:t,excessGuests:n,formattedPeriodEndDate:s,internalDomains:a,spaceStore:r,onClickContinue:i,onClickManageGuests:l}=e,d=(0,u.useIntl)(),c=(0,o.VK)((()=>r.getName()),[r]),p=d.formatMessage(O[t]);return c&&n.length?(0,S.jsx)(b.sR,{header:(0,S.jsx)(b.vI,{iconAndTitle:(0,S.jsx)(b.kC,{iconGroup:x.x,iconColorName:"red",title:d.formatMessage(_.title,{planName:p,spaceName:c})}),description:d.formatMessage(_.description,{domain:a[0].url,number:n.length,date:s})}),footer:(0,S.jsx)(P,{onClickContinue:i,onClickManageGuests:l}),children:(0,S.jsx)(T,{excessGuests:n,spaceName:c})}):null}function T(e){const{excessGuests:t,spaceName:n}=e,s=(0,u.useIntl)(),a=(0,h.yK)((()=>({wrapper:{background:"#FDF5F3",textAlign:"center"}})),[]),r=(0,o.VK)((()=>t.map((e=>e.getKeyStore("given_name").getValue()??e.getDisplayName(s)))),[t,s]);return(0,S.jsx)(v.jX,{align:"top-center",borderRadius:6,direction:"column",gap:10,padding:"14px 12px",style:a.wrapper,width:"fill",children:(0,S.jsxs)(v.jX,{direction:"column",gap:8,align:"top-center",children:[(0,S.jsx)(v.jX,{direction:"row",align:"center",style:{paddingLeft:4},children:r.slice(0,3).map(((e,t)=>(0,S.jsx)(F,{givenName:e},t)))}),(0,S.jsxs)(v.jX,{direction:"column",gap:4,align:"center",children:[(0,S.jsx)(M.q,{colorName:"uiRedPrimary",styleName:"Body-14px/Medium",children:(0,S.jsx)(k,{givenNames:r,spaceName:n})}),(0,S.jsx)(M.q,{colorName:"red",styleName:"Caption-12px/Regular",children:s.formatMessage(_.recommendation)})]})]})})}function k(e){const{givenNames:t,spaceName:n}=e,s=(0,u.useIntl)();return 1===t.length?(0,S.jsx)(S.Fragment,{children:s.formatMessage(_.oneRemovedGuest,{name1:t[0],spaceName:n})}):2===t.length?(0,S.jsx)(S.Fragment,{children:s.formatMessage(_.twoRemovedGuests,{name1:t[0],name2:t[1],spaceName:n})}):(0,S.jsx)(S.Fragment,{children:s.formatMessage(_.manyRemovedGuests,{name1:t[0],name2:t[1],count:t.length-2,spaceName:n})})}function F(e){const{givenName:t}=e,n=(0,h.yK)((e=>({circle:{borderRadius:14,border:`1px dashed ${e.stroke.uiRedDeemphasized}`,background:e.surface.elevated,marginLeft:-4}})),[]);return(0,S.jsx)(v.jX,{style:n.circle,width:28,height:28,align:"center",children:(0,S.jsx)(M.q,{styleName:"Body-14px/Semibold",colorName:"uiRedPrimary",children:(0,y.p4)(t)[0].toUpperCase()})})}function P(e){const{onClickContinue:t,onClickManageGuests:n}=e,s=(0,u.useIntl)();return(0,S.jsx)(v.jX,{gap:16,children:(0,S.jsxs)(v.jX,{gap:8,align:"center",children:[(0,S.jsx)(j.Z,{"aria-label":s.formatMessage(_.manageGuests),onClick:n,style:{width:"100%"},children:s.formatMessage(_.manageGuests)}),(0,S.jsx)(C.Z,{"aria-label":s.formatMessage(_.continueWithDowngrade),onClick:t,style:{justifyContent:"center"},children:(0,S.jsx)(M.q,{colorName:"secondary",children:s.formatMessage(_.continueWithDowngrade)})})]})})}const _=(0,u.defineMessages)({title:{id:"DowngradeWillRemoveGuestsModal.title",defaultMessage:"Downgrading to {planName} will remove guests from {spaceName}"},description:{id:"DowngradeWillRemoveGuestsModal.description",defaultMessage:"{number} of your guests with the email domain ‘@{domain}’ will be removed on {date} to align with your new plan's guest limit"},continueWithDowngrade:{id:"DowngradeWillRemoveGuestsModal.continueWithDowngrade",defaultMessage:"Continue with downgrade"},manageGuests:{id:"DowngradeWillRemoveGuestsModal.manageGuests",defaultMessage:"Manage guests"},manyRemovedGuests:{id:"DowngradeWillRemoveGuestsModal.manyRemovedGuests",defaultMessage:"{name1}, {name2}, and {count, plural, one {1 more guest} other {{count} more guests}} will be removed from {spaceName}"},twoRemovedGuests:{id:"DowngradeWillRemoveGuestsModal.twoRemovedGuests",defaultMessage:"{name1} and {name2} will be removed from {spaceName}"},oneRemovedGuest:{id:"DowngradeWillRemoveGuestsModal.oneRemovedGuest",defaultMessage:"{name1} will be removed from {spaceName}"},recommendation:{id:"DowngradeWillRemoveGuestsModal.recommendation",defaultMessage:"If you want them to retain access, we recommend upgrading them to members."}}),O={business:w.a.business,enterprise:w.a.enterprise,free:w.a.free,personal:w.a.personal,plus:w.a.plus,student:w.a.educationPlus};var A=n(74244),Z=n(859),B=n(92083),D=n(71487),E=n(81023),N=n(70060),V=n(19889),R=n(53965),L=n(25829);var U=n(88893);var z=n(93586),W=n(92595),G=n(59753),K=n(84683);const H=new(n(51444).q)((e=>{let{spaceId:t,inviteeIds:n}=e;return`${t}:${n.sort().join(",")}`}),(async function(e,t){const s=await Promise.resolve().then(n.bind(n,54642)),a=await s.getInvitesForInvitees(e,t);return"success"===a.type?a.data.invites.map((e=>G.kk.fromValue(K.Tu,e))):void 0}));W.exposeDebugValue("InvitesForInviteesStore",H);const q=H;var X=n(20454),Y=n(73254),$=n(88280);function Q(e){let{space:t,spaceUser:n,desiredState:s}=e;const a=(0,r.O7)(),i=(l=$.subscriptionDataStoreInstance,(0,o.VK)((()=>{const e=l.state;if(e)return(0,U.ND)(e)}),[l]));var l;const d=(0,Y.eB)({name:"internal_guests",spaceId:t.id,spaceUserId:n.id,amount:0,state:s});return(0,o.VK)((()=>{const e=t.getModel();if(!e||!d)return[];const n=(i??[]).map((e=>function(e,t){return new X.U(e,{table:V.KJ,id:t})}(a,e.userId))).map((e=>e.getModel())),s=(0,R.oA)(n),r=e.id,o=s.map((e=>e.id)),l=q.getData(a,{spaceId:r,inviteeIds:o}),c=z.Z.getData(a,{spaceId:r});return function(e){let{featureAvailability:t,guests:n,invites:s,domains:a}=e;const r=(0,R.vM)(s,(e=>e.invitee_id)),o=n.filter((e=>(0,L.is)(e.email,a))),i=(0,R.MR)(o,(e=>{const t=r[e.id]??[],n=(0,R.UT)(t,(e=>e.created_time));return null==n?void 0:n.created_time})),l=n.length,d=t.limit.total,c="unlimited"===d?0:Math.max(l-d,0);return i.slice(0,c)}({featureAvailability:d,guests:s,invites:l??[],domains:c??[]}).map((e=>new X.U(a,{table:V.KJ,id:e.id})))}),[a,t,d,i])}var J=n(23695),ee=n(53578),te=n(43449),ne=n(33493),se=n(67479),ae=n(45238);const re=(0,ae.CZ)("gift",{default:{loader:()=>n.e(2765).then(n.bind(n,22765)),size:20},small:{loader:()=>n.e(3153).then(n.bind(n,83153)),size:16},mini:{loader:()=>n.e(3467).then(n.bind(n,33467)),size:14},large:{loader:()=>n.e(9743).then(n.bind(n,69743)),size:24}});var oe=n(5336),ie=n(42696),le=n(50066),de=n(47409),ce=n(88507),ue=n(26939),pe=n(28495),me=n(36312),ge=n(76994),fe=n(43163);function he(e){let{title:t,step:n,features:s}=e;const a=(0,h.yK)((e=>({blue:{background:e.tint.uiBlue,borderRadius:6},red:{background:e.tint.uiRed,borderRadius:6}})),[]);return(0,S.jsxs)(v.jX,{gap:10,padding:"14px 12px",style:"downgrade"===n?a.red:a.blue,children:[(0,S.jsx)(M.q,{styleName:"Body-13px/Semibold",colorName:"downgrade"===n?"uiRedPrimary":"uiBluePrimary",children:t}),(0,S.jsx)(v.jX,{gap:10,children:s})]})}const ye={plus:["unlimited_synced_databases","unlimited_file_uploads","version_history_30"],business:["saml","version_history_90","private_teamspaces"],enterprise:["scim","audit_log","security"]},xe={unlimited_synced_databases:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.unlimited_synced_databases",defaultMessage:"Unlimited synced databases"}),icon:ie.t},unlimited_file_uploads:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.unlimited_file_uploads",defaultMessage:"Unlimited file uploads"}),icon:le.R},version_history_30:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.versionHistory",defaultMessage:"30 day version history"}),icon:oe.r},saml:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.saml",defaultMessage:"SAML SSO"}),icon:pe.v},private_teamspaces:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.privateTeamspaces",defaultMessage:"Private teamspaces"}),icon:ce.I},version_history_90:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.versionHistory.90",defaultMessage:"90 day version history"}),icon:ge.w},scim:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.scim",defaultMessage:"SCIM"}),icon:me.o},audit_log:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.auditLog",defaultMessage:"Audit log"}),icon:de.N},security:{message:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.features.securityAndControls",defaultMessage:"Advanced security and controls"}),icon:ue.c}};function ve(e){let{currentProduct:t,newProduct:n,coupon:s,onSubmit:a}=e;const r=(0,fe.o)(s),o=(0,fe.W)(s);return(0,c.mq)(t)?(0,S.jsx)(b.sR,{header:(0,S.jsx)(be,{currentProduct:t,percentage:r,duration:o}),footer:(0,S.jsx)(Me,{onSubmit:a,percentage:r,nextProduct:n}),children:(0,S.jsx)(he,{title:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.offerSection.description.v2",defaultMessage:"You'll get to keep:"}),step:"offer",features:ye[t].map((e=>(0,S.jsx)(je,{feature:e},e)))})}):null}function be(e){let{currentProduct:t,percentage:n,duration:s}=e;const a=(0,u.useIntl)(),r=(0,U.t1)(t,a);return(0,S.jsx)(b.vI,{iconAndTitle:(0,S.jsx)(b.kC,{iconGroup:re,title:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.offerStep.header.title",defaultMessage:"{percentage} off your {currentProductMessage} plan",values:{percentage:n,currentProductMessage:r}})}),description:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.offerStep.header.description",defaultMessage:"Get {percentage} off for {duration} if you keep your plan",values:{percentage:n,duration:s}})})}function Me(e){let{onSubmit:t,percentage:n,nextProduct:s}=e;const a=(0,u.useIntl)(),r=(0,U.t1)(s,a);return(0,S.jsx)(b.a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.offerStep.getDiscountMessage",defaultMessage:"Get {percentage} off",values:{percentage:n}}),onClick:()=>t(!0)}],secondaryButtons:[{buttonType:"secondary",label:(0,S.jsx)(M.q,{styleName:"Body-14px/Regular",colorName:"primary",children:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.continueWithDowngrade",defaultMessage:"Continue downgrade to {nextProductMessage}",values:{nextProductMessage:r}})}),onClick:()=>t(!1)}]})}function je(e){let{feature:t}=e;return(0,S.jsxs)(v.jX,{direction:"row",gap:4,align:"center-left",children:[(0,S.jsx)(Ce,{feature:t}),(0,S.jsx)(we,{feature:t})]})}function Ce(e){let{feature:t}=e;const n=(0,h.yK)((e=>({icon:{display:"flex",height:void 0,fill:e.icon.uiBluePrimary,width:18}})),[]);return xe[t].icon(n.icon)}function we(e){let{feature:t}=e;return(0,S.jsx)(M.q,{styleName:"Body-14px/Regular",colorName:"uiBluePrimary",children:xe[t].message})}const Se=(0,ae.CZ)("arrowLeftAndRight",{default:{loader:()=>n.e(6931).then(n.bind(n,66931)),size:20},small:{loader:()=>n.e(2548).then(n.bind(n,62548)),size:16},mini:{loader:()=>n.e(9486).then(n.bind(n,19486)),size:14},large:{loader:()=>n.e(7500).then(n.bind(n,87500)),size:24}});var Ie=n(84267),Te=n(91376),ke=n(64921),Fe=n(49806),Pe=n(81254),_e=n(26388),Oe=n(27533);function Ae(e){let{initialPlan:t,asyncPriceByProduct:n,onSubmit:a}=e;const i=(0,u.useIntl)(),l=(0,r.O7)(),[d,c]=s.useState(t),p=d===t,g=(0,o.VK)((()=>ne.Z.selectedCurrencyCode),[]),f=s.useMemo((()=>ee.cM.map((e=>{const t=i.formatMessage(ee.mY[e]);if("free"===e)return{label:t,value:e,description:i.formatMessage(ee.aq.price,{money:(0,S.jsx)(Oe.W,{cost:{amount:0,currencyCode:g},trailingZeroDisplay:"stripIfInteger"})})};const s=(0,U.lo)(n[e]);return{label:t,value:e,description:i.formatMessage(ee.aq.price,{money:s?(0,S.jsx)(Oe.W,{cost:s,trailingZeroDisplay:"stripIfInteger"}):"-"})}}))),[n,i,g]);return(0,S.jsx)(b.sR,{header:(0,S.jsx)(Ze,{}),footer:(0,S.jsx)(Be,{disableSubmit:p,handleSubmit:()=>a(d)}),children:(0,S.jsx)(v.jX,{gap:8,children:f.map((e=>(0,S.jsx)(Fe.n,{name:"plan-options",selectType:"radio",selectAlign:"right",isSelected:d===e.value,onChange:e=>{return t=e.target.value,void(["free","plus","business","enterprise"].includes(t)&&(c(t),m.j(l,{name:"change_plan_button_clicked",args:{plan_selected:t}})));var t},...e},e.value)))})})}function Ze(){return(0,S.jsx)(b.vI,{iconAndTitle:(0,S.jsx)(b.kC,{iconGroup:Se,title:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.planSelectStep.title",defaultMessage:"Which plan do you want to change to?"})}),description:(0,S.jsxs)(v.jX,{gap:4,direction:"row",align:"center",children:[(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.planSelectStep.description",defaultMessage:"Pick one of the following Notion plans"}),(0,S.jsx)(_e.ZP,{placement:_e.ug.Bottom,renderTooltip:()=>(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.planSelectionStep.planTooltip",defaultMessage:"See all Notion plans"}),render:e=>(0,S.jsx)(ke.Z,{style:{borderRadius:2},onClick:()=>Te.r$({currentTab:"plans"}),...e,children:(0,S.jsx)(Pe.x,{iconGroup:Ie.M,colorName:"tertiary",variantName:"small"})})})]})})}function Be(e){let{disableSubmit:t,handleSubmit:n}=e;return(0,S.jsx)(b.a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.continue",defaultMessage:"Continue"}),onClick:n,isDisabled:t}],secondaryButtons:[{buttonType:"dismiss"}]})}n(57658);var De=n(62657),Ee=n(33907),Ne=n(3791),Ve=(n(95477),n(52790));function Re(e){let{newProduct:t,onSubmit:n,formattedPeriodEndDate:s}=e;const a="free"===t&&["local","staging","development"].includes("production");return(0,S.jsx)(b.sR,{header:(0,S.jsx)(Le,{newProduct:t,formattedPeriodEndDate:s}),footer:(0,S.jsx)(Ue,{canChurnImmediately:a,onSubmit:n}),children:(0,S.jsx)(he,{title:(0,S.jsx)(u.FormattedMessage,{id:"churnSurvey.restrictionStep.description",defaultMessage:"Your workspace will be restricted to:"}),step:"downgrade",features:(0,S.jsx)(ze,{newProduct:t})})})}function Le(e){let{newProduct:t,formattedPeriodEndDate:n}=e;const s=(0,u.useIntl)(),a=(0,U.t1)(t,s);return(0,S.jsx)(b.vI,{iconAndTitle:(0,S.jsx)(b.kC,{iconGroup:De.h,iconColorName:"uiRedPrimary",title:(0,S.jsx)(u.FormattedMessage,{id:"downgradeModal.header.downgrade.title",defaultMessage:"Continue downgrading to {planMessage}?",values:{planMessage:a}})}),description:n?(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.restrictionStep.description",defaultMessage:"You can still utilize all the features of your current plan until {date}. You can resubscribe or switch to another plan anytime.",values:{date:(0,S.jsx)("span",{style:{fontWeight:590},children:n})}}):null})}function Ue(e){let{onSubmit:t,canChurnImmediately:n}=e;const s=[{buttonType:"destructive",label:(0,S.jsx)(u.FormattedMessage,{id:"downgradeFlow.restrictionStep.downgrade",defaultMessage:"Downgrade"}),onClick:t}];return n&&s.push({buttonType:"destructive",label:(0,S.jsx)(S.Fragment,{children:"🚧 Downgrade immediately (dev only) 🚧"}),onClick:()=>t({churnImmediately:!0})}),(0,S.jsx)(b.a6,{layout:"vertical",primaryButtons:s,secondaryButtons:[{buttonType:"dismiss"}]})}function ze(e){let{newProduct:t}=e;const n=(0,u.useIntl)(),s=(0,h.yK)((e=>({icon:{display:"flex",height:16,fill:e.icon.secondary,width:void 0}})),[]),a=(0,te.K_)($.subscriptionDataStoreInstance),r=Ne.de(null==a?void 0:a.addOns),i=(0,o.VK)((()=>t&&(0,Ve.mO)(t,r)),[t,r]);return i?(0,S.jsx)(S.Fragment,{children:i.map(((e,t)=>(0,S.jsxs)(v.jX,{direction:"row",gap:4,align:"center-left",children:[e.icon(s.icon),(0,S.jsx)(M.q,{styleName:"Body-14px/Regular",colorName:"secondary",customStyles:{textDecoration:"line-through"},children:n.formatMessage(e.duration)}),(0,Ee.n)(s.icon),(0,S.jsx)(M.q,{styleName:"Body-14px/Regular",colorName:"uiRedPrimary",children:e.highlightedMessage&&n.formatMessage(e.highlightedMessage)}),(0,S.jsx)(M.q,{styleName:"Body-14px/Regular",colorName:"primary",children:e.message&&n.formatMessage(e.message)})]},`restriction-${t}`)))}):null}var We=n(67565);const Ge=406,Ke=300;function He(e){let{currentProduct:t,billingInterval:n,currentPeriodEnd:h,isOpen:y,onClose:x}=e;const v=(0,te.Oi)({billingInterval:n,priceStore:ne.Z,products:ee.cM}),b=(0,r.O7)(),M=(0,te.K_)($.subscriptionDataStoreInstance),j=null==M?void 0:M.customerId,[C,w]=s.useState("plan_select"),[T,k]=s.useState({newProduct:t,reasons:[],reasonOther:void 0,reasonOtherTools:void 0}),[F]=s.useState((0,p.ZP)()),[P,_]=s.useState(void 0);(0,s.useEffect)((()=>m.j(b,{name:"churn_survey",args:{newProduct:T.newProduct,churnType:t,reasons:T.reasons,reasonOther:T.reasonOther,reasonOtherTools:T.reasonOtherTools,stage:C,churnSurveyId:F}})),[b,C,T,F,t]);const O=(0,Z.r)(),V=(0,Z._)(O),R=(0,A.U)(O),L=(0,o.VK)((()=>(0,N.Gz)()),[]),U=Q({space:O,spaceUser:V,desiredState:(0,l.oh)(T.newProduct)}),z=s.useCallback((e=>{if("upgrade"===(0,c.NY)({oldTier:t,newTier:e})){x();const t=$.subscriptionDataStoreInstance.state;if(!n||!t)return;(0,J.l)({environment:b,data:t,billingInterval:n,product:e,buttonText:"Upgrade",pageSection:"downgrade_modal"})}else k((t=>({...t,newProduct:e}))),w("survey")}),[n,t,b,x]),W=h?(0,i.Yx)(h,"long",a.SP):void 0;return(0,S.jsx)(f.c,{areaConstraint:{width:{min:"confirmation"===C?Ke:Ge}},isOpen:y,onClosed:x,animateSizeTransition:"confirmation"!==C,children:(()=>{switch(C){case"plan_select":return(0,S.jsx)(Ae,{initialPlan:T.newProduct,asyncPriceByProduct:v,onSubmit:z});case"survey":return(0,S.jsx)(We.t,{currentProduct:t,onSubmit:async e=>{if(m.j(b,{name:"churn_survey_submitted",args:{newProduct:T.newProduct,churnType:t,reasons:e.reasons,reasonOther:e.customTextByReason.other??void 0,reasonOtherTools:e.customTextByReason.switching??void 0,stage:C,churnSurveyId:F}}),k((t=>({...t,reasons:e.reasons,reasonOther:e.customTextByReason.other??void 0,reasonOtherTools:e.customTextByReason.switching??void 0}))),j){const e=await D.yY(b,{customerId:j,newPlan:T.newProduct,offerType:"downgrade_flow"});if(e)return _(e),void w("offer")}w("remove_guests")}});case"offer":return P?(0,S.jsx)(ve,{currentProduct:t,coupon:P,newProduct:T.newProduct,onSubmit:async e=>{e?(m.j(b,{name:"offer_accepted",args:{coupon:P}}),j&&(0,d.$v)(P)&&(await D.AG(b,{customerId:j,newPlan:t,coupon:P,offerType:"downgrade_flow"}),g.oV({label:(0,S.jsx)(u.FormattedMessage,{id:"applyCoupon.success",defaultMessage:"Coupon successfully applied"})})),x()):w("remove_guests")}}):void w("remove_guests");case"remove_guests":const e=U&&U.length>0,n=R&&R.length>0;return L&&e&&n&&W&&O?(0,S.jsx)(I,{downgradeProduct:T.newProduct,excessGuests:U,formattedPeriodEndDate:W,internalDomains:R,spaceStore:O,onClickContinue:()=>w("downgrade"),onClickManageGuests:()=>{B.Z.setState({open:!0,openedFrom:"share_menu",currentTab:"members",defaultSubtab:void 0,highlightedSetting:void 0})}}):void w("downgrade");case"downgrade":return(0,S.jsx)(Re,{newProduct:T.newProduct,onSubmit:async e=>{m.j(b,{name:"continue_downgrade_button_clicked"});const t=$.subscriptionDataStoreInstance.state;O&&t&&await(0,E.sv)({environment:b,product:T.newProduct,data:t,spaceStore:O,from:"billing_page",churnState:null!=e&&e.churnImmediately?"churn_immediately":"churn_by_end_of_billing_period"}),w("confirmation")},formattedPeriodEndDate:W});case"confirmation":return(0,S.jsx)(se.A,{currentProduct:t,newProduct:T.newProduct,formattedPeriodEndDate:W})}})()})}},9409:(e,t,n)=>{n.r(t),n.d(t,{RemoveAddOnModal:()=>I});var s=n(67294),a=n(13991),r=n(480),o=n(7057),i=n(9182),l=n(7032),d=n(86572),c=n(7184),u=n(859),p=n(81023),m=n(58333),g=n(23079),f=(n(57658),n(62657)),h=n(9291),y=n(82914),x=(n(95477),n(85893));function v(e){let{onSubmit:t,formattedPeriodEndDate:n}=e;const s=["staging","development"].includes("production");return(0,x.jsx)(y.sR,{header:(0,x.jsx)(b,{formattedPeriodEndDate:n}),footer:(0,x.jsx)(M,{onSubmit:t,canChurnImmediately:s})})}function b(e){let{formattedPeriodEndDate:t}=e;return(0,x.jsx)(y.vI,{iconAndTitle:(0,x.jsx)(y.kC,{iconGroup:f.h,title:(0,x.jsx)(h.FormattedMessage,{id:"addOnCancellationStep.cancellation.title",defaultMessage:"Remove AI at the end of your billing period?"})}),description:t?(0,x.jsx)(h.FormattedMessage,{id:"addOnCancellationStep.cancellation.description",defaultMessage:"If you continue with the downgrade, you will continue to enjoy Notion AI until the end of your billing period on <bold>{periodEnd}</bold>. You can resubscribe anytime.",values:{periodEnd:t,bold:e=>(0,x.jsx)("b",{children:e})}}):null})}function M(e){let{onSubmit:t,canChurnImmediately:n}=e;const s=[{buttonType:"destructive",label:(0,x.jsx)(h.FormattedMessage,{id:"churnSurvey.midterm.downgradeButton.title",defaultMessage:"Schedule downgrade"}),onClick:t}];return n&&s.push({buttonType:"destructive",label:(0,x.jsx)(x.Fragment,{children:"🚧 Downgrade immediately (dev only) 🚧"}),onClick:()=>t({churnImmediately:!0})}),(0,x.jsx)(y.a6,{layout:"vertical",primaryButtons:s,secondaryButtons:[{buttonType:"dismiss"}]})}var j=n(67479),C=n(67565);const w=406,S=300;function I(e){let{billingInterval:t,currentPeriodEnd:n,isOpen:f,onClose:h}=e;const y=(0,r.O7)(),[b,M]=s.useState("survey"),[I,T]=s.useState({reasons:[],reasonOther:void 0,reasonOtherTools:void 0}),[k]=s.useState((0,l.ZP)());(0,s.useEffect)((()=>d.j(y,{name:"churn_survey",args:{churnType:"ai",reasons:I.reasons,reasonOther:I.reasonOther,reasonOtherTools:I.reasonOtherTools,stage:b,churnSurveyId:k}})),[y,b,I,k]);const F=(0,u.r)(),P=(0,g.pQ)({spaceId:null==F?void 0:F.id}),_=n?(0,o.Yx)(n,"long",a.SP):void 0;return(0,x.jsx)(c.c,{areaConstraint:{width:{min:"confirmation"===b?S:w}},isOpen:f,onClosed:h,animateSizeTransition:"confirmation"!==b,children:(()=>{switch(b){case"survey":return(0,x.jsx)(C.t,{currentProduct:"ai",onSubmit:e=>(d.j(y,{name:"churn_survey_submitted",args:{churnType:"ai",reasons:e.reasons,reasonOther:e.customTextByReason.other??void 0,reasonOtherTools:e.customTextByReason.using_another_ai_service??void 0,stage:b,churnSurveyId:k}}),T((t=>({reasons:e.reasons,reasonOther:e.customTextByReason.other??void 0,reasonOtherTools:e.customTextByReason.using_another_ai_service??void 0}))),M("downgrade"))});case"downgrade":return(0,x.jsx)(v,{formattedPeriodEndDate:_,onSubmit:async()=>{if(d.j(y,{name:"continue_downgrade_button_clicked"}),P&&F){const e=(0,i.Lg)(P),t=(0,m.t4)(e,"ai");await(0,p.Mg)({environment:y,spaceStore:F,from:"billing_page",desiredState:t})}M("confirmation")}});case"confirmation":return(0,x.jsx)(j.A,{currentProduct:"ai",formattedPeriodEndDate:_})}})()})}},67565:(e,t,n)=>{n.d(t,{t:()=>g});n(67294);var s=n(86628),a=n(24405);const r=(0,n(45238).CZ)("bubbleLeftTextBubbleRight",{default:{loader:()=>n.e(9179).then(n.bind(n,49179)),size:20},small:{loader:()=>n.e(4686).then(n.bind(n,12381)),size:16},mini:{loader:()=>n.e(5285).then(n.bind(n,75285)),size:14},large:{loader:()=>n.e(9383).then(n.bind(n,19383)),size:24}});var o=n(9291),i=n(53965),l=n(89024),d=n(82914),c=n(42605),u=n(57187),p=n(88101),m=n(85893);function g(e){let{onSubmit:t,currentProduct:n}=e;const r=(0,a.yK)((e=>({container:{border:`1px solid ${e.stroke.deemphasized}`,borderRadius:6}})),[]);return(0,s.VK)((()=>{"ai"===n?p.H.setOptions([...(0,i.TV)([u.f.tooExpensive,u.f.missingFeatures,u.f.upgradedByMistake,u.f.tooDifficult,u.f.notUsingEnough,u.f.qualityOfResults,u.f.usingAnotherAiService,u.f.dataSecurity]),u.f.other]):p.H.setOptions([...(0,i.TV)([u.f.notUsingEnough,u.f.switching,u.f.tooExpensive,u.f.tooDifficult,u.f.missingFeatures,u.f.upgradedByMistake,u.f.consolidatingWorkspaces]),u.f.other])}),[n]),(0,m.jsx)(d.sR,{header:(0,m.jsx)(f,{}),footer:(0,m.jsx)(h,{handleSubmit:()=>t(p.H.toSurveyResult())}),children:(0,m.jsx)(l.jX,{padding:"16px 16px",style:r.container,children:(0,m.jsx)(c.m,{store:p.H})})})}function f(){return(0,m.jsx)(d.vI,{iconAndTitle:(0,m.jsx)(d.kC,{iconGroup:r,title:(0,m.jsx)("div",{style:{maxWidth:300},children:(0,m.jsx)(o.FormattedMessage,{id:"downgradeFlow.surveyStep.title",defaultMessage:"We’d love your input to help us make Notion better for everyone"})})}),description:(0,m.jsx)(o.FormattedMessage,{id:"downgradeFlow.surveyStep.description",defaultMessage:"Let us know why you’re downgrading"})})}function h(e){let{handleSubmit:t}=e;return(0,m.jsx)(d.a6,{layout:"vertical",primaryButtons:[{buttonType:"primary",label:(0,m.jsx)(o.FormattedMessage,{id:"downgradeFlow.continue",defaultMessage:"Continue"}),onClick:t}],secondaryButtons:[{buttonType:"dismiss"}]})}},43163:(e,t,n)=>{n.d(t,{W:()=>i,o:()=>o});n(67294);var s=n(9291),a=n(1898),r=n(85893);function o(e){switch(e){case"team_three_months":case"ai_fifty_percent":return(0,r.jsx)(s.FormattedMessage,{id:"coupon.percentage.fiftyPercent",defaultMessage:"50%"});case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return(0,r.jsx)(s.FormattedMessage,{id:"coupon.percentage.tenPercent",defaultMessage:"10%"});default:(0,a.t1)(e)}}function i(e){switch(e){case"team_annual":case"business_annual":case"enterprise_annual":return(0,r.jsx)(s.FormattedMessage,{id:"coupon.duration.twelveMonths",defaultMessage:"12 months"});case"team_three_months":case"business_three_months":case"enterprise_three_months":case"ai_fifty_percent":return(0,r.jsx)(s.FormattedMessage,{id:"coupons.duration.threeMonths",defaultMessage:"3 months"})}}},73254:(e,t,n)=>{n.d(t,{oo:()=>f,eB:()=>h});var s=n(83817),a=n(88280),r=n(70060),o=n(480),i=n(86628),l=n(75246),d=n(47969),c=n(6258),u=n(96444);function p(e,t){const{name:n,spaceId:s,spaceUserId:a}=t,r=(0,o.O7)(),p=(0,u.pQ)({spaceId:s});return(0,i.VK)((()=>{if(!p||!s||!a)return;const o=new c.H2(r,{table:l.bx,id:s}),i=new c.y3(r,{table:d.WU,spaceId:s,id:a}),u=e[n]({environment:r,spaceId:s});return{...t,scope:{type:"space",billingData:p,premiumFeatureOverrides:o.getSettings().premium_feature_overrides??{}},actor:{isSpaceAdmin:(null==i?void 0:i.isWorkspaceOwner())??!1},data:u}}),[r,n,t,e,p,s,a])}var m=n(88893);const g={internal_guests:e=>{const t=a.subscriptionDataStoreInstance.state;return{current:t?(0,m.lk)(t):0,isGuestLimitPolicyEnforced:(0,r.Gz)(),hasLowGuestLimit:(0,r.fc)()}}};function f(e){const t=p(g,e);if(t)return(0,s.$W)(t)}function h(e){const t=p(g,e);if(!t)return;const n=e.state;return(0,s.lJ)({...t,state:n})}},96444:(e,t,n)=>{n.d(t,{Q$:()=>c,XT:()=>p,ex:()=>u,pQ:()=>d});var s=n(86628),a=n(22616),r=n(5682),o=n(33493),i=n(88280),l=n(33218);function d(e){let{spaceId:t}=e;(0,l.h)();const{subscriptionData:n,prices:a,pricesStatus:d}=(0,s.VK)((()=>{const e=i.subscriptionDataStoreInstance.state,{prices:t,status:n}=o.Z.state;return{subscriptionData:e,prices:t,pricesStatus:n}}),[]);if(n&&"ready"===d)return(0,r.P)(a,n)}function c(e){let{subscriptionData:t}=e;(0,l.h)();const{prices:n,pricesStatus:a}=(0,s.VK)((()=>{const{prices:e,status:t}=o.Z.state;return{prices:e,pricesStatus:t}}),[]);if(t&&"ready"===a)return(0,r.P)(n,t)}function u(e){let{subscriptionDataStore:t}=e;(0,l.h)();const{subscriptionData:n,prices:a,pricesStatus:i}=(0,s.VK)((()=>{const e=t.state,{prices:n,status:s}=o.Z.state;return{subscriptionData:e,prices:n,pricesStatus:s}}),[t]);if(n&&"ready"===i)return(0,r.P)(a,n)}function p(e){let{subscriptionData:t,environment:n,spaceId:s}=e;(0,a.Zz)({environment:n,spaceId:s});const{prices:i,status:l}=o.Z.state;if(t&&"ready"===l)return(0,r.P)(i,t)}},33218:(e,t,n)=>{n.d(t,{h:()=>l});var s=n(67294),a=n(480),r=n(86628),o=n(80444),i=n(22616);function l(){const e=(0,a.O7)(),t=(0,r.VK)((()=>{var e;return null===(e=o.default.state.currentSpaceStore)||void 0===e?void 0:e.id}),[]);(0,s.useEffect)((()=>{t&&(0,i.Zz)({environment:e,spaceId:t})}),[e,t])}},28956:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(49085);class a extends s.default{getInitialState(){}}const r=new a},42605:(e,t,n)=>{n.d(t,{m:()=>g});n(67294);var s=n(86628),a=n(9291),r=n(1898),o=n(89024),i=n(24405),l=n(68828),d=n(7124),c=n(85893);function u(e){const{isChecked:t,label:n,onClickToggle:s}=e,a=(0,i.yK)((()=>({row:{alignItems:"center",cursor:"pointer",display:"flex",gap:8}})),[]);return(0,c.jsxs)("label",{style:a.row,children:[(0,c.jsx)(l._,{checked:t,onChange:s}),(0,c.jsx)(d.q,{styleName:"Body-14px/Regular",children:n})]})}var p=n(74194);function m(e){const{inputText:t,isChecked:n,label:s,onClickToggle:a,placeholderText:r,setInputText:i}=e;return(0,c.jsxs)(o.jX,{gap:8,children:[(0,c.jsx)(u,{label:s,isChecked:n,onClickToggle:a}),n?(0,c.jsx)(p.Z,{autoFocus:!0,value:t,placeholder:r,onChange:e=>i(e.target.value)}):null]})}function g(e){const{store:t}=e,n=(0,s.VK)((()=>t.state.options),[t]),{selectedIndexes:i,customTextByIndex:l}=(0,s.VK)((()=>t.state),[t]),d=(0,a.useIntl)();return(0,c.jsx)(o.jX,{gap:12,children:n.map(((e,n)=>{const{type:s}=e,a=i.has(n);switch(s){case"checkbox":return(0,c.jsx)(u,{isChecked:a,label:e.label,onClickToggle:()=>t.toggleIndex(n)},n);case"checkboxAndInput":const o="placeholderText"in e&&e.placeholderText?d.formatMessage(e.placeholderText):void 0;return(0,c.jsx)(m,{inputText:l[n]??"",isChecked:a,label:e.label,onClickToggle:()=>t.toggleIndex(n),placeholderText:o,setInputText:e=>t.setCustomTextByIndex(n,e)},n);default:(0,r.t1)(s)}}))})}},57187:(e,t,n)=>{n.d(t,{f:()=>o});n(67294);var s=n(9291),a=n(85893);const r=(0,s.defineMessages)({switchingToNewTool:{id:"survey.options.switching.placeholder",defaultMessage:"Share the name of the other tools"},switchingToNewAiTool:{id:"survey.options.usingAnotherAIService.placeholder",defaultMessage:"Share the name of the other AI tools"}}),o={consolidatingWorkspaces:{optionName:"consolidating_workspaces",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.consolidatingWorkspaces",defaultMessage:"Consolidating Notion workspaces"})},dataSecurity:{optionName:"data_security",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"churnSurvey.reasons.dataSecurity",defaultMessage:"Data security"})},missingFeatures:{optionName:"missing_features",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.missingFeatures",defaultMessage:"Missing features"})},noLongerNeedAccess:{optionName:"no_longer_need_access",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.noLongerNeedAccess",defaultMessage:"No longer need access to Notion"})},noLongerWorkTogether:{optionName:"no_longer_work_together",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.noLongerWorksHere",defaultMessage:"No longer works here"})},notUsingEnough:{optionName:"not_using_enough",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.notUsingEnough",defaultMessage:"Not using it enough"})},other:{optionName:"other",type:"checkboxAndInput",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.other",defaultMessage:"Other"})},switching:{optionName:"switching",type:"checkboxAndInput",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.switching",defaultMessage:"Switching to another tool"}),placeholderText:r.switchingToNewTool},switchingToAnotherWorkspace:{optionName:"switching_to_another_workspace",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.switchingToAnotherWorkspace",defaultMessage:"Switching to another Notion workspace"})},tooDifficult:{optionName:"too_difficult",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.tooDifficult",defaultMessage:"Too difficult to use"})},tooExpensive:{optionName:"too_expensive",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.tooExpensive",defaultMessage:"Too expensive"})},upgradedByMistake:{optionName:"upgraded_by_mistake",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"survey.options.upgradedByMistake",defaultMessage:"Upgraded by mistake"})},usingAnotherAiService:{optionName:"using_another_ai_service",type:"checkboxAndInput",label:(0,a.jsx)(s.FormattedMessage,{id:"churnSurvey.reasons.usingAnotherAIService",defaultMessage:"Using another AI service"}),placeholderText:r.switchingToNewAiTool},qualityOfResults:{optionName:"quality_of_results",type:"checkbox",label:(0,a.jsx)(s.FormattedMessage,{id:"churnSurvey.reasons.qualityOfResults",defaultMessage:"Quality of results"})}}},88101:(e,t,n)=>{n.d(t,{H:()=>r,b:()=>a});n(57658);var s=n(49085);class a extends s.default{getInitialState(){return{options:[],customTextByIndex:{},selectedIndexes:new Set}}setOptions(e){this.setState({customTextByIndex:{},options:e,selectedIndexes:new Set})}setCustomTextByIndex(e,t){this.update((n=>({...n,customTextByIndex:{...n.customTextByIndex,[e]:t}})))}toggleIndex(e){this.update((t=>{const n=new Set(t.selectedIndexes);return n.has(e)?n.delete(e):n.add(e),{...t,selectedIndexes:n}}))}toSurveyResult(){const{customTextByIndex:e,options:t,selectedIndexes:n}=this.state,s=[],a=[],r={};return n.forEach((n=>{const o=t[n];s.push(o.optionName),a.push(n),"checkboxAndInput"===o.type&&e[n]&&(r[o.optionName]=e[n])})),{reasons:s,reasonIndexes:a,customTextByReason:r}}}const r=new a},39343:(e,t,n)=>{n.d(t,{Fk:()=>i,U6:()=>d,nx:()=>l});var s=n(30120),a=n(13991),r=n(7057),o=n(95477);function i(e){return!(null==e||!e.trialEnd)&&e.trialEnd>=s.ou.now().toSeconds()}function l(e){const t=function(e){if(!i(e))return;const t=1e3*(null==e?void 0:e.trialEnd);return null!=e&&e.periodEnd&&e.periodEnd>=s.ou.now().toSeconds()&&e.periodEnd<t?e.periodEnd:t}(e);return t?(0,r.Yx)(t,"long",a.SP):void 0}function d(e){return e?o.default.trials[e.id].duration:o.default.trials.default.duration}},62657:(e,t,n)=>{n.d(t,{h:()=>s});const s=(0,n(45238).CZ)("arrowDownCircled",{default:{loader:()=>n.e(5570).then(n.bind(n,65570)),size:20},small:{loader:()=>n.e(891).then(n.bind(n,80891)),size:16},mini:{loader:()=>n.e(8023).then(n.bind(n,78023)),size:14},large:{loader:()=>n.e(9512).then(n.bind(n,60710)),size:24}})},79956:(e,t,n)=>{n.d(t,{F:()=>s});const s=(0,n(45238).CZ)("checkmarkCircle",{default:{loader:()=>n.e(5055).then(n.bind(n,25055)),size:20},small:{loader:()=>n.e(3132).then(n.bind(n,23132)),size:16},mini:{loader:()=>n.e(7790).then(n.bind(n,87790)),size:14},large:{loader:()=>n.e(6031).then(n.bind(n,26031)),size:24}})},93535:(e,t,n)=>{n.d(t,{x:()=>s});const s=(0,n(45238).CZ)("exclamationMarkCircle",{default:{loader:()=>n.e(436).then(n.bind(n,37597)),size:20},small:{loader:()=>n.e(9067).then(n.bind(n,49067)),size:16},mini:{loader:()=>n.e(8812).then(n.bind(n,74331)),size:14},micro:{loader:()=>n.e(7347).then(n.bind(n,27347)),size:14},large:{loader:()=>n.e(7360).then(n.bind(n,7360)),size:24}})},14581:(e,t,n)=>{n.d(t,{h:()=>s});const s=(0,n(45238).CZ)("exclamationMarkTriangle",{default:{loader:()=>n.e(5187).then(n.bind(n,15187)),size:20},small:{loader:()=>n.e(9250).then(n.bind(n,79250)),size:16},mini:{loader:()=>n.e(3173).then(n.bind(n,93173)),size:14},large:{loader:()=>n.e(3339).then(n.bind(n,43339)),size:24}})},40745:(e,t,n)=>{n.d(t,{M:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("arrowDown",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M8 1.57715C7.5625 1.57715 7.25488 1.88477 7.25488 2.33594V10.8262L7.30957 12.3027L5.50488 10.2861L3.95312 8.75488C3.82324 8.625 3.63184 8.53613 3.42676 8.53613C3.0166 8.53613 2.70898 8.85059 2.70898 9.26758C2.70898 9.46582 2.78418 9.64355 2.94141 9.80762L7.44629 14.3193C7.59668 14.4697 7.79492 14.5586 8 14.5586C8.20508 14.5586 8.40332 14.4697 8.55371 14.3193L13.0586 9.80762C13.2158 9.64355 13.291 9.46582 13.291 9.26758C13.291 8.85059 12.9902 8.53613 12.5801 8.53613C12.3682 8.53613 12.1836 8.625 12.0469 8.75488L10.4951 10.2861L8.69043 12.2959L8.74512 10.8262V2.33594C8.74512 1.88477 8.44434 1.57715 8 1.57715Z"})})},8597:(e,t,n)=>{n.d(t,{Z:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("arrowUp",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M8 14.5586C8.44434 14.5586 8.74512 14.251 8.74512 13.7998V5.30957L8.69043 3.83984L10.4951 5.84961L12.0469 7.38086C12.1836 7.51074 12.3682 7.59961 12.5801 7.59961C12.9902 7.59961 13.291 7.28516 13.291 6.86816C13.291 6.66992 13.2158 6.49219 13.0586 6.32812L8.55371 1.81641C8.40332 1.66602 8.20508 1.57715 8 1.57715C7.79492 1.57715 7.59668 1.66602 7.44629 1.81641L2.94141 6.32812C2.78418 6.49219 2.70898 6.66992 2.70898 6.86816C2.70898 7.28516 3.0166 7.59961 3.42676 7.59961C3.63184 7.59961 3.82324 7.51074 3.95312 7.38086L5.50488 5.84961L7.30957 3.83301L7.25488 5.30957V13.7998C7.25488 14.251 7.5625 14.5586 8 14.5586Z"})})},5336:(e,t,n)=>{n.d(t,{r:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("basicClock",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M4.541 7.919a.53.53 0 01-.39-.157.53.53 0 01-.157-.39c0-.155.053-.282.157-.383a.53.53 0 01.39-.157h2.905V2.895c0-.15.053-.278.158-.383a.521.521 0 01.382-.158.53.53 0 01.39.158.521.521 0 01.157.383v4.477a.53.53 0 01-.157.39.53.53 0 01-.39.157H4.541zm3.452 6.207a6.789 6.789 0 01-2.727-.554 7.124 7.124 0 01-2.256-1.524 7.277 7.277 0 01-1.525-2.256 6.788 6.788 0 01-.553-2.728c0-.966.184-1.875.553-2.727A7.241 7.241 0 015.258.557 6.788 6.788 0 017.987.003c.971 0 1.882.184 2.735.554.852.369 1.604.88 2.256 1.53a7.136 7.136 0 011.53 2.25c.37.852.555 1.761.555 2.727 0 .967-.185 1.876-.554 2.728a7.218 7.218 0 01-3.787 3.78 6.789 6.789 0 01-2.728.554zm0-1.395c.789 0 1.525-.145 2.208-.437a5.678 5.678 0 001.805-1.217 5.68 5.68 0 001.217-1.805c.291-.683.437-1.42.437-2.208a5.55 5.55 0 00-.437-2.2 5.66 5.66 0 00-3.029-3.029 5.567 5.567 0 00-2.208-.438c-.784 0-1.52.146-2.208.438A5.6 5.6 0 003.98 3.052a5.715 5.715 0 00-1.21 1.811 5.55 5.55 0 00-.437 2.201c0 .789.146 1.525.438 2.208a5.735 5.735 0 001.21 1.805 5.598 5.598 0 004.013 1.654z"})})},82855:(e,t,n)=>{n.d(t,{E:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,a.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},2585:(e,t,n)=>{n.d(t,{f:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},91315:(e,t,n)=>{n.d(t,{r:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("circleCheckFilled",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M8 16c4.377 0 8-3.631 8-8 0-4.376-3.631-8-8.008-8C3.624 0 0 3.624 0 8c0 4.369 3.631 8 8 8zm-.886-4.165c-.267 0-.487-.11-.69-.384l-1.97-2.416a.852.852 0 01-.187-.51c0-.352.274-.643.627-.643.228 0 .4.07.596.33l1.592 2.055 3.35-5.38c.148-.236.352-.362.556-.362.345 0 .667.236.667.604 0 .173-.102.353-.196.518l-3.686 5.804c-.165.259-.393.384-.66.384z"})})},40462:(e,t,n)=>{n.d(t,{o:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("globe2",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},47409:(e,t,n)=>{n.d(t,{N:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("ledger",{viewBox:"0 0 16 16",svg:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("path",{d:"M.706 4.113c0 .41.273.677.697.677h1.778v8.388c0 1.435.704 2.146 2.14 2.146h7.813c1.299 0 2.153-.889 2.153-2.235v-1.86c0-.41-.273-.676-.697-.676h-.567V2.95c0-1.429-.711-2.146-2.12-2.146H2.497c-1.066 0-1.79.724-1.79 1.866v1.442Zm3.575 9.072V2.67c0-.28-.027-.54-.082-.766h7.643c.71 0 1.08.376 1.08 1.06v7.588H7.05c-.424 0-.704.266-.704.676v1.956c0 .622-.431 1.039-1.026 1.039-.608 0-1.039-.438-1.039-1.04ZM1.807 3.689V2.671c0-.479.294-.766.69-.766.41 0 .684.287.684.766v1.018H1.807ZM6.25 4.797h4.703a.413.413 0 0 0 .424-.424.412.412 0 0 0-.424-.417H6.25a.418.418 0 0 0-.43.417c0 .24.184.424.43.424Zm0 2.386h2.454a.406.406 0 0 0 .424-.41c0-.24-.178-.431-.424-.431H6.25a.425.425 0 0 0-.43.43c0 .233.184.41.43.41Zm.93 7.04c.17-.3.266-.67.266-1.114v-1.456h6.74v1.436c0 .677-.423 1.135-1.052 1.135H7.18Z"})})})},16184:(e,t,n)=>{n.d(t,{Q:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},88507:(e,t,n)=>{n.d(t,{I:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("openTeamSearch",{viewBox:"0 0 16 14",svg:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("path",{d:"M9.506 13.342h4.447c.348 0 .621-.11.82-.328.2-.22.3-.516.3-.891V4.852c0-.375-.1-.67-.3-.885-.199-.219-.472-.328-.82-.328H9.922v1.136h3.709c.101 0 .178.026.228.077.051.05.076.127.076.228v6.815c0 .101-.025.177-.076.228-.05.05-.127.076-.228.076H9.506v1.143zm2.28-6.358h.925c.129 0 .193-.064.193-.193v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .129.062.193.187.193zm0 2.168h.925c.129 0 .193-.066.193-.199v-.896c0-.133-.064-.2-.193-.2h-.926c-.125 0-.187.067-.187.2v.896c0 .133.062.2.187.2zm0 2.163h.925c.129 0 .193-.067.193-.2v-.896c0-.13-.064-.194-.193-.194h-.926c-.125 0-.187.065-.187.194v.896c0 .133.062.2.187.2zm-10.864.808c0 .375.1.672.299.89.199.22.474.329.826.329H9.44c.348 0 .621-.11.82-.328.204-.22.305-.516.305-.891V1.928c0-.38-.101-.676-.304-.89-.2-.22-.473-.329-.82-.329H2.046c-.352 0-.627.11-.826.328-.2.215-.3.512-.3.89v10.196zm1.142-.228V2.162c0-.105.026-.183.077-.234.05-.051.127-.076.228-.076h6.75c.102 0 .178.025.229.076.05.05.076.129.076.234v9.733c0 .101-.026.177-.076.228-.051.05-.127.076-.229.076H2.37c-.101 0-.178-.025-.228-.076-.051-.05-.077-.127-.077-.228zm1.588.85h.891v-1.946c0-.117.06-.176.182-.176h2.039c.12 0 .181.059.181.176v1.945h.89V10.5c0-.25-.058-.435-.175-.557-.117-.125-.295-.187-.533-.187H4.36c-.238 0-.416.062-.533.187-.117.122-.176.307-.176.557v2.244zm.17-8.362h1.12c.156 0 .234-.078.234-.235v-1.09c0-.156-.078-.234-.235-.234H3.822c-.148 0-.222.078-.222.235v1.09c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.235v-1.09c0-.156-.077-.234-.229-.234H6.541c-.152 0-.229.078-.229.235v1.09c0 .156.077.234.229.234zM3.822 6.627h1.12c.156 0 .234-.078.234-.234V5.309c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .156.074.234.222.234zm2.719 0h1.12c.152 0 .228-.078.228-.234V5.309c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .156.077.234.229.234zm-2.719 2.25h1.12c.156 0 .234-.08.234-.24V7.553c0-.157-.078-.235-.235-.235H3.822c-.148 0-.222.078-.222.235v1.084c0 .16.074.24.222.24zm2.719 0h1.12c.152 0 .228-.08.228-.24V7.553c0-.157-.077-.235-.229-.235H6.541c-.152 0-.229.078-.229.235v1.084c0 .16.077.24.229.24z"})})})},28495:(e,t,n)=>{n.d(t,{v:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("personCircle",{viewBox:"0 0 18 17",svg:(0,a.jsx)("path",{d:"M8.99219 16.6797C10.0964 16.6797 11.1354 16.4688 12.1094 16.0469C13.0833 15.6302 13.9427 15.0495 14.6875 14.3047C15.4323 13.5599 16.0156 12.7005 16.4375 11.7266C16.8594 10.7526 17.0703 9.71354 17.0703 8.60938C17.0703 7.50521 16.8594 6.46615 16.4375 5.49219C16.0156 4.51823 15.4323 3.66146 14.6875 2.92188C13.9427 2.17708 13.0833 1.59375 12.1094 1.17188C11.1354 0.75 10.0938 0.539062 8.98438 0.539062C7.88021 0.539062 6.84115 0.75 5.86719 1.17188C4.89844 1.59375 4.04167 2.17708 3.29688 2.92188C2.55729 3.66146 1.97656 4.51823 1.55469 5.49219C1.13281 6.46615 0.921875 7.50521 0.921875 8.60938C0.921875 9.71354 1.13281 10.7526 1.55469 11.7266C1.97656 12.7005 2.55729 13.5599 3.29688 14.3047C4.04167 15.0495 4.90104 15.6302 5.875 16.0469C6.84896 16.4688 7.88802 16.6797 8.99219 16.6797ZM8.99219 15.0859C8.09635 15.0859 7.25521 14.9193 6.46875 14.5859C5.6875 14.2526 5 13.7891 4.40625 13.1953C3.81771 12.6016 3.35677 11.9141 3.02344 11.1328C2.6901 10.3516 2.52344 9.51042 2.52344 8.60938C2.52344 7.71354 2.6901 6.875 3.02344 6.09375C3.35677 5.30729 3.81771 4.61719 4.40625 4.02344C4.99479 3.42969 5.67969 2.96615 6.46094 2.63281C7.2474 2.29948 8.08854 2.13281 8.98438 2.13281C9.88542 2.13281 10.7266 2.29948 11.5078 2.63281C12.2943 2.96615 12.9844 3.42969 13.5781 4.02344C14.1719 4.61719 14.6354 5.30729 14.9688 6.09375C15.3021 6.875 15.4688 7.71354 15.4688 8.60938C15.4688 9.51042 15.3021 10.3516 14.9688 11.1328C14.6354 11.9141 14.1719 12.6016 13.5781 13.1953C12.9844 13.7891 12.2969 14.2526 11.5156 14.5859C10.7344 14.9193 9.89323 15.0859 8.99219 15.0859ZM14.2031 13.7656L14.1719 13.6328C14.0052 13.2474 13.6849 12.8776 13.2109 12.5234C12.7422 12.1641 12.1484 11.8724 11.4297 11.6484C10.7161 11.4193 9.90365 11.3047 8.99219 11.3047C8.09115 11.3047 7.28125 11.4193 6.5625 11.6484C5.84375 11.8724 5.2474 12.1641 4.77344 12.5234C4.30469 12.8776 3.98698 13.2448 3.82031 13.625L3.78906 13.7656C4.27865 14.2188 4.83333 14.599 5.45312 14.9062C6.07292 15.2188 6.69271 15.4557 7.3125 15.6172C7.9375 15.7786 8.4974 15.8594 8.99219 15.8594C9.49219 15.8594 10.0521 15.7786 10.6719 15.6172C11.2917 15.4557 11.9115 15.2188 12.5312 14.9062C13.151 14.599 13.7083 14.2188 14.2031 13.7656ZM8.99219 10.0156C9.4974 10.0208 9.95312 9.89583 10.3594 9.64062C10.7656 9.38021 11.0885 9.02604 11.3281 8.57812C11.5677 8.125 11.6875 7.61979 11.6875 7.0625C11.6875 6.54167 11.5651 6.0625 11.3203 5.625C11.0807 5.18229 10.7578 4.82812 10.3516 4.5625C9.95052 4.29688 9.4974 4.16406 8.99219 4.16406C8.49219 4.16406 8.03646 4.29688 7.625 4.5625C7.21875 4.82812 6.89583 5.18229 6.65625 5.625C6.41667 6.0625 6.29948 6.54167 6.30469 7.0625C6.3099 7.61979 6.42969 8.1224 6.66406 8.57031C6.90365 9.01302 7.22656 9.36458 7.63281 9.625C8.03906 9.88021 8.49219 10.0104 8.99219 10.0156Z"})})},78807:(e,t,n)=>{n.d(t,{l:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,a.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})})},41219:(e,t,n)=>{n.d(t,{L:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("topbarComment",{viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M5.9375 18.4844C6.38281 18.4844 6.71094 18.2656 7.25 17.7891L9.92969 15.4297H14.6328C16.9844 15.4297 18.3047 14.0703 18.3047 11.75V5.67969C18.3047 3.35938 16.9844 2 14.6328 2H4.67188C2.32812 2 1 3.35938 1 5.67969V11.75C1 14.0781 2.36719 15.4297 4.61719 15.4297H4.9375V17.3438C4.9375 18.0391 5.30469 18.4844 5.9375 18.4844ZM6.32812 16.7344V14.5078C6.32812 14.0469 6.125 13.8672 5.6875 13.8672H4.72656C3.25781 13.8672 2.55469 13.125 2.55469 11.7031V5.72656C2.55469 4.30469 3.25781 3.5625 4.72656 3.5625H14.5859C16.0469 3.5625 16.75 4.30469 16.75 5.72656V11.7031C16.75 13.125 16.0469 13.8672 14.5859 13.8672H9.84375C9.36719 13.8672 9.13281 13.9453 8.80469 14.2891L6.32812 16.7344Z"})})},50063:(e,t,n)=>{n.d(t,{X:()=>r});n(67294);var s=n(45238),a=n(85893);const r=(0,s.IU)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,a.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},25829:(e,t,n)=>{function s(e,t){if(!e)return!1;const n=a(e);return t.some((e=>e.url===n))}function a(e){return e.split("@")[1]}n.d(t,{ge:()=>a,is:()=>s})},90814:(e,t,n)=>{n.d(t,{$W:()=>o,Ay:()=>u,Kz:()=>c,V5:()=>d,_e:()=>l,cL:()=>i,lJ:()=>r,t:()=>a});var s=n(1898),a=n(12847);function r(e,t,n){var s,a;const r=n.state,i=n.scope.billingData,l={externalId:null===(s=i.subscription)||void 0===s?void 0:s.externalId,trialEnd:r.trialEnd,currentPeriodEnd:null===(a=i.subscription)||void 0===a?void 0:a.currentPeriodEnd,items:r.items,pending:void 0};return o(e,t,{...n,scope:{...n.scope,billingData:{...i,subscription:l}}})}function o(e,t,n){const{name:a,scope:r,actor:o}=n,i={...n,billingData:r.billingData},l=r.premiumFeatureOverrides,d=a in l?function(e,t,n){const a=e[t.name].type;if("check"===a){const e={type:"none"};return!0===n?{type:"available",limit:e}:{type:"upsell",upsell:void 0,limit:e}}if("per_use"===a){const e=t.amount,s={type:"per_use",amount:n};return"unlimited"===n||n>e?{type:"available",limit:s}:{type:"upsell",upsell:void 0,limit:s}}if("cumulative"===a){const e=t.amount,s=t.data.current,a={type:"cumulative",current:s,total:n};return"unlimited"===n||n>=s+e?{type:"available",limit:a}:{type:"upsell",upsell:void 0,limit:a}}(0,s.t1)(a)}(e,n,l[a]):t[a](i);return"upsell"!==d.type||o.isSpaceAdmin?d:{...d,type:"blocked"}}function i(e){return"available"!==e.type}function l(e){return"available"===e.type}function d(e,t){let{available:n,upsell:a,blocked:r}=t;return"available"===e.type?n():"upsell"===e.type?a(e):"blocked"===e.type?r(e):(0,s.t1)(e)}function c(e,t){if(void 0!==e)return d(e,{available:()=>{},blocked:t,upsell:()=>{}})}function u(e){return a.object({required:e,optional:{}})}},83817:(e,t,n)=>{n.d(t,{$W:()=>l,V5:()=>a.V5,lJ:()=>d});var s=n(9182),a=n(90814),r=n(47425);const o={internal_guests:{type:"cumulative",data:(0,a.Ay)({current:a.t.number(),isGuestLimitPolicyEnforced:a.t.boolean(),hasLowGuestLimit:a.t.boolean()})}},i={internal_guests:e=>{let{amount:t,billingData:n,data:{current:a,hasLowGuestLimit:o,isGuestLimitPolicyEnforced:i}}=e;return function(e){let{billingData:t,amount:n,current:a,limits:r,upsellMap:o}=e;const i=(0,s.zt)(t.subscription),l=r[i],d=o[i],c=d?r[d]:void 0,u=d&&c?{product:d,limit:{type:"cumulative",current:a,total:c}}:void 0,p=l&&("unlimited"===l||n+a<=l);return p?{type:"available",limit:{current:a,total:l,type:"cumulative"}}:{type:"upsell",limit:{type:"cumulative",current:a,total:l},upsell:u}}({billingData:n,amount:t,current:a,limits:(0,r.mr)({hasLowGuestLimit:o,isGuestLimitPolicyEnforced:i}),upsellMap:{free:"plus",student:"business",personal:"business",plus:"business"}})}};function l(e){return(0,a.$W)(o,i,e)}function d(e){return(0,a.lJ)(o,i,e)}},65820:(e,t,n)=>{n.d(t,{M:()=>y});var s=n(67294),a=n(58868);function r(){const e=(0,s.useRef)(!1);return(0,a.L)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var o=n(2074);var i=n(240),l=n(96681);class d extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function c({children:e,isPresent:t}){const n=(0,s.useId)(),a=(0,s.useRef)(null),r=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)((()=>{const{width:e,height:s,top:o,left:i}=r.current;if(t||!a.current||!e||!s)return;a.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${s}px !important;\n            top: ${o}px !important;\n            left: ${i}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),s.createElement(d,{isPresent:t,childRef:a,sizeRef:r},s.cloneElement(e,{ref:a}))}const u=({children:e,initial:t,isPresent:n,onExitComplete:a,custom:r,presenceAffectsLayout:o,mode:d})=>{const u=(0,l.h)(p),m=(0,s.useId)(),g=(0,s.useMemo)((()=>({id:m,initial:t,isPresent:n,custom:r,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),o?void 0:[n]);return(0,s.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[n]),s.useEffect((()=>{!n&&!u.size&&a&&a()}),[n]),"popLayout"===d&&(e=s.createElement(c,{isPresent:n},e)),s.createElement(i.O.Provider,{value:g},e)};function p(){return new Map}var m=n(25364),g=n(65411),f=n(45487);const h=e=>e.key||"";const y=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:l,presenceAffectsLayout:d=!0,mode:c="sync"})=>{(0,f.k)(!l,"Replace exitBeforeEnter with mode='wait'");const p=(0,s.useContext)(m.p).forceRender||function(){const e=r(),[t,n]=(0,s.useState)(0),a=(0,s.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,s.useCallback)((()=>o.Wi.postRender(a)),[a]),t]}()[0],y=r(),x=function(e){const t=[];return s.Children.forEach(e,(e=>{(0,s.isValidElement)(e)&&t.push(e)})),t}(e);let v=x;const b=(0,s.useRef)(new Map).current,M=(0,s.useRef)(v),j=(0,s.useRef)(new Map).current,C=(0,s.useRef)(!0);if((0,a.L)((()=>{C.current=!1,function(e,t){e.forEach((e=>{const n=h(e);t.set(n,e)}))}(x,j),M.current=v})),(0,g.z)((()=>{C.current=!0,j.clear(),b.clear()})),C.current)return s.createElement(s.Fragment,null,v.map((e=>s.createElement(u,{key:h(e),isPresent:!0,initial:!!n&&void 0,presenceAffectsLayout:d,mode:c},e))));v=[...v];const w=M.current.map(h),S=x.map(h),I=w.length;for(let s=0;s<I;s++){const e=w[s];-1!==S.indexOf(e)||b.has(e)||b.set(e,void 0)}return"wait"===c&&b.size&&(v=[]),b.forEach(((e,n)=>{if(-1!==S.indexOf(n))return;const a=j.get(n);if(!a)return;const r=w.indexOf(n);let o=e;if(!o){const e=()=>{b.delete(n);const e=Array.from(j.keys()).filter((e=>!S.includes(e)));if(e.forEach((e=>j.delete(e))),M.current=x.filter((t=>{const s=h(t);return s===n||e.includes(s)})),!b.size){if(!1===y.current)return;p(),i&&i()}};o=s.createElement(u,{key:h(a),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:d,mode:c},a),b.set(n,o)}v.splice(r,0,o)})),v=v.map((e=>{const t=e.key;return b.has(t)?e:s.createElement(u,{key:h(e),isPresent:!0,presenceAffectsLayout:d,mode:c},e)})),s.createElement(s.Fragment,null,b.size?v:v.map((e=>(0,s.cloneElement)(e))))}},37301:(e,t,n)=>{n.d(t,{I:()=>a});var s=n(45487);function a(e,t,n){var a;if("string"==typeof e){let r=document;t&&((0,s.k)(Boolean(t.current),"Scope provided, but no element detected."),r=t.current),n?(null!==(a=n[e])&&void 0!==a||(n[e]=r.querySelectorAll(e)),e=n[e]):e=r.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}},16893:(e,t,n)=>{n.d(t,{Y:()=>o});var s=n(67294),a=n(37301);const r={some:0,all:1};function o(e,{root:t,margin:n,amount:o,once:i=!1}={}){const[l,d]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(!e.current||i&&l)return;const s={root:t&&t.current||void 0,margin:n,amount:o};return function(e,t,{root:n,margin:s,amount:o="some"}={}){const i=(0,a.I)(e),l=new WeakMap,d=new IntersectionObserver((e=>{e.forEach((e=>{const n=l.get(e.target);if(e.isIntersecting!==Boolean(n))if(e.isIntersecting){const n=t(e);"function"==typeof n?l.set(e.target,n):d.unobserve(e.target)}else n&&(n(e),l.delete(e.target))}))}),{root:n,rootMargin:s,threshold:"number"==typeof o?o:r[o]});return i.forEach((e=>d.observe(e))),()=>d.disconnect()}(e.current,(()=>(d(!0),i?void 0:()=>d(!1))),s)}),[t,e,n,i,o]),l}},65411:(e,t,n)=>{n.d(t,{z:()=>a});var s=n(67294);function a(e){return(0,s.useEffect)((()=>()=>e()),[])}}}]);