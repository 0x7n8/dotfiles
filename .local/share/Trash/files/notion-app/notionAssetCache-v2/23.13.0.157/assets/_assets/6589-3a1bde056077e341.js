"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[6589],{68155:(e,t,o)=>{o.d(t,{Z:()=>a});o(67294);var i=o(9291),r=o(62896),n=o(10906),s=o(85893);const a=function(e){let{collectionViewName:t,collectionViewType:o}=e;return t?(0,s.jsx)(r.Z,{children:t}):"page"===o?(0,s.jsx)(i.FormattedMessage,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,s.jsx)(i.FormattedMessage,{...n.b1[o]})}},52337:(e,t,o)=>{o.d(t,{N:()=>fe,Z:()=>Te});var i=o(67294),r=o(83355),n=o(53150),s=o(6740),a=o(86628),l=o(24405),d=o(49085),p=o(15157),c=o(69246),u=o(9291),g=o(1898),m=o(37810),h=o(89858),S=o(28651),y=o(43250),b=o(98742),f=o(50659),v=o(48529),x=o(480),T=o(3338),I=o(31701),C=o(17224),j=o(23063),M=o(31945),w=o(55118),B=o(26388),k=o(12534),L=o(35026),Z=o(75024),O=o(77907),P=o(80444),V=o(77080),A=o(3418),K=o(42185),H=o(33052),F=o(9867),D=o(5210),R=o(85893);const E=function(e){const{outlinerToggleButtonStore:t,outlinerTeamOnToggle:o,style:i}=e,r=(0,l.Fg)(),n=(0,l.yK)((()=>({caratContainer:{minHeight:20,minWidth:20,...i||{}}})),[i]),s=(0,a.VK)((()=>t.state.isHidden),[t]);return(0,R.jsx)("div",{style:n.caratContainer,children:(0,R.jsx)(D.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:!s,color:r.lightIconColor,onClick:o,disabled:!0})})};var _=o(86232),N=(o(57658),o(19889)),U=o(29302),z=o(6258),W=o(88893);function G(e){const t=(0,x.O7)(),[o,r]=(0,i.useState)(!1),{teamStore:n,teamOutlinerType:s}=e,{isReady:d,allMembersUserIds:p,userStores:c}=(0,a.VK)((()=>{const e=n.getUserIdsInTeamUsingSpaceMembers((0,W.Io)())??[],t=e.map((e=>z.U6.createChildStore(n,{table:N.KJ,id:e}))),o=t&&t.every((e=>e.isReady()));return{allMembersUserIds:e,userStores:t,isReady:o}}),[n]),{ownerStores:g,memberStores:m}=(0,a.VK)((()=>{const e=[],t=[];if(!n.isReady())return{ownerStores:e,memberStores:t};for(const o of c){const i=null==o?void 0:o.id;i&&(n.isOwner(i)?e.push(o):t.push(o))}return{ownerStores:e,memberStores:t}}),[n,c]),h=(0,l.yK)((e=>({membershipSection:{display:"flex",flexDirection:"row",fontSize:14,alignItems:"center",whiteSpace:"nowrap"},members:{display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginRight:10,marginLeft:5},avatar:{width:23,height:23,borderRadius:23,marginRight:-5,position:"relative"},teamMemberTooltipSectionLabel:{color:e.mediumInvertedTextColor,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"},teamMemberList:{paddingTop:3},moreMessage:{marginLeft:2,marginTop:4,color:e.mediumInvertedTextColor}})),[]);let S=0,y=c;return y=[...g,...m],c.length>5&&(S=c.length-5,y=y.slice(0,5)),d?(0,R.jsx)("div",{style:h.membershipSection,children:(0,R.jsx)(B.ZP,{placement:B.ug.Bottom,disableTooltip:p.length<=0,render:t=>{return(0,R.jsxs)("span",{...t,style:e.renderStyle,children:[p.length," ",(o=p.length,o>1?(0,R.jsx)(u.FormattedMessage,{defaultMessage:"members",id:"teamBrowser.teamCard.MembershipPlural"}):(0,R.jsx)(u.FormattedMessage,{defaultMessage:"member",id:"teamBrowser.teamCard.Membership"}))]});var o},renderTooltip:e=>(o||(r(!0),C.v2(t,{teamStore:n,outliner_type:s})),(0,R.jsx)("div",{...e,children:(0,R.jsxs)("div",{style:{marginBottom:4},children:[y.map((e=>(0,R.jsx)(U.Z,{style:h.teamMemberList,userStore:e,avatarSize:18},e.id))),S>0&&(0,R.jsx)("div",{style:h.moreMessage,children:(0,R.jsx)(u.FormattedMessage,{id:"teamMembersList.tooltip.overflowMessage",defaultMessage:"{countRemainingUsers} more…",values:{countRemainingUsers:S}})})]})}))})}):null}var $=o(74016),J=o(64552);var Y=o(22487),Q=o(75071),q=o(14720),X=o(64921),ee=o(68785),te=o(61766),oe=o(11969),ie=o(37181),re=o(28451),ne=o(81415),se=o(95697),ae=o(75769);function le(e){let{teamId:t,origin:o}=e;const r=(0,x.O7)(),[n,s]=(0,i.useState)(!1),a=(0,l.yK)((()=>({tooltip:{width:240}})),[]);(0,i.useEffect)((()=>{if(!o)return;const{current:e}=o;if(!e)return;const t="IntersectionObserver"in window?new IntersectionObserver((e=>{let[t]=e;return s(t.isIntersecting)}),{threshold:1}):void 0;return null==t||t.observe(e),()=>null==t?void 0:t.unobserve(e)}),[o]);const d=(0,i.useCallback)((()=>{ae.Z.setState({hasShownTooltip:!0,teamId:t}),oe.K(r,{from:"team_add_app_template"})}),[r,t]),p=(0,i.useCallback)((()=>ie.$n({environment:r,teamId:t})),[r,t]);return n?(0,R.jsx)(re.P,{calloutId:"team_add_app_template_tooltip",onShow:d,children:(0,R.jsx)(ne.U,{origin:o,placementToOrigin:"right",header:(0,R.jsx)(u.FormattedMessage,{id:"teamAddAppTemplateTooltip.header",defaultMessage:"Add templates to your teamspace"}),content:(0,R.jsx)(u.FormattedMessage,{id:"teamAddAppTemplateTooltip.content",defaultMessage:"Get started with projects, docs, wiki, and more"}),onCloseClick:()=>p(),shouldDismissUponOutsideClick:!1,pointerPosition:"0%",pointerLength:24,style:a.tooltip})}):null}function de(e){const t=(0,x.O7)();return(0,a.VK)((()=>(0,se.dY)({environment:t,teamId:e})),[t,e])}function pe(e){const{teamStore:t}=e,o=(0,u.useIntl)(),r=(0,a.qz)(void 0,te.Z),n=(0,i.useRef)(null),s=de(t.id),d=o.formatMessage({id:"sidebar.addAPageOrTemplateButtonTeamToggle.tooltip",defaultMessage:"Add a page or template"}),p=function(){const e=(0,x.Fy)(),t=e.isMobile?32:20;return(0,l.yK)((o=>({button:{height:t,width:t,border:"none",borderRadius:4,marginLeft:e.isMobile?0:4},mediumText:{color:o.mediumInvertedTextColor},plusIcon:{fill:e.isMobile?o.lightIconColor:o.sidebarTextColor,...e.isMobile?{width:18,height:18}:{width:14,height:14}},plusIconContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:o.legacyRedSelectColor,height:t,width:t},buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20},menuItemButton:{minWidth:200},caption:{minWidth:230}})),[e.isMobile,t])}();return(0,R.jsxs)(R.Fragment,{children:[s&&(0,R.jsx)(le,{teamId:t.id,origin:n}),(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,buttonPopupStore:r,alignmentToOrigin:M.vR.Start,originGap:2,renderOrigin:e=>(0,R.jsx)(B.ZP,{textWrap:!1,renderTooltip:()=>d,placement:B.ug.Bottom,render:t=>(0,R.jsx)(X.Z,{ariaLabel:d,ref:n,style:p.button,...(0,b.Z)(t,e),children:(0,R.jsx)("div",{style:p.plusIconContainer,children:(0,Q.f)(p.plusIcon)})})}),render:e=>(0,R.jsx)(q.p7,{renderLoading:e=>(0,R.jsx)("div",{style:q.Ry.LazyTeamAddAppTemplateMenu,children:e&&(0,R.jsx)(ee.Z,{})}),teamStore:t,closePopup:e.close,from:"sidebar_team_new_page"})})]})}function ce(e){const{teamStore:t,label:o,isHovered:r,outlinerToggleButtonStore:n,teamOutlinerType:s,outlinerTeamOnToggle:d,onTeamJoinComplete:p,labelAriaId:c}=e,g=(0,x.Fy)().isMobile,S=(0,v.b0)(s),y=(0,x.O7)(),{name:b,showAddPageButton:f}=(0,a.VK)((()=>({name:t.getName(),showAddPageButton:t.canAddOrRemoveTopLevelPages()})),[t]),D=(0,J.e)(t),N=function(e){const t=(0,x.O7)();return(0,a.VK)((()=>t.currentUser.id&&e.isMemberOrGuest(t.currentUser.id)),[t.currentUser.id,e])}(t),U=(0,Y.K)(t),z=(0,a.VK)((()=>P.default.state.currentSpaceStore),[]),[,,W]=(0,a.AF)(void 0,H.Z),Q=(0,x.Fy)(),q=g||r,X=(0,a.VK)((()=>V.default.checkGate("sidebar_redesign")),[]),ee=(0,l.yK)((e=>({teamHighlightAnimationBackgroundContainer:{backgroundColor:I.ZP.frontTertiaryButtonBackgroundHovered,position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:-1,borderRadius:4},container:{position:"relative",display:"flex",alignItems:"center",minHeight:g?48:S?30:28,padding:X?S?"6px 0px":0:S?"6px 12px":"0px 10px 0px 11px"},overflow:{marginLeft:5,justifySelf:"flex-end",height:22,display:"flex",alignItems:"center"},labelContainer:{flexShrink:1,flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start",height:"100%",...m.Z.textOverflowStyle},labelText:{display:"flex",width:"100%",alignItems:"center",lineHeight:m.Z.lineHeight.UISmall.desktop,marginBottom:1,minHeight:20,...m.Z.textOverflowStyle},membersCountText:{display:"flex",fontSize:12,fontWeight:m.Z.fontWeight.regular,lineHeight:1.3,color:e.lightTextColor,width:"100%",...m.Z.textOverflowStyle},joinedBadge:{color:e.darkTextColor,lineHeight:1.2,...m.Z.textOverflowStyle},joinedBadgeIcon:{display:"inline",color:e.darkTextColor,marginBottom:-1,marginRight:2,marginLeft:3,width:10,height:10},joinLeaveButton:{background:"none",color:e.mediumTextColor,fontSize:13,borderRadius:4,padding:"0px 4px",height:22,...q?{}:Z.jy},joinLeaveButtonHovered:{background:e.buttonHoveredBackground},unjoinedOverflowMenu:{display:"flex",height:22,marginLeft:8,marginRight:-6,...q?{}:Z.jy},teamIconContainer:{minHeight:20,minWidth:20,marginRight:9},closedTeamLabelContainer:{display:"flex"},closedTeamLabel:{display:"flex",alignItems:"center"},closedTeamTooltip:{whiteSpace:"normal",width:220},carat:{minHeight:20,height:20}})),[g,S,q,X]),te=(0,a.VK)((()=>t.getTeamPagesStore()),[t]),oe=(0,a.VK)((()=>K.Z.state===t.id),[t.id]),ie=(0,a.VK)((()=>t.getTeamAccessLevel()),[t]),[re,ne]=(0,i.useState)(void 0),se=de(t.id),ae=(0,i.useCallback)((e=>{let{draggingStores:t}=e;return!!z&&(0,L.Pl)({environment:y,draggingStores:t,parentStore:te,currentSpaceStore:z})}),[z,y,te]),le=(0,i.useCallback)((async e=>{await h.NP({dropArgs:e,environment:y,type:"team",isTopLevel:!0,parentStore:te})}),[y,te]);if(!b)return null;const ce=!N,ge=(0,v.Ac)(s,D),me=!Q.isMobile&&!D&&"closed"===ie,he=e=>{A.Z.addNamedPopup("team_more_actions"),C.Qk(y,{store:t,from:e})},Se=()=>{A.Z.removeNamedPopup("team_more_actions")};return(0,R.jsxs)(w.G,{dropTargetKey:F.Ui(t),canDropOnto:!e.isExpanded,shouldShowDropZone:!0,canAcceptDrop:ae,onSelectableDrop:le,children:[(0,R.jsx)(M.ZP,{popupType:M.Z4.Popup,alignmentToOrigin:M.vR.Start,placementToOrigin:M.pO.Right,preventSlideUpTransition:!0,preventScaleTransition:!0,originRect:re,render:e=>(0,R.jsx)(O.LazyTeamOverflowMenu,{teamStore:t,permissionsInviteStore:W,onDismiss:e.close,from:"teamSidebar"}),renderOrigin:e=>{let{onClick:i}=e;return(0,R.jsxs)("div",{style:ee.container,onContextMenu:e=>{!Q.isMobile&&(0,k.ZP)({event:e,context:k.Af.EditorContextMenu,callback:()=>{e.preventDefault(),ne(new DOMRect(e.clientX,e.clientY)),i()}})},children:[Q.isMobile&&(0,R.jsx)(E,{store:t,outlinerToggleButtonStore:n,outlinerTeamOnToggle:d}),(0,R.jsx)("div",{style:ee.teamIconContainer,children:(0,R.jsx)($.p,{size:20,store:t,disabled:!0,style:{fontWeight:m.Z.fontWeight.medium}})}),(0,R.jsxs)("div",{style:ee.labelContainer,children:[(0,R.jsxs)("div",{style:ee.labelText,id:c,children:[o,!Q.isMobile&&(0,R.jsx)(E,{store:t,outlinerToggleButtonStore:n,outlinerTeamOnToggle:d,style:S?ee.carat:Z.jy})]}),S&&void 0!==U&&(0,R.jsxs)("div",{style:ee.membersCountText,children:[z&&(0,R.jsx)(G,{teamStore:t,renderStyle:ee.membersCountText,teamOutlinerType:s}),me&&(0,R.jsx)(B.ZP,{placement:B.ug.Bottom,renderTooltip:e=>(0,R.jsx)("div",{style:ee.closedTeamTooltip,...e,children:ue({accessLevel:ie})}),render:e=>(0,R.jsxs)("div",{style:ee.closedTeamLabel,...e,children:[" ","·"," ",(0,R.jsx)(u.FormattedMessage,{id:"outlinerTeamToggleButton.closedTeamLabel",defaultMessage:"Closed"})]})}),ge&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("span",{children:" "})," ·",(0,R.jsx)("span",{children:(0,T.p)(ee.joinedBadgeIcon)}),(0,R.jsx)("span",{style:ee.joinedBadge,children:(0,R.jsx)(u.FormattedMessage,{id:"outlinerTeamToggleButton.joinedBadge",defaultMessage:"Joined"})})]})]})]}),D&&(0,R.jsxs)("div",{style:{...ee.overflow,...q||se?{}:Z.jy},children:[(0,R.jsx)(O.LazyOutlinerTeamOverflow,{teamStore:t,from:s,onPopupClick:()=>he(s),onPopupClose:Se}),f&&!Q.isMobile&&(0,R.jsx)(pe,{teamStore:t})]}),!D&&(0,R.jsx)("div",{style:ee.unjoinedOverflowMenu,children:(0,R.jsx)(O.LazyOutlinerTeamOverflow,{teamStore:t,from:s,hideJoin:!0,onPopupClick:()=>he(s),onPopupClose:Se})}),!Q.isMobile&&ce&&(0,R.jsx)(_.M,{style:ee.joinLeaveButton,hoveredStyle:ee.joinLeaveButtonHovered,teamStore:t,placement:B.ug.Right,from:"sidebar_team_modal",navigateToTeamHomeOnJoin:!0,onJoinedTeam:p}),f&&Q.isMobile&&(0,R.jsx)("div",{style:{...ee.overflow,...q?{}:Z.jy},children:(0,R.jsx)(pe,{teamStore:t})}),(0,R.jsx)(j.Z,{isVisible:oe,enterAnimationStyle:{opacity:0},animationStyle:{opacity:1},exitAnimationStyle:{opacity:0},render:()=>(0,R.jsx)("div",{style:ee.teamHighlightAnimationBackgroundContainer})})]})},onClick:()=>he("teamSidebar"),onClose:Se}),(0,R.jsx)(O.LazyTeamPermissionsInviteWithModal,{permissionsInviteStore:W,store:t})]})}function ue(e){let{accessLevel:t}=e;if("private"===t)return(0,R.jsx)(u.FormattedMessage,{id:"teamJoinLeaveButton.joinTeam.privateTeamTooltip",defaultMessage:"You can only join a private teamspace with an invite from a member"})}var ge=o(6025),me=o(24646),he=o(38676),Se=o(70704),ye=o(73292),be=o(14694);const fe=18;class ve extends r.Z{constructor(){super(...arguments),this.storeTypes={mouseStore:S.Z,focusStore:d.default.createClass(!1),labelMouseStore:S.Z,labelFocusStore:d.default.createClass(!1),outlinerToggleButtonStore:Se.Z},this.headerRef=i.createRef(),this.contentsAriaId=(0,n.Z)(),this.labelAriaId=(0,n.Z)()}UNSAFE_willMount(e){if(super.UNSAFE_willMount(e),e.initialToggleState&&Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).setState({...Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).state,isHidden:"hidden"===e.initialToggleState}),!e.shouldPersistToggleState)return;const t=function(e){const{type:t,spaceViewStore:o}=e;if(t===c.g$)return;if("team"===t)return ye.RW(o,e.teamStore.id);return(0,me.Fl)(o,t)}(this.props);if(!t)return;const o=p.Z.get({userId:this.environment.currentUser.id,key:t});o&&Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).setState({...Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).state,isHidden:o})}renderComponent(){const{renderSidebar:e,isLastTeam:t,marginBottomOverrideWhenExpanded:o,marginBottomOverrideWhenCollapsed:i}=this.props,{isHidden:r}=Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).state,n={bookmarks:y.F4o,workspace:y.j35,shared:y.MU2,private:y.aL4,offline:y.yNE,team:y.l24,[c.PT]:y.RG3,[c.cz]:y.Uwd,[c.mu]:y.jWx,[c.kg]:y.rIE,[c.g$]:y.Y6l}[this.props.type];return(0,R.jsxs)("div",{ref:this.headerRef,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&this.stores.focusStore.setState(!0)},onBlur:()=>this.stores.focusStore.setState(!1),onMouseMove:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!0}),onMouseLeave:()=>this.stores.mouseStore.setState({...this.stores.mouseStore.state,mouseEntered:!1}),style:{marginBottom:r||t&&!this.environment.device.isMobile?i:o??fe,width:"100%"},className:`${n}-container`,children:[this.renderLabel(n),!r&&e({headerRef:this.headerRef,labelAriaId:this.labelAriaId,contentsAriaId:this.contentsAriaId})]})}renderLabel(e){const{isMobile:t}=this.environment.device,{isHidden:o}=Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).state,{labelMouseStore:i,labelFocusStore:r}=this.stores,n=o?(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Click to show section",id:"sidebar.sectionHeaderShow.tooltip"}):(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Click to hide section",id:"sidebar.sectionHeaderHide.tooltip"}),a={...t?(l=this.theme,{textTransform:"initial",fontSize:13,lineHeight:1,color:l.lightTextColor,fontWeight:m.Z.fontWeight.semibold}):je(this.theme),transition:"color 100ms ease-out",..."team"===this.props.type?{width:"100%"}:{}};var l;(i.state.mouseEntered||r.state)&&Object.assign(a,function(e){return{color:e.darkTextColor}}(this.theme));const d=V.default.checkGate("sidebar_redesign"),p={display:"flex",alignItems:"center",borderRadius:12,padding:"bookmarks"===this.props.type||"private"===this.props.type||"shared"===this.props.type||"workspace"===this.props.type||"teamSidebar"===this.props.type?"10px 12px":"4px 12px",marginLeft:4,marginRight:4,...void 0!==this.props.teamOutlinerType&&(0,v.b0)(this.props.teamOutlinerType)?{}:{height:32}},c={...d&&p,..."team"===this.props.type?{width:"100%",display:"flex",alignItems:"center",...(0,f.G$)({isMobile:t})}:Ce(this.environment)};return d?(0,R.jsxs)(X.Z,{..."team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:c,hoveredStyle:{backgroundColor:this.theme.sidebarItemSelectedBackground},hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>we(this.environment,this.props.customToggleButtonStore,this.props.type,this.props.spaceViewStore,this.props.teamStore,this.props.shouldPersistToggleState,this.props.teamOutlinerType,this.stores.outlinerToggleButtonStore),onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&r.setState(!0)},onBlur:()=>r.setState(!1),disabled:"publicPageTemplateIncludes"===this.props.type,children:[(0,R.jsx)("span",{style:a,children:this.renderLabelContent()}),(0,R.jsx)("div",{style:{marginLeft:"auto"},children:(0,R.jsx)(xe,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,isHovered:i.state.mouseEntered,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore,focusStore:this.stores.focusStore})})]}):(0,R.jsx)(be.Z,{className:e,disableMobileBorder:o&&"team"!==this.props.type,shouldShowMobileMarginBottom:o&&"team"!==this.props.type,style:Ie(this.props.type),childrenStyle:{overflow:"visible"},right:(0,R.jsx)(xe,{right:this.props.right,showAddButton:this.props.showAddButton,type:this.props.type,spaceStore:this.props.spaceStore,spaceViewStore:this.props.spaceViewStore,shouldPersistToggleState:this.props.shouldPersistToggleState,focusStore:this.stores.focusStore,outlinerToggleButtonStore:this.stores.outlinerToggleButtonStore}),children:(0,R.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,R.jsx)(B.ZP,{textWrap:!1,disableTooltip:"team"===this.props.type||"publicPageTemplateIncludes"===this.props.type,renderTooltip:()=>(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{children:n}),(0,R.jsx)("span",{style:{color:this.theme.mediumInvertedTextColor,whiteSpace:"nowrap"},children:this.props.labelTooltip})]}),placement:B.ug.Top,render:e=>(0,R.jsx)(X.Z,{..."team"===this.props.type&&this.props.teamHeaderLabel?{"aria-labelledby":this.labelAriaId}:{id:this.labelAriaId},"aria-expanded":!o,"aria-controls":this.contentsAriaId,mobileFeedback:t,style:c,hovered:!!this.props.forceHoveredButtonStyle||void 0,onClick:()=>we(this.environment,this.props.customToggleButtonStore,this.props.type,this.props.spaceViewStore,this.props.teamStore,this.props.shouldPersistToggleState,this.props.teamOutlinerType,this.stores.outlinerToggleButtonStore),...(0,b.Z)(e,{onMouseMove:()=>i.setState({...i.state,mouseEntered:!0}),onMouseLeave:()=>i.setState({...i.state,mouseEntered:!1}),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,s.E)(t)&&r.setState(!0)},onBlur:()=>r.setState(!1)}),disabled:"publicPageTemplateIncludes"===this.props.type,children:(0,R.jsx)("span",{style:a,children:this.renderLabelContent()})})})})})}renderLabelContent(){switch(this.props.type){case"bookmarks":return(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Favorites",id:"sidebar.favoritesSection.header"});case"workspace":return(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Workspace",id:"sidebar.workspaceSection.header"});case"private":return(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Private",id:"sidebar.privateSection.header"});case"shared":return(0,R.jsx)(u.FormattedMessage,{defaultMessage:"Shared",id:"sidebar.sharedSection.header"});case"team":if(this.props.teamHeaderLabel){const{isHidden:e}=Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore).state,{mouseEntered:t}=this.stores.labelMouseStore.state;return(0,R.jsx)(ce,{isHovered:t||this.stores.labelFocusStore.state,isExpanded:!e,teamStore:this.props.teamStore,label:this.props.teamHeaderLabel,outlinerToggleButtonStore:Me(this.props.customToggleButtonStore,this.stores.outlinerToggleButtonStore),outlinerTeamOnToggle:()=>we(this.environment,this.props.customToggleButtonStore,this.props.type,this.props.spaceViewStore,this.props.teamStore,this.props.shouldPersistToggleState,this.props.teamOutlinerType,this.stores.outlinerToggleButtonStore),teamOutlinerType:this.props.teamOutlinerType,onTeamJoinComplete:this.props.onTeamJoinComplete,labelAriaId:this.labelAriaId})}break;case c.kg:case c.mu:case c.cz:case c.PT:case c.g$:return this.props.sectionLabel;default:(0,g.t1)(this.props)}}}function xe(e){let{right:t,showAddButton:o,focusStore:i,isHovered:r,...n}=e;const s=(0,a.VK)((()=>V.default.checkGate("sidebar_redesign")),[]),d=(0,a.VK)((()=>s?r:he.sidebarMouseEnteredStore.state||i.state),[i,r,s]),p=(0,l.yK)((()=>({wrapper:{display:"flex",alignItems:"center",opacity:d?1:0,pointerEvents:d?"auto":"none",transition:"opacity 200ms ease-in"}})),[d]);return(0,R.jsxs)("div",{style:p.wrapper,children:[t,o&&(0,R.jsx)(ge.Z,{...n})]})}ve.displayName="OutlinerToggleButton";const Te=ve;function Ie(e){const t=V.default.checkGate("sidebar_redesign");if("team"===e)return{padding:0,margin:0,paddingLeft:V.default.checkGate("sidebar_redesign")?void 0:10,borderRadius:0};const o={...!t&&{paddingTop:0,paddingBottom:0,paddingRight:14,paddingLeft:15},minHeight:24,marginBottom:2,marginTop:6};return e===c.g$?{...o,marginTop:0}:o}function Ce(e){const{isMobile:t}=e.device;return{...!V.default.checkGate("sidebar_redesign")&&{display:"flex",alignItems:"center",borderRadius:4,padding:"2px 4px",marginLeft:-4},...t&&{marginBottom:8}}}function je(e){const t=V.default.checkGate("sidebar_redesign");return{textTransform:"initial",fontSize:12,lineHeight:1,color:e.lightTextColor,fontWeight:t?m.Z.fontWeight.medium:m.Z.fontWeight.semibold}}function Me(e,t){return e||t}function we(e,t,o,i,r,n,s,a){const{isHidden:l}=Me(t,a).state,d=!l;"team"===o?ye.k7({environment:e,spaceViewStore:i,teamStore:r,outlinerToggleButtonStore:Me(t,a),newIsHidden:d,shouldPersistToggleState:n,teamOutlinerType:s,isExplicitUserAction:!0}):o===c.g$?h.Eo({environment:e,type:o,outlinerToggleButtonStore:Me(t,a),newIsHidden:d,shouldPersistToggleState:!1}):h.Eo({environment:e,spaceViewStore:i,type:o,outlinerToggleButtonStore:Me(t,a),newIsHidden:d,shouldPersistToggleState:n})}},3392:(e,t,o)=>{o.d(t,{Z:()=>B});var i=o(67294),r=o(480),n=o(86628),s=o(24405),a=o(75071),l=o(69246),d=o(9291),p=o(53965),c=o(89858),u=o(64921),g=o(55118),m=o(25777),h=o(14694),S=o(43250),y=o(35026),b=o(80444),f=o(74948),v=o(58929),x=o(85893);const T=i.memo((e=>{const{disabled:t,childStores:o,areChildrenLoading:n,itemDepth:s,type:a}=e,d=(0,r.Fy)(),p=o.map(((t,o)=>(0,i.createElement)(j,{...e,key:t.id,store:t,index:o}))),c=0===s,u=0===p.length,g=(u||e.isHeaderless||d.isMobile)&&c&&("private"===a||"workspace"===a)&&!t,h=u&&!g&&!c,y={offline:S.blN,bookmarks:S.fe0,workspace:S.BEs,shared:S.JkF,private:S.q1J,team:S.l24,[l.PT]:void 0,[l.cz]:void 0,[l.mu]:void 0,[l.kg]:void 0,[l.g$]:void 0}[e.type];return(0,x.jsxs)(m.Z,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:c?"tree":"group",style:e.style,className:y,loaded:!n,showSpinnerTimeout:3e3,spinnerSize:"1em",children:[p,u&&c&&(0,x.jsx)(M,{type:e.type,parentStore:e.parentStore}),g&&(0,x.jsx)(C,{type:e.type}),h&&(0,x.jsx)(I,{itemStyle:e.itemStyle})]})}));function I(e){const t=(0,r.Fy)(),o=(0,s.yK)((e=>({placeholder:{color:e.lightTextColor,paddingLeft:12,...t.isMobile&&{display:"flex",alignItems:"center",height:32}}})),[t]);return(0,x.jsx)(h.Z,{role:"treeitem",style:e.itemStyle,children:(0,x.jsx)("div",{style:o.placeholder,children:(0,x.jsx)(d.FormattedMessage,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function C(e){const{type:t}=e,o=(0,r.O7)(),{currentSpaceStore:i,currentSpaceViewStore:a}=(0,n.VK)((()=>b.default.state),[]),l=o.device.isMobile,p=(0,s.yK)((e=>({sidebarItem:{color:e.mediumTextColor}})),[]);if(!i||!a)return null;return(0,x.jsx)(u.Z,{mobileFeedback:l,onClick:async()=>{if("team"===t)return;await c.kC({environment:o,spaceStore:i,spaceViewStore:a,type:t,prepend:!1,shouldPersistToggleState:!0})&&l&&f.close()},children:(0,x.jsx)(h.Z,{style:p.sidebarItem,left:(0,x.jsx)(w,{}),disableMobileBorder:!0,children:(0,x.jsx)(d.FormattedMessage,{defaultMessage:"Add a page",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}T.displayName="Outliner";const j=i.memo((e=>{const{store:t,index:o}=e;return(0,x.jsx)(v.ZP,{type:e.type,store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:o,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled},t.id)}));function M(e){const t=(0,r.O7)(),{type:o,parentStore:i}=e,n=p.oA(["OutlinerItem",o,null==i?void 0:i.id]).join("_");return(0,x.jsx)(g.G,{dropTargetKey:n,canDropBelow:!0,onSelectableDrop:async e=>{await c.NP({dropArgs:e,environment:t,type:o,isTopLevel:!0,parentStore:i})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=b.default.state;return!!o&&(0,y.Pl)({environment:t,draggingStores:e.draggingStores,parentStore:i,currentSpaceStore:o})}})}function w(){const e=(0,s.yK)((e=>({icon:{fill:e.mediumIconColor,width:16,height:16},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,x.jsx)("div",{style:e.iconContainer,children:(0,a.f)(e.icon)})}j.displayName="PageItem";const B=T},58929:(e,t,o)=>{o.d(t,{gZ:()=>pe,aZ:()=>ce,ZP:()=>ue});var i=o(67294),r=o(480),n=o(6740),s=o(97511),a=o(33125),l=o(86628),d=o(24405),p=o(41432),c=o(15157),u=o(1898),g=o(89858),m=o(79954),h=o(19037),S=o(35026),y=o(52315),b=o(81844),f=o(80796),v=o(6258),x=o(26664),T=o(24646),I=o(21202),C=o(37810),j=o(66324),M=o(17659),w=o(40663),B=o(84076),k=o(68785),L=o(76798),Z=o(14694),O=o(84210),P=o(50659),V=o(98165),A=o(95697),K=o(91948),H=o(75419),F=o(16746),D=o(80444),R=o(77080),E=o(53730),_=o(9291),N=o(9953),U=o(13447),z=o(31278),W=o(26388),G=o(94841),$=o(85893);function J(e){const{targetStore:t,canEditItem:o}=e,i=(0,_.useIntl)(),n=(0,r.O7)(),{isMobile:s}=n.device,a=(0,l.VK)((()=>t.getIcon()),[t]),p=(0,l.VK)((()=>!s&&o&&!t.isNonEditableState()&&!(0,G.Kj)(t.id)),[s,o,t]),c=(0,l.VK)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),u=(0,d.yK)((e=>({pageIcon:{fill:e.mediumIconColor}})),[]),g=e=>{const o=t.getIconStore();o&&U.createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:n,perform:t=>{N.sO({store:o,value:e,transaction:t})}})};return(0,$.jsx)(W.ZP,{renderTooltip:()=>(0,$.jsx)(_.FormattedMessage,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:W.ug.Bottom,render:e=>{var o;return p?(0,$.jsx)(z.Z,{bucket:"secure",disabled:!1,icon:a,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,onChange:g,pageIconStyle:u.pageIcon,...e,largeIcon:!0,iconLoggingData:{recordTable:c,source:"sidebar",block_type:t.getType(),collection_id:"collection"===c?null===(o=t.getIconStore())||void 0===o?void 0:o.id:void 0},label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"})}):(0,$.jsx)(z.Z,{disabled:!0,icon:a,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,pageIconStyle:u.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"})})}})}var Y=o(5210);function Q(e){const{store:t,targetStore:o,type:i,itemIndex:n,itemDepth:s,isOpen:a,onToggle:p}=e,c=(0,r.O7)(),{isMobile:u}=c.device,g=(0,l.VK)((()=>{if((0,A.ku)()){const e=Boolean(null==o?void 0:o.isCollectionView()),i=S.Yz(t).length>0;return e||i}return!0}),[t,o]),m=(0,d.yK)((e=>({hiddenToggle:{width:(0,Y.q)({isMobile:u,isSidebar:!0})},toggle:{color:e.lightIconColor}})),[u]);if(!g)return(0,$.jsx)("div",{style:m.hiddenToggle});return(0,$.jsx)(Y.Z,{isSidebar:!0,fill:!0,icon:"chevron",open:a,color:m.toggle.color,onClick:()=>{const e=0===s,o=V.VP(t);j.t8(c,{teamStore:o,type:e?"top_level":"nested",is_toggled:!a,outliner_type:i,outliner_position:n,outliner_depth:s}),p(),S.Ps({store:t,toOpen:!a,environment:c,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var q=o(10009);function X(e){const{store:t,style:o,targetStore:i,itemDepth:n,type:s,nestedOutlinerAriaId:a,titleAriaId:p,isOpen:c,onFocus:u,onBlur:g,onMouseMove:m,onMouseLeave:h}=e,y=(0,r.O7)(),b=y.device.isMobile,f=(0,l.VK)((()=>R.default.checkGate("sidebar_redesign")),[]),v=(0,l.VK)((()=>"copy_indicator"===t.getType()),[t]),x=(0,l.VK)((()=>function(e){const{targetStore:t,type:o}=e;if(!t)return;const i=(0,S.N)(o);if(t.isNavigableBlock())return(0,O.ZP)({store:t,fullyQualified:!1,pageVisitSource:i});{const e=V.Dg(t);if(e)return(0,O.ZP)({store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:i})}}({targetStore:i,type:s})),[i,s]),T=(0,l.VK)((()=>v&&E.transactionQueue.isPendingTransactionForRecord(t.pointer)),[v,t]),I=(0,l.VK)((()=>{const{mainEditorCurrentBlockStore:e}=D.default.state;return e&&t.id===e.id}),[t]),w=(0,l.VK)((()=>F.Z.state.contentType),[]),L=(0,l.VK)((()=>F.Z.isVisible()),[]),A=(0,l.VK)((()=>(0,P.G$)({isMobile:b})),[b]),_=(0,l.VK)((()=>(0,P.Z3)({isMobile:b})),[b]),N=(0,d.yK)((e=>({sidebarItem:{...!b&&{paddingLeft:5},...I&&{fontWeight:C.Z.fontWeight.semibold,background:e.sidebarItemSelectedBackground,color:e.regularTextColor,...b&&{boxShadow:`\n                            0 1px 0 ${e.buttonHoveredBackground}\n                        `}},..._,...o},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:b?10:6,marginRight:b?12:void 0},link:{width:"100%"},sidebarItemHovered:{backgroundColor:e.sidebarItemSelectedBackground}})),[b,I,o,_]),U={role:"treeitem","aria-current":I?"page":void 0,"aria-expanded":!!c,"aria-owns":a,"aria-labelledby":p};if(v)return T?(0,$.jsxs)(Z.Z,{style:N.sidebarItem,childrenStyle:N.children,onFocus:u,onBlur:g,onMouseMove:m,onMouseLeave:h,children:[(0,$.jsx)(k.Z,{style:N.loadingSpinner}),(0,$.jsx)(K.Z,{targetRecordId:t.id,style:N.moveOrDuplicateProgress})]}):null;if(x){const o=()=>{e.onNavigate&&e.onNavigate(t),L&&("inbox"===w?M.qQ({environment:y,open:!1}):H.TN());const o=V.VP(t);j.Yg(y,{teamStore:o,type:0===n?"top_level":"nested",outliner_type:e.type,outliner_position:e.itemIndex,outliner_depth:n})};return(0,$.jsx)(B.Z,{onFocus:u,onBlur:g,style:N.link,href:x,onClick:o,innerStyle:A,hoveredStyle:f?N.sidebarItemHovered:void 0,...U,children:(0,$.jsx)(ee,{...e,sidebarItemStyle:N.sidebarItem,sidebarItemChildrenStyle:N.children,titleAriaId:p,nestedOutlinerAriaId:a})})}return(0,$.jsx)(ee,{...e,onFocus:u,onBlur:g,sidebarItemStyle:N.sidebarItem,sidebarItemChildrenStyle:N.children,titleAriaId:p,nestedOutlinerAriaId:a,...U})}function ee(e){const{store:t,parentStore:o,targetStore:i,itemDepth:r,type:n,onFocus:s,onBlur:a,onMouseMove:d,onMouseLeave:c,onToggle:u,titleAriaId:g,nestedOutlinerAriaId:m,isOpen:h,isHovered:S,isFocused:y}=e,b=(0,l.VK)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:r}=e;if(t.isDefined()&&(0,w.h7)(t))return!1;if(t.isCollectionView()&&!(0,A.bq)())return!t.getCollectionViewSourceCollectionStore();if("block"===(null==o?void 0:o.table)){if(v.G.createChildStore(o,{table:I.iU,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===p.Ti.alias)return!0;if(i&&"team"!==r)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:o,isTopLevelItem:0===r,type:n})),[t,o,r,n]),f=(0,l.VK)((()=>R.default.checkGate("sidebar_redesign")),[]);return(0,$.jsx)(Z.Z,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:e.sidebarItemChildrenStyle,left:f?void 0:(0,$.jsx)(Q,{store:t,targetStore:i,type:n,itemIndex:e.itemIndex,itemDepth:r,"aria-controls":m,"aria-describedby":g,onToggle:u,isOpen:h}),icon:f&&S?(0,$.jsx)(Q,{store:t,targetStore:i,type:n,itemIndex:e.itemIndex,itemDepth:r,"aria-controls":m,"aria-describedby":g,onToggle:u,isOpen:h}):i&&(0,$.jsx)(J,{targetStore:i,canEditItem:e.canEditItem}),right:(0,$.jsx)(q.ZP,{store:t,type:n,itemIndex:e.itemIndex,itemDepth:r,canEditItem:e.canEditItem,onToggle:u,isHovered:S,isFocused:y}),onFocus:s,onBlur:a,onMouseMove:d,onMouseLeave:c,isAlias:b,children:(0,$.jsx)(L.Z,{id:g,store:t})})}var te=o(12534),oe=o(68155),ie=o(3392);function re(e){const{store:t,collectionViewStore:o,onNavigate:n,type:s}=e,a=(0,r.O7)(),p=(0,l.VK)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),c=(0,l.VK)((()=>{const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=D.default.state;return!p&&Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,p]),u=(0,d.yK)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.mediumTextColor},sideBarItem:{...c&&{fontWeight:C.Z.fontWeight.semibold,background:t.buttonHoveredBackground,color:t.regularTextColor,...a.device.isMobile&&{boxShadow:`\n\t\t\t\t\t\t0 1px 0 ${t.buttonHoveredBackground}\n\t\t\t\t\t`}},...e.style}})),[a.device.isMobile,c,e.style]),g=(0,l.VK)((()=>(0,O.ZP)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,S.N)(s)})),[o.id,t,s]),m=(0,l.VK)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),h=(0,l.VK)((()=>{if("page"!==m.type||!m.pagePointer)return null;const e=v.G.createChildStore(t,{table:m.pagePointer.table,id:m.pagePointer.id}),o=(0,S.Q2)(e);return{pageStore:e,ready:(0,y.b)(e),outlinerItems:o}}),[m,t]),b=(0,l.VK)((()=>t.getContentStore()),[t]),f=(0,i.useCallback)((()=>{n&&n(t)}),[t,n]),x=(0,l.VK)((()=>(0,P.G$)({isMobile:a.device.isMobile})),[a.device.isMobile]);if(!m.ready)return null;if("page"===m.type&&h){const{ready:t,outlinerItems:o}=h;return(0,$.jsx)(ie.Z,{type:e.type,childStores:o,areChildrenLoading:!t,itemDepth:e.itemDepth+1,parentStore:b,itemStyle:u.sideBarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled})}return p?null:(0,$.jsx)(B.Z,{href:g,style:{width:"100%"},innerStyle:x,onClick:f,role:"treeitem","aria-current":c?"step":void 0,children:(0,$.jsx)(Z.Z,{icon:(0,$.jsx)("div",{style:u.initialIcon,children:"•"}),style:u.sideBarItem,children:(0,$.jsx)(oe.Z,{collectionViewName:m.name,collectionViewType:m.type??"table"})})})}function ne(e){const{store:t}=e,o=(0,l.VK)((()=>t.getCollectionViewStores()),[t]);return(0,$.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,te.ZP)({event:e,context:te.Af.EditorContextMenu,callback:()=>{}})},children:o.map((o=>(0,$.jsx)(re,{store:t,collectionViewStore:o,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores},o.id)))})}function se(e){const{disabled:t,store:o,style:i,targetStore:n,itemDepth:s,nestedOutlinerAriaId:a,titleAriaId:p}=e,{isMobile:c}=(0,r.Fy)(),u=(0,l.VK)((()=>!(0,y.b)(o)),[o]),g=(0,l.VK)((()=>n.isCollectionView()?n:null),[n]),m=(0,l.VK)((()=>(0,S.Yz)(o)),[o]),h=(0,l.VK)((()=>n.getContentStore()),[n]),b=(0,d.yK)((()=>{const e="number"==typeof(null==i?void 0:i.paddingLeft)?i.paddingLeft:c?pe:5,t=c?ce:14;return{item:{...i,paddingLeft:e+t}}}),[i,c]);return g?(0,$.jsx)(ne,{store:g,itemStyle:b.item,onNavigate:e.onNavigate,type:e.type,childStores:m,areChildrenLoading:!1,itemDepth:s+1,parentStore:h,itemToggleStyle:e.toggleStyle,disabled:t,id:a,"aria-labelledby":p}):(0,$.jsx)(ie.Z,{type:e.type,childStores:m,areChildrenLoading:u,itemDepth:s+1,parentStore:h,itemStyle:b.item,itemToggleStyle:e.toggleStyle,onNavigate:e.onNavigate,disabled:t,id:a,"aria-labelledby":p})}function ae(e){return`Outliner-${e.id}`}function le(e){let{store:t,type:o,isTopLevelItem:i}=e;return e=>{const r=t.getRecordStoreUIParent();null!=r&&r.valueIs(x.i)&&g.A5({...e,type:o,targetStore:t,targetParentStore:r,isTopLevelItem:i})}}function de(e){let{environment:t,store:o,parentStore:i,type:r,isTopLevelItem:n}=e;return async e=>{const{droppedDirection:s,droppedStores:a,duplicate:l}=e;i&&await g.v9({environment:t,type:r,targetParentStore:i,targetStore:o,isTopLevelItem:n,droppedDirection:s,droppedStores:a,duplicate:l})}}const pe=6,ce=22,ue=function(e){const{store:t,itemIndex:o,parentStore:d,type:y,itemDepth:x,disabled:I}=e,C=(0,r.O7)(),j=(0,s.l)(),M=function(e){return 0===e}(x),[w,B]=(0,i.useState)((()=>{if((0,u.$K)(e.itemOpenByDefault))return e.itemOpenByDefault;if(M){const e=c.Z.get({userId:C.currentUser.id,key:ae(t)});if((0,u.$K)(e))return e}return!1})),[k,L]=(0,i.useState)(!1),[Z,O]=(0,i.useState)(!1),P=(0,i.useId)(),V=(0,i.useId)(),A=(0,l.VK)((()=>function(e){if(e.getType()===p.Ti.alias){const t=e.getAliasTargetStore();return t instanceof v.G?t:void 0}return e}(t)),[t]),K=(0,l.VK)((()=>T.Bb(t)),[t]),H=(0,l.VK)((()=>(0,S._v)(C)&&"private"===y&&M),[C,y,M]),F=K&&!H,D=(0,l.VK)((()=>!I&&(0,h.J5S)({environment:C,blocks:[t],publicEditMode:j&&j.publicEditModeStore.state})),[I,j,C,t]),R=(0,l.VK)((()=>D&&!t.isLinkedCollectionView()),[t,D]),E=(0,i.useRef)(null);(0,a.c)(b.Z,(()=>({store:t,parentStore:d,type:y,isTopLevelItem:M,getNode:()=>E.current})),[t,d,y,M]);const _=K&&d?{onInsertBelow:e=>g.LR({...e,environment:C,store:t,parentStore:d,before:!0,type:y}),onInsertAbove:e=>g.LR({...e,environment:C,store:t,parentStore:d,before:!1,type:y})}:{},N=0===o,U=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,n.E)(t)&&O(!0)}),[]),z=(0,i.useCallback)((()=>{O(!1)}),[]),W=(0,i.useCallback)((()=>{f.Z.state.isDragging||L(!0)}),[]),G=(0,i.useCallback)((()=>{L(!1)}),[]),J=(0,i.useCallback)((e=>{B(void 0!==e?e:e=>!e)}),[]);return A?(0,$.jsxs)(m.Z,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:K,canDropAbove:N,canDropBelow:F,canDropOnto:R,canInsertBelow:K,canInsertAbove:K,canSelect:K,canTriggerContextMenu:!0,onRemove:le({store:t,type:y,isTopLevelItem:M}),onSelectableDrop:de({environment:C,store:t,parentStore:d,type:y,isTopLevelItem:M}),shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,..._,ref:E,children:[(0,$.jsx)(X,{store:t,style:e.style,parentStore:d,type:y,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:A,canEditItem:D,nestedOutlinerAriaId:P,titleAriaId:V,onFocus:U,onBlur:z,onMouseMove:W,onMouseLeave:G,onToggle:J,isHovered:k,isFocused:Z,isOpen:w}),w&&(0,$.jsx)(se,{...e,targetStore:A,nestedOutlinerAriaId:P,titleAriaId:V})]}):null}},14720:(e,t,o)=>{o.d(t,{Rv:()=>n,Ry:()=>p,cG:()=>d,p7:()=>l,rH:()=>a,tn:()=>r,vs:()=>s});var i=o(77907);const r=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTeamBrowserContent)),n=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSwitcherMultiAccountPopup)),s=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarFooter)),a=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarSectionWithPopup)),l=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.TeamAddAppTemplateMenu)),d=(0,i.lazyComponent)(i.deps.sidebar,(e=>e.SidebarTourTutorialContent)),p={LazyTeamAddAppTemplateMenu:{width:250,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}}},22487:(e,t,o)=>{o.d(t,{K:()=>l});var i=o(86628),r=o(72141),n=o(95697),s=o(80444),a=o(88893);function l(e){return(0,i.VK)((()=>{if(!e)return 0;const t=s.default.state.currentSpaceStore,o=s.default.state.currentUserStore;if(!r.YX((null==t?void 0:t.getRole())??"none")){return(0,n.tu)({currentUserStore:o,currentSpaceStore:t,teamStore:e,members:e.getMembers()}).length}return(e.getUserIdsInTeamUsingSpaceMembers((0,a.Io)())??[]).length}),[e])}},3338:(e,t,o)=>{o.d(t,{p:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.IU)("circleCheck",{viewBox:"0 0 12 12",svg:(0,r.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},13148:(e,t,o)=>{o.d(t,{U:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.IU)("close",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},22686:(e,t,o)=>{o.d(t,{f:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.IU)("person",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},14734:(e,t,o)=>{o.d(t,{X:()=>n});o(67294);var i=o(45238),r=o(85893);const n=(0,i.IU)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,r.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,r.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})}}]);