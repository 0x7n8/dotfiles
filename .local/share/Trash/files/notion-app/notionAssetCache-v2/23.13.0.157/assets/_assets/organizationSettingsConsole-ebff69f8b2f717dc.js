"use strict";(self.webpackChunknotion_next=self.webpackChunknotion_next||[]).push([[3207],{91205:(e,t,n)=>{n.r(t),n.d(t,{OrganizationSettingsConsole:()=>I,OrganizationSettingsConsoleImpl:()=>M});var o=n(67294),i=n(480),a=n(84747),r=n(86628),s=n(89101),l=n(61149),c=n(12066),d=n(8055),u=n(80444),m=n(79921),f=n(68117),v=n(84880),b=n(21130),p=n(94185),S=n(86631),g=n(85893);function h(e){let{organizationId:t,currentUserStore:n,selectedTabName:a}=e;const r=(0,i.O7)(),s=(0,o.useMemo)((()=>c.cZ.filter((e=>(0,p.eT[e.name])({environment:r,currentUserStore:n,organizationId:t})))),[n,r,t]),u=(0,o.useMemo)((()=>s.map((e=>({id:e.name,name:p.ow[e.name].tab.name,icon:p.ow[e.name].tab.icon,isSelected:a===e.name,onClick:()=>{d.c4({environment:r,url:(0,l.a5)({organizationId:t,tabRoute:e})})}})))),[r,s,a,t]);return(0,g.jsx)(S.Z,{items:u})}var w=n(73150),B=n(7802),A=n(98938);function M(e){let{organizationId:t,tabRoute:n,properties:o,params:a}=e;const s=(0,i.O7)(),{loading:l,organizationsInfo:c}=(0,b.Z)(),d=(0,r.VK)((()=>u.default.state.currentUserStore),[]),S=c.map((e=>e.id));if(l)return null;const w=t&&S.includes(t)?t:S[0];if(!w||!n)return(0,g.jsx)(y,{organizationId:w,queryParams:a});const B=p.ow[n.name];return(0,p.eT[n.name])({environment:s,currentUserStore:d,organizationId:w})?(0,g.jsx)(f.L,{children:(0,g.jsx)(v.n,{organizationId:w,children:(0,g.jsx)(m.v,{left:(0,g.jsx)(h,{organizationId:w,currentUserStore:d,selectedTabName:n.name}),right:B.scene({properties:o,queryParams:a,organizationId:w,tabRoute:n})})})}):null}const I=(k=(0,w.b)(M),function(e){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(A.Z,{}),(0,g.jsx)(B.Z,{}),(0,g.jsx)(k,{...e})]})});var k;function y(e){const t=(0,i.O7)(),{organizationId:n,queryParams:o}=e;return(0,a.Z)((()=>{n?d.c4({environment:t,url:(0,l.a5)({organizationId:n,tabRoute:c.Wq,queryParams:o})}):d.c4({environment:t,url:s._j.root})})),null}},21130:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(480),i=n(59054),a=n(1898),r=n(54642),s=n(77080);function l(){const e=(0,o.O7)(),[{status:t,error:n,value:l}]=(0,i.r5)((async()=>{if(!s.default.checkGate("admin_console_enabled"))return{organizationsInfo:[]};const t=await r.getUserOrganizations(e,{});if("success"===t.type)return t.data;if("failed"===t.type)throw t.error;return(0,a.t1)(t)}),[e]);return{organizationsInfo:(null==l?void 0:l.organizationsInfo)??[],loading:"pending"===t||"idle"===t,error:n}}},22705:(e,t,n)=>{n.d(t,{CX:()=>c,P7:()=>d,TI:()=>s,ZP:()=>m,mn:()=>l,w7:()=>u});var o=n(14577),i=n(49085);class a extends i.default{getInitialState(){return{audioRecorder:void 0,audioSessionBlockWriters:new Map,pageBlock:void 0,block:void 0,enabled:!1,environment:void 0,transcribedTexts:[],blockRenderedInPage:!1,blockRenderedInPeekView:!1,loading:!1}}}const r=new a,s=new o.Z((()=>r.state.enabled),{debugName:"DictationEnabledStore"}),l=new o.Z((()=>{var e;return null===(e=r.state.pageBlock)||void 0===e?void 0:e.id}),{debugName:"DictationPageBlockIdStore"}),c=new o.Z((()=>{var e;return null===(e=r.state.block)||void 0===e?void 0:e.id}),{debugName:"DictationBlockIdStore"}),d=new o.Z((()=>r.state.block),{debugName:"DictationBlockStore"}),u=new o.Z((()=>r.state.blockRenderedInPage||r.state.blockRenderedInPeekView),{debugName:"DictationBlockVisibleStore"}),m=r},51783:(e,t,n)=>{n.d(t,{Bo:()=>V,eQ:()=>W,QG:()=>ne,ol:()=>ce,fn:()=>ee,_W:()=>de,vs:()=>ue,O2:()=>$,UF:()=>le,Z3:()=>te,w1:()=>me,rZ:()=>X,s0:()=>J,GH:()=>re,hc:()=>ie,hD:()=>ae,pk:()=>oe,i2:()=>se,$$:()=>Y,LQ:()=>j,$3:()=>q,y6:()=>L,Tz:()=>Q,oQ:()=>K,Oh:()=>fe});var o=n(1302),i=n(70203),a=n(11342),r=n(83249),s=n(6404),l=n(36280),c=n(45990),d=n(67060),u=n(28020),m=n(27724),f=n(31781),v=n(42858),b=n(24677),p=n(13447),S=n(53471);var g=n(52423),h=n(84084),w=n(993),B=n(98724),A=n(98104),M=n(92022),I=n(18821),k=n(45162),y=n(24646),C=n(38676),x=n(44534),N=n(5162),T=n(80444),Z=n(3418),P=n(19111),O=n(19671),z=n(56638),D=n(55320),_=n(24666),R=n(19037),F=n(68056),E=n(46654),G=n(73959),U=n(89086);function j(e){const{environment:t}=e,{isMobileNative:n,osVersion:o,isIOS:i}=t.device;return!!n&&(!i||!a.isLessThanVersion(o,[14,0]))}const H=!1;function q(e,t,n){var o;const{NativeMobileActionBarStore:i}=e,a=H||Boolean(null==i?void 0:i.state.enableShouldShowDebugging);if(!function(e,t,n){const{device:o,NativeMobileActionBarStore:i}=e,a=H||Boolean(null==i?void 0:i.state.enableShouldShowDebugging);return o.isMobile?D.default.state.open?(ve(a,"canShowMobileActionBar = false (reason: quickFindOpen)"),!1):O.Z.state.isOpen?(ve(a,"canShowMobileActionBar = false (reason: blockPropertyOverlayOpen)"),!1):!o.isMobileNative&&P.Z.state.open?(ve(a,"canShowMobileActionBar = false (reason: !device.isMobileNative && MentionMenuStore.state.open)"),!1):_.default.isEditingComment()?(ve(a,"canShowMobileActionBar = false (reason: TextSelectionStore.isEditingComment())"),!1):!z.Z.state.open&&j({environment:e})&&Z.Z.hasOpenPopups()?(ve(a,"canShowMobileActionBar = false (reason: !PageTemplateModalStore.state.open && isNativeMobileActionBarAvailable({ environment }) && GlobalPopupStore.hasOpenPopups() > 0)"),!1):y.in(e)&&C.sidebarOpenStore.state?(ve(a,"canShowMobileActionBar = false (reason: sidebarHelpers.sidebarIsExpanded(environment) && sidebarOpenStore.get()"),!1):(0,R.ryx)()?!!(0,R.J5S)({environment:e,blocks:[t],publicEditMode:n})||(ve(a,"canShowMobileActionBar = false (reason: !_canEdit)"),!1):(ve(a,"canShowMobileActionBar = false (reason: !currentPageIsNotLocked())"),!1):(ve(a,"canShowMobileActionBar = false (reason: !device.isMobile)"),!1)}(e,t,n))return ve(a,"shouldShowMobileActionBar = false (reason: !canShowMobileActionBar)"),{canShow:!1,canShowNativeBar:!1,shouldShow:!1};const r=j({environment:e});if(i&&null!==i.state.menuType&&!(0,u.JE)())return ve(a,"shouldShowMobileActionBar = true (reason: NativeMobileActionBarStore && NativeMobileActionBarStore.state.menuType !== null"),{canShow:!0,canShowNativeBar:r,shouldShow:!0};const s=_.default.state;if("editing"!==s.mode)return ve(a,"shouldShowMobileActionBar = false (reason: TextSelectionStore.state.mode !== editing"),{canShow:!0,canShowNativeBar:r,shouldShow:!1};const l=s.multiSelection,c=(0,k.L5)(l),d=c.some((e=>e.editable.props.disableStyleAnnotations)),m=c.some((e=>e.editable.props.disableMobileActionBar)),f=c.some((e=>e.editable.props.disableComment));return c&&m?(ve(a,"shouldShowMobileActionBar = false (reason: !renderedBlocks || !disableMobileActionBar)"),{canShow:!0,canShowNativeBar:r,shouldShow:!1}):(ve(a,"shouldShowMobileActionBar = true"),{shouldShow:!0,canShowNativeBar:r,disableStyleAnnotations:d,disableComment:f,isEmpty:(0,F.iG)(l)&&0===l.end.index&&0===(null===(o=(0,U.x0)(l.end.store))||void 0===o?void 0:o.endIndex)})}function Q(e){const{environment:t,store:n}=e,{isPhone:o}=t.device,i=T.default.state.currentLoadingContainerStore,a=Boolean(null==n?void 0:n.isCollectionView()),r=Boolean(null==n?void 0:n.getAssociatedCollectionStore()),s=t.currentUser.isLoggedIn(),l=z.Z.state.open;return Boolean(!r&&!a&&!l&&o&&n&&i&&n.isDefined()&&n.canEdit()&&!n.hasContent()&&s&&i.state.ready)}function K(e,t){const n=(0,N.Y)("supportsNativeMobileDynamicActionBar"),o=_.default.state;if("editing"===o.mode)return!t.state.isComposing&&!(0,F.iG)(o.multiSelection)||!n&&x.g$.getSimpleTableCellFromTextSelection();const i=e.state.savedTextSelectionStoreState;return!(!i||"editing"!==i.mode)&&!(0,F.iG)(i.multiSelection)}function L(e){const{NativeMobileActionBarStore:t,device:n}=e;return Boolean(t&&null!==t.state.menuType&&!n.isTablet&&!n.isAndroid&&!(0,N.Y)("supportsMobileActionBarNativeActionMenuWithoutIgnoreSelectionArea"))}function V(e){if((0,E.YF)(e))return!1;const{stores:t}=m.default.state;return t.length>0&&t[0].canEdit()&&!t[0].isNavigableBlock()&&!Boolean(x.g$.getSimpleTableCellFromTextSelection())}function W(e,t){return!(0,E.YF)(e)&&t.canEdit()}function $(e){if("editing"!==_.default.state.mode)return;const t=(0,G.sQ)(_.default.state.multiSelection.start.store);t&&p.createAndCommit({userAction:"mobileActionBarHelpers.handleIndent",environment:e,perform:n=>{w.n2({environment:e,transaction:n,shiftKey:!1,closestSelectable:t})}}),fe(e,"indent")}function Y(e){if("editing"!==_.default.state.mode)return;const t=(0,G.sQ)(_.default.state.multiSelection.start.store);t&&p.createAndCommit({userAction:"mobileActionBarHelpers.handleUnindent",environment:e,perform:n=>{w.n2({environment:e,transaction:n,shiftKey:!0,closestSelectable:t})}}),fe(e,"unindent")}function J(e){p.createAndCommit({userAction:"mobileActionBarHelpers.handleMoveUp",environment:e,perform:t=>{w.fs({environment:e,transaction:t,direction:"up"})}}),fe(e,"move-up")}function X(e){p.createAndCommit({userAction:"mobileActionBarHelpers.handleMoveDown",environment:e,perform:t=>{w.fs({environment:e,transaction:t,direction:"down"})}}),fe(e,"move-down")}function ee(e){const t=m.default.state.stores[0],n=_.default.state;if(t&&"editing"===n.mode){const{multiSelection:o}=n,i=(0,U.hn)(o.end.store)||(0,U.mK)(o.start.store);p.createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,perform:e=>{v.Od({store:t,transaction:e})}});if(x.g$.getSimpleTableCellFromTextSelection())p.createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,perform:t=>{x.HM.clearSelectedCell({environment:e,transaction:t})}});else if(i){const t=(0,G.sQ)(i);b.eP({environment:e,store:t}),b.Db(e)}else b.ZH(e);fe(e,"remove")}}function te(e){d.lZ({environment:e,mentionTypes:{page:!0,heading:!0,createPage:!0,user:!0,inviteUserToWorkspace:!1,inviteUserToPage:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0}}),fe(e,"mention")}function ne(e){!function(e){if(1!==m.default.state.stores.length)return;const t=_.default.state;if("empty"===t.mode)return;if((0,F.iG)(t.multiSelection)){const n=t.multiSelection.start.store;A.mT({environment:e,store:n,canSelectAllBlocks:!1})}}(e),(0,M.toggleInitialPrompt)({from:"mobile_action_bar",environment:e}),fe(e,"ai")}function oe(e,t){B.aS({environment:e,annotation:t}),fe(e,t[0])}function ie(e,t,n){const{NativeMobileActionBarStore:o}=e;null==o||o.update((e=>({...e,menuType:t,shouldRestoreSelectionForMenu:n})))}function ae(e,t){const{NativeMobileActionBarStore:n}=e;null==n||n.update((e=>({...e,subMenuType:t}))),null===t?h.xv():null!==t&&fe(e,t)}function re(e){g.KX(e),fe(e,"redo")}function se(e){g.Yw(e),fe(e,"undo")}function le(e){c.dz({type:"focusOnly",focus:!0}),fe(e,i.GKr.Link)}function ce(e,t){const n=m.default.state.stores[0];if(!n)return;const o=_.default.state,i="empty"!==o.mode&&o.multiSelection;i&&!(0,F.iG)(i)?(I.WD({environment:e,blockStore:n,multiSelection:i}),fe(e,"comment",t)):(I.yw({environment:e,blockStore:n}),fe(e,"discuss",t))}function de(e){l.qn({environment:e,analyticsFrom:"rich_text_menu"}),fe(e,"equation")}function ue(e){!async function(e){const t=m.default.state.stores,n=await S.y({multiple:!0,accept:e.device.isIOS?"image/*, video/*":"image/*"}),o=m.default.getCurrentRecordCache(),i=u.qQ(e);0!==n.length&&o&&p.createAndCommit({userAction:"mobileActions.takePicture",environment:e,perform:a=>{var r,s;const l=f.z({environment:e,files:n,inMemoryRecordCache:o,pageWidth:i,transaction:a,spaceId:0!==t.length?t[0].pointer.spaceId:null===(r=(0,u.RM)())||void 0===r?void 0:r.pointer.spaceId,useCrdt:0!==t.length?t[0].useCrdt():(null===(s=(0,u.RM)())||void 0===s?void 0:s.useCrdt())??!1});v.is({environment:e,blocks:l,selection:t,transaction:a,replaceEmptyTextBlock:!0}),b.ZH(e)}})}(e),fe(e,"take_picture")}function me(e,t,n){const{device:i}=e,a=i.isMobileNative&&i.isIOS&&i.isPhone;a||b.Z5({environment:e,stores:m.default.state.stores}),t&&n?s.Qn({environment:e,stores:m.default.state.stores,actionSectionGroupKey:"default",left:t,top:n,showInput:!1,analyticsFrom:"mobile_more_menu"}):s.$Z({environment:e,stores:m.default.state.stores,actionSectionGroupKey:"default",showInput:!1,analyticsFrom:"mobile_more_menu"}),fe(e,"more"),o.default.afterNextFlush((()=>{a&&A.sD()}))}function fe(e,t,n){r.YO(e,{itemName:t,from:n})}function ve(e,t){e&&console.log(t)}},29755:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(49085);class i extends o.default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:n}=this.state;t?n[e]=t:delete n[e],this.emit()}}const a=new i}}]);